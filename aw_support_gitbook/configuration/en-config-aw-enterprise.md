---
title: "EN CONFIG A+W Enterprise"
category: "configuration"
product: "A+W Enterprise"
doc_type: "Configuration"
language: "EN"
tags: ["CONFIG", "A+W Enterprise"]
version: "1.0"
last_updated: "2025-12-10"
description: "Configuration Instructions  A+W Enterprise                                                                    english        A+W Software GmbH   EN-CONFIG-A+W Enterprise.docx            1                                                            - -INTERNAL- Change history   Date         Author              Comments                                       Version 2018-02-20   Anja Grünbacher     New layout                                     1.0 2018-03-23   Ralf Imhof          Route op"
source_file: "EN-CONFIG-A+W Enterprise.pdf"
---


# EN CONFIG A+W Enterprise

         Configuration Instructions

A+W Enterprise




                                                               english




   A+W Software GmbH   EN-CONFIG-A+W Enterprise.docx            1




                                                       - -INTERNAL-
Change history


Date         Author              Comments                                       Version
2018-02-20   Anja Grünbacher     New layout                                     1.0
2018-03-23   Ralf Imhof          Route optimization                             1.1
2018-05-11   Alexander Weil      ICE environment ; A+W iQuote                   1.2
2018-06-25   Alexander Weil      A+W iQuote                                     1.3
2018-09-21   Alexander Weil      A+W iQuote extension                           1.4
                                 Postponement of delivery date/delivery date
01/11/2018 Ina Seifert                                                       1.5
                                 calculation
2018-11-10   Elena Tempelfeld    Discount logic / LG                            1.6
2018-12-20   Elena Tempelfeld    Product groups                                 1.7
2019-01-28   Alexander Weil      ICE environment                                1.8
                                 SNLive, SNLive-Zoom, evaluation print-KZ, DXF
2019-02-06   Silvia Höpp                                                       1.9
                                 import
2019-03-08   Elena Tempelfeld    Travel time per MP/address/route               2.0
                                 Field recording
2019-03-15   Ina Seifert         Stock removal booking of stock dimensions      2.1
                                 Size variants in stock
2019-03-22   Rainer Schepp       Release of locks on the No server              2.2
2019-05-14   Ina Seifert         Various points on the topic "stock"            2.3
2019-07-16   Elena Tempelfeld    Sash size sets, product sets                   2.4
                                 Chapter 17.4.4 Inheritable LAMI
2019-10-21   Elena Tempelfeld    processings/reworking of product set chapter
                                 started
2019-11-28   Ina Seifert         Cost Calculation
2019-12-13   Elena Tempelfeld    Cost center logic
2020-01-13   Elena Tempelfeld    Rack-related incoming goods
2020-01-27   Elena Tempelfeld    Sash size sets, product sets
2020-02-18   Elena Tempelfeld    Inheritance documents taken over
2020-02-28   Elena Tempelfeld    Text supplements, Thiokol, spacers in stock
2020-03-09   André Münch         ICE 3.7 Installation (Chapter 7.1)
2020-03-23   Ina seifert         Reference tool
2020-06-17   Anja Grünbacher     VAT adjustment
2020-09-01   Ina Seifert         Pattern/test production procedure


A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx                             2
Date         Author              Comments                                          Version
                                 Rack booking (#459099) inserted and
2020-09-09   Elena Tempelfeld
                                 formatted. Author: Erika Wettstein
2020-10-30   Ina Seifert         A+W CAD Designer (Bars) connection
                                 Exchange rate for reference
                                 E/A rules for internal EDI
2020-11-17   Ina Seifert
                                 Addresses for reference
                                 Delivery date change log
2020-11-24   Ina Seifert         Update "Rack-related shipping"
2020-12-08   André Münch         Finding of the A+W service locator
2021-01-18   Elena Tempelfeld    Intrastat (docu takeovers)
2021-01-29   Ina Seifert         Order pool breakage
2021-04-08   André Münch         Chapter 55: SmartCompanion
2021-05-19   SVH                 NVE logic
2021-06-23   SVH                 Background iTOE
2021-07-14   Ina Seifert         Cancellation rights
2021-10-05   Elena Tempelfeld    Autom. text creation -> Extended config. texts,
2021-11-16   SVH                 "Intrastat" update
2021-11-17   Elena Tempelfeld    #448841
2021-12-13   Elena Tempelfeld    SQL queries with Excel transfer
                                 Figure labeling added
2022-02-10   Elena Tempelfeld    Intrastat shifted
2022-02-10   SVH                 Reference to Intrastat document added
2022-05-06   Elena Tempelfeld    Receipt of goods/check, reference to extra
                                 document
2022-09-21   SVH                 [AW-119029] – Selection of files via "Open
                                 file" dialog
2022-11-15   IS                  Discount updated/Document change
21-11-2022   SVH                 [AW-128380] – special characters in the file
                                 name for selection of files via "File open"
                                 dialog
2022-12-07   IS                  Dynamic SR
2023-04-03   IS                  Receipt of goods
2023-09-14   IS                  Dispatch notification
2024-02-01   IS                  Delivery fee
2024-08-29   SVH                 wlgetbitnr


A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx                                3
Date           Author                 Comments                                       Version
2024-11-14     SVH                    [AW-111997] – "Electronic invoices" section
2025-06-06     IS                     MODUL_ABKLEBEN



Content

1.     Schlüssel                                                                               20
       1.1. Sprachen                                                                           20
            1.1.1.1. Sprachcode                                                                20
       1.2. Produktschlüssel                                                                   20
            1.2.1.1. Maßvarianten                                                              20
       1.3. Formelelemente                                                                     21
            1.3.1.1. Variablen                                                                 21
            1.3.1.2. Operatoren                                                                22
2.     Artikelstammdaten                                                                    24
       2.1. Artikeltypen                                                                    24
             2.1.1.1. Übersicht                                                             24
       2.2. Artikelart                                                                      25
       2.3. Stückliste                                                                      25
       2.4. ISO                                                                             26
             2.4.1.1. 4-fach-ISO (Erweiterung)                                              27
       2.5. Rahmen                                                                          27
             2.5.1.1. Abmessungen bei Bestellungen                                          28
             2.5.1.2. SZR in Rahmenbestellungen                                             28
             2.5.1.3. Montagerahmen                                                         28
       2.1. Rahmentyp                                                                       29
       2.2. Dynamischer AHAM                                                                30
       2.3. Versiegelungstyp                                                                33
       2.4. Folientyp                                                                       33
       2.5. Beschlagstyp                                                                    34
       2.6. Sprossen                                                                        34
             2.6.1.1. Sprossentyp                                                           34
       2.7. Fixierte Produkte vs. Produktsets                                               37
       2.8. Artikelvermaßung                                                                38
             2.8.1.1. Restriktionsformel                                                    38
       2.9. Bestandsänderung                                                                40
       2.10. Produktionszeit / Wiederbeschaffungszeit        Fehler! Textmarke nicht definiert.
       2.11. Lieferantenzuordnung                                                           41
       2.12. Spezielle Konfigurierbare Felder                                               41
       2.13. Feste private Felder                                                           42
       2.14. Artikelanmerkungen                                                             42
3.     Austausch-/Zusatzregeln                                                                 43
       3.1. Register Austausch-/Zusatzregeln                                                   43
            3.1.1.1. Linke Dialog-Seite                                                        43
            3.1.1.2. Rechte Dialog-Seite                                                       45
            3.1.1.3. Register Details                                                          46
            3.1.1.4. Löschen über A/Z/D-Regel                                                  47

A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   4
         3.1.1.5. Übergabe der Maßparameter                                           48
         3.1.1.6. Möglichkeiten für Preissteuerung                                    49
         3.1.1.7. Austausch gegen sich selbst                                         49
         3.1.1.8. Auftragsänderung                                                    49
         3.1.1.9. Interne DFÜ                                                         50
         3.1.1.10. Austausch des Positionsartikels                                    50
         3.1.1.11. Austausch eines einfachen Elementes in der Stückliste              50
         3.1.1.12. Austausch der Bearbeitungsparameter                                50
         3.1.1.13. Zusatzelement für den Positionsartikel/Produkttyp                  51
         3.1.1.14. Beschaffungsart alcib - 13.04.10373                                51
         3.1.1.15. Übergabe der Artikelbezeichnung                                    51
         3.1.1.16. Externe DFÜ                                                        51
4.   Artikelsuche                                                                     52
5.   Versandregion / Routen                                                           53
6.   Marktpartnerstammdaten                                                           56
     6.1. Stornierte Marktpartner                                                     56
     6.2. Adressen                                                                    56
          6.2.1.1. Niederländische Adresslogik                                        56
          6.2.1.2. Stornieren von Adressen                                            57
     6.3. Routen                                                                      58
     6.4. Abteilung                                                                   58
     6.5. E-Mail                                                                      58
     6.6. Typ der DFÜ                                                                 58
     6.7. Feste private Felder                                                        59
     6.8. Umgebungsvariablen                                                          59
7.   Vorgangsarten                                                                    60
8.   Versiegelungstiefe                                                                61
     8.1. Motivation und Ziele dieser Entwicklung                                      61
     8.2. Zentrale Begriffe                                                            61
     8.3. Einschränkungen, Abgrenzung, Gültigkeit                                      61
     8.4. Installation/Konfiguration, Umgebungsvariablen                               62
     8.5. Funktionsbeschreibung                                                        62
          8.5.1.1. Stammdaten                                                          62
          8.5.1.2. Erfassung der Versiegelungstiefe                                    64
          8.5.1.3. Änderung des Abstandhalterabzugsmaßes                               65
          8.5.1.4. Berechnung des neuen Abstandhalterabzugsmaßes                       65
          8.5.1.5. Änderung der Versiegelungstiefe                                     66
          8.5.1.6. Sprossenberechnung                                                  66
          8.5.1.7. Vertextung                                                          66
          8.5.1.8. Auswirkung auf die OrderXML-Schnittstelle und den direkten Datenimport
          nach ALCIM                                                                   67
9.   iTOE                                                                             68
     9.1. Motivation und Ziele dieser Entwicklung                                     68
     9.2. Einschränkungen, Abgrenzung, Gültigkeit                                     68
     9.3. Installation/Konfiguration, Umgebungsvariablen                              68
10. Hintergrund-iTOE                                                                  69


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             5
11. Bearbeitungstypen mit spezieller Unterstützung durch den A+W CAD Designer
(Shapes)                                                                              70
    11.1. Bearbeitungen mit SN-Makros-Dateien                                         70
          11.1.1.1. Stammdaten                                                        70
          11.1.1.2. Vorgangserfassung                                                 71
          11.1.1.3. Generierung von Bestellungen                                      71
          11.1.1.4. Schnittstelle zu und von A+W Production                           72
    11.2. Parametrische Makros                                                        75
          11.2.1.1. Artikelstamm                                                      75
          11.2.1.2. Auftragserfassung                                                 76
          11.2.1.3. Interne Vorgangsübertragung                                       76
          11.2.1.4. Artikel-Stammdatenreplikation                                     76
    11.3. Bearbeitungen mit Motiv-Dateien                                             76
          11.3.1.1. Stammdaten                                                        76
          11.3.1.2. Erfassung von skalierbaren Motiven bei Oberflächenbearbeitungen   78
          11.3.1.3. Interne Übertragung                                               79
          11.3.1.4. Artikelstammdaten-Replikation                                     79
          11.3.1.5. Schnittstelle zu und von A+W Production                           79
          11.3.1.6. Konfigurationsmöglichkeiten im A+W CAD Designer (Shapes)          80
12. Mitarbeiterstamm                                                                   82
    12.1. Stornoberechtigungen                                                         82
          12.1.1.1. Stornierung von Positionen und in lokaler Korrektur                82
          12.1.1.2. Versand                                                            84
    12.2. Mitarbeiteranmerkungen                                                       85
    12.3. Abteilung                                                                    85
13. Bonus                                                                              86
    13.1. Umgebungsvariablen                                                           86
14. Rabattlogik 2005                                                                   87
    14.1. Motivation und Ziele dieser Entwicklung                                      87
    14.2. Zentrale Begriffe                                                            87
    14.3. Einschränkungen, Abgrenzung, Gültigkeit                                      87
          14.3.1.1. Auftragskopplung                                                   87
          14.3.1.2. Bestellübertragung                                                 87
          14.3.1.3. Replikation                                                        88
    14.4. Umgebungsvariablen                                                           88
    14.5. Funktionsbeschreibung                                                        92
          14.5.1.1. Aufbau der Rabattlogik                                             92
          14.5.1.2. Funktionale Beschreibung                                           92
          14.5.1.3. Stammdaten                                                         94
          14.5.1.4. Rabattkriterium                                                    97
          14.5.1.5. Rabattarten / Rabattwert                                           98
          14.5.1.6. Gewicht                                                            99
          14.5.1.7. Rabatte im Vorgang                                                100
          14.5.1.8. Automatischer Kostensatz für Verpackungen                         103
          14.5.1.9. Rabattinformationen auf der Positionsebene                        103
          14.5.1.10. Tabellen und Felder                                              105
          14.5.1.11. Spezielle Funktionen                                             112
15. Kleinlieferzuschlag / Anlieferpauschale                                           114


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             6
    15.1. Datenstrukturen                                                          114
    15.2. Stored Procedure                                                         114
    15.3. Maskenlogik                                                              115
    15.4. Ermittlung des Zuschlags                                                 116
    15.5. Automatische Abarbeitung der offenen Rechnungen                          116
    15.6. Umgebungsvariablen                                                       116
    15.7. Installationsanleitung                                                   117
16. Konfiguration der ICE-Umgebung                                                 118
17. Vorgangssuche                                                                  119
18. Erfassung mit Bezugnahme                                                       120
    18.1. Konfigurierte Bezugnahme                                                 120
    18.2. Übernahme einzelner Positionen                                           124
    18.3. Adressen                                                                 125
    18.4. Aufträge mit Fremdwährung                                                126
          18.4.1.1. RECH_KURS_NEU                                                  126
          18.4.1.2. BEZUG_KURS_NEU                                                 127
          18.4.1.3. UMRECHNUNGSKURS_BEI_BEZUG                                      127
          18.4.1.4. WKURS_NEU                                                      127
          18.4.1.5. Übersicht                                                      128
    18.5. Zahlungsmodalitäten/Merkmale                                             130
    18.6. Vorgangsanmerkungen                                                      130
          18.6.1.1. Übernahme von Vorgangsanmerkungen                              130
          18.6.1.2. Kennzeichnung der Referenzaufträge von Reklamationsaufträgen   131
          18.6.1.3. Anmerkung bei Bezugnahme auf Angebote                          131
    18.7. Mandantenzuordnung bei Interner Mandantentrennung                        131
    18.8. Beschaffungsarten                                                        132
    18.9. Umgebungsvariablen                                                       132
19. Gutschriftserfassung                                                           134
    19.1. Positionen Drucken                                                       134
    19.1. Formulardruck                                                            134
20. Rechnungserzeugung                                                             135
    20.1. Änderungsprotokoll                                                       135
    20.2. FIBU-Debitor                                                             135
    20.3. Gruppierungskriterien für Sammelrechnungen                               135
    20.4. Zahlungsplan (Abschlags- und Schlussrechnungen)                          137
          20.4.1.1. Stammdaten                                                     137
          20.4.1.2. Zahlungsplan                                                   138
          20.4.1.3. Abschlagsrechnung                                              138
          20.4.1.4. Schlussrechnung                                                140
          20.4.1.5. Konfiguration                                                  141
    20.5. Werteimport                                                              143
    20.6. Formulardruck                                                            143
    20.7. Einkaufsrechnungen für Ersatzbestellungen                                143
    20.8. Elektronische Rechnungen                                                 144
    20.9. Umgebungsvariablen                                                       144
21. Automatismen in der Auftragserfassung                                          146
    21.1. Erfassungshilfe                                                          146


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                           7
          21.1.1.1. Emaillestreifen                                                   146
          21.1.1.2. Stammdaten                                                        146
          21.1.1.3. Erfassung                                                         147
          21.1.1.4. Stufen-ISO                                                        147
          21.1.1.5. Unterschiedlichen Rahmeneinstände                                 148
          21.1.1.6. Vertextung                                                        148
          21.1.1.7. Interne Bestell-Übertragung                                       148
          21.1.1.8. Randentschichten                                                  149
          21.1.1.9. Stammdaten                                                        149
          21.1.1.10. Erfassung                                                        149
          21.1.1.11. Stufen-ISO                                                       150
          21.1.1.12. Unterschiedliche Rahmeneinstände                                 150
          21.1.1.13. Vertextung                                                       150
          21.1.1.14. Interne Bestell-Übertragung                                      151
          21.1.1.15. Abkleben                                                         151
          21.1.1.16. Stammdaten                                                       151
          21.1.1.17. Erfassung                                                        152
          21.1.1.18. Stufen-ISO                                                       153
          21.1.1.19. Unterschiedlicher Randverbund                                    154
          21.1.1.20. Vertextung                                                       154
          21.1.1.21. Interne Übertragung                                              154
    21.2. Änderung der Beschaffungsart                                                154
          21.2.1.1. Rahmenbeschaffung wie Sprossen                                    154
          21.2.1.2. Sprossenlieferant für den Innenrahmen                             155
          21.2.1.3. Umstellung auf Bestellung bei der Verletzung der Maßrestriktionen 156
    21.3. Lageraufträge                                                               156
          21.3.1.1. Manuelle Erfassung                                                156
    21.4. Vorgangssicherung                                                           156
    21.5. Versandart vs. Route                                                        158
          21.5.1.1. Automatische Änderung der Versandart bei Routenänderung (Versandart -
          Route) 158
          21.5.1.2. Automatische Änderung der Versandart bei Routenänderung (Route –
          Versandart)                                                                 158
          21.5.1. Doppelseitige Änderung von Route und Versandart                     159
          21.5.1.1. Konfiguration                                                     160
22. Produktaustausch                                                                161
    22.1. Austausch der Stücklistenelemente bei ISO und VSG                         161
    22.2. Austausch von SZR bei ISO-Austausch                                       162
    22.3. Produktaustausch bei ESG                                                  162
    22.4. Zusatzbearbeitungen in der vorhandenen Stückliste                         163
    22.5. Erweiterter Produktaustausch                                              164
23. Erfassung mit Innenansicht                                                      166
24. Stückliste in der Vorgangserfassung                                             167
    24.1. Mehrere Bearbeitungen zwischen Stücklistenebenen auf einmal kopieren      167
    24.2. Beschaffungsart „* vor DFÜ“                                               168
    24.3. Umgebungsvariablen                                                        168
25. Vorgangsanmerkungen                                                             169
    25.1. Menüpunkt „Auftragsinformation“                                           169


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                              8
26. Bestellpool (Bestpool)                                             170
    26.1. Zugang                                                       170
    26.2. Gruppierung                                                  170
    26.3. Bruch                                                        170
    26.4. Liefertermin                                                 171
    26.5. Einkaufsinformation / Restriktionsanzeige                    171
    26.6. Bestellungen für Packmittel (Kisten)                         172
    26.7. Umgebungsvariablen                                           172
27. Bestellverwaltung / Bestellerfassung                               173
    27.1. Warnmeldung bei Änderung in Bestellungen mit Auftragsbezug   173
28. Lieferavis                                                         174
    28.1. Meldung bei Bestellterminverschiebung                        174
29. Fertigwarenlager                                                   177
    29.1. Konfiguration                                                177
    29.2. Versandsteuerung                                             178
          29.2.1.1. Lieferschein                                       178
          29.2.1.2. Verpacktmeldung                                    178
          29.2.1.3. Inventur Fertigwarenlager                          179
    29.3. Wareneingangserfassung                                       179
          29.3.1.1. Manueller Wareneingangserzeugung /-storno          180
    29.4. Lagerabgangsbuchungen                                        180
30. Lager                                                              181
    30.1. Artikelstammdaten                                            181
          30.1.1.1. Varianten                                          181
    30.2. Raum-Stammdaten                                              181
          30.2.1.1. Kistenlager                                        182
          30.2.1.2. Fachlager                                          182
    30.3. Lagereingangsbuchung                                         182
    30.4. Lagerinventur                                                182
    30.5. Lagerbewertung                                               183
          30.5.1.1. Durchschnittspreis                                 183
          30.5.1.2. FIFO und LIFO Werte                                183
          30.5.1.3. Rückdatierung einer Lagerbewertung                 184
    30.6. Korrektur von Lagerbuchungen                                 184
          30.6.1.1. WL_KORR_DURCH_GEGENBUCH                            184
          30.6.1.2. Standartverfahren                                  185
    30.7. Lagerfüllaufträge                                            186
          30.7.1.1. Lagerzugangsbuchung bei Verpacktmeldung            186
          30.7.1.2. Manuelle Erfassung                                 186
    30.8. Rückmeldung von Lagerplatten                                 187
          30.8.1.1. Motivation dieser Funktionsbeschreibung            187
          30.8.1.2. Konfiguration                                      187
          30.8.1.3. Auflösen von Reservierungen (#289178)              188
    30.9. Größenvarianten auf Lager                                    188
          30.9.1.1. Motivation dieser Funktionsbeschreibung            188
          30.9.1.2. Artikelstammdaten                                  188
          30.9.1.3. Lager-Artikelstammdaten                            190
    30.10.      Auslösen von Bestellvorschlägen                        191


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx              9
         30.10.1.1. Voraussetzungen                                                  191
         30.10.1.2. Bestellmengenverfahren                                           191
         30.10.1.3. Standardmenge (WLBMV=1)                                          192
         30.10.1.4. Abgebuchte Menge (WLBMV=2)                                       192
         30.10.1.5. Bis Maximalbestand (WLBMV=3)                                     192
         30.10.1.6. Einmal bis Maximalbestand (WLBMV=4)                              192
         30.10.1.7. N* Standardmenge bis zum Maximalbestand (WLBMV=5)                192
         30.10.1.8. Bestellprognose ohne Alarmbestand                                193
         30.10.1.9. Variantengenaue Bestellprognose:                                 193
         30.10.1.10. Bestellprognose für fixierte Artikel                            194
         30.10.1.11. Bestellprognose für Farb- oder Dickenvarianten mit Bestandsänderung
         AWP 194
         30.10.1.12. Umgebungsvariablen                                              195
    30.11.    Abstandhalter/Thiokol im Lager                                         195
         30.11.1.1. Abstandhalter                                                    195
         30.11.1.2. Trockenmittel                                                    199
    30.12.    Bestandsprüfung beim Import/Einlastung                                 203
    30.13.    Ermittlung der Variantennummer                                         203
    30.14.    Umgebung / Problemlösungen                                             204
31. Routenoptimierung                                                               206
    31.1. Infrastruktur                                                             206
    31.2. Voraussetzung                                                             206
    31.3. ICE-Umgebung                                                              206
          31.3.1.1. Unix                                                            206
          31.3.1.2. Windows                                                         206
    31.4. A+W Enterprise                                                            207
          31.4.1.1. Schalter                                                        207
          31.4.1.2. Stammdaten                                                      207
          31.4.1.3. Tracing                                                         207
          31.4.1.4. Datenbank                                                       207
          31.4.1.5. Übertragung von Gestellinformationen                            208
          31.4.1.6. Gestellausgang und Gestelleingang                               208
          31.4.1.7. Packmittelmaße                                                  208
    31.5. A+W Logistics Optimizer                                                   209
          31.5.1.1. Datenbank                                                       209
          31.5.1.2. A+W Produkte                                                    210
          31.5.1.3. Installationspfad Application                                   210
32. A+W iQuote                                                                      211
    32.1. A+W iQuote Auftragsmerkmale in A+W Enterprise                             211
33. Feldprotokollierung                                                             212
    33.1. Verfügbare Dialoge                                                        212
    33.2. Konfiguration                                                             214
    33.3. Auswertung                                                                214
34. Feste private Felder in der Vorgangserfassung                                   215
35. Liefertermin                                                                    216
    35.1. Konfigurationsmöglichkeiten in A+W Enterprise:                            216
    35.2. Lieferterminverschiebung mit AWP                                          216
          35.2.1.1. Motivation dieser Funktionsbeschreibung                         216

A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                             10
          35.2.1.2. Konfigurationsmöglichkeiten in A+W Production:                      217
          35.2.1.3. A+W Enterprise: Auftragserfassung                                   218
          35.2.1.4. Lieferterminverschiebung durch A+W Produktion                       219
          35.2.1.5. Auftragsumlastung in A+W Production                                 219
          35.2.1.6. Konfigurationsmöglichkeit in A+W Production                         221
          35.2.1.7. A+W Enterprise: Versandsteuerung                                    221
          35.2.1.8. Liefertermin zurück in den Auftrag                                  223
          35.2.1.9. A+W Enterprise: Liefertermin pro Position-verschiedene Bestellungen 224
          35.2.1.10. A+W Production: Liefertermin pro Position                          225
    35.3. Via plant                                                                     228
    35.4. Packmitteloptimierung                                                         228
          35.4.1.1. Logische Gestelle (Produktionsgestelle):                            228
          35.4.1.2. Physikalische Gestelle (Versandgestelle):                           228
    35.5. Einfluss der MP-Fahrtdauer                                                    228
          35.5.1.1. Fahrtdauer des Kunden                                               228
          35.5.1.2. Fahrtdauer des Lieferanten                                          229
          35.5.1.3. Fahrtdauer des Objektes                                             230
    35.6. Fahrtzeit in der Adresse                                                      231
    35.7. Routen-Fahrtzeit                                                              231
36. Lieferterminänderungsprotokoll                                                     233
37. VSG                                                                                237
    37.1. VSG-Lagermaß                                                                 237
    37.2. VSG-Festmaßartikel                                                           239
    37.3. Erfassung von VSG-Artikeln im Auftrag                                        240
          37.3.1.1. VSG-Paketbearbeitungen                                             240
          37.3.1.2. VSGs mit Bearbeitungen an Einzelscheiben                           242
    37.4. Vererbte Bearbeitungen                                                       243
          37.4.1.1. Zusatzinformation (21.05.2019)                                     245
          37.4.1.2. Beispiele einer Vererbung nach unten                               246
          37.4.1.3. Kundenspezifische Logik Vererbung mit Druckkennzeichen             247
          37.4.1.4. Vererbte Bearbeitung in der internen DFÜ                           249
          37.4.1.5. Bearbeitungen mit Beschaffungsart "Keine"                          250
          37.4.1.6. Vererbbare VSG Bearbeitungen                                       250
          37.4.1.7. Umgebungsvariablen                                                 251
    37.5. Definition der iTOE-Regeln für Vererbung nach oben                           252
          37.5.1.1. Teil 1 - Für normal Bearbeitung wie Kantenbearbeitung, normal Bohrung
          und Ausschnitte                                                              252
          37.5.1.2. Teil 2 - Für Stufenbohrung                                         257
          37.5.1.3. Teil 3 - Für Senkbohrung                                           263
38. Limitprüfung                                                                       270
          38.1.1.1. Protokoll                                                          270
    38.2. Markpartnerstammdaten                                                        271
    38.3. Prüfung inclusive Wechselobligo                                              271
    38.4. Individuelle Prüfung (Stored Procedure)                                      271
    38.5. Umgebungsvariablen                                                           272
39. Auftragsfreischaltung                                                              273
    39.1. Steuerung der Freischaltung per Stored procedure                             273
40. Freischaltepool                                                                    274

A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                               11
    40.1. Konfiguration                                                                   275
    40.2. Freischaltbemerkung                                                             276
    40.3. Wie kommt ein Auftrag in den Freischaltepool und was ist dort zu sehen (nicht
    vollständig)                                                                          277
41. Vorgangsänderung                                                                      280
    41.1. Aktualisieren der Rabatte                                                       280
    41.2. Erneute Kostenkalkulation von Aufträgen                                         280
42. Gewichtsberechnung                                                                    281
    42.1. Artikelstamm                                                                    281
    42.2. Vorgangserfassung                                                               281
    42.3. Modelle                                                                         281
    42.4. Umgebungsvariablen                                                              282
43. Darstellung Sprossenskizze                                                            283
44. Vertextung                                                                        284
    44.1. Umgebungsvariablen                                                          284
    44.2. Artikeltexte                                                                287
    44.3. Sprossen                                                                    287
          44.3.1.1. Konfiguration                                                     288
    44.4. Artikelbezeichnungen und Zusatztexte für Bearbeitungen in Fremdsprachen     289
    44.5. Darstellung SL + Bearbeitungen                                              290
          44.5.1.1. Andruck der Beschichtung / Struktur                               290
          44.5.1.2. Zusammenfassen von identischen Bearbeitungstexten                 291
    44.6. Automatische Textgenerierung                                                291
          44.6.1.1. Variablen                                                         293
          44.6.1.2. Textzusätze                                                       294
          44.6.1.3. Anlegen fremdsprachiger Artikel-Vermaßungstexte                   300
    44.7. Konfigurierbare Texte                                                       301
          44.7.1.1. Bei Rechnungen und Gutschriften                                   301
          44.7.1.2. Automatische Textgenerierung – Erweiterung der konfigurierbaren Texte302
          44.7.1.3. Variable Texte (kspectxt)                                         303
45. Warengruppenlogik                                                                     304
    45.1. Produktgruppen: Ober-/Unterwarengruppe                                          304
    45.2. Warengruppenstruktur                                                            304
    45.3. Kundenspezifische Warengruppe (SCHOLL)                                          311
    45.4. Kundenspezifische Warengruppe (Pilkington)                                      312
    45.5. Kundenspezifische Warengruppe (Wernberg)                                        314
          45.5.1.1. Zielsetzung                                                           315
          45.5.1.2. ISO: 5. Und 6.Stelle                                                  315
          45.5.1.3. ESG und Festmaße 6. Stelle                                            316
    45.6. Erweiterung der Warengruppenlogik (Art 6)                                       317
46. Kostenstellenlogik im A+W Enterprise:                                                 318
    46.1. Umgebungsvariable: DEFAULT_KOSTENST                                             318
    46.2. $ALDATPFAD/kostenspec.dat                                                       319
    46.3. Einkauf                                                                         320
          46.3.1.1. Variable KOSTENSTELLE_EK                                              320
          46.3.1.2. Kundenindividuelle Lösung (Interpane)                                 320
    46.4. Manueller Eintrag in kauf.kostenst                                              321


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                                 12
    46.5. Kostenstellenermittlung bei der Übergabe in den Einkauf (Bestellerzeugung):   321
    46.6. Kostenstellenübertragung                                                      321
          46.6.1.1. Allgemein                                                           321
          46.6.1.2. Protokolle                                                          322
    46.7. FIBU-Schnittstelle: Konten und Kostenstellen.                                 322
47. Deco-Nummern bei Sonderkanten                                                       323
48. DXF-Import                                                                          324
    48.1. Konfiguration                                                                 324
          48.1.1.1. Umgebungsvariable SN_DXF_NONMODAL                                   324
          48.1.1.2. Stammdaten                                                          324
    48.2. Funktionalität                                                                325
          48.2.1.1. Auftragserfassung                                                   325
          48.2.1.2. DFÜ                                                                 326
49. SN-Interaktion / SNLive-Skizze allgemein                                            327
    49.1. Weiterführende Dokumentation                                                  327
    49.2. Ansicht in der SNLive-Skizze (#412076)                                        327
          49.2.1.1. Beispiel: Kopfteil EP 1                                             328
          49.2.1.2. Einschränkungen                                                     331
          49.2.1.3. Dokumentation der SN.ini Schalter                                   331
    49.3. Konfiguration                                                                 332
          49.3.1.1. DATEI_REF_PFAD                                                      332
          49.3.1.2. SNFILES_DIR                                                         332
          49.3.1.3. SN_CADFILES_DIR                                                     333
          49.3.1.4. SNLIVE_EVAL_PRINTFLAG                                               333
          49.3.1.5. Zu beachtende Einschränkungen                                       333
    49.4. Skizzen für Rahmen-Kopfteile                                                  333
    49.5. SNLive-Zoom                                                                   334
          49.5.1.1. Konfiguration                                                       334
          49.5.1.2. Funktionalität                                                      334
    49.6. SNLive-Skizze im Print Service                                                334
          49.6.1.1. Auswertung des Druck-Kennzeichens                                   334
    49.7. Fehlerrecherche SNLive-Skizze                                                 335
          49.7.1.1. Falsche Modellmaße in der SN-Skizze                                 335
50. Anbindung an A+W CAD Designer (Bars)                                                336
    50.1. Auftragserfassung                                                             336
    50.2. Produktionsübergabe                                                           336
    50.3. Ausdruck                                                                      336
    50.4. Umgebungsvariablen                                                            336
51. Deckungsbeitrag                                                                     338
    51.1. Auftragserfassung                                                             338
    51.2. Negativer / minimaler Deckungsbeitrag nach Kostenkalkulation                  338
          51.2.1.1. Umgebungsvariablen                    Fehler! Textmarke nicht definiert.
52. Kostenkalkulation                                                                   340
    52.1. Voraussetzung                                                                 340
    52.2. Kostenarten                                                                   340
    52.3. Ablauf                                                                        341
    52.4. Materialkosten                                                                341


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                                13
    52.5. Fixkosten / interner Deckungsbeitrag                         342
    52.6. Maschinen- und Personalkosten                                342
    52.7. Vererbung manueller Änderungen in der Kostenkalkulation      342
    52.8. Mengeneinheit Laufmeter in der Materialkostenkalkulation     343
    52.9. Kosten für lagerführige Artikel                              344
    52.10.     Rückschreibung geänderter Kosten aus der Bestellung     344
          52.10.1.1. Reklamationsbestellung                            344
          52.10.1.2. Kostenlose Bestellungen                           345
          52.10.1.3. Verlängerte Werkbank                              345
          52.10.1.4. Verwendung von EK-Rabatten                        345
          52.10.1.5. Mehrstufige Kostenrückschreibung                  345
    52.11.     Kostenkalkulation nach Auftragsfreischaltung            346
    52.12.     Spezielle Preise                                        347
    52.13.     Umgebungsvariablen                                      347
53. Preise                                                             350
    53.1. Rundungen                                                    350
          53.1.1.1. Genauigkeit der Rundung                            350
          53.1.1.2. Bearbeitungen                                      350
    53.2. Preisberechnung für Unterteile auf Basis der Positionsmaße   350
    53.3. Globale Preispflege                                          351
          53.3.1.1. Funktionen in der globalen Preispflege             351
    53.4. Bearbeitungspreise                                           352
          53.4.1.1. Keine Bearbeitungen berechnen                      352
          53.4.1.2. Preisrelevante Artikeltypen                        352
          53.4.1.3. Kantenlänge bei Modellen                           353
          53.4.1.4. Bearbeitungsfaktoren                               353
          53.4.1.5. Spezielle Bearbeitungspreise                       354
          53.4.1.6. Mindestbearbeitungspreise                          354
          53.4.1.7. Mindestberechnung                                  355
          53.4.1.8. Bearbeitungsgruppenzuschläge                       356
          53.4.1.9. Größenzuschlage                                    357
          53.4.1.10. Parameterabhängige Bearbeitungspreise (Formeln)   357
    53.5. Mindestberechnung                                            358
    53.6. Mindestpreis                                                 359
          53.6.1.1. Mindestpreis für Unterteile (Zubehör)              359
          53.6.1.2. Mindestpreis bei ISO                               359
    53.7. Sprosse                                                      359
          53.7.1.1. Preise bei bestellten Sprossen / Sprossengitter    359
          53.7.1.2. Berechnung der zu berechnenden LM-K-R              359
          53.7.1.3. Berechnungstyp 14 – „K oder LM“                    359
    53.8. Austauschpreise                                              360
          53.8.1.1. Auftrags-Artikelpreise ohne Austauschpreise        360
          53.8.1.2. Austauschpreise nach Vektor                        360
          53.8.1.3. ISO                                                360
          53.8.1.4. VSG                                                360
          53.8.1.5. Austauschpreis nach Matrix (Größenstaffel)         361
          53.8.1.6. Austauschfaktor                                    362
          53.8.1.7. VSG-Austauschpreise                                362
          53.8.1.8. Gussaustausch                                      363
    53.9. Stufenzuschlag                                               363


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx               14
         53.9.1.1. Erweiterte Möglichkeiten für VSG-Stufenpreisberechnung            363
         53.9.1.2. Anzahl Stufen                                                     364
    53.10.    SZR-Zuschlag                                                           365
         53.10.1.1. Standard-Berechnung                                              365
         53.10.1.2. SZR-Zuschlag auf Austausch                                       365
         53.10.1.3. SZR-Zuschlag für 3-fach ISO                                      365
         53.10.1.4. Größenzuschläge auch auf SZR                                     366
    53.11.    PKZ-Glastüren                                                          366
    53.12.    Modellzuschlag                                                         366
         53.12.1.1. Kein Modellzuschlag für Artikel, mit Modell im Artikelstamm      366
         53.12.1.2. Modellzuschlag für Dichtstoffe                                   367
         53.12.1.3. Modellzuschlag pro Warengruppe                                   367
         53.12.1.4. Modellzuschlag / Mindestmodellzuschlag                           367
    53.13.    Größenzuschlag                                                         368
         53.13.1.1. ISO / Austausch                                                  368
         53.13.1.2. Größenzuschläge bei Bearbeitungen und Zubehör                    368
         53.13.1.3. Seitenverhältniszuschlag                                         369
         53.13.1.4. Größenzuschläge auf SZR-Zuschlag                                 370
    53.14.    Referenzpreis                                                          370
    53.15.    Konditionen im Auftrag                                                 371
         53.15.1.1. Falsche Preise in der Bestellung                                 371
         53.15.1.2. ISO-Konditionen nicht als manuell kennzeichnen                   372
    53.16.    Druckbare Preise                                                       372
         53.16.1.1. Voraussetzungen                                                  372
         53.16.1.2. Faktor                                                           373
         53.16.1.3. Preise                                                           374
    53.17.    Umgebungsvariablen                                                     377
54. NR-Server / Nummernkreise                                                        382
    54.1. Vergabe der Rechnungs- und Gutschriftennummern über SPs                    382
    54.2. Sperren freigeben #416415                                                  382
    54.3. Wiederverwendung von Rechnungsnummern ohne Rechnungsdokument               383
55. Produkt- und Bemaßungssets                                                       384
    55.1. Bemaßungssets                                                              384
    55.2. Produktsets                                                                385
          55.2.1.1. MODUL_PRODSET=0                                                  385
          55.2.1.2. MODUL_PRODSET=1                                                  386
56. Lieferscheinerzeugung aus dem Versand                                            388
    56.1. Fehler-Status                                                              388
    56.2. Versand von Lieferscheinen als EMail bei der Erzeugung im Versand          388
    56.3. Lieferscheindruck im Versand abhängig von einem konfigurierbaren Feld im
    Marktpartner-Stamm                                                               389
    56.4. Plausibilitätsprüfung                                                      390
    56.5. Konfiguration                                                              390
57. Automatische Lieferscheinerzeugung im Hintergrund                                391
    57.1. Allgemeiner Prozess                                                        391
          57.1.1.1. Protokoll                                                        391
          57.1.1.2. Verarbeitung der Übergabedatei                                   391
    57.2. Format der Übergabedatei                                                   393


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                             15
     57.3. Funktionen                                                                 393
           57.3.1.1. Sperren                                                          393
     57.4. Umgebungsvariablen                                                         394
58. Wareneingänge                                                                    395
    58.1. Rechnungsübertragung / automatischer Wareneingang                          395
    58.2. Wareneingangskontrolle                                                     395
          58.2.1.1. Automatischer Wareneingang/Lieferscheinerzeugung bei Direktauslieferung
                 395
          58.2.1.2. Interne Verrechnung (kundenspezifisch)                           395
    58.3. Gestellbezogener Wareneingang                                              395
          58.3.1.1. Gestelllager                                                     396
          58.3.1.2. Buchung eines Gestelllagereingangs                               396
          58.3.1.3. Multi-site Erweiterung                                           400
    58.4. Externer Wareneingang (z.B. SAP)                                           402
59. Leistungserklärung                                                                403
60. Spezielle Intauf-Arten                                                            404
    60.1. Kostenkalkulation (KOSTENKALKEK -15)                                        404
    60.2. Neu Summieren (FORALL_SUM -20)                                              404
    60.3. ENERGIEZUCHLAG Update (-26)                                                 404
    60.4. ENERGIEZUSCHLAG hinzufügen (-28)                                            405
    60.5. Rechnung buchen (-33 RECHNUNG_BUCHEN)                                       405
    60.6. Rabatte neu berechnen (-37)                                                 406
          60.6.1.1. Relevante Umgebungsvariablen:                                     407
    60.7. Preise neu berechnen (FORALL_PREISE (-38))                                  407
    60.8. Kapazitätsplanung (-39 ALCIM_UEBERGABE)                                     407
    60.9. Gestellrechnungen (-40 VORGANG_NEU)                                         408
    60.10.      INTERN Vorgang kopieren (AUFTRAG_NEU (-45))                           409
    60.11.      Vorgang zur Kostenkalkulation übergeben (ALCIM_UEBERGABE_KK -47)      410
    60.12.      Elementenaustausch (SLKORREKTUR -52)                                  410
    60.13.      EK_RUECKRECH_PLUS -117                                                411
61. Spezielle Prozessbeschreibungen                                                   412
    61.1. Produktion von Mustern / Tests                                              412
    61.2. Handel mit Bestellungen ohne Produktion                                     412
62. Customizing                                                                       413
    62.1. Protokoll                                                                   413
63. Späte Änderung                                                                     414
    63.1. Lokale Korrektur durch Bestellung                                            414
    63.2. Übergabe der späten Änderungen an Produktion                                 414
          63.2.1.1. Freie Aufträge und Weitergabe an Produktion                        415
          63.2.1.2. Auftragsweises Sperren. Weitergabe an Produktion für Sperre über
          Bestellung/WE und KAUFUPDATE_BEI_BEST aktiv                                  416
          63.2.1.3. Auftragsweises Sperren. Weitergabe an Produktion alle anderen Sperren
          ohne aktiven KAUFUPDATE_BEI_BEST                                             416
          63.2.1.4. Positionsweises Sperren                                            417
          63.2.1.5. Vergleich ALTE / NEUE Logik.                                       418
          63.2.1.6. Rückschreibung eines geänderten Liefertermins aus dem Versand      419
          63.2.1.7. Änderung der Kommission und der Kundenpossition ignorieren.        419


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                               16
64. MWST-Anpassung                                                421
    64.1. Konzeptübersicht                                        421
    64.2. Stammdaten                                              421
    64.3. Funktionsbeschreibung                                   421
    64.4. Handlungsrichtlinien                                    421
65. Mehrwertsteuerumstellung                                      423
    65.1. Stammdaten                                              423
    65.2. Funktionsbeschreibung                                   423
    65.3. Handlungsrichtlinien                                    424
66. Packmittelplanung                                             425
    66.1. Stammdaten                                              425
          66.1.1.1. Marktpartnerstamm                             425
          66.1.1.2. Gestelltypen = Packmitteltypen                425
    66.2. Vorgabe zur Packmittelplanung                           426
          66.2.1.1. Warnung bei vergessener Packmittelplanung     426
          66.2.1.2. Individuelle Prüfung der Packmittelplanung    426
    66.3. Planungsalgorithmen                                     427
          66.3.1.1. GA – Gesamt-Algorithmus                       427
          66.3.1.2. TA- Teil-Algorithmus                          428
          66.3.1.3. M- Manuell                                    431
          66.3.1.4. PA - Prioritäts-Algorithmus                   433
          66.3.1.5. EA – Equal Algorithmus                        433
    66.4. Gestellhauptgruppe                                      434
    66.5. Preise                                                  434
          66.5.1.1. Kistenlieferant                               434
    66.6. Kosten                                                  434
    66.7. Bestellungen für Packmittel (Kisten)                    435
    66.8. Protokoll                                               435
          66.8.1.1. Standard                                      435
          66.8.1.2. Erweitert                                     435
          66.8.1.3. Ftest                                         436
    66.9. Problembehandlung                                       436
    66.10.      Umgebungsvariablen                                437
67. Versandsteuerung (allgemein)                                  438
    67.1. Abschalten der A+W Enterprise Versandsteuerung          438
    67.2. Umgebungsvariablen                                      438
68. Gestellbezogener Versand                                      439
    68.1. Voraussetzung                                           439
    68.2. Freie Gestelle                                          439
    68.3. Scheibenzuordnung                                       439
    68.4. Verschieben im Versand                                  442
          68.4.1.1. Verschieben von festgebuchten Gestellen       444
    68.5. Umbuchen der Gestellmengen                              445
    68.6. Fehlmengenkontrolle                                     449
    68.7. Verpackte Menge korrigieren                             450
    68.8. Lieferscheine aus Versand                               450
    68.9. Korrektur von Fehlbuchungen                             450
          68.9.1.1. Aus BDE gemeldete Gestellbuchungen            450


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx         17
         68.9.1.2. Buchung/Zuordnung des Gestells, wenn die automatische Zuordnung nicht
         möglich war.                                                              454
69. Beenden von ALCIB nach längerer Inaktivität                                    459
70. Import von Positionen aus Microsoft Excel                                      460
    70.1. In der Auftragserfassung                                                 460
          70.1.1.1. Konfiguration                                                  462
71. Angebotskontrolle                                                              463
72. Angebotsoptimierung                                                            464
73. Angebots-Kostenkalkulation (#393543)                                           465
74. Lokale Korrektur                                                               466
    74.1. Bestellfreigabe                                                          466
          74.1.1.1. Direktbestellungen (extern)                                    466
          74.1.1.2. Direktbestellungen (intern)                                    466
          74.1.1.3. Bestellpool (intern und extern)                                466
    74.2. Bestellfreigabe zurücksetzen                                             466
    74.3. Umgebungsvariablen                                                       466
75. Auftrags- und Positionsstatus                                                  468
    75.1. Dialog „Auftragsinformation“                                             468
    75.2. Aktionen im Versand                                                      469
    75.3. Aktionen in der Produktion                                               470
          75.3.1.1. Umgebungsvariablen                                             472
76. Systemmeldungen                                                                473
77. Smart Companion                                                                474
    77.1. Voraussetzungen                                                          474
    77.2. Einrichtung                                                              474
    77.3. Gebinde                                                                  475
    77.4. Inventurablauf                                                           476
    77.5. Betrieb und Prüfung                                                      476
78. Standortübergreifende BDE                                                      477
    78.1. Produktionsrückmeldung                                                   477
    78.2. Interne Bestellung                                                       477
    78.3. Produktionsübergabe                                                      477
    78.4. Einlastung                                                               478
    78.5. Etikettnummernvergabe                                                    478
    78.6. Einschränkungen                                                          478
    78.7. Booking                                                                  478
79. Vorablieferscheinerzeugung und Rechnungserzeugung mit NVE-Logik                479
    79.1. Relevante Umgebungsvariablen                                             479
          79.1.1.1. LAPOOL_NVE_LOGIC                                               479
          79.1.1.2. NVE_GLN                                                        479
    79.2. Auftragserfassung                                                        479
    79.3. Versandsteuerung                                                         480
    79.4. Report-Stammdaten                                                        480
    79.5. Dokumentenexport                                                         481


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                         18
    79.6. Weitere Informationen zur Konfiguration                 481
80. Dokumentenzuordnung                                           482
    80.1. Funktion                                                482
    80.2. Bedienung                                               483
    80.3. Konfiguration                                           484
    80.4. Bezugnahme                                              484
    80.5. Bestellerzeugung                                        485
    80.6. Bestellübertragung                                      485
    80.7. Produktsets bei externer DFÜ                            485
    80.8. IQuote                                                  486
81. Statusrückmeldung aus der Finanzbuchhaltung                   487
    81.1. Ablauf:                                                 487
    81.2. Dialog Rechnung / Gutschrift buchen                     488
    81.3. Konfigurierbare Texte                                   488
    81.4. Druck                                                   488
    81.5. Protokolle / EMail                                      488
          81.5.1.1. Status                                        489
    81.6. Voraussetzung:                                          489
    81.7. Dateiaufbau                                             489
    81.8. Umgebungsvariablen                                      490
82. A+W Enterprise Statistik                                      491
    82.1. Verkauf – Kunde-Rechnung (ykuauf)                       491
    82.2. Verkauf – Kunde-Artikel (ykartikel)                     491
83. Zuordnung von Chargen zu Bearbeitungsmaschinen                492
84. SQL-Abfragen                                                  495
85. Excel-Übergabe                                                496
86. Skontologik                                                   497
    86.1. Stammdaten                                              497
    86.2. Anwendung                                               498
    86.3. Datenbank-Struktur                                      502
    86.4. Umstellung bei Kunden                                   502
    86.5. Skonto vor Mehrwertsteuer                               503
    86.6. Skonto nach Mehrwertsteuer                              504
    86.7. Konfiguration                                           504
87. Auswahl von Windows-Dateien über den Dialog „Datei öffnen"    506
88. ViaPlant /via Plant                                           507
89. Intrastat                                                     508
90. Nachbucher                                                    509
91. Datawarehouse                                                 510
    91.1. Konfiguration                                           510
    91.2. Schreiben des Ankersatzes                               511
    91.3. Verarbeitung des Ankersatzes                            511
    91.4. Buchung der Data-Warehouse-Tabellen für Auftragsdaten   512


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx         19
1. Key
1.1. Languages
        1.1.1.           Language code
For the use of the multi-lingual capability in A+W iQuote, the "Master Data - Keys - System -
Languages" dialog has been expanded to include the "Language code" column. Here, the language
code borrowing from the ISO languages is entered, which is used in A+W iQuote for the language
definition - e.g. en-GB for English or fr-FR for French. The currently possible language codes are
displayed in the field as a tool tip. Each language code may only be assigned to one A+W
Enterprise language. There is no check whether the language code entered is valid and supported
by A+W iQuote.
Caution: the input and evaluation of the language codes is case-sensitive; that is, de-DE is
something different than de-de.




1.2. Product keys
        1.2.1.           Size variants
In the definition of dimension variants, there is the field "Total dimensions." This specifies the
factor, how much of the defined TQU is in a piece.
e.g., Variant 3 quantity unit 4 (qm) - Dimensions 4500 x 3210 = 14,445
The factor - here with 3 places after the decimal point - is taken over for the creation of the article
variant in stock (wlsv) and used for the bookings. An after-the-fact change of the factor in the
variant master data can cause problems in the inventory booking. In addition, a change of the
factor in the variant master data has no effect on the factor in the stock master data (wlsv).
In the order/PO, by default the physical quantity with 2 places after the decimal point is
calculated (kpos.phymestk).
Due to this, there can be differences in the display of inventories in the "Stock forecast" module.
The difference will always cause problems if the document quantities are compared to the stock
quantities.
If you are working with the stock, you must consider which value you enter in the variants - 3
places after the decimal point or 2 places after the decimal point. If 3 places after the decimal
point are entered there, you should consider activating the environment variable
RUNDUNG_PHYMESTK_3STELLIG, which will round kpos.phymestk to 3 places in the documents
too.
Note: This is NOT the price-relevant quantity, but the physical quantity of the item. The
environment variable RUNDUNG_3NACHKOMMASTELLEN is responsible for the price-relevant
quantity.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   20
1.3. Form elements
        1.3.1.              Variables
In A+W Enterprise, formulas can be used in various places, e.g., for text generation, installation
restrictions, restrictions in the article dimensioning, dimension inheritance in the BOM, processing
prices.
Here is an overview of the available variables and arithmetic operators. However, we would like
to point out that not all variables make sense in all areas. For this, the descriptions in the special
areas must be taken into consideration.
The variables $1 - $20 refer to the details on the "Mandatory dimensions" dialog in the article
master data. These can be used in the assembly restrictions in the article. Here is the most
common use.
$1 = width (kpos.laenge)
$2 = height (kpos.breite)
$3 = AIR1 (kpos.szr)
$4 = AIR2 (kposp.szr2 bei 3-fach - ISO)
$5 = AIR3 (kposp.szr3 bei 4-fach-ISO)
$11 = SR (kpos.aham)
$12 = SR2 (for triple IG)
$13 = SR3 (for quadruple IG)
$20 is frequently used for customer-specific checks (e.g. glass strength). ([AW-222496])


Within the text generation, formulas can be used in the environment variable GEN_ARTBEZ as
follows
$A1 - $A3 -article names 1 to 3
$L1 - $L3 – long description 1 to 3
$K – short name
$G1; $G2 – glass names for IGU


Text generation for article dimensioning:
$REFPUNKT/$REFPOINT -reference point
$ZT – additional text


For the formulas for the individual elements
$DFx -global steps
$STx – local steps



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                  21
$BVEK = processing vector (refers to the dimension parameters from the "article dimensioning"
dialog in the article master data.)
$LEVEL = level (refers to the dimension parameters from the "article dimensioning" dialog in the
article master data).
$CORNER = corners (refers to the dimension parameters from the "article dimensioning" dialog in
the article master data.
$QUALI = refers to the dimension parameters from the "article dimensioning" dialog in the article
master data.
$AP = price-relevant number (for the text generation)
$PA = position number (for the price calculation)
The variables $W1 - $W13 refer to the dimension parameters from the "article dimensioning"
dialog in the article master data and can be used within the texting, restriction formulas, and price
master data.
e.g. $W1 = diameter of the drillings
max (x, y) the greater value of the two
min (x, y) the lesser value of the two
pi constant Pi (3.1415926)



        1.3.2.          Operators
You can combine two variables with "&" or "and" (and) or "|" or "or" (or).
The following operators and comparison operators can be used:
+   Addition
-   Subtraction
*   Multiplication
/   Division
=   equal to
<   less than
>   greater than
<= less than or equal to
>= greater than or equal to
max (x, y) the greater value of the two
min (x, y) the lesser value of the two
pi constant Pi (3.415926)




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                              22
1.4. Text supplements
Text supplements are used at various points in the program (texting, notes in the release pool,
messages in A+W iQuote). However, the main purpose is the customer-specific texting of product
properties. Therefore, the text supplements are documented in the section "Texting" >
"Automatic text generation" > "Text supplements"




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                              23
2. Article master data
2.1. Article types
For the creation of processings with the parallel use of A+W iQuote, please consult "EN-CONFIG-
A+E Enterprise iQuote" for special restrictions.


          2.1.1.        Overview
An x in the price calculation or production column means that this article type is treated specially
in the price calculation or during production transfer. For more precise details, see the special
documentation.
"EN-CONFIG-A+W Enterprise Production Interface"
 Article type         Bill of materials     Order entry           EDI              Prices              Production
 110                                        Product group                          X Exchange
 200                  Min 2 pieces of       x                     x                x                   x
                      glass and a spacer
 210 / 211            Installation in IGU   Calculation of the                                         X
                                            SR
 Spacer/colored       Consists of spacers
 spacer               (220)                 SN display
                                            Muntin entry
 220                                        Calculation of the                                         X
                                            SR
 Spacer
 230 muntins                                                      Must be
                                                                  meta
                                                                  element
 240                  Installation in IGU   Sealing Depth                          X                   x
 Sealants                                                                          No shape
                                                                                   surcharge
 350                                        Box P.O.
 Boxes                                      In dispatch not
                                            displayed.
                                            (Configuration box
                                            PO)
 400                  Can include IGU       No size transfer      X                                    X1
 Glass doors          Can include spacer    Dimensions of the     An exchange
                                            elements differ       in the
                                            from the              product set
                                            dimensions of the
                                            item


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 24
 Article type         Bill of materials      Order entry            EDI              Prices             Production
 510 Step                                    No meta element                         X
                                             Step reduction                          Surcharge
                                             measurement
 800                  Around the             Not for stepped IG
                      outside of an IGU
 Mounting frame                              Automatically
                                             reduces the glass
                                             dimensions
 999                                         Costs of the
                                             packaging as
 Other articles
                                             discount
                                             (RABATT_VERPAC
                                             KKOSTEN)




1 - IGU does not work as sub element, therefore AWE individual logic for sub-orders (EDI
configuration instructions)


2.2. Article type
Articles with the article type "Meta" must have a BOM. Meta articles without BOM can cause
problems in order entry. Typical meta articles are gas - gas+gas filling; muntins - muntin
bars+muntin grill).
Step article is NOT a meta.


2.3. Bill of materials
    •   Dr (strukt.f_dru)
        The print identifier in field "D": determines which print identifier the article gets in the
        BOM.
        N – No - No output
        Y – Yes – Output on all papers
        V – Sales – Output only on sales papers
        P – Production – Output only on production papers
        Q – A+W iQuote – Display in A+W iQuote but no output on papers (only for processings)




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     25
2.4. IG
For the input of IG, correct administration of master data is vital. The most important master data
information is the assembly position of glass, spacers, and sealants. The assembly position of the
spacer is not numbered in two steps as for glass, but the airspaces are simply numbered all the
way through. Between the lites with AP1 (2) and AP 3(4), there is the internal spacer with AP 1,
between the lites with AP 3(4) and AP 5(6) the internal spacer with AP 2, and so on...
Sizes are compulsory in article master data. IG requires the global variables:
$1 = width (kpos.laenge)
$2 = height (kpos.breite)
$3 = AIR1 (kpos.szr)
$4 = AIR2 (kposp.szr2 bei 3-fach - ISO)
$5 = AIR3 (kposp.szr3 bei 4-fach-ISO)
$11 = SR (kpos.aham)
$12 = SR2 (for triple IG)
$13 = SR3 (for quadruple IG)
The data for the airspaces and SRs can be preset.
The bill of material of an insulated glass (IG) must consist of at least 2 lites and a spacer. Here it is
important that the assembly positions and formulas are maintained correctly. The glass has the
assembly position 1 or 2 or 3 or 4. For the formulas, you must make sure that there is one formula
with and one formula without steps. The spacer has the assembly position 1 and a formula for the
calculation less SR.
A triple IG must have 3 lites and 2 spacers. Here, the lites have the assembly positions 1/2, 3/4,
and 5/6 and formulas as desired; at least 1 lite must have a formula with step reduction. The
spacers have the assembly positions 1 and 2. They have formulas for the calculation less SR.
Formulas in the 2nd spacer must handle $3 und $11 if you have entry parameters for
$1,$2,$3,$4,$11,$12.
The different internal spacers have to have different formulas. If the internal spacer for FP1 has
the formula XX, the internal spacer for FP2 should have the amended formula XX1:
•       Step reduction = YES
•       $1 = $1 - $12
•       $2 = $2 - $12
•       $3 = $4
•       $11 = $12
And the internal spacer for FP3 should have the formula XX2:
•       Step reduction = YES
•       $1 = $1 - $13
•       $2 = $2 -$13
•       $3 = $5



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    26
•       $11 = $13
If you use the module "Variable sealing depth", the same formula as for the corresponding
internal spacers has to be entered for the meta elements for sealants as well. If no formula is
entered for the spacer, the system either automatically uses the formulas 201/202 or the
environment variable FRAME_FORMULAS.
With regard to the spacer, there are other aspects with regard to variants, dynamic SR, and
stockkeeping.


        2.4.1.          Quadruple IG (upgrade)
ALBAT+WIRSAM product version 2011 can handle quadruple IG. From commercial order entry to
production, data structures have been adapted and extended for quadruple IG. Please note that
ALBAT+WIRSAM products can handle only "narrow" BOMs here. This means that quadruple IG is
produced from four lites and spacers, and is not assembled from two double IG lites. For IG in IG,
starting with A+W Enterprise 6, a special function for generating sub-orders is required (see "EN-
CONFIG-A+W Enterprise EDI").
For the input of quadruple IG, correct administration of master data is vital. The most important
master data information is the assembly position of spacers and sealants.
The new formulas have to be entered in the BOM. Please also check the formulas for triple IG.
If the BOM elements have an effect to the global variables $3 or $11 (e.g. in case of an exchange
of the sealant), these articles do not have to be changed. If the dimensioning record for a sealant
is defined with the instruction $11=+2 in master data, the spacer belonging to this article will be
amended automatically.
Effects on the OrderXML file interface in ALCIB
The OrderXML file interface will consider quadruple IG. The airspace details will be adopted for
the spacer thickness. This is based on the sequence in which the spacers are defined in the BOM.
This means: AIR1 is used for the first spacer on the BOM, AIR2 for the second spacer on the BOM,
and AIR3 for the third spacer on the BOM.
The assembly position which, as described above, has to be kept for IG with more than two lites,
determines the actual sequence for the transfer (can therefore principally differ from the
sequence on the BOM). It is also used for the correct allocation of muntin patterns and sealants.
Price calculation
There is no automatic pricing (exchange prices) for quadruple IG; prices shall be entered by hand
for the time being.
Details on the handling of quadruple IG by other products (ALCIM, ALFAK) can be found in the
corresponding RN 2011.
ATTENTION: External saving of quadruple IG will NOT be handled. External saving of orders that
include quadruple IG may result in defective order data.


2.5. Spacer
How the IG frame has to be created in the A+W Enterprise article master data depends on many
different aspects within the entire process chain. In addition, there has to be a distinction
between frame, mounting frame (AWE6 QR 09-22), and spacers in the creation. Frames (article


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 27
type 210/211) are composed of spacers (article type 220). The mounting frame is not a frame in
the sense of an IG frame and therefore has the article type 800.
Since the topic of frames runs through the entire process chain, there are also notes about
various aspects in the various configuration instructions.
    a) Quantity unit
        Whether the quantity unit 1 linear meters or 3 millimeters is set doesn't matter at all for
        stock-keeping. Which of the two quantity units is used decides in which quantity unit the
        article is ordered.
    b) Variants
Which different frame variants are offered at the company? Here there are color and thickness
variants. Whether you are working in the article master data without variants, with thickness
variants or with color variants has a significant influence on the entire process chain (entry,
purchasing, stock)
    c) Purchase order
If complete frames are ordered or are the frames produced in-house from spacers. Currently,
spacers cannot be ordered order-related as meter goods. Normally spacers are kept in stock.


    d) Cost calculation
In general, the spacer If the basic quantity unit is 3 - length (mm), the quantities are converted
into linear meters in the material cost calculation.
If the basic quantity unit is 1 - linear meters (lfm), the quanitities are not converted in the material
cost calculation. In this case, this must be done with an appropriate inheritance formula.
    e) Stock
In A+W Enterprise, articles can be created as dimension, color or size variant. In order to treat
articles with size variants correctly in the stock, several settings are required, which will be
summarized in the "Size variants in stock" section in this document. The configuration is described
using the example of the spacer (article type 220).


        2.5.1.           Dimensions for POs
See “EN-CONFIG-A+W Enterprise EDI” and “EN-CONFIG-A+W EnterpriseProductionInterface”.
See also the environment variable RAHMEN_BESTELLUNG_GLASMASS.


        2.5.2.           Spacers in frame POs
See "EN-CONFIG-A+W Enterprise EDI"
See also the environment variable RAHMEN_BESTELLUNG_SZR


        2.5.3.           Mounting frame
[AW-102992] QR September 2022



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   28
External mounting frames are around the outside of the IG unit. They are not between the glass.
External mounting frame should have the following structure in the article master data in order to
be recognized as such:
  Article type = 800 (accessories)
  Frame type 1 (can be selected via toggle)
  Thickness >0 (artikel.staerke)


If an IG has this element in the BOM, then this item is recognized as IG with an external frame and
the sub-elements (glass, frames) are reduced by the thickness of the mounting frame on all edges.
For these parts (tuples) a shape record and a step record are stored.
A mounting frame cannot be used for stepped IG.
The thickness of the mounting frame is associated with the article and cannot be changed in the
order. If another dimension is required, then another article with another thickness must be
created. If the mounting frame in an existing BOM is exchanged or deleted, then the dimensions
of the individual elements will be recalculated.
Prerequisite: important for this function is the presence of correct dimension inheritance
formulas, especially for LAMI
Restriction: Within the item-spanning product exchange, the addition of mounting frames is not
possible.
If the mounting frame should be produced in A+W Production as "non-glass article", then a
generating processing is required.
This function has to be released with an environment variable
IGU_WITH_EXTERN_FRAME (client reference: no)
  Activates the opportunity of IG entry with a mounting frame


2.1. Spacer type
Menu item Master data > Keys > Products > Spacer types > Spacer types can now be used to enter
free Spacer types. An allocation to ALCIB spacer types can be made in the dialog. The ALCIB frame
type is necessary for the correct display of the BOM picture at order entry.
The following options are available for selection:
• Steel:
This is a steel spacer.
• Alu:
This is an aluminum spacer.
• TPS:
This is a thermo plast spacer (TPS).

The dialogs Master data > Keys > Products > Spacer types > Individual names and Master data >
Keys > Products > Spacer types > All names can be used as always to enter translations for the
existing spacer types.


A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                             29
In the item master data, in the Spacer type field, you can select the spacer type for spacer and IG
spacer (item types 210 and 211).
Selection of the spacer type at document entry will influence the display of the glass structure:
different spacer types are shown in different colors.

The spacer type number selected from item master data will be taken into account for production
transfer via OrderXML interface (e.g. to ALCIM). Reports in the production system can also use it
for the transfer to the machine driver. In this case, you will have to check with production before
defining new spacer types.

We have made sure that the present item master data will not become inconsistent. For every of
the four formerly existing spacer types, appropriate records were created in the database.


2.2. Dynamic SR
By default starting with Version AWE 6.0. In AWE 5.4, can be activated with the environment
variable AHAM_DYNAMISCH = ON.
There is another possibility for calculating the SR dynamically in the IGU. The SR is now calculated
in 3 stages:
·     Value from master data (mandatory dimension parameter) - musskenn
·     Collected from the BOM according to the new method
·     Collected from the BOM with formulas from item dimensioning
The last method has the highest priority.
Master data:
A configurable field "Sealing depth" of the type CHAR must be stored in the market partner
master data. For customers with individual sealing depth, this must be entered here.
A configurable field "Sealing depth/Correction" of the type CHAR must be stored in the item
master data. In an ENV switch VTIEFE_TYP_TEST you store the item types separated by "|" for
which you would like to save specifications for the sealing depth. E.g. 240|870. Header article
(Atyp = 200 and spacer 210/211 are always evaluated)
If in the field of the value in shape "4.5" or "6.0" is entered, this counts as basic value. If the input
is in the form "+0.5" or "-0.2", then this counts are a correction.
For IG header items, a dimension correction can be here as well.
Evaluation on entry:
If an IGU is entered, the SR is calculated as follows so the master data was maintained as above.
1. As basic value (default) for the sealing depth (VT) initially $11/2 – frame thickness is always
used (thickness must be present for all frames in the master data). The basic value always applies
only for frames that are defined via the assembly position.
2.   If for the customer an individual VT is stored, it overwrites the default from point 1.
3. If for the associated item frame a value without leading sign is stored for VT, then this
overwrites the default from points 1 and 2. If a value with leading sign + / - is stored there, it
counts as correction.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    30
4. If items in the BOM are defined with an item type that is stored in the ENV switch
VTIEFE_TYP_TEST and if for this a value is defined without leading sign, then this overwrites the
default from point 1, point 2, and point 3. The basic value for the spacer is overwritten in which
these items exist (mapping child parts of spacer with spacer-IP or the spacer association with an
individual assembly position). If the number of the frame cannot be determined, the associated
value is not used.
5.   Furthermore:
a.   possible increases or reduction from items of all item types from the ENV switch
VTIEFE_TYP_TEST that have a correction value (+/-) in the master data,
b.    as well as any corrections are added directly from the header item (e.g. for 3-layer IGUs).
6. The evaluation in the BOM goes from top to bottom considering all sub-levels in the depth
across each BOM element. First 1st glass incl. all child parts, then 1st frame, etc. depending on the
structure of the BOM.
7.    You cannot make the two possible corrections dependent on one another and exclude one
or the other.
8.    If the calculation of the VT is complete, then the SR of the item is calculated from 2 * VT + 2
* frame thickness.
For the calculation, attention is always paid to the assembly position (IP) of the spacer and the
sealing material. The data from the spacer and the sealing material with IP=1 is used for the
calculation of kpos.aham (kposgv.gv11 if necessary). The data from the spacer and the sealing
material with IP=2 is used for the calculation of kposgv.gv12, etc., corrections from the header
item apply for all SRs. If a 3-layer IG in the master data is mapped with only one SR (only $11
variable), then data from the spacer and sealing materials with IP2 is not evaluated.
-    If after the fact in an existing BOM one or several items are exchanged that bring a deviating
VT correction, all affected items are recalculated.
-     If the item (the IGU) was changed by the product exchange, then the VT is determined
again.
-     In case of change of the VT that occurred due to BOM change or product exchange, the
muntin lengths (if muntin lengths are not calculated according to glass dimension) and the
dimensions of the inner frame are recalculated. If the special logic for masking is active, the
associated data must be checked and adjusted manually.
-    A manually-changed SR remains valid until a BOM change that changes the VT is
undertaken. It is also always taken over into the following items with the same BOM.
-     If reference is made to an order or a quotation, the SRs from the original order are always
taken over unless the customer in the new order is not the customer from the reference and an
individual VT is stored for one of the two. In this case, all IG items are recalculated.
If the ENV switch VERSIEGELUNG_ANZEIGEN is active, then for each IG item in the middle dialog
area below the product group over the character string "Rah x.xx / Ver x.xx" the distribution of
the SRs is displayed.
The new logic can also be combined with the existing logic for SR inheritance, which can be
controlled by an ENV switch. Thus the person entering the data is also informed by messages
about the change of the SR e.g. during the BOM change.
AHAM_VERERBEN_MIT_ABFRAGE = ON controls the messages for SR changes. Caution, if manual
SR changes are overwritten via SP in production.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                    31
VTIEFE_TYP_TEST = xx|xx List of the item types for which the data is sought.
VERSIEGELUNG_ANZEIGEN: display in the item.


Here are the brief instructions for the configuration:
Environment variables
AHAM_DYNAMISCH = ON              - activates the new logic (only required in AWE5)
MODUL_VERSIEGELUNGSTIEFE = ON            - manual Sealing Depth in the order entry (since 2011, as
basis for the new logic)
VTIEFE_TYP_TEST = 240          - additional article types for which a sealing depth can be stored;
separator |; not 200 and 210/211, special logic applies here.
AHAM_VERERBEN_MIT_ABFRAGE = ON              - Message in case of change of the AHAMs in the order
entry
IVERSIEGELUNG_ANZEIGEN = ON              - for each IG item, the distribution of the SRs is displayed
in the middle area of the dialog below the product group with the character string "Rah x.xx / Ver
x.xx".
ISO_RAHMEN_MODELL = ON           - Must be active


Market partner master-configured field "Sealing depth", type CHAR
Article master - configured field "Sealing depth/Correction", type CHAR


Replication of the configurable fields in the market partner and article master data deactivated.
RP_ARTPRVFLD              ON
RP_MPPRVFLD               ON


Places after the decimal point for BOM articles (frames):
MASSFELD_RUNDUNG                1
IMP_CTRL_NTEL_MM               10


Stored Procedures
SP cupmawpvtiefe must be deactivated on the Alcib side. Then update record for SP
cupmawpvtiefe to frei = 0.
On the Alcim side, SP cu_setkundenvtiefe must be deactivated.


Processes
Restart of intauf, OrderXML service, and Alcim import (under some circumstances, several
imports)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   32
2.3. Sealant Type
In Master Data – Keys – Products – Sealant types, individual sealant types can be created. This
sealant type can then be entered in the item master data of the sealant.


An OrderXML file for an item including an IG lite will contain sealant data such as article number,
description, and sealant type (section SEALANT).
These data is determined based on a sealant article in the A-W Enterprise BOM. Preferably, the
sealant article should be on the same BOM level as the spacer and have the same assembly
position.
Sealant in a standard A+W Enterprise BOM has a predefined structure: The sealant itself is a
META element (article type 240, element flag 2) the BOM of which includes an element (article
type 240, element flag 1) and a processing step.




Figure 1: Sealant meta element

Generally, the sealant data for the OrderXML file is defined for the article number of the META
element.
A new A+W Enterprise environment switch now defines that the data of the sealant's article
number is defined by its BOM
If the determination of sealant data should be based on the element, the A+W Enterprise
environment switch ORDERXML_VERSIEGELUNGSDATEN has to be enabled, and set to '1'.
The switch was introduced in versions 2009 and 2011 with a patch version for the ERP web
service. The version code in the actual OrderXML file shows whether or not it is analyzed in the
customer's system:
For Version 2009 it must be 3.5.13 or higher and for Version 2011, 3.6.2 or higher.


2.4. Foil type
Under the menu element Master Data > Keys > Products > Foil types all designations individual
foil types can be created.
In the item master data, you can select the foil type for LAMI foils FD in the Foil type field (article
type 176).
The item's article field provides a new opportunity to search for multi-lite units. Use the hotkey
<Shift>+<F8> to start the search dialog. First select the article type you want to search for


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    33
(IG/LAMI/cast resin). Now select one or two lites; this can be done by hand, by selo, or using the
buttons. If the field for the first lite remains empty, the system automatically starts to search for
the element.
For laminated glass, you can also enter the film type as a search criterion. The foil type has to be
kept in master data > Keys and must be allocated in item master data.
You can use the AIR to search for an IG unit. If you enter the AIR, the system will find only
products with the corresponding AIR1 or AIR2 or AIR3 as a compulsory size.
The minimum input for the search is the product type and the glass. The system will search for all
products showing the glass element (or both) in their BOM. The sequence of the lites acc. to
assembly position - does not matter.
Please note that for laminated glass, only the first foil will be checked. If the first lite of a
laminated unit includes several foil layers, there will be no check. In this case, the airspace will be
marked by an asterisk in the results table.


2.5. Fitting type
In the item master data, you can now store a fitting type for articles of the article type "Fittings
(830)". The new Fitting type field is below the Article type field and can only be entered for fitting
articles.
The fitting types that you can store in this field via <SELO> can be maintained under the product
keys.
The fitting type goes into the generation of the SN key.
Menu paths:     Master data⇒Article


Creation of master data:
MASTER DATA⇒KEYS⇒PRODUCT KEYS⇒ FITTING TYPES⇒FITTING TYPES,
MASTER DATA⇒KEYS⇒PRODUCT KEYS⇒ FITTING TYPES⇒INDIVIDUAL DESCRIPTIONS
MATER DATA⇒KEYS⇒PRODUCT KEYS⇒ FITTING TYPES⇒ALL DESCRIPTIONS




2.6. Muntins
        2.6.1.           Muntin type
The meaning of the muntin type for production is documented in the separate documentation of
the production transfer "EN-CONFIG-A+W Enterprise Production Interface."
In addition, there is a definition of the terms in A+W Intranet
„KBase+ > A+W Clarity-General Information: > Glossaries > German / English > Muntin types ”




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   34
CAD Designer (Bars) (AWDesign)
A decision about how the muntin cross must look will be made in AWDesign about milling depth
and trim value. Some of these values emerge from the ALCIB types. Only for special types is a
specification in the master data actually necessary.
The following muntin types were previously specified:
   -   Type 1 Muntins with double miter at the intersections




   -   Type 2 Crossbars, horizontal and vertical muntins have blunt connections to the
       crosspieces




   -   Type 3 Vertical muntin continuous, horizontal muntin with overall miter (all muntins are
       continuous, the horizontal muntin has a notch into which the vertical is placed)
       Note: Not yet recognized in AWDesign

   -   Type 4 Horizontal muntin continuous, vertical muntin with overall miter (all muntins are
       continuous, the vertical muntin has a notch into which the horizontal is placed)
       Note: Not yet recognized in AWDesign

   -   Type 5 Vertical muntin continuous, horizontal muntins with blunt connection to the
       vertical ones




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                               35
    -   Type 6 Horizontal muntin continuous, vertical muntins have blunt connections to the
        horizontal ones




    -   Type 7 Horizontal and vertical muntins are continuous (glued to one another)

These types are currently implemented for the transfer to AWDesign in the following continuous
muntins


        1          in 0 none is continuous (milling depth should be set, trim value 0)
        2          in 0 none is continuous (trim value must be set, milling value arbitrary)
        3          in 3 all are continuous (must still be defined)
        4          in 3 all are continuous (must still be defined)
        5          in 2 verticals are continuous (trim value and milling depth are 0)
        6          in 1 horizontals are continuous (trim value and milling depth are 0)
        7          in 3 all are continuous (trim value and milling depth are 0, muntins are glued
                   over one another)




Muntin patterns
#200052 05/2011
You can enter muntins as well as grill patterns in the master data. For the muntin type, choose the
entries 500+<Muntin type> to be used for muntin calculation. Please note that the muntin type is
analyzed only for meta element muntin articles. For all muntins of the type 500+<Muntin type>, a
customized stored procedure "getGeorgian" is called, which presets the number of horizontal and
vertical bars according to the dimensions.
If at least one of the item sizes is changed afterwards, the standard setting for muntins is
recalculated, and the user is informed accordingly. After that, the vertical and horizontal quantity
can be adjusted manually.
Since muntins can be entered before the item sizes at quick entry/in ICAN, manual input of the
number of bars is impossible for bars of the type > 500 here; you have to enter the item size first.
Even here, you can change the calculated number of horizontal or vertical bars. If this happens, a
change of size will result in the recalculation of quantities, and the user will be informed.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   36
If the calculation via the defined stored procedure fails (SP returns an error code), the error code
is displayed, and the program goes to the muntin input dialog.
Just one bar of the type>500 is allowed per grid; it cannot be combined with other bars either.


The SP
getgeorgian(p_artnr int, p_laenge decimal(8), p_breite decimal(8),p_szr decimal(8))returning
smallint, char(80),smallint,smallint;will be loaded.


Transferred parameters are muntin article number, length and width of the lite, airspace.
Expected return values:
    -    Returncode: 0 = Success; 1 = Error
    -    Error text
    -    Horizontal number
    -    Vertical number




2.7. Fixed products vs. Product sets
In addition to the normal article master data, in A+W Enterprise, there are 2 additional
possibilities for creating "article master data" - "fixed products" and "product sets."
Overview of the functions of both functions
 Function              Fixed products                   Product sets
 Database storage      Normal article master data       Table as for orders etc. with own
 structure             with additional tables           "document" (14) in table kauf
 External EDI          No dimension changes                 -   Only one item per product set
                                                            -   No BOM change
                                                            -   Only header articles can be
                                                                exchanged
                                                            -   Name may not contain the
                                                                following characters
                                                        ' ' (0x20)     space (SPC)
                                                        '\t'    (0x09) horizontal tab (TAB)
                                                        '\n'    (0x0a) newline (LF)
                                                        '\v'    (0x0b) vertical tab (VT)
                                                        '\f'    (0x0c) feed (FF)
                                                        '\r'    (0x0d) carriage return (CR)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  37
                                                          Further details in „EN-CONFIG-A+W
                                                          Enterprise EDI” and “EN-A+W EDI Import”
    iQuote              Available                         Not yet available (04/20/2023)
    Price calculation   Normal price calculation          Fixed price can be specified directly in the
                        functions                         product set (SASHPREISARTIKEL) or
                                                          normal price calculation functions.
    Use in the order    As item and in the BOM            As item




2.8. Article dimensioning
The individual A+W modules (A+W CAD Designer Shape, iTOE, A+W Production) are working ever
more closely via the A+W processing types. Here, the parameters defined by A+W are decisive.
The parameters that are specified per A+W processing type in the A+W processing catalog are the
minimum of parameters that are required for a correct interplay of the modules. Even if a "0"
(zero) is a valid value for individual parameters, this parameter may not be set to "no". This can
result in production errors.
For this reason, starting in January 2024 in the master data in A+W Enterprise (dimensioning
parameters), a warning is output if a parameter is set to "no" that must be there according to the
catalog. The setting is not suppressed, but there is only a warning since it can be that this article is
never used, e.g. with iTOE comparison. If it is changed despite the warning, then the responsibility
lies with the customer.


           2.8.1.        Restriction Formula
When an article was dimensioned, a new text field used to be added for each of the ten size
parameters and the three item parameters. It is possible to enter a restriction formula for the
corresponding parameter.
If the formula syntax is not correct, the system will issue an error report. This check is run by the
A+W Enterprise formula interpreter. It does not check however whether a formula variable makes
sense at this point. The formula interpreter has been amended so that it can handle the article
dimensioning variables ($W1 - $W13). The formulas will be analyzed at document entry.
These fields allow you to enter a valid formula. You can combine two restrictions with "&" or
"and" (and) or „|“ or „or“ (or).
The following operators and comparison operators can be used:
+     Addition
-     Subtraction
*      Multiplication
/      Division
=     equal to
<     less than


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   38
>   greater than
<= less than or equal to
>= greater than or equal to
max (x, y) the greater value of the two
min (x, y) the lesser value of the two
pi constant Pi (3.415926)


Example:
•       The diameter of a hole may be maximum 10 mm
        $W1<=10
•       The diameter of a hole must be between 11 and 50 mm
        $W1>10 & $W1<=50
•       The diameter of a hole must be more than 20 mm from the edge
        $W4>20             $W5>20
•       The diameter of a hole may be maximum 1% of the lite size
        $W1>$1/100 and $W1>$2/100
•       The edge lengths of a corner cut-out must be at least 50 or 60 mm
        $W1>=50         $W2>=60
•       For a countersunk hole, the diameter at the top must be greater than the diameter
        $W2>$W1


At document entry we distinguish compulsory restrictions and optional restrictions. If a restriction
has been defined in master data for a compulsory parameter, this restriction becomes
compulsory; the user has to change his entries if this restriction is not met. This is a compulsory
restriction as defined by A+W Enterprise. If a restriction is defined for a „variable“ parameter, a
valid entry is not compulsory. This is a compulsory restriction as defined by A+W Enterprise. But
even in this case, the system will inform you should this restriction be violated.
When you open the parameter field, the restriction formula appears as a ToolTip. (This function
must be specially enabled by environment variable RESTRIKT_TOOLTIP.) The $ variables are
replaced by the appropriate names so that the user can understand the formula easily. This
information is correct only for the current field; the Tooltip shows no restrictions for other
processing steps.
When you enter the item, the restrictions for the processing parameters will be checked. This
check is made right after a parameter (for which these restrictions have been defined in master
data) is entered or changed. This check is different for the input in ALCIB and I-CAN.
In I-CAN, the parameter can be entered before the item sizes are defined. The restriction formulas
may also show a dependence on the item's size parameters (e.g. $W4>=$1*/100). This way, I-Can
will temporarily "prepare" the restrictions if the item has not been dimensioned yet. Only the
restrictions and violations directly referring to the processing size, will be checked and reported.
(If the restriction has been defined e.g. as: $W1>1 & $W1<$1/ 100 & $W1<$2/100 and the item


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 39
sizes are unknown, the restriction will be temporarily reduced to $W1>1, and checked in this
reduced shape). You can quit this dialog however. The final check will be made later, in
connection with the general restriction check when the item's sizes and all processings are known.
All „violated“ restrictions will be reported to the user. If not all of the COMPULSORY restrictions
have been met, the user will find himself back in the BOM menu where he can change the
parameters. This process is repeated until all compulsory restrictions are fulfilled.
In A+W Enterprise, the check will be made on the processing dialog on which all sizes of the item
and of all the individual elements are known. Since the restriction formula can also define a
dependence between processing parameters (e.g. $W1>$W2), just one message will be issued
when you leave a size field for which a restriction has been defined. Only when you leave the
processing dialog will the final check of all parameters be run. Violation of an optional restriction
will be reported now. Violation of a compulsory restriction will prevent you from quitting the
dialog.
If a compulsory restriction has been defined in master data which refers to a non-existent
parameter, this will not be considered a compulsory restriction.
ICAN only checks restrictions for parameters that can be entered in ICAN acc. to PMS-TYP
(maximally 2).
Important for ICAN: To keep a compulsory restriction in ICAN, only the restrictions for the
processing parameters that can be entered in ICAN shall be checked: no comparison with the
variables $W3 to $W13.
Reports for restriction violations are made dynamically, in the same way as the reports for item
sizes; the $ elements in the formula being replaced by the corresponding name: $1 – width, $2
height, $2 etc. by names from the database table MUSSKENN. $W(x) acc. to the name defined in
the dimensioning record.


2.9. Change in Stock
If an article is in stock, it should be defined how the stock changes. This also has direct effects on
the inventory forecasting and thus on the PO proposals. Only released orders are incorporated
into the inventory forecast. In the "A+W Enterprise Clarity Experience - Stock" module, it is now
possible to inform yourself about how much storage space is required for unreleased orders. See
also "EN-CONFIG-A+W Enterprise CX Stock“ section "Inventory forecast for unreleased orders"
The following settings can be made.
None: Only manual additions and removals are permitted. There is no inventory forecasting for
these articles.
Manual: Order-related additions and removals are permitted. One inventory forecasting can be
made for these articles.
Delivery note: Goods removals from the stock are booked as soon as the delivery note is
generated. This change of stock is impossible for the stack and box stock. One inventory
forecasting can be made for these articles.
Picking:
Stock withdrawal will be booked when the picking list is printed. One inventory forecasting can be
made for these articles.
AWP: The inventory in the stock forecasting is updated. The actual inventory in the stock is not
changed.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   40
Completion message: The inventory in the stock forecasting is updated. Stock removal on
completion notification.
Delivery note/AWP: if the article is entered as header article, the removal is done on delivery
note generation. BOM elements are incorporated into the stock forecast.
Stock withdrawal will be booked as soon as the delivery note has been issued. The production
management system transfers forecasts to inventory which are used for early purchase forecasts.
The actual change of stock is made manually or by means of special interfaces (XTV).
This change of stock is impossible for the stack and box stock.
Manual/AWP: if the article is entered as header article, an order-related removal can be done.
BOM elements are incorporated into the stock forecast.


2.10.           Production time/replacement time
The production time in the article master data serves for articles with the procurement type
stock/production for calculation of the re-procurement time in case of stock shortfall (Inventory
forecast => PO suggestion). For articles wiith the procurement type production it is checked
whether there is enough time available between today and the delivery date calculated by A+W
Enterprise. If the time frame is shorter, an appropriate warning is displayed for the user. During
the check, not the real production time that is determined during scheduling of the order by the
capacity planning is used, but rather the one stored in the master data.
For the number of days, these are calendar days and not working days at my company or the
supplier.


2.11.           Supplier allocation
Within the article and within variant assignment, a supplier and a price can be entered. This price
is suggested for the manual stock addition if you enter the supplier.
With appropriate configuration (environment variable LIEFERANTENPREISE), this price is also used
in the purchase price calculation.


2.12.           Special configurable fields
 Field                 Function                                                         Release
 AWPStockCheck         Inventory check on import / scheduling                           alrpc -
                                                                                        13.04.9287
                       The function is documented in "EN-CONFIG-A+W
                       EnterpriseProductionInterface".




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 41
2.13.           Fixed private fields
In the article master, in addition to the "configurable fields" there are 4 fixed private fields - two
of the type long and two of the type char. Labels can be assigned for the fields via the
environment variables ARTIKEL_LABEL<n>.
The evaluation of the fields is customer-specific. However, there are some "customer-specific"
program logics that are linked to these fields.


private_long1 = 1 => No processing price calculation
        SN_KEINE_BEARBPREISE (client reference: no)
          If this environment variable is active, then in the document entry, no sales processing
        prices are calculated for header articles that have a 1 under MASTERDATA =>ARTICLE in
        the field artikel.private_long1 field.


2.14.           Article remarks
Within the article master data, remarks can be entered with the priority "high"; these are
displayed during document entry.
By default, these remarks are only displayed for articles on the item level. For subelements, the
display of the remarks can be controlled using the "Subelement" field on the "Phys. properties"
tab. Only if the value "Yes/with remark" is stored there are the remarks displayed during
document entry. However, this only occurs if the article is swapped into or inserted into the BOM.
If an article with remarks is already in the standard BOM, the remark will not be displayed.
alcib - 13.04.18948 / Nov. 2024
With the environment variable ALL_BOM_REMARK, it is possible to control that article remarks
are also displayed if the article is included in the standard BOM.
= 'MP' - market partner article remarks will also be displayed for swapped in/inserted articles in
the BOM
= ALL - only general article remarks are also displayed if the article is included in the standard
BOM
= ALL+MP - general article remarks and market partner article remarks are also displayed if the
article is included in the standard BOM.
Here too it applies that only remarks with the priority high are displayed.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   42
3. Exchange/additional rules
3.1. Exchange/additional rules tab




Figure 2: E/A rules


         3.1.1.           Left side of dialog
    •    Knd-Artnr (kuaz.kuartnr)
         If the field "Kundenartikel“ is filled, the rule is only evaluated during entry if the entry of
         the item is done via the customer article. Even if there is incidentally a unique assignment
         for the ALCIB article and customer. In addition, filling out this field also affects the
         external EDI. (see also "EN-CONFIG-A+W Enterprise EDI")
    •    ProduktTyp (starting with Version A+W Enterprise 6)
    •    If you would like to specify a rule for the entire product group, you can now do this with
         the ProdTyp field. ProdTyp is the article type from the article master data. If you specify a
         product type, you can no longer fill out the Product field.
ESG article XXX should get an additional article Y1 if this TG is a child part in the BOM of an IG and
the additional article Y2 if it is child part of a LAMI.
 Left side of the rule                                         Right side of the rule
 Product                 ProdTyp     Section       Product     Product                   R/A
                         200                       XXX         Y1                        Z
                         170                       XXX         Y2                        Z
IMPORTANT!!! Here it must be noted that with the entry of a product it is determined
automatically that the item XXX is a child part. The "Area" field should either remain empty in this
case or be assigned "only header".
             Combination of the criteria ProdTyp and Bereich
A combination of product and child part is also possible. Thus, for example, the following rule can
be created:
In one or all TGs, item A should be replaced with item B
or item A should receive an additional item C, but only if the TG itself is installed as child part
 Left side of the rule                                         Right side of the rule
 Product                 ProdTyp     Section       Product     Product                   R/A


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   43
 Left side of the rule                                          Right side of the rule
                         150         Child Part    A            B                        A
 350005                              Child Part    A            C                        Z
IMPORTANT!!! Here it must be noted that the last rule will not always be suitable for complex
BOMs. Here as product/product type only the immediate parent of item A is evaluated. Thus, for
example, you cannot cause an exchange of the glass within a LAMI if the LAMI is installed in an
IGU. Here, for example, a LAMI meta-glass level can prevent the exchange. If a processed LAMI
header item itself consists of a LAMI item on the 1st level, then the exchange will also apply if
processed LAMI is entered as header item.
    •   Product (kuaz.prodnr)
        The field "Produkt" is filled with the header article. The field does not absolutely have to
        be filled, but only if the rule is to be applied specifically for the article.
    •   1x
        The field "1x" means that the rule is only executed once in the product. This way, it is
        possible that in the IG a float e.g. 110005 is replaced with a processed float 150005, even
        if this processed float itself has the article 110005 in the article's BOM.
    •   Atyp (kuaz.atyp) / Artikel (kuaz.artnr)
        The fields "Artikeltyp" and "Artikel" are alternative fields that specify which parts should
        be exchanged or where an article gets an additional element or an element is removed.
    •   EP (kuaz.orgpos)
        Filling out the field "Einbauposition": has enormous significance. Especially for glass
        articles or frames. This entry has to correspond to the entries for AP on the right side of
        the rule. If the exchange should apply generally, regardless of the AP within the BOM,
        then AP on the left side can be omitted. Then, however, the entry should not be made on
        the right side. Furthermore, it is very important that the assembly position in the master
        data be well-maintained. For the exchange of frame articles, it is absolutely necessary to
        specify an assembly position.
    •   In addition, filling out this field also affects the external EDI. (see also "EN-CONFIG-A+W
        Enterprise EDI" and "EN-A+W EDI Import")
    •   Kopf => Starting with version A+W Enterprise "Bereich"
        The field "Kopf" (starting with Version 2011) should only be filled if a rule should only be
        applied for a header article. E.g. an article "Stempel" should be added in a TG as
        additional article, but only if the TG is entered as header article (not if the TG is
        component of an IG).
Starting with A+W Enterprise 6
In the area of the exchange/addition rules, new possibilities were created for creating the BOMs
automatically. The last inserted field "header" has been renamed "area" and provided with new
versions. Thus it is now possible to control when the rule should apply:
    •   only if the specified article is a header article in the item,
    •   only if it occurs as child part of the BOM or is swapped in
    •   or always (no entry in the field).
Thus the following rules can be created:



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   44
TG item XXX should receive an additional item YYY if this TG occurs as child part of the BOM of the
IGU or LAMI or if it is swapped in.
 Left side of the rule                                   Right side of the rule
 Section                 Product                         Product                      R/A
 Child Part              XXX                             YYY                          Z


Of course you can also store this rule as exchange rule.


        3.1.2.           Right dialog side
    •   ARticle (kuaz.azartnr)
        The field "Artikel" on the right side contains the article that should be inserted as addition
        into the BOM or exchanged as new article or should be deleted.
    •   E/A (kuaz.azkz)
        In the "A/Z" field, the action (exchange/addition) is specified.
    •   EP (kuaz.pos)
        For the "EP" field, see AP left dialog side.
    •   Structure, A1 (kuaz.anz1), A2 (kuaz.anz2)
        For exchange or addition, the color, quantity, etc. can also be pre-populated.
    •   D (kuaz.druckkz)
        The print identifier in field "D": determines which print identifier the article gets in the
        BOM.
        N – No - No output
        Y – Yes – Output on all papers
        V – Sales – Output only on sales papers
        P – Production – Output only on production papers
        Q – A+W iQuote – Display in A+W iQuote but no output on papers (only for processings)
    •   P (kuaz.azpreis)
        The last field "P" = price effect determines whether the item should get an "addition"
        identifier in the BOM and thus be incorporated into the price calculation. The variant "O"
        means that the original identifier is taken over. If the exchanged article was on E/A in the
        master data BOM due to the price calculation, the new article will inherit the identifier.
        See also section "Possibilities for price control"




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     45
          3.1.3.             Details tab




Figure 3: Details tab in den E/A rules



The standardizing of processings has an effect on the exchange/addition rules. The data has also
been expanded here to include all parameters already listed above and the A+W processing type
field.
When creating a rule, you can already specify all processing parameters intended for the article.
Next to each parameter field, there is a checkbox so that you can select whether the parameter in
question should be evaluated. This is very important if, due to an exchange/addition rule an
article can also take on 0 as a valid processing dimension (or quantity).
In the exchange/addition rules, you can also include the supply type for exchange or additional
articles. Only "real" supply types are accepted; in contrast to the selection of supply types for
BOMs, there is no supply type "none". The field is always pre-populated with 0, which means that
the supply type is loaded from master data. For exchange articles, the supply type is taken over
from the original article from the BOM; for addition articles, from the article master data.
(Starting with Version 2011, there is also a DB field for the supplier, which is evaluated. There is
still no input possibility in the foreground).
alcib - 13.04.10373 (June 2021)
For product exchange via exchange/addition rules, with manual entry of the customer's desired
supplier it is always taken over if for the product the supply type = "PO" is permitted (one of the
possible supply types). For EDI orders, by contrast, the desired supplier is taken over if PO is
created as the preferred supply type. With a setting, you can adjust the logic for EDI orders to the
manual entry and here too have the desired supplier taken over if one of the supply types for the
product is "PO."
Sequence of the evaluation
First the data is sorted in the table kuaz according to 'type of the rule'; after that, the customer-
specific rules are processed and then the general ones.
First the order-related, then the customer-specific, and last the global rules.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                                  46
        3.1.4.           Deleting by E/A/D rule
In certain situations, it might be necessary to delete an article from a BOM.
A delete rule can be defined in the exchange/addition rules for this purpose.
Possible variants:
    •   Product Article | Article E/A
        99350005 99350005 | 399006 D
        Article 399006 is removed from the main article(!) 99350005.
    •   Product Article | Article E/A
        99500066 99350005 | 399005 D
        Article 399005 is removed in main article 99500066 from sub-part 99350005.
    •   Product Article AP | Article A/Z
        99500066 99350005 1 | 399005 D
        Article 399005 is removed in main article 99500066 from sub-part 99350005 in AP 1.
    •   Product Article AP | Article E/A AP
        99500066 99350005 1 | 399005 D 1
        Article 399005 with AP 1 is removed in main article 99500066 from sub-part 99350005 in
        AP 1.
Since these delete rules are very dangerous, they must not be used globally, but only referring to
a main article!
This means that article 399006 (example a) is removed from article 9935005 only if it is the main
article, and not part of another article. Otherwise, the delete rule must be defined as shown in
example b.


IMPORTANT! Neither the delete rule, nor the E/A rule can be applied to several BOM levels.
Article X will be deleted only from the BOM of the article that is entered in field Article on the
left side of the defined rules. It is therefore impossible to delete a film from a laminated lite that
is set to AP 1 in the IG unit if the film is not part of the laminated glass articles's BOM but belongs
to the level below.
We recommend to specially define article types deletion of which depends on a delete rule.
PLEASE NOTE: A delete rule will be applied when the BOM is loaded; the new BOM appears right
after loading. This is different if the BOM is changed by hand: All references are known only when
you leave the BOM which is why this is the point at which the system checks whether an article
should be removed from the BOM. This program behavior is a bit complicated and will be
simplified in one of the next ALCIB versions.
Switch AZ_DELETE_TYP: Separated by | these are article types that can be deleted.
If value = 1000, all article types can be deleted.
Extension of the DELETE exchange/addition rules
A DELETE command can also be defined for an article type, not only for a certain product as
before. The article type is used as the parent article's article type in this case. The following things
must be obeyed in connection with these DELETE commands:




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    47
If article A is to be removed from the BOM of article B, type XXX always (provided that article A is
part of article B), only enter article type XXX of article B on the left side of the rule, and article A
on the right side. If article A is to be deleted only if every article B, type XXX has been entered as
the main article, mark this DELETE rule as „for main article only“.
We have to point out however that DELETE rules are not active in the system in general even if
they have been defined in master data. They have to be enabled by the switch AZ_DELETE_TYP.
We also recommend configuring the system so that just a few article types are automatically
deleted from the BOM by means of exchange/addition rules


        3.1.5.           Transfer size parameters
Processing dimensions can also be transferred to BOM articles via E/A rules.In the MODE screen
for E/A rules in the order or under MASTER DATA=>KEYS=>PRODUCT KEYS=>E/A RULES, you can
enter processing dimensions for articles. (In the key section, this is the second line on the right
side of the menu, accessible via <MODE>). You can enter the drilling diameter for instance as
processing size 1 / 2. However, entries in these fields make sense only if there is no automatic
presetting by means of article dimensioning (as for edgework). The same applies to position sizes.
The field 'processing vector' is important too. The transfer data are only relevant for edge/corner-
related articles. You can define how the edgework shall be applied:
        0: none
        1: bottom
        2: top
        3 : both
The values are known from the processing menu in the order. The vector consists of 10 elements,
each defining an edge/corner acc. to the edge sequence in ALCIB. This means that for a rectangle,
the first four digits are relevant. Processing vector 1111000000 means processing of all edges at
the „bottom“. Vector 0303000000 means that only vertical edges will be preset „both“.


IMPORTANT! Qty1 and Qty2 do not have to match the processing vector since they refer to
pricing only while the vector is relevant for production.Qty1 and Qty2 do not have to match the
processing vector since they refer to pricing only while the vector is relevant for production.
These entries cannot only be made in the new E/A rule for an order, but also for existing (general
or customized) records. Item analysis only adopts the sizes defined by dimensioning parameters
(table ‘nsteuer’) of the article in master data.
At order entry, the E/A rule menu now shows the rule type. Whether the rule is
general/customized, order-related, or item-related (automatically created by a manual change of
BOM).
IMPORTANT: The following cases cannot be handled:
    •   Analyze AP on the left side of the E/A rule. (to be included in one of the next ALCIB
        versions)
    •   If two identical articles with different processing sizes are created in the BOM via R/A,
        only the sizes of the first article will be accepted.
    •   Processing sizes can be entered for all E/A articles, no matter whether the processing
        sizes are necessary or valid.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   48
        3.1.6.          Possibilities for price control
When entering exchange/addition rules, the entry in column Price defines whether the new
article shall be added to the BOM, plus the corresponding exchange codes. This is essential for
pricing. So far, the options for exchange articles were:

    1. O: <Original>: Adopt the exchange code of the original element.
    2. N: Remove exchange code - the article would be excluded from pricing.
    3. J: For BOM elements for which no exchange codes were set, the code will be set to R
       (exchange); otherwise, the original entry will be adopted.

Since the introduction of quick entry (ICAN), the exchange code of the product (main article) also
defines whether this shall be visible and changeable in quick entry, there are new options for
defining the price code in exchange/addition rules:

    1. E: Always mark the new article as an exchange article (thus making it invisible in the BOM
       at quick entry)
    2. A : Always mark the new article as an addition (thus rendering it visible in the BOM at
       quick entry)


        3.1.7.          Exchange for itself
The exchange for itself was only implemented for sense of pattern and assembly position. That is,
only if within the E/A rule the sense of pattern or assembly position changes will the rule be
applied correctly.


QR June 2024 // [AW-194382]
You can, by creating the E/A rule for an article, store for themselves not just the processing
parameters, but also other properties for an article. Until now, the exchange for itself for glass
was limited to glass for the exchange of the assembly position and sense of structure.
Now it is also possible to control the print code and price code this way.
To be noted here is that you cannot store any contradictory details. If an article is insert via E/A
rule into the BOM and there is also an exchange for itself, then the codes for print and price are
taken over from the exchange record.


        3.1.8.          Change of order
#461378 (QR: 11/2020)
The E/A rules that are related to a product are only loaded when this product is entered, so that
the system is not burdened with other rules that are not needed. However, this leads to the fact
that in the case of a correction of a document, the applied rules are no longer loaded. This can
lead to the fact that the desired exchanges in the parts list no longer take place. The program
behavior has now been adapted and when loading a document all E/A rules of the products in the
document are loaded.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     49
        3.1.9.          Internal EDI
Within the internal document transfer, the application of the E/A rules can be activated. To do
this, the environment variable NEUKAUF_NEU must be activated. The configuration can be done
site-specifically.
If the evaluation of the E/A rule is active after the internal document transfer, these can be used,
but only in a very limited range of functionality, because they are applied to an existing BOM.

A+W Enterprise supports the following functions of the E/A rules within the internal document
transfer:


        3.1.10.         Replacement of the item article
When the item article is exchanged via the E/A rules, the item article is completely replaced and
any changes made to the BOM in the sending site are lost. The exception to this are muntins,
which are automatically taken over when IG is exchanged.


        3.1.11.         Exchange of a simple element in the BOM
When exchanging a simple element within the BOM, please note that the exchange may only be
made between equivalent articles. Thus, for processings, it has to be ensured that the processing
parameters between the original and the new (exchanged) article have the same meaning and
that all 3 dimension variants are allowed in the master file even for dimension type-relevant
processings. The BOM elements may not have their own BOM.
#459029: Up to now, the quantity1/quantity2 was always taken over from the existing BOM.
However, if an element with a unit price is exchanged for an element with a linear meter price by
means of an E/A rule, the price after the exchange is not correct. For this reason, entries
regarding the number of exchange articles in internal EDI orders are now also evaluated and
transferred from the E/A rule. If this is a processing with AW type from the area of drilling, surface
or geometric processing, the number in the BOM is always 1, even if other values follow via E/A.


        3.1.12.         Exchange of the processing parameters
It is possible that during processings only the processing parameters are changed using the E/A
rules. Here an element of the BOM is exchanged for itself and only the parameters are
overwritten in the receiving site.
With the current version (QR November 2020) the functionality was extended. Instead of only the
first 2 parameters (as up to now), all processing parameters and also positioning parameters are
evaluated.
June 2025 - alcib - 13.04.20475 The article description is also taken over from the stored rule.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  50
        3.1.13.         Additional element for the item article/product
            type
You can also insert a simple additional element on the 1st level of the BOM. This rule is called only
once for the item article if it has not been replaced by an exchange rule (see 1.).


        3.1.14.         Supply type alcib - 13.04.10373
(Juni 2021)
For product exchange via exchange/addition rules, with manual entry of the customer's desired
supplier it is always taken over if for the product the supply type = "PO" is permitted (one of the
possible supply types). For EDI orders, by contrast, the desired supplier is taken over if PO is
created as the preferred supply type. With a setting, you can adjust the logic for EDI orders to the
manual entry and here too have the desired supplier taken over if one of the supply types for the
product is "PO."
Environment variable INTAUF_DFUE_WUNSCHLIEFERANT


        3.1.15.         Transfer article description
June 2025 - alcib - 13.04.20475
You can enter an article description when defining a exchange/addition rule. The article
description can be entered in the MODE menu (right side of menu). It will be included in the BOM
when the E/A rules are analyzed.
Please note: If the internal transfer between clients with different article names takes place (e.g.
other language) and the obtaining of the local article names for the client is active
(NEUKAUF_NEUE_TEXTE), then the local names are obtained from the master data for all BOM
elements. Thus, the name is not taken over from the E/A rule.



        3.1.16.         External EDI
see also "EN-CONFIG-A+W Enterprise EDI"




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  51
4. Article search
Within A+W Enterprise, you can search on various dialogs for article numbers (article selo). How
the dialog for article search looks and how it behaves can be configured.
ARSELO_SEARCH_UPPER (client reference: no)
The environment variable activates the search within the article search regardless of the
capitalization. So that the non-case-sensitive search can be activated, the current environment
(LIBS/mfo/arseloneu*,mfo) must be installed (#405083)
ARTSEARCH_WITH_LONGNAME (client reference: no)
The variables switch on the possibility within the article search of searching for the long article
name (artbezfremd.langbez).
PF [AW-117222] / QR 22/11
ARSELO_ALT (client reference: no)
This environment variable deactivates the sensitive article search.


TYPAUSTAUSCH_OHNE_TEST (client reference: no)
If in the BOM, you search for an exchange article via selo, then the selection is restricted
immediately to the appropriate article types by pre-populating the start value for article type. By
default, there is also a check whether the exchange article is replaced with an article of the same
type, which can cause serious consequences in production. However, you can also switch this
check off. If the check is switched off, then the pre-population of the article type on the search
dialog is removed for all BOM elements (except glass), so that all articles are immediately
available for selection.
[AW-139425] / QR 2304




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    52
5. Shipping area / routes
#196831 - MODUL_REGIONALROUTEN
Dialog Post codes in Master data > Keys > System > Post codes now offers another column,
Shipping area. For every post code, you can enter a shipping area as defined in Master data > Keys
> System > Dispatch > Shipping areas. The post code header dialog has been completed by
another selection criterion in order to search for the shipping areas.
The shipping area can be used to link a post code and a route.
In the addresses in partner data, in Master data > Partners > <F4> > Contact data > Addresses, this
link between post code, shipping area and route is analyzed; the site number will be analyzed as
well. The following details also refer to the entry of new shipping addresses in the following
dialogs:
Document entry (Sales/purchasing) > <F4> > Addresses > Select shipping address > <F6>
Shipping control > Order level > <F4> > Shipping address > Select shipping address > <F6>
A new function will suggest a suitable route for the defined post code. This function can be
enabled by means of the button [Search route] or shortcut <Ctrl> + <E>. A route will be suggested
automatically after the post code is changed if the switch ADR_AUTO_ROUTE_SUGGESTION is
active but only if there is no route number for this address yet.
The post code is used in table XPLZORT to determine the defined shipping area. If several places
are found for a post code, the selected place will be taken into account when determining the
shipping area. Based on this and a site number (see below), table ROUTE will select the route
number with the lowest entry (= highest priority) in field Priority. When a route has been found,
the program will ask whether this route shall be adopted for the address.
If the Priority field shows no clear entry for a shipping area, the program will be unable to find a
matching route. If no route number can be found, the program will issue a message to this effect.
This can be due to several reasons, e.g. if no shipping area has been defined for the post code,
etc.
If internal client separation is active in partner data, the site number will be loaded from the
switch CALLCENTER.
If internal client separation is inactive, the site number for the search in route data is loaded from
the ENV variable $HAUS. If no route can be found, another search is made, using site number 0.
Document entry and shipping control will use the site number of the corresponding order for the
search. If internal client separation is inactive, another search is made based on site number 0 if
no route could be found based on the order's site number.
If the switch MODUL_REGIONALROUTEN is set to ON, the fields for alternative routes, routes 2-4,
cannot be accessed. If before an activation of the environment variable there are already
alternative routes in the market partner master data, it absolutely has to be deleted manually
with activation. Thanks to the activation of the environment variable, the alternative routes for
the market partner are not removed automatically from the system.

When an order is entered in the call centre, the route will not be optimized based on the date
requested by the customer because the route can be allocated only after the site has been
assigned. The date requested by the customer will be taken into account unless the calculated
delivery date lies in the past. If this is the case, the delivery date will be moved to the next


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  53
possible route day because the calculated delivery date must not lie in the past. This applies also
to the correction of orders in which data are changed later on, which can lead to a new date. Even
then, delivery dates must not lie in the past, the delivery date will be moved to the next possible
route day. To calculate the date, the program first uses the route defined for the customer's
standard address. If this route does not match the current site, it will be moved to the current site
(call centre) by means of the area and priority. If there is no individual route for this address
(standard address or manually selected address), the post code, area, and priority will be used in
the described way, to find a route. By allocating the area to the post code, the shipping address is
determined; the route for the region with the highest priority will be chosen. If this search is
unsuccessful, the route will be adopted from partner data. The program checks whether the route
is allocated to the call center and if it has to be changed acc. to the "Area+route" principle.

Area-route optimization
When the producing site has been determined or entered, the search for the route can be
optimized further. Once the shipping area is known (based on the route assigned to the address
or the post code) and the customer's favorite date is clear, the program checks whether the
arrival date at the customer's matches the requested date. If not, all other routes defined for this
area in master data, will be checked acc. to their priority until a route is found which offers better
results and an optimal arrival date. When this route is found, the user will be asked whether it
shall be adopted. The new route will be adopted only if the user answers Yes.

Calculation and optimization in the background
If no site is assigned right at order entry, the route will be allocated together with the site in the
background. The system can be customized in this case so that the route with the highest priority
will be used always. In this case, it has to be accepted that the delivery date may be later than the
requested date, or the system can be configured so that the date requested by the customer
always has top priority, and the system will try to find the optimum route in the background.

Order link/PO transfer
When orders are created after an internal transfer, the route defined by the sending site can be
adopted. This is done by setting the switch INTAUF_ROUTEALT or
INTAUF_ROUTEALT_DIREKTAUSLIEFERUNG and INTAUF_ROUTEALT_HAUSART. The direct or
collection route can also be defined for the receiving site in general (switch
INTAUF_DIREKTROUTE and INTAUF_ABHOLROUTE or by defining the corresponding routes at the
receiving site) to automate the setting of the new route at the receiving site.
If the route shall not be adopted from the sending site, it will be determined at the receiving site
as described in item "Calculation and optimization in background". You can define per site
(irrespective of the setting described in "Calculation and optimization in background") whether
the date requested by the customer or the route priority shall be the decisive factor for route
selection.
Transferred orders that shall be shipped directly from production site to customer (the order has
been defined as a drop shipment by the sending site, or a direct shipping route has been entered)
will be defined as direct shipments; the program first loads the internal route from the receiving
site's master data (or it is determined by the switch INTAUF_DIREKTROUTE). If the post code of
the shipping address is known however, the area is determined by means of the new allocation,
and the route for this area is added. For calculating the date, the above-described optimization
will be started.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  54
Recording of the search process
By enabling the switch ROUTEN_PROTOKOLL, the route search as well as the optimization will be
recorded in the site's log directory in route<XXXX>.




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             55
6. Market partner master data
6.1. Canceled market partners
[AW-163884] Nov 10, 2023 alcib - 13.04.16512
By default, market partners are canceled in the end if nothing new should be entered. However,
for a canceled market partner, existing documents can be processed until finished. Therefore, no
change of the master data is required.
If, however, you are working with the external market partner interface, new market partners are
only canceled because not all data is complete. In order to be able to correct all data for such
market partners, the system can be configured so that even for canceled market partners, whose
data can be accessed via the menu, it can be changed. This configuration can be done employee-
specifically.
If you want to change the data for a discontinued market partner, the configurable notice
"Discontinued market partner" appears. This notice can be switched off.
The number of the notice is 19563.
MP_STORNO_CHANGE (client reference: no)
For discontinued market partners, the data on the subdialogs cannot be changed. If this variable is
active, this is possible. The variable can be activated employee-specifically.




6.2. Addresses
Removal: The removal can be used for the calculation/determination of Discounts/surcharges.
They can be entered directly for the market partner or in the addresses. Removal entered directly
for the market partner applies for the invoice address and is also saved in the invoice address
record.
See also "EN-CONFIG-A+W Enterprise Interne Mandantentrennung"


Route: If you are working with „Via Plant“, a route must be entered in each address
See also "EN-CONFIG-A+W Enterprise Interne Mandantentrennung"



        6.2.1.         Dutch address logic
With the new Dutch address logic in A+W Enterprise, the address maintenance is made easier for
the person entering the information and it should help stop additional problems with imprecise
address information.
1. Prerequisite




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              56
To switch on the Dutch address logic, the environment variable ADR_LOGIC_NL must be set to
ON. If this has not happened, the old address logic will still be used in A+W Enterprise.
To use the address logic, the database table xplzortnl must be filled because the data fields City
and Postal code refer to this database table.
2. Application
2.1. ZIP code
If now you enter a Postal code in the associated data field and precisely one record in the
database is found, it is expanded directly. The data fields City, Street, Automobile and Country are
filled.
If after the entry of a Postal code more than one record is found in the database, a selo is opened.
This selo displays all existing records that it found for the postal code entered, sorted by Postal
code, City and Street.
Furthermore, the opening of the selos with F9 works and if no value was entered in the Postal
code data field, then the selo delivers the complete quantity of data.
2.2. Town
If you enter a value in the City field and there is precisely one record in the database, then the
data fields City, Street, Automobile and Country are filled automatically.
If the entry causes several data records to be found in the database, then a selo is called up that
displays the hit quantity for the city entered. Similarly, on this selo you can limit the hit quantity
according to the Street in ascending order. The selo is sorted by Postal code, City and Street.
With F9 the selo is opened manually and if you have not entered a value in the City data field, the
complete hit quantity is output.


        6.2.2.           Cancellation of addresses
QR23/03 [AW-112001]
In the market partner master data, you can close down the addresses that cannot be deleted
because they are still used in active documents, in dispatch or in ordering. If it is determined that
the addresses cannot be deleted, there is a question about whether these should then be closed
down. If you answer YES, then the close ID is set for the address and it can no longer be selected
in the document entry. Furthermore, you may neither delete nor close down the invoice address
and the main address.
In the dialog footer, there is a new switch "Delete" (for active addresses)/"reactivate" (for closed
down addresses). This switch is disabled for the main and invoice addresses.
Closing down the addresses is only possible in the market partner master data. In the document
entry, the only possibility is to obtain active addresses for selection or to enter a new address.
Only the new address can be deleted immediately after entry.
If a new order/quotation is entered as reference to an old document with the closed-down
address, the user is informed that this delivery address has been closed down and that a check is
required.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   57
If an order contains a closed-down delivery address, then this will also be taken over in a PO and
an order resulting from it (internal EDI). In this case, there is no notice that the address has been
cancelled.


Within the market partner replication, canceled addressed are replicated. Here too, there is no
notice that there are cancelled addresses.


6.3. Routes
If the switch MODUL_REGIONALROUTEN is set to ON, the fields for alternative routes, routes 2-4,
cannot be accessed. If before an activation of the environment variable there are already
alternative routes in the market partner master data, it absolutely has to be deleted manually
with activation. Thanks to the activation of the environment variable, the alternative routes for
the market partner are not removed automatically from the system.
s.a. chapter „Shipping area / routes“ and „Addresses“


6.4. Department
The customer's department is not taken over into the order. (see also ABTNR_ENTRY)


QR 23/01
The department can be used for the calculation/determination of Discounts/surcharges.
It is possible to group the discounts according to a new criterion "special". This criterion can be
adjusted customer-specifically.
The 1st variant is the market partner's department
SPEZ_RABATTGRUPPE = 'MPABTNR'




6.5. E-mail
Within the market partner master data, you can store various e-mail addresses. Which is used in
the end for printing forms is multi-stage. There is an explanation in the separate documentation
"EN-CONFIG-A+W Enterprise Print Service"
Whether forms can be sent to the market partner printed or via e-mail can be controlled via
system configurations. There is an explanation in the separate documentation "EN-CONFIG-A+W
Enterprise Print Service" in the "Form printing or e-mail" section.




    6.6.        Type of EDI
In the "Type of EDI" "PU 1:1" or "PU 1:n" can be set for internal market partners. This setting does
not define whether an order-related PO only belongs to one order or to several. This setting

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    58
controls the population of the kauf.org* fields in the PO or of the internal order at the production
site. For more details, see "EN-CONFIG-A+W Enterprise EDI".


6.7. Fixed private fields
mpcomfld.fldnr = -3001 (LS print from dispatch) can contain 1 or 0. Is queried via the lfdnr and not
via the name.
=> Delivery note printing in dispatch depending on a configured field in market partner master.




6.8. Environment variables
MP_STORNO_CHANGE (client reference: no)
For discontinued market partners, the data on the subdialogs cannot be changed. If this variable is
active, this is possible. The variable can be activated employee-specifically.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 59
7. Document types
Reference here is not to kauf.vorgang, that is, inquiry, PO, etc., but to kauf_kaufart; that is,
complaint, free of charge, etc.


 Kaufart                   Sales                     Purchasing                Dependent functions
 1                         errno 32406               errno 32424
                           Internal order            Internal P.O.
 2                                                   errno 32425
                                                     Free P.O.
 3
 4
 5                                                   errno 38332
                                                     Replacement PO




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 60
8. Sealing Depth
8.1. Motivation and goals of this development
\\JUPITER\DOKU_DocuWare\ALCIB-PMS\!General\Release_Documents\2011\ReleaseNotes\DE-
ALCIB-2011-ERN-IN-Variable-Versiegelungstiefe.docx
AWDesk case: #115597


8.2. Key terms




Figure 4: Chart for the terms




8.3. Limitations, delimitation, validity
    -    Applies starting with version ALCIB 2011 (internal number 4.5).



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                61
8.4. Installation/configuration, environment variables
The following switches must be set:
MODUL_VERSIEGELUNGSTIEFE = „ON“
SEALANT_FORMULE = „ 204| 210“: sealant formulas separated by „|“. Maximally 3
NEUE_KANTEN_AUSWERTUNG = „ON“ for detailed edge analysis


8.5. Functional Description
         8.5.1.            Master Data
Using this function requires correctly defined article BOMs. ALCIB can handle the following BOM
versions:
(A) A general META element 580299 Spacer sealants on airspace level. This element has to have
an assembly position like that for spacer, and must get the formula for spacers as well.




Figure 5: Meta element 580299 Spacer sealant



The following META consists of further elements one of which is also a META element with the
components for the sealant and a processing step, or an article of the type "sealant". Decisive is
the formula for the sealant (in this illustration, formula number: 204).




Figure 6: Meta element 580299 Spacer sealant, second element level



The formula for sealants must not include a step code. Variables $1 and $2 already exist with a
spacer reduction.
Like the airspace, the element META for sealants has its own shape record.


A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                                62
(B) Sealants on the level below the element "airspace". Here, the formula for External sealants is
also important.




Figure 7: Sealants below the airspace level



The sizes for the element 580205 External sealant are defined by the parent element 99580100
Airspace. By deducting the spacer (SR), a shape record is automatically created for the airspace.
This element needs no assembly position. The formula for the sealant must not include a step
code and should take into account that variables $1 and $2 have already been reduced by the
spacer.
(C) Element 580205 External sealant (Thiokol) is next to the airspace on the first level. The
dependence from the airspace is only based on the element's assembly position. This version can
only handled partly. As the formula for the External sealant has to make sure that the steps and
the offset are deducted. Element 580205 cannot be used correctly for triple IG because the step
dependence cannot be correctly defined by spacer. There will be no special shape record for
Element 580205 because of this.




Figure 8: Element 580205 External sealant (Thiokol)



If there are different bills of material in the system because of the properties of element 580205,
it is impossible to handle all cases with just one formula for External sealant.
For triple IG, the bill of material therefore has to be type (A) or (B). This means for type (A) that
the META elements for the sealants take the level of the second airspace and the formula for the
assembly position. For type (B), only the formula and the assembly position of the spacer are
important.
It is essential that compulsory parameters for triple IG account for a second spacer in $12. In the
formula for the second airspace, the allocation must be $11= $12. This can be extended in the
same way for quadruple IG. $13 should be reserved for the third spacer in this case. The formula
for the third airspace should not omit the allocation $11= $13.
Please note that the above elements do not have to have these numbers or names; these are
examples only.


A+W Software GmbH                             EN-CONFIG-A+W Enterprise.docx                         63
         8.5.2.             Defining the sealing depth
The sealing depth and the sealing height are entered in the dialog for the table Sizes of the
individual BOM elements. This dialog is opened on item entry level by pressing <F3> in the Price
field. The input has been moved to the end of item entry so that all other data in connection with
the shapes or steps are known.
The button Sealant is only active for the BOM elements Airspace (ALCIB article type 210 or 211)
and sealants (ALCIB article type 240).




Figure 9: Defining the sealing depth




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                              64
         8.5.3.             Changing the spacer reduction




Figure 10: Dialog for changing the spacer reduction



For the element Airspace the familiar dialog opens at the input of steps showing the item sizes.
The shape parameters cannot be changed. Please note that this is the item data, not the data for
the airspace. The spacer reduction shows the spacer data (SR/2).
After changing the reduction for one, several, or all edges, the spacer reduction (SR) for the item
(DB table kpos) will be amended. Since only one entry for the spacer is planned per item, the
average will be calculated. The new spacer reduction will override the entries in item master data
and in the BOM.
The airspace will be recalculated. For stepped lites, the airspace will be recalculated by deducting
the offset and considering the spacer.


         8.5.4.              Calculating the new spacer reduction
The new spacer is not always calculated as the total of all V depths divided by the number of lites
but also in relation to the lite sizes.
In case of a rectangle or a shape with four edges, the new spacer is calculated as follows:
average for VT = (2* length * (new VT bottom + top) + 2* width* (new VT left+ right) ) / 4


new spacer reduction = average VT * 2
In case of a shape with a different number of edges, and if detailed edge analysis is active (can be
configured, not standard), the edges will be calculated based on their allocation.


A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                           65
average for VT= TOTAL (new VT on edge X * length/width as per edge allocation +......) / number
of edges.
new spacer reduction = average VT * 2
If detailed edges analysis is inactive
average for VT= TOTAL (new VT on edge X) / number of edges
new spacer reduction = average VT * 2
The new spacer will be calculated only if the sealing depth for the airspace has changed.


        8.5.5.           Changing the sealing depth
When you start the dialog from the element External sealants, the spacer reduction data will be
adopted for new entries. If this has not been changed, the data will show SR/2. Input can be
defined by full airspace per edge (SR/2) or by the mere sealing depth (SR/2 minus spacer
thickness). The complete spacer per edge (sealing depth + spacer thickness) will always be saved
in the database (table kstufparam). This is done because the corresponding formula is necessary
to determine the amount of sealant based on the spacer reduction. This is recalculated only if the
sealant is not entered separately. The formula for the sealant generally includes a tolerance for
the airspace so that the costs can be calculated correctly.
The sealing depth cannot exceed the entry for the spacer at the edge.


        8.5.6.           Muntin calculation
Muntins are entered before the spacer is changed. If one or more edges are changed, the muntins
will be recalculated. You have to know that for asymmetrical muntins, the drill points will be kept
in the muntin geometry. The length of the muntins will be recalculated.


        8.5.7.           Text
If the spacer distance or the sealing depth is entered separately in the BOM, the print code for the
corresponding article is automatically set to YES.
The following text will be created:
<Spacer name> <Sealing depth(Text 83)><bo(Text 19)>:XX mm <le(Text 20>:XXmm <to(Text
18)>:XX mm <ri(Text 17)>: XX mm
e.g. 1.airspace : sealing depth bo:13mm le:11mm to:11mm ri:13mm
For the sealant:


<Sealant name> <sealing height(Text 84)><bo(Text 19)>:XX mm <le(Text 20>:XXmm <to(Text
18)>:XX mm <ri(Text 17)>: XX mm
e.g. Thiokol : sealing height bo:13mm le:11mm to:11mm ri:13mm
The entries for shapes will be created by edge.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                           66
        8.5.8.      Effects on the OrderXML interface and on the
            direct import of data into ALCIM
The information for the sealant for the spacer are kept in the OrderXML file and in ALCIM. To
determine the correct sealant, the system will search for a sealant that has the same assembly
position as the spacer. If there are several sealants with the same assembly position on that
spacer BOM level, the data of the first sealant will be used.
Steps and shape records on the sealant used by ALCIB for text creation, will not be taken into
account.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                 67
9. iTOE
9.1. Motivation and goals of this development
Replacement of the old logic with AWBroke via ODBC connection
\\hausi\AWDCaseDoc\202\202952\DEV-DE-20160107-
HPV_AWE_AusbauvonSNLivezurinteraktivenTOE-A+WEntwicklung-202952.docx


9.2. Limitations, delimitation, validity
Effective as from version 6.0 (AWE, CAD Shapes)


9.3. Installation/configuration, environment variables
For a detailed description, see the separate document EN-CONFIG-A+W Enterprise iTOE.docx; no
further description will be provided here!




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                            68
10. Background iTOE
The background iTOE was implemented with ticket [ZW-57149].
Goal of the development was a synchronization of AWE BOM and SN file in the background.

For a detailed description of the flow, see the configuration document of the A+W Enterprise CAD
Service.
For the general principles for synchronization, see the configuration document for iTOE.




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                               69
11. Processing types with special support
 from the A+W CAD Designer (Shapes)
11.1.           Processings with SN macro files
(AWDesk #251282, #201980, #331646)
Use the new options of A+W Enterprise 5 for easy input of complex processing groups, so-called
processing macros. Don't bother to define every single processing step at order entry.
    -   Just allocate the processing macros you have entered in A+W CAD Designer in the master
        data to a processing of type 1900 (macro) or type 1910 (surface macro).
    -    Enter and position them in the order item.
    -    You can already see the complex processing groups in the production sketch.
For this, the AW types 1900 (macro) and type 1910 (surface macro) were introduced. With these
processing types, it is possible to manage SN macros in AWE. Apart from the input of the macro
name, the new AWType has been integrated in AWE in the same way as other AWTypes.
Surface macros (AWType 1910)
In the past, only square interior cuts could be recorded and processed with the A+W products.
Now it is possible to store combinations of random interior cuts as macros. These can then be
efficiently recorded, measured and positioned. This new standard processing type (1910) is
supported by all A+W products.


        11.1.1.         Master Data
Article dimensioning
At article dimensioning, SN macro file names can be entered for AWType 1900 „Macros“ and
1910 "Surface macros" on the new tab Other parameters. The field SN macro names is a
mandatory field for AWType 1900 and 1910. Both the new tab and the field SN macro name can
be accessed and changed only for processing steps of these both AWTypes.
SN file names are exclusively selected in the file selection dialog which is started from the field by
<F9>. This field cannot be edited manually. The file name must not include special characters,
blanks, or umlauts. The user will be informed accordingly.
Opening the file selection dialog produces a configurable directory, the so-called basic path (it is
the directory <DATEI_REF_PFAD>/macro). You can select only SN files from this directory or the
directories below. Files outside this path will be rejected with an error report. When a file is
selected from the basic path, only the file name appears in the dialog field. If a file from below the
basic path is selected, the file name including the path appears in the field.
Please make sure that all users can access the configured basic path.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  70
Exchange/additional rules
The exchange/addition rules in partner master data and in key master data were also completed
by the field SN macro name. It is accessible only in connection with a processing of AWType 1900
or 1910 in which case this field is mandatory. The input help described in connection with article
dimensioning is also available here.


         11.1.2.          Process recording
Bill of materials (BOM)
When an article of AWType 1900/1910 is added to the BOM, you can use the button „Parameter“
in the BOM to change processing data like SN macro name, edge, or corner. These will be preset
by the data from article dimensioning at first. The following logic applies: If there is an allocation
for the article + AWType, this has top priority. If no such allocation is found, a dimensioning
record is analyzed for the AWType. The new field „Macro name“ can only be changed by Selo (F9)
to avoid the allocation of non-existent macros.
If an article of AWType 1900/1910 is added by means of a exchange/addition rule, the name of
the macro is adopted from the replacement record (if existing) without being checked for validity.
If there is no name, it is preset by the dimensioning record.


Edit dialog
In the processing dialog, the macro name can only be seen and changed on tab All
parameters/sketches. Selection is only possible by selo. The change immediately appears on the
SN sketch if this is active. For AWType 1900/1910, the program also checks whether the
edge/corner allocation is valid.
Fixed product
Processing steps of type 1900/1910 can be fixed in a product.


Text
Text can be entered for processing steps of AWType 1900/1910:
-      <Article name> <Qty.> <Price>
Manually encoded text can also be used for editing individual processing parameters.


         11.1.3.          Generation of purchase orders
If a PO is created for an item that includes a SN macro, this detail will be adopted for the PO by
means of the SN macro. If just one element of an item BOM is ordered, the details are adopted
only by means of the SN macro is it is found below the element to be ordered.


Internal transfer
If a PO or an order to be transferred internally includes an article of the type 1900/1910 this
document will not be transferred to the internal supplier if he uses an ALCIB version below A+W
Enterprise 5.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   71
The transfer request remains in the transfer table with error -2998. There is also a log entry to
that effect, and system message 59 "Wrong EDI" is dispatched.


Article master data - replication
If the article size is replicated, the information on the SN macro to be used is replicated as well.
This field cannot be defined as a local field in article replication. If the field for the SN macro file is
entered as a local field in the replication configuration, this entry will be ignored. An log entry will
be made to this effect.
Apart from that, all SN files will be transferred with are listed in the article sizes of the articles to
be transferred. This transfer can be prevented by setting the environment variable
RP_ARTIKEL_DATEI.
For transferring the SN files, article replication requires ftp access to the directory defined in
environment variable DATEI_REF_PFAD.
If the directory defined in variable DATEI_REF_PFAD cannot be accessed by ftp, environment
variable DFUE_DATEI_REF_PFAD must be set which defines the directory which is entitled to ftp
access. The notation in this variable is:
<hostname>!<directory>
The "exclamation mark“ between the host name and the directory is mandatory!
Once the variable DFUE_DATEI_REF_PFAD is set, DATEI_REF_PFAD will not be analyzed any more
in article replication
ATTENTION: Replication reads the environment variable for the path details in master data
(reading of SN files) as well as on the –client (writing of SN files).
At the end of item master data replication there is a plausibility check for the article dimensioning
records by means of AWType=1900/1910. The program checks if all files defined in local master
data also exist in the locally defined directory. This check cannot be switched off. If replication
detects a master data record on the client which contains a SN file that does not exist in the
defined directory, system message 22 "Local item master data" is dispatched. This email contains
the article numbers for which the defined SN file could not be found in the directory in question.


        11.1.4.           Interface to and from A+W Production
Processing type Surface Macro (1910)
This is a sample excerpt for an OrderXML file for a surface macro:




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                     72
Figure 11: OrderXML file



Depending on the dimensioning type, you can find the parameters entered in AWE as follows:
 Dimensioning type         Parameter             From ALCIB, table     In OrderXML
                                                 poszu
 Absolute                  Edge quality          kantenqual            EdgeQuality
                                                 File name             name
                           SN macro file name
                                                 Ecknr                 InsertionPoint >
                           Positioning from                            Dimensioning >
                                                 Mass1
                           corner                                      Corner
                           Positioning in X-                           InsertionPoint >
                           direction                                   Dimensioning >
                                                                       distanceHorizontal
                                                 Mass2
                           Positioning in Y-                           InsertionPoint >
                           direction                                   Dimensioning >
                                                                       distanceVertical
                           Reference edge        Dmess1                Edge
                                                 Dmess2                ProcessingArea >
                                                                       AngleOfRotation




                           Angle of rotation




 Two edges                 Edge quality          kantenqual            EdgeQuality
                                                 File name             Name


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                           73
Dimensioning type   Parameter               From ALCIB, table   In OrderXML
                                            poszu
                    SN macro file name      Mass1               InsertionPoint >
                                                                Dimensioning
                    Distance to edge 1
                                                                >distanceEdge1
                                            Mass2               InsertionPoint >
                    Distance to edge 2
                                                                Dimensioning >
                    Edges for positioning                       distanceEdge2
                    Reference edge          Bearbvek            InsertionPoint >
                                                                Dimensioning > Edge
                                            Dmess1              Edge
                                            Dmess2              ProcessingArea >
                                                                AngleOfRotatio

                    Angle of rotation




Corner/edge         Edge quality            kantenqual          EdgeQuality
                                            File name           name
                    SN macro file name
                                            Ecknr               InsertionPoint >
                    Positioning from                            Dimensioning >
                                            Mass1
                    corner                                      Corner
                    Distance to the                             InsertionPoint >
                    corner                                      Dimensioning >
                                            Mass2
                                                                distanceCorner
                                                                InsertionPoint >
                                                                Dimensioning >
                                            Bearbvek
                                                                distanceEdge
                                                                InsertionPoint >
                                            Dmess1
                                                                Dimensioning > Edge
                                            Dmess2
                    Distance to the edge                        Edge
                                                                ProcessingArea >
                                                                AngleOfRotation




                    Positioning from edge

                    Reference edge




A+W Software GmbH            EN-CONFIG-A+W Enterprise.docx                            74
 Dimensioning type         Parameter                From ALCIB, table         In OrderXML
                                                    poszu




                           Angle of rotation




11.2.           Parametric macros
(AWDesk #331646)
With AWDesk #331646, the new AWTypes for parametric macros:
    -   parametric edge macros: 1920
    -   parametric surface macros: 1930
were integrated into AWE.


        11.2.1.          Item master data
If an item is assigned to a new AW processing type "parametric macro" (1920) and "parametric
area macro" (1930) is assigned, then it is necessary to assign a SN file first. The property of field
"Macro name" is on MUST and cannot be changed here. With a selo selection <F9> you can now
assign a SN file. Directly after the assignment, the parameters, labels and default values of the
macro are determined from the assigned SN file.

CAUTION: When generating the SN file, care has to be taken that the parameter names do not
contain ANY pipes "|" in the name since otherwise they cannot be transferred correctly to AWE.

Next, you are led automatically to the "Texts" dialog with current language; here you can confirm
or overwrite the parameters (labels) determined. After the confirmation, the user can also adjust
the default values for the parameters if desired. Since the parameters are defined via SN file, the
renaming of the label is the user's responsibility.

A takeover of max. 7 additional parameters for macros is provided. (max. 6 parameters in AWE6)
For the parameterizable area macros, the first 3 parameters (reference edge, rotation angle, turn
flag) are permanently defined.

The assignment of a SN file is always unique. If a file was assigned, then it can only be deleted
again and reassigned. If the number of parameters for the macro was changed in SN, then you can
update the parameter list in the file field with <Ctrl+R>. If the default values for already-existing
parameters were already stored, then they CANNOT be retained on update and they must be re-
entered.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  75
        11.2.2.          Order entry
During the entry of the processings of AW processing type "parameterized macro" (1920) and
"parameterized area macro" (1930), the parameters are queried according to the stored master
data. If the number of parameters is changed in the master data and the old order obtained for
correction, then it is checked during saving. If the number was reduced, then the excess
parameters are set to 0. If the number of parameters was increased, then this is reported and the
user can re-enter the missing parameters in all items.


        11.2.3.          Internal document transfer
If an order (PU coupling) or a purchase order (PO transfer) contains an item of AW processing
type "parameterized macro" (1920) or "parameterized area macro" (1930), then this transaction
cannot be transferred to an affiliated company if the receiving company has a version older than
AWE 6.2. In this case, the transaction to be transferred is set to the error -2998. A defined
employee contains an e-mail and there is a concrete error message in the log.


        11.2.4.          Article master data replication
If an item of the processing type "parametric macro" (1920) and "parametric area macro" (1930)
is replicated by the master in the client, then with the appropriate configuration, the attached file
is also transmitted.


11.3.           Processings with motif files
(AWDesk #267331)


        11.3.1.          Master Data
Article master data
Levels for surface treatments
When creating the item master data, in the item dimensioning attention must be paid that for the
"Levels" field, the input type "mandatory" must be entered with a defined specified value ("top"
or "bottom"). This way, you can avoid confusion with the display of the production sketch.
Without a defined specified value, the level remains empty during the transfer to SN and SN then
assumes a processing on both sides by default and shows this in the sketch (especially obvious in
the side view accordingly.


Surface treatments with motif files
Surface treatments of the following AW processing types:
    -   1200 (coating)
    -   1205 (matting)
    -   1210 (sand blasting)



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                76
    -   1215 (coloring)
    -   1220 (enameling)
    -   1225 (screen printing)
have been expanded to include the 3 following parameters:
    -   Pattern name (image file)
    -   Control flag for the pattern with the following options: (parameter 8 in article
        dimensioning)
            o   freely scalable
                The pattern is adjusted to the defined area by "distortion".
            o   Proportional, width (W) is preset
                Only the width is defined. The pattern is inserted with the correct proportions.
                The height results from the proportions of the image file.
            o   Proportional, height (H) preset
                Only the height is defined. The pattern is inserted with the correct proportions.
                The width results from the proportions of the image file.
            o   Section (fixed pattern, sieve, not scalable)
                A section of the pattern according to the defined pattern surface will be inserted
                (e.g. sieve with horizontal stripes).
    -   Mirror:
        Y/N. (Parameter 9 in article dimensioning)
All new parameters can be set in master data as OPTIONAL, MANDATORY, FIXED, or non-
definable. For all processing steps already existing in the system, these parameters will be set to
"non-definable" to begin with. They can be changed; this applies only to newly entered orders of
course. If a pattern is marked as "definable", the parameter "control flag" will be automatically
marked as "definable" because these two parameters are only valid together.
Field "Pattern name" cannot be changed by hand. You can either allocate an existing file by
pressing <F9> or attach a new file by <Ctrl+K>. This field can be emptied again by <CtrlF9>.


CAUTION: In order to avoid errors during the entry of individual motifs and fixed screens, it is
important that the master data is maintained so that different articles are available for individual
motifs than for fixed screens. For individual motifs, the screen number may not be displayed on
the entry screen. For fixed screens, it is a MANDATORY field.


Handling of stamps
The AW type 1250 (stamp) experiences the same logic treatment as the surface treatments, for
which a motif can be specified. This means that in the poszu record, the value poszu.dmess3 is
recognized as screen number for which the associated motif file is drawn from the master data
(table xsiebnr).
Screen numbers and stamp numbers should therefore be selected from different number ranges
to prevent confusion.
See also AWDesk #288542.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   77
Product keys
Menu "Templates" in section Product Keys can be used to register the existing templates.
Entering the maximum sizes and allocating an image file is essential. For the file assignment, you
can either select an existing file (the files are always under <DATEI_REF_PFAD>\motif) or
alternatively, attach a new image file (these are also stored under <DATEI_REF_PFAD>\motif).


Motif files
The following image formats are permitted for motif files:
BMP, TIF, PNG, GIF, JPG and the vector format EMF


The file names may not include any empty spaces, umlauts or special characters (see also notes
about the env variable DATEI_REF_PFAD) since otherwise a transfer of the file to the article
replication or order transfer will fail.



        11.3.2.          Entry of scalable motifs for surface treatments
When you enter surface treatment with patterns (pattern is marked as "definable" in master data,
the field "Pattern(file)" cannot be changed by hand. In the field, there are only the possibilities:
    -   selecting an existing image file (button <Pattern(Master data)>/ key <F9>). All files saved
        in <DATEI_REF_PFAD>\motif will appear.
    -   attaching a customized image file to the document (button <Pattern(indiv)/ hotkey
        <Ctrl+K>)>.
    -   deleting an already selected file (button <Delete pattern>/ hotkey <CtrlF9>).
A customized image file will not be saved in master data but is allocated to the order item and
saved in <DATEI_REF_PFAD>\<auftrnr>\<posnr>. If an individual image file is allocated anew, the
control code is set to "freely scalable" at first.
An existing file allocation can be deleted only if the allocation has not been made in article
dimensioning and defined as "fixed", or was made by selecting a fixed template.
The fixed template registered in the code area cannot be selected by means of the file. It can be
entered by hand of by Selo (<F9>) in field "Layer number/sieve number". If a fixed template has
been selected, neither the file name nor the control code for the pattern can be changed. The size
parameters entered will also be compared with the maximum template sizes defined in master
data. The image parameters must not exceed the maximum template size.
Like all other processing parameters, individual image patterns will be copied too, with the same
BOM, when other new items are entered. Not only the file name will be copied but also the file
itself in <DATEI_REF_PFAD>\<orderno>\<new itemno>. The system editor will flash briefly but
needs no input of acknowledgements, and will vanish right away.
Even if complete items are copied, the files will be copied as well.
If surface treatment plus the allocated, individual pattern file is added to a bill of material and if
this change shall apply to several items, this processing including all parameters and files will be




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                       78
inserted in all items with the same bill of material, and the file(s) will be copied to the
corresponding sub-directories.
If a new order is entered which refers to an order with surface treatment and an individual
pattern, the file will be included and copied to the new sub-directory <DATEI_REF_PFAD>\<new
orderno>\.... for the corresponding item.
Please note that due to the missing item reference for this type of orders, no new internal item
number can be allocated by means of referencing when a new item is entered; orders created this
way will adopt the internal item number from the original.
When invoices/credit notes are entered by hand referring to an order, the individual pattern files
will not be copied but will remain in the database (field poszu.dateiname ) in the reference
order's path.


        11.3.3.          Internal transfer
Only individual motifs, that is, motifs that are stored in an order-related subdirectory in
DATEI_REF_PFAD, will not be transferred during the order transfer.
For all other motifs, that is the master data motifs from the directory DATEI_REF_PFAD/motif, no
transfer of the file is provided. It is assumed that the files were already transferred to the target
system via the item master data replication.


        11.3.4.          Item master data replication
For the item master data replication of surface treatments with motifs, the same guidelines apply
as for macro processings, only that in this case no SN file, but rather a motif file is transferred.
(For the description, see Chapter 0)
Surface treatments with fixed screens in the master data
For surface treatments that have stored a fixed screen number in the master data, it must be
heeded that the product key "templates" (table xsiebnr) is not transferred with the article
replication.
Templates can only be transferred with the key replication.


        11.3.5.          Interface to and from A+W Production
New pattern parameters for standard surface treatment
The new parameters for standard surface treatment will be filled in only if a pattern file has been
entered. In this case, they can be found in the OrderXML file, SurfaceProcessingSubject.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 79
Figure 12: OrderXML cut-out



The parameters entered in AWE for the pattern can be found in OrderXML as follows:
 Parameter                    ALCIB table           Table field            In OrderXML
 Pattern name                 poszu                 File name              Name
 Mirror (yes/no)              poszu                 Dmess9                 Mirror
 Insertion                    poszu                 Dmess8                 imageInsertionMode
 Max Width                    Xsiebnr               Maxbreite              OriginalDimensions >
                                                                           width
 Max. Height                  xsiebnr               maxhoehe               OriginalDimensions >
                                                                           height



         11.3.6.   Configuration options in A+W CAD Designer
             (Shapes)
It is possible to make a colour appear transparent. For this purpose the SN.INI key
TransparanceColorImage in the partition [SURFACE] has to be occupied with a color.
Example: TransparanceColorImage = COLOR_WHITE
Attention: The transparency is only possible for the raster graphic formats. It is recommended to
use one color as transparent color over the entire image file. It furthermore seems sensible to use
BMP or TIF formats as these are not compressed and the colors in the image are not changed. In
case of a JPG it is possible for white and light colors to turn grey after compression. We are not
able to influence this nor are we able to allow a benchmark for the transparency.




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                             80
It is now also possible to export graphics as grey level image via SN.INI button. For this purpose,
the button [PICTURE] GreyScaleOn = 1 has to be set (0 is the default value and comprises the
previous behavior).
The SN file format was changed for this program feature. It is therefore necessary to set the key
FileVersion in the partition [Customer] in SN.INI to 12.0.380.
It is furthermore necessary to note that this feature was only implemented in the following
processes:
Coating with AWID 1200
Frosting with AWID 1205
Sandblasting with AWID 1210
Coloring with AWID 1215
Enameling with AWID 1220
Silking with AWID 1225




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                     81
12. Employee master data
12.1.            Cancellation rights
The individual employee rights are documented in "EN-CONFIG-A+W Enterprise EDV module
abbreviations".
The cancellation of orders is protected with the right "VOST" (cancellation right). All users who
have this right can cancel orders until they are (partially) delivered or (partially) invoiced.

                                                VOST = '-' *1             VOST = 'w'
  Order level (F7 in the header or menu)
Order up to local correction                               NO                           YES
Order in local correction up to
delivery/invoicing *2                                      NO                           YES
Order delivered/invoiced (also partially)                  NO                           NO


             Item level (F7)
Newly entered item (also in correction
mode)                                                      YES                          YES
Order item up to local correction                          YES                          YES
Order item in local correction up to
delivery/invoicing (also partial)                          YES                          YES
Order item delivered/invoiced (also
partially)                                                 NO                           NO
*1 VOST = `-` is identical to VOST = `r`
*2 In this context, an order is not in local correction if all items are in local correction. An order is
in local correction if an appropriate status on the order level was booked. This can be recognized
if "Global" is mentioned in the order header. (e.g. with active environment variable
KAUFUPDATE_BEI_BEST, an order is not in "Global local correction" even if all items are in local
correction).



        12.1.1.          Cancellation of items and in local correction
[AW-39572] – (July/2021)
For the employees who do not have cancellation rights (VOST = '-'/'r'), you can specify two
different functions system-wide. Either you can no longer cancel an order entered as soon as it
has been entered and saved. Or no cancellation is allowed as soon as the order has been released.
By activating the new logic, you can scale the cancellation rights and also expand them to the
deletion (cancellation) of items:
    •   Cancellation as of entry up to "local correction"




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                     82
    •   Cancellation from entry to delivery (also partial delivery) or invoicing (also partial
        invoicing).
For this, a new employee right "VOSL" (cancellation in local correction permitted) was created.
This employee right is only evaluated if the new logic has been activated with an environment
variable.
For the change of orders in local correction, you also need the right "VOLK".
CANCEL_RIGHT_EXTENSION (client reference: no)
  Expanded rights for cancellation of order and order items
  [ON|1|2] = evaluation of VOSL right. Cancellation also of local correction
  [ON|1] = item cancellation for VOST != 'w' always forbidden if item has already been entered.
(UPDATE mode)
  2       = item cancellation with VOST!='w' only if item is already recognized in the system
(UPDATE mode + kposstat record) - order has already been released

CANCEL_RIGHT_EXTENSION = “ON” or CANCEL_RIGHT_EXTENSION = “1”
                                 VOST = '-' (VOSL no
                                 evaluation) *1           VOST = 'w' + VOSL ='-'        VOST ='w' + VOSL ='w'
Order level (F7 in the header
         or menu)
Order not released                         NO                          YES                         YES
Order released up to local
correction                                 NO                          YES                         YES
Order in global local
correction up to
delivery/invoicing *2                      NO                        NO *3                         YES
Order delivered/invoiced
(also partially)                           NO                          NO                           NO


        Item level (F7)
Newly entered item (also in
correction mode)                           YES                         YES                         YES
Order item not released                    NO                          YES                         YES
Order item released up to
local correction                           NO                          YES                         YES
Order item in local correction
up to delivery/invoicing (also
partial)                                   NO                          NO                          YES
Order item
delivered/invoiced (also
partially)                                 NO                          NO                           NO

*1 logic; VOST = `-` is identical to VOST = `r`
*2 In this context, an order is not in local correction if all items are in local correction. An order is
in local correction if an appropriate status on the order level was booked. This can be recognized
if "Global" is mentioned in the order header. (e.g. with active environment variable


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                      83
KAUFUPDATE_BEI_BEST, an order is not in "Global local correction" even if all items are in local
correction).
*3 An order for which all items are in "local correction" but the order is not in "global local
correction" (see *2) can be cancelled.


CANCEL_RIGHT_EXTENSION = “2”
                                 VOST = '-' (VOSL keine
                                 Auswertung) *1         VOST = 'w' + VOSL ='-'          VOST ='w' + VOSL ='w'
Order level (F7 in the header
         or menu)
Order not released                         NO                          YES                         YES
Order released up to local
correction                                 NO                          YES                         YES
Order in global local
correction up to
delivery/invoicing *2                      NO                        NO *3                         YES
Order delivered/invoiced
(also partially)                           NO                          NO                           NO


        Item level (F7)
Newly entered item (also in
correction mode)                           YES                         YES                         YES
Order item not released                    YES                         YES                         YES
Order item released up to
local correction                           NO                          YES                         YES
Order item in local correction
up to delivery/invoicing (also
partial)                                   NO                          NO                          YES
Order item
delivered/invoiced (also
partially)                                 NO                          NO                           NO

*1 logic; VOST = `-` is identical to VOST = `r`
*2 In this context, an order is not in local correction if all items are in local correction. An order is
in local correction if an appropriate status on the order level was booked. This can be recognized
if "Global" is mentioned in the order header. (e.g. with active environment variable
KAUFUPDATE_BEI_BEST, an order is not in "Global local correction" even if all items are in local
correction).
*3 An order for which all items are in "local correction" but the order is not in "global local
correction" (see *2) can be cancelled.


        12.1.2.          Dispatch
Order correction from dispatch remains regulated via an individual right LAAS. For orders in local
correction, you also need the right to change in local correction VOLK. Here, the cancellation is

A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                      84
also given to the background process intauf for processing. It always has to be checked whether
the cancellation can be assumed system-wide.

For the new extension via the environment variable DISPATCH_CANCEL_RIGHT_EXTENSION = ON,
the right LAAS is also checked with the shift as "cancellation" in dispatch. If the employee has no
"w" right for cancellation in dispatch, then cancellation shifts will be rejected. Here a note that a
cancellation shift in dispatch still remains only information in dispatch. This will not be forwarded
to the order itself nor to additional modules.


12.2.           Employee notes
alcib - 13.04.11030 QR21/09
The employee/department notes that are set to priority "high" are displayed automatically when
entering the appropriate dialogs in the master data.
Furthermore, you can configure that the employee notes with the priority "high" and location
"everywhere" are displayed when starting the main menu or when starting the "Dispatch"
module. This way, important employee-related information can be presented at the start.
As soon as a note line with priority "high" is recorded, all notes are displayed.
MITARBINFO_DISPLAY_HPTMEN = ON - display when starting from AWE main menu
MITARBINFO_DISPLAY_VS = ON - display when starting dispatch



12.3.           Department
The department is taken over into the order. (see also ABTNR_ENTRY)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 85
13. Bonus
You can use the KUNDENBONUS environment variables to approve a bonus system.
In the master data under "Keys > Market Partner > Bonus" you can define various bonuses. On
this dialog, the basis (GR, QM) of the bonus and the type (GR, max % rate) can be specified.
Furthermore, the calculation periods by months.
In addition, scaled bonuses can be stored.
These pre-defined bonuses can be assigned generally under "Master Data > Market Partner" on
the "Payment" tab or for to individual customers and projects for individual product groups under
Master Data > Market Partner > <Shift><F4> > Bonus Assignment"
During order entry, the "Bonus" field (Item > "Properties" tab) (kposp.bonus) is filled if for the
combination customer/article or customer/product group a record is stored in the master data.
Using the environment variable KUNDENBONUS_DBEITRAG, you can have the bonus incorporated
into the contribution margin even during the order entry.


13.1.           Environment variables
KUNDENBONUS (client reference: no)
 Activate customer bonus system


KUNDENBONUS_DBEITRAG (client reference: no)
If the variable is set and the configured fields for set no. 4 are created in table kposprvfld , the
data for the customer bonus is stored there. Furthermore, the bonus data also flows into the
calculation of the contribution margin. Bonus is always calculated in your own currency.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     86
14. Discount Logic 2005
14.1.            Motivation and goals of this development
Discounts, or rather surcharges, are becoming ever more significant in the glass industry. The
previous discount logic is only able to handle the increasing requirements under some conditions
The following aspects underlie the reorganization of the discounts and surcharges:
    •   Generalization, alignment, and harmonization of the various discount types on all levels
        (customer, object, general) (sales, costs, purchasing)
    •   Reduction of the special logic thanks to expanded definition possibilities
    •   Expanded control possibilities for the user (sequence, basis of effect, etc.)
    •   Simplification of maintenance
    •   Improved display in the order thanks to the presentation of additional information (basic
        values, end amounts, etc.)
Note:
In the following, no distinction is made between the terms "discount" and "surcharge." The term
more comprehensible in the respective context will be used. If there is no explicit reference, the
implementations always apply for both cases.
Announcement/Termination:
The new discount logic is delivered with Version 4.0; with Version 4.1 the "old and very old
discounts" will no longer be available. With Version 4.0, a program is delivered that converts the
"old discounts" into the "new discounts."


14.2.            Key terms
If available: definition of terms


14.3.            Limitations, delimitation, validity
        14.3.1.          Order linking
Linking of orders does not transfer order discounts.


        14.3.2.          PO transfer
Within the PO transfer, with activated new discount logic, currently no order discounts are
transferred.
It is absolutely necessary that the discount configuration be identical between sender and
recipient. This means, either both must be working with new discount logic or both with the old
discount logic. If the sender is working with the old discount logic, however the recipient with the


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  87
new discount logic, there can be no PO transfer; the transfer will cancel with an error message
during the order import.
General note for better understanding:
1. With old discount logic, the discounts (table kaufrab) are transferred with PO transfer MIT
   (EDI-side)
2. With new discount logic, the discounts are NOT transferred sender-side during PO transfer.
3. If it is determined in the receiving site that kaufrab was transferred, there are two
   possibilities:
    •   If the old discount logic is active at the receiving site, then the kaufrab records are stored.
    •   If the new discount logic is active at the receiving site, then the storage will encounter an
        error.


        14.3.3.          Replication
The replication of the customer-specific discounts and surcharges is done within the market
partner replication. It is controlled with the environment variables RP_RABSTAMM. These
variables control the replication of the data from the tables rabstamm, rabattstaf, and xsprbez
from the central location in the corresponding branch office. If this variable is not set (default), all
customer-related data will be transferred at replication. If the variable is set to "ON", no data will
be replicated. If the variable includes numbers separated by | (pipe), then these methods from
rabstamm and the corresponding data from rabattstaf and xsprbez are not replicated.
The replication of the general discounts and surcharges is also done within the market partner
replication. It is controlled with the environment variables RP_RABSTAMM_ALLG. These variables
control the replication of the non customer-related data from the tables rabstamm, rabattstaf,
and xsprbez from the central location in the corresponding branch office. If this variable is not set
(default), all non customer-related data will be transferred at replication. If the variable is set to
"ON", no data will be replicated. If the variable includes numbers separated by | (pipe), then
these methods from rabstamm and the corresponding data from rabattstaf and xsprbez are not
replicated.
Local fields can be defined for the table rabstamm. For the tables rabattstaf and xsprbez, this
possibility is not currently provided.
As prerequisite for the replication of the new discounts, it is necessary that the number ranges for
the rabattid between central office and branch office do not overlap. Between 2 branch offices,
the number ranges can overlap because there is no replication between them.
If they should currently replicate the tables xsprbez within the key replication, then it is
recommended that you adjust the change triggers to that effect so that records with the key
tab='rabstamm' are not transferred within the key replication.
So that the data transferred within market partner replication can be displayed and used correctly
in ALCIB, the table rabattmeth must be used for the discount methods (Master Data – Keys –
Market Partner Keys – Order Discounts) transferred within the key reproduction.


14.4.           Environment variables
KONDITIONEN_ABLAUF


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    88
This variable specifies the suggested value of the validity in years when creating new discount
records.
MP_DISCOUNT_OWN_CURRENCY (client reference: no)
Normally discounts in the master are always created in own currency. If this environment variable
is set, market partner-specific discounts can be stored in foreign currency.
ON – customers, projects, and suppliers
CUSTOMER: Customers and projects in sales
SUPPLIER: Suppliers in purchasing
RABATTE_ABHOLUNG_POS_AUSWERTEN (client reference: no)
For the discounts, the delivery should be evaluated on the item level for discounts by kilometer
(CU/km) and weight + Kilometer (CU/G*E). Items with the delivery "pick-up" are not considered
in the calcualtion.
RABATTKRITERIUM_INDIVIDUELL (client reference: no)
A dynamic selo for the individual (special) discount criterion is stored in this environment variable.
The specification is made relative to $ALCIBPRG/schlue
Only applies together with 'SPEZ_RABATTGRUPPE'
Default: sel/rabstamm_qualiwert_7.sel
RABATTMETHODEN_UPDATE (client reference: no)
If the new discount logic (RABATTLOGIK_2005) is activated, it is controlled using this variable
which discount methods (table 'rabattmeth') are updated or added by the Intauf types -26 and -
28 (case #113069). The individual methods must be entered here separated by"|".
RABATT_RUNDUNG
By setting this variable, you can achieve a rounding of the discount amounts.
RUECKSCHREIBEN_EK_IN_VK (client reference: no)
This variable is only evaluated if EK_RUECKRECHNUNG is ON. This variable specifies which value is
written back from the purchasing document to the appropriate sales transaction:
0 – net unit price (kpos.nstpreis) – includes no discounts)
1 – net price/piece less discounts (kpos.erloes/kpos.menge)
2 – Net price/pc. less all discounts (kpos.ekverglas/kpos.menge)
RABATT_SP_PARAMETER (starting with ALCIB 2008)
This variable must be set if you would like to use the stored procedure "rabattzuord" in the
transaction data in order to decide to which item the discount applies. Depending on the form of
these variables, the stored procedure is called with other transfer parameters - information from
the item and the current discount:
0 – Logic is disabled
1 – Article number / Article type / Discount method / DiscountID
2 – Article number / Packing type / Discount method / DiscountID
3 – Article number / Article type / Discount method / DiscountID / Document



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  89
RABATT_NO_BETRAG_NO_MINWERT (from ALCIB 2007, to ALCIB 2011)
If this variable is set, the minimum amount of a discount is now pulled if the calculated amount is
0.0 GR. Starting with Version 2012, this is a flag in the discount master data.
RABATT_SP_KAUF_PARAMETER (starting with ALCIB 2008-2) (client reference: no)
  (Cf.: #139371): Parameters and return values of the SP "rabatanpassung" are controlled via this
variable. This is used to dynamically adjust discounts within the document.
0 - Logic is disabled
1 - Params: Rabattid, MP-Nummer, charval1 from kaufprvfld Set 2, Group 2 Return: Rabatttext,
Rabattwert ( see “EN-CONFIG-A+W Enterprise Customizing” – section “Configurable fields“ –
"Permanently defined sets")
2 - Params: Rabattid, MP-Nummer, Route; same return values as for 1
3 - #384611 – December 2016 (alcib build 12.05.8224; alcib build 13.02.0287; alcib build
13.03.0001)
Params: Rabattid, MP-Nummer, Route, Erfassungsdatum: Return as for 1
9 – #452423 – October 2019 (alcib build 13.04.5684; lapool build 13.04.4621):
Here the parameters depend on the document that is being processed. Return as for 1
For invoices, the following parameters are passed:
Reference document number (refauftrnr), reference document type (_refvorgang), reference part
counter (refsubnr),
Original customer number (orgkunr),
Delivery address (_ladrnr), delivery date (ltplan), route (routenr),
Client (hausnr), discount method (methode)
For all other document types, the following parameters are passed:
Document number (auftrnr), document type (vorgang), parts counter (subnr),
Original customer number (orgkunr),
Delivery address (_ladrnr), delivery date (ltplan), route (routenr),
Client (hausnr), discount method (methode)


KLEINE_RABATTWERTE (from ALCIB 2008-2 on)
In these variables, you can store a discount method for the discount values stored during the
discount calculation within the documents divided by 100. This simulates a value input of up to
four places after the decimal point. Otherwise, only the input of up to one to two places after the
decimal point is possible.
Starting with ALCIB 2009, you can also specify several discount methods separated by the pipe
sign.
RABATTMETHODEN_UPDATE
If the new discount logic is activated, it is controlled using this variable which discount methods
(table 'rabattmeth') are updated and inserted by the intaufarten -26 and -28.
RABATT_ALLG_BEZ

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    90
If this environment variable is active, the name of the discount to be entered on the main page of
document entry will be taken from there. Otherwise, text message 32872 will be used.
IMMER_KLEINE_RABATTWERTE (from ALCIB 2009 on)
You can store discount types in these variables. Within the discount calculation, the discount
values of the discounts with the discount types stored here are divided by 100. Otherwise, only
the input of up to one to two places after the decimal point is possible.
RABATT_AUS_ENDROUTE (client reference: no) (starting with ALCIB 2012)
If this environment variable is set, for "via plant" deliveries, the final route is used as discount
criterion instead of the route.
MAN_RABATTE_BEI_BEZUG (from ALCIB 2009 on)
If this environment variable is set, discounts created manually in the transaction for reference are
also included when the question about new determination was confirmed. If this environment
variable is not set, the system behavior remains as previously: if the question about new
determination of the discounts for reference is answered with yes, all (also manual) discounts are
deleted before the new determination.
RABATT_VERPACKKOSTEN (client reference: no)
  The switch activates the logic that the packaging costs (costs of the finished boxes) is shown as
cost surcharge and thus flows into the calculation of the DB. (rack planning)
  An article number is entered in the switch. The article type should be "999 other article". From
this article, the product group, cost center, and name for the discount rate of the type "costs" is
used. The costs are taken over from the table gsergkiste. The prerequisites are the master data
(BOMs) for boxes and formulas for calculation.
February 2025 // alcib - 13.04.19439
Now a second article number for additional costs can be stored separated by a pipe ("|")
The first article number is for the material costs and the 2nd article number for additional costs
RABATTE_RUECKRECHNEN_POS (client reference: no)
For discounts that are determined in the environment variables POSRABATT_VK_METHODEN,
POSRABATT_EK_METHODEN and POSRABATT_KOSTEN_METHODEN, the percentage share is
calculated back to the items and saved in the corresponding private Sets (18-24) on the item
level.
RABPROTOKOLL
During discount calculation, a log called "rab2005*" is always written. If this variable is set, there
not just errors are logged; instead, log entries for some changes of the transaction data are made
in connection with the discount logic.
POSRABATT_EK_METHODEN (client reference: no)
PU discount methods that should be calculated back to the item level. Up to 10 methods can be
entered separated by |. Only methods are considered that are defined item-related ((kg, qm,
etc.). The variable is only evaluated if RABATTE_RUECKRECHNEN_POS is enabled.
POSRABATT_KOSTEN_METHODEN (client reference: no)
Cost discount methods that should be calculated back to the item level. Up to 10 methods can be
entered separated by |. Only methods are considered that are defined item-related ((kg, qm,
etc.). The variable is only evaluated if RABATTE_RUECKRECHNEN_POS is enabled.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    91
POSRABATT_VK_METHODEN (client reference: no)
SA discount methods that should be calculated back to the item level. Up to 10 methods can be
entered separated by |. Only methods are considered that are defined item-related ((kg, qm,
etc.). The variable is only evaluated if RABATTE_RUECKRECHNEN_POS is enabled.
SPEZ_RABATTGRUPPE (client reference: no)
Acrivates the special, individual criterion for the discount methods.
MPABTNR - by market partner's department


14.5.             Function Description
        14.5.1.           Structure of the discount logic
In the discount methods, information is stored that is valid for the entire method. Customer can
create their own discount methods. All of these methods should not be understood as concrete
discount, but rather as a particular grouping of discounts such as energy surcharge or rush
surcharge. For a method, a criterion can be specified on which the granting of this discount group
depends. Presently, the following criteria are possible:
    •   Rush Order
    •   Route
    •   Dispatch
    •   Packing
    •   Delivery type
    •   Destination
    •   Invoice country
Concrete discount records are then created for these methods. You can either maintain on a
general, market partner-dependent or object-dependent level. For all discount records that
belong to a method for which one of the criteria was selected, a characteristic of the selected
criterion must be specified. These concrete discount records are only drawn into the transactions
that have the same value for the selected criterion.


        14.5.2.           Functional description
    •   Hierarchical evaluation/obtain discounts
        There are three hierarchy levels: object level, market partner level, and general level. If on
        a "higher hierarchy level" a discount record for a method is found and if it matches the
        criterion or if it has the value 0, the search ends and the valid record is found. If no record
        is found, then the search continues on the next lower level.
        Only methods and qualifiers are regarded; product groups do not play a role. This means
        that discounts are also drawn into the transaction if its product group does not occur in
        the transaction. These discounts also cause lower levels of this method not to be
        evaluated any longer.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   92
   •   Discounts for reference/transaction generation
       If an order is entered with reference to a quotation, then the discount agreements from
       the quotation are taken over into the order. If an order with reference to another
       transaction is entered, the user will be asked whether the discounts should be taken over
       or drawn anew.
       On the delivery note and invoice (analogous to GR and auditing), the discounts are always
       taken over. They are not re-drawn.
       For partial invoices and partial deliveries, the basic quantities must be recalculated if
       necessary. Minimum values are used in each partial transaction.
   •   Secure deletion/reactivation
       If a user deletes a discount, it is marked as deleted, however it is retained in the
       transaction. The discount can be reactivated with a checkbox. Similarly, it is possible to
       reset a manually changed discount (flag, display) back to its original state using a function
       key; this results in a new drawing of this discount from the master data.
   •   Redistribution
       If discounts are redistributed to the items, they must be redistributed proportionally to
       the items as these items have contributed to the discount. That is, not always
       proportional to the item amount, but if necessary proportional to the qm, kg or pieces of
       an item (only kilometer-dependent and fixed discounts are distributed as a percentage of
       the item price of the participating items). The last item participating in the discount with
       quantity > 0 also includes a rounding difference.
   •   Redistribution purchase discounts
       The discount amounts that are entered in the footer of the order (DB fields kauf.gesrab,
       kauf.ekgesrab, kauf.sonderrab, and kauf.eksonderrab) are redistributed proportionally to
       the revenue on the items. The last item with quantity > 0 also includes a rounding
       difference.
   •   Graduated discounts
       Instead of a fixed discount value, a graduated discount can also be stored. For this, you
       must store the size that determines the scaling in the master data (qm, kg, km, pieces,
       order value).
   •   Redrawing of the discounts in the order footer
       If the qualifier value of a discount method has changed, the user is asked whether the
       associated discounts should be re-drawn. Then all discounts of the relevant method are
       deleted and re-drawn. In the question to the user, it is noted that manual changes to
       records of the method to be drawn will be lost.
       For partial orders, discounts are never re-drawn.
       If the data in the order has changed so that a discount falls into another gradation level,
       the user is asked whether the values of the new gradation level should be loaded into the
       order.
       In partial invoices, partial delivery notes, and partial goods receipts, the quantity for the
       original order is used to calculate the gradation basic value and not the actual delivered or
       calculated partial quantity in this order.
   •   Validity
       Discount records must have a validity (from, to). As default value for the start date, the
       day of entry is used and as end date the start date plus the number of years stored in the
       environment variable KONDITIONEN_ABLAUF. If this variable is not set, the validity is


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  93
        specified as 5 years. The validity of a discount is only checked when drawing. This means
        that a recalculation of the discounts only deletes an expired discount if for some reason
        (for example, change of the qualifier value) the associated method is re-drawn.
    •   Fixed discounts in partial orders
        There are three possibilities for handling fixed discounts for the generation of partial
        orders. They can be recalculated as percentage discounts, taken over in the first partial
        order or duplicated in each partial order. The factor for a recalculation as percentage
        discounts arises from the discount amount divided by the net value of the order
        (kauf.gesnetto).
    •   Manual change of the total amount
        For manual change of the total amount, the difference is saved in kauf.gesrab (general
        surcharge) and kauf.sonderrab (general surcharge). Previously, all discounts were deleted
        and the difference between item total and total amount entered in one of these fields.
        With the new discount logic, the discounts are retained and in these fields, the difference
        between items and discounts on the one hand and the total amount entered on the other
        hand is saved.
        If the total amount should change again, the user is asked whether the amount should be
        recalculated or whether the amount entered manually should be retained.
    •   Sequence of the discounts in the order
        The sequence of discounts in the order is determined by the sequence number stored for
        the discount methods. However, the sequence number is assigned anew when drawing:
        The number stored in the master data is multiplied by 100. If several records of the same
        method are loaded into the order, the sequence number is assigned sequentially starting
        with the calculated number.


        14.5.3.         Master Data
The master data maintenance can be divided into two areas. On the one hand, there is a dialog
with which you can create, change, and delete discount methods. Access to this dialog is
protected by the right "STRM." On the other hand, there is a dialog with the concrete discount
records for which the previously defined methods can be created. If you enter this program
directly from the Alcib menu, the access authorization is configured via "STRA." Furthermore, you
can access this program via the market partner master data. There, no separate right is required.
Each user who may edit a market partner can also create new discount master data for that
market partner.
Maintenance of discount methods
You enter the maintenance for the discount methods via the menu "Master data – Keys – Market
partner – Process rebates - Discount methods"
A dialog with a table displaying all created methods appears. There, you can also create new
discount methods.
The meaning of the individual fields is explained below:
    •   The Method is the clear identification characteristic of a record of this table.
    •   The Name is the later proposed value when creating concrete records for this method.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   94
    •   The Sequence specifies the sequence in which the records of the methods are evaluated
        later in the orders.
    •   If you select a Criterion, later only the discount records are drawn into the order for which
        the characteristic of the criterion match the characteristic in the order.
    •   There are three different possibilities for how the discounts of this method are treated for
        Credits. Here you can select whether or not they are considered. Furthermore, it is
        possible that the user is asked during the order entry. With the last possibility, the
        discount is considered during a calculation in the background.
    •   The toggle glass weight influences the basic value of GR/kg. Discounts of this method and
        the drawing of the scaling level within the order. Starting with Version 2008, there is a
        new characteristic, so that you can select, in addition to the item and glass weight, also
        the invoiced weight.
    •   With the checkbox Delivery surcharge you can mark a discount method so that discounts
        with this method are deactivated during delivery note generation if there is already a
        delivery note within this delivery (see #152136).
    •   If a discount is marked as discountable, subsequent percentage discounts include the
        discount amount of this discount.
    •   If the flag for zero items is activated, then during the discount calculation, items with an
        amount of 0.0 currency units are considered. For discounts of the type GR or GR/km, this
        flag is meaningless.
    •   With the General, Market Partner, and Object checkboxes, you can select on which levels
        discount records for this method can be created.
If for a discount method there are concrete master data records, some fields of this method such
as the criterion, for example, can no longer be changed. This would create errors.
A discount method can only be deleted if there are no master data records present for it. If a
discount method is deleted and there are still records for this method in the transaction data, the
transaction data remains in the order.

Maintenance of the discounts
As already mentioned above, discounts can be maintained on the object level, market partner
level, and so they are generally valid. You maintain the generally valid discount rates via the menu
"Master data – Keys – Market partner – Process discounts – Discounts"
You access the records of the other level via the maintenance screens for market partners. There,
you select a market partner and then reach the maintenance screen via the "menu" (F4)
"Discounts"
You access maintenance of the objects the same way.
Creating discount records is the same on all three levels. The access determines only for whom
the discount records apply. The same table screen always appears. With general access, it
includes all generally valid records. Otherwise, it includes the records that are assigned to the
selected market partner or object.


03/2023 alcib build - 13.04.14747



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   95
To avoid excess data, an additional check for plausibility of the data has been built into the market
partner master data when maintaining the market partner-specific discount. Thus, for suppliers,
only the discount for "Purchase" and for customers only "Sales" and "Costs" are permitted. For
projects, "Purchase", "Sales", and "Costs" are possible.


The meaning of the individual fields is explained below: First the fields of the table on the
"General" tab are described:
    •   This Method that is allocated to a discount rate.
    •   The discount is displayed in the order with this Name. You can create language-
        dependent names with <F5> if required. These are then considered by reports.
    •   Then you select the characteristic of the criterion for which this discount record is valid.
    •   With the type you specify on which page the discount should be applied.
    •   With a product group specification, you can restrict the items to which the discount
        applies. Asterisks within the six-digit expression represent any character.
    •   The value specified is interpreted differently depending on the discount type and is used
        for calculation of the discount amount. If this value is a currency unit (CU), then attention
        must be paid that this value is essentially entered in own currency (environment variable
        MODUL_WAEHRUNG). Also for market partner-specific discounts. (QR2403 see
        environment variable MP_DISCOUNT_OWN_CURRENCY)
    •   Via the discount type, you specify according to what the discount amount should be
        calculated.
    •   If the items checkbox is selected, the discount will be redistributed across the
        participating items.
Here is a description of the additional fields within the detail view:
    •   With the minimum and maximum fields, you can restrict the resulting discount amount
        that arises during the calculation in the order.
    •   Furthermore, a scaling basis can be specified here. If you have specified a scaling basis,
        you must then specify the scaling levels with <F5>.
    •   If the current record is not marked as redistributed, a statistical product group, a cost
        center, and an account must be specified.
    •   A validity can be specified with a "from" and a "to" value.
    •   For GR discounts, it must be decided how the program handles the generation of partial
        orders. The discount is either taken over into the first partial order, taken over in all
        partial orders or transformed into a percentage discount.
    •   If the glazing flag is set, the discounts of this method apply only to the glazing share of
        the order.
    •   In addition, there is the cash discount flag and the assignment to the value added tax
        rates can be changed. The cash discount flag does not affect discounts of the type costs.
        The assignment to the value added tax rates only has an effect if the logic is activated for
        several value added taxes in the system.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     96
    •    With a checkbox, you can decide that the minimum amount is also drawn if the calculated
         amount is 0.0 GR.
    •    Starting with version ALCIB 2008-2, you can also select on the third mode screen whether
         for this discount the stored procedure "rabattanpassung" in the order data is called. This
         is then called from ALCIB at the beginning of the discount calculation and adjusts the
         discount to the order. Which parameters the stored procedure receives is decided using
         the environment variable "RABATT_SP_KAUF_PARAMETER." See also section "Basis
         values with/without SP"
    •    Starting with version ALCIB 2008-2, you can also select on the third mode screen whether
         for this discount the stored procedure "rabattzuord" in the order data is called. It is then
         called from ALCIB for each combination of discount and item and decides whether the
         discount transferred should effect the item transferred. Which parameters the stored
         procedure receives is decided using the environment variable "RABATT_SP_PARAMETER."
         See also section "Basis values with/without SP"
         Attention: When creating stored procedures, you must make sure that if possible, no
         write operations are done on real tables since otherwise, due to the transaction logic in
         the document entry, there can be permanent blocks to the table.


When deleting a discount record, the associated scaling levels and foreign-language texts are also
deleted. If this discount is still in orders, the following two problems can occur:
1. If an order falls into another scaling level, it cannot be loaded and the old one is retained.
2. If a printout is made of an order, no language-dependent texts can be output.
Therefore, when deleting a discount, it is checked whether there are language-dependent texts
and scaling levels. If this is the case, there is a check whether the discount is present in the order
data. If so, the user is warned. If the discount is deleted nevertheless, the problems listed above
may occur.



         14.5.4.         Discount criterion
Rush Order
Here the identifier "Schedule type" in the document header is evaluated. If the schedule type is
equal to "rush", the discount is drawn (kauf.abrufkz=2). The "Rush order" field on the "Properties"
tab is not evaluated (kauf.schnell). Both of these identifiers are separated so that prices and
production can be controlled separately.
(see also environment variable EILFRIST)


Online
Here the identifier "Entry" in the document header is evaluated. If the "Entry" is equal to "Online"
(14), the discount is drawn. Normally the "Entry" is set automatically to "Online" for A+W iQuote
orders, but it can also be changed manually.
Orders that are scheduled via the external order interface are marked with Entry = EDI (4) by the
system.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   97
Special
QR 23/01
It is possible to group the discounts according to a new criterion "special". This criterion can be
adjusted customer-specifically.
The 1st variant is the market partner's department
The market partner's department is used. Not the department of the order. If a document is
entered for an object, the market partner's department also applies and not the department of
the project.


SPEZ_RABATTGRUPPE (client reference: no)
Acrivates the special, individual criterion for the discount methods.
MPABTNR - by market partner's department
RABATTKRITERIUM_INDIVIDUELL (client reference: no)
A dynamic selo for the individual (special) discount criterion is stored in this environment variable.
The specification is made relative to $ALCIBPRG/schlue
Only applies together with 'SPEZ_RABATTGRUPPE'
Default: sel/rabstamm_qualiwert_7.sel


          14.5.5.        Discount types / discount value
Percent per sales amount (%/VK) // Percent per cost amount (%/Kst)
QR 11/2021 // [AW-89586]
There is a new cost discount type "%-VK" = cost discount on the basis of the "SA
amount". This discount is calculated analogously to the % cost discount; only the amount
of the basic value is the SA value of the order. Depending on the sequence number that
this discount has and which "rabattierbar" flag all existing SA discounts have, the amount
of the basic value (or the discountable SA amount) is calculated.
If this discount is the last one and if all SA discounts before it have the code "rabattierbar", then
the net total counts as basis of the calculation.
Analogously, there is also the sales discount type "%-Kst" = sales discount based on the costs.


Value per weight in kg and distance in km (CU/G*E)
QR 11/2022
There is a new discount type CU/G*E (weight in kg * distance in km). This discount can only be
applied if the distance is maintained for the addresses or directly in the MP master data. What
weight (glass weight, invoiced weight, etc.) is used as basis for the calculation is defined via the
method. If the order is converted to pick-up, the distance in the order is set to 0. If the driving
time is not determined via route, then it is also converted to 0. By deleting the distance, the
CU/G*E discounts are not calculated in a pick-up order.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                      98
If in the order the pick-up is removed, then there is an attempt to restore the distance via the MP
master data or delivery address.
If only individual items in the order are for pick-up, then these items are not included int he total
calculation of the basic value. If individual items are not incorporated into the calculation of the
basic value due to this function, then the discount calculated is also not redistributed across these
items if the discount is on "redistribute". Whether the delivery on the item or document level is
evaluated for this is controlled by a new environment variable.
RABATTE_ABHOLUNG_POS_AUSWERTEN (client reference: no)
For the discounts, the delivery should be evaluated on the item level for discounts by kilometer
(CU/km) and weight + Kilometer (CU/G*E). Items with the delivery "pick-up" are not considered
in the calcualtion.



        14.5.6.           Weight
Invoiced glass weight
April 2010
In master data, the code defining which weight a kilogram-based discount shall refer to, is now
available in method master data as well as in discount master data. The code in discount master
data will override the code in method master data and thus permits to distinguish reference
weights within a method. When creating a new discount record, the code is preset by the value
from method master data.
The above code now comes in more types. In addition to the item weight, the glass weight, and
the invoiced items weight, you can now enter discounts referring to the invoiced glass weight. As
for the glass weight, there is a version which always uses the invoiced glass weight and which,
should this be 0.0, will use the invoiced item weight. These two new versions have been
developed because some suppliers apply the energy surcharge to the invoiced glass weight which
can now be handled correctly in ALCIB.


Discounts per invoiced/physical QM
[AW-178082] // alcib - 13.04.17734 // QR 2406
Square meter (sqm) discounts can now be specified both with reference to the physical as well as
to the invoiced sqm of the item. Here, with the discount method already in the column
"Weight/SQM", you can toggle appropriately to the desired value. When creating the discount,
this value is drawn from the method, but it can be adjusted if the discount value is calculated
according to GR/sqm or GR/kg.
The data is transferred to the document in the document entry and will be calculated accordingly.
(glass weight = 6 or 7)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 99
        14.5.7.         Discounts in the order
When creating an order, the relevant discounts are loaded automatically into the order. In
addition, you can change, deactivate or reactivate the discounts drawn within an order. A
complete deletion of discounts drawn is not possible. Within the order, there are two possibilities
for creating additional discounts. On the one hand, it is possible to enter a discount value in the
order footer, which is then interpreted as a "%" discount. On the other hand, you can access the
maintenance screen for all discounts of an order via a mode screen in the order fooger. There, an
unlimited number of new discounts can be created, which in turn have the same configuration
options as are present in the master data.
If you change the net total amount of a discount manually, the discount records are not deleted,
but instead an additional deduction or surcharge is added that includes the difference between
the calculated and manually replicated amount. If you would like to have the amount calculated
anew, you can overwrite the manual value with <Shift F11>.
Discount calculation
For the calculation of discounts in the order, initially two basic values are obtained (or square
meters for GR/sq m discounts). Then the discount amount is calculated and, in case of
distributable discounts, distributed across the item revenue.
Using these amounts and under the influence of the flags within the discount records discussed
above, the net amount and discountable amount are calculated. If the system works with several
value-added tax rates, then for the subsequent calculation of the gross amount, the value-added
tax vectors are evaluated and the discount amounts on the value-added tax basic amounts are
totaled.
The following special features must be mentioned for the discount calculation:
    •   The glazing flag is only evaluated for percentage discounts. There, the total of the glazing
        amounts of the items is used as basic value. On the cost side, glazing discounts always
        have an amount of 0.
    •   The glass weight flag of a discount method only influences the amount of an actual
        discount in the order if it is a weight-related discount.


QR11/2022 Recalculation / updating of discounts
You can update the discounts directly or retrieve them again in the document entry
(header/footer) using Ctrl+E or the menu "F4 - Prices - Redetermine discounts" via a selection
dialog. On the spot, you can update the discounts separately and individually by sales, costs or
purchase. If one of these updates is selected, then there is a query whether it should only apply
via the ENV switch RABATTMETHODEN_UPDATE for defined methods for SA documents or
RABATTMETHODEN_UPDATE_EK for purchase documents or for all. If the "all new" option is
selected, all discounts with the status "today" will be retrieved. Manual discounts remain, but
cannot always retain the old sequence number and are sorted toward the top. This must be
checked.
Query possibilities:
Update all: The values are recalculated for all discounts in the order. Here, the current basic
values are drawn from the master data. However, no new discounts are drawn from the master
data.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   100
Update sales: For the discounts of the methods that are defined in RABATTMETHODEN_UPDATE
and already included in the order, the values are recalculated. Here, the current basic values are
drawn from the master data. However, no new discounts are drawn from the master data.
Update costs: For the discounts of the type cost that are already included in the order, the values
are recalculated. Here, the current basic values are drawn from the master data. However, no
new discounts are drawn from the master data.
Update purchasing: For the discounts of the methods that are defined in
RABATTMETHODEN_UPDATE_EK and already included in the order, the values are recalculated.
Here, the current basic values are drawn from the master data. However, no new discounts are
drawn from the master data.
All new: All discounts are re-drawn from the master data and calculated.




Basic values with/without SP RABATT_SP_PARAMETER (rabattzuord )
If the ID stored procedure (SP) is not set for a discount, then the discountable amounts will be
calculated as the basis. The sequence of the discounts is crucial for the calculation of the basis.
If the ID stored procedure (SP) is set for a discount, then it is also considered that the SP is stored
for the calculation. If this is not the case, the basis value is set equal to the PU price. The basis
value across the amounts that can be discounted is not regarded.
QR 11/2022
In the master data and document, you can redirect the calculation of the discounts to the
rabattzuord SP. If a discount is calculated via this SP, then the basis value is irrelevant because
the amount is calculated via the SP. Unfortunately, you could also activate the calculation via this
SP if no SP was stored. In this case, the basis value was set as irrelevant to the start value
nevertheless and not to the ongoing discountable amount (considering the discountable
discounts/surcharges). In order to avoid the negative side-effect, it is no longer possible to
activate the SP evaluations if the corresponding SPs are not stored or not enabled. In the
document, any active SP ID is also disabled if the configuration is lacking. If a SP is enabled and
encounters an error, then the basis value is nevertheless set to the current discountable amount.
Process
On the item level, the SP "rabattzuord" only collects the basic values for the calculation. It is
decided by the SP to which items this discount is applied and to which it is not.
If you want to calculate the supplier costs already in the SA document, the discounts have to be
stored globally as cost discounts. Via the SP, you can then decide whether the cost discount should
be applied for a particular item. However, currently (as of 02/26/2024), no keys for access to item
information, procurement types or supplier details are forwarded to the SP.
The SP that provides the value is controlled via RABATT_SP_KAUF_PARAMETER and is only called
per document. Here there are only order-related parameters. A value can come from this SP. But
no item-related parameters can be passed to this SP.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    101
Change of a discount criterion
If a discount criterion within an order changes (e.g. the kilometers due to a change of the delivery
address), then there is a query as to whether the discounts of the relevant method should be
recalculated.
Query 14613: "At least one discount criterion has changed. Redetermine discounts of the relevant
methods (manual changes will be lost!)"
If this query is answered with "yes," the relevant method will be redetermined from the master
data. If the answer is no, the method is not redetermined from the master data, but rather
calculated on the basis of the existing definitions of the discount amount based on the new data.
This query is made only 1x per order. If a criterion changes again after the first answer, there is no
additional query. The system retains the first answer.
Currency
QR11/2022 Discounts and foreign currency
alcib - 13.04.14116 // [AW-128671]
Discounts for which the currency units (CU) are specified must generally be specified in own
currency (environment variable MODUL_WAEHRUNG). This affects both the general and the
customer-specific discounts.
If the market partner is on "Calculation in foreign currency", then discounts of the type "Sales" or
"Purchasing" are recalculated in the corresponding currency in the document. Discounts of the
type costs will not be recalculated.
If the currency, the conversion rate or the identifier "Calculation in" is changed in the document,
then the discounts are recalculated accordingly. If the exchange rate is changed in a calculation or
credit, there is no automatic adjustment of the discounts.


QR 03/2024 [AW-166270]: Market partner-specific discounts in foreign currency
If a market partner has a different currency than the client's own currency in the master data and
if there is calculation in this foreign currency, now it is possible to calculate a market partner-
specific value discount as discount in the foreign currency. This does not apply for the general
discounts, which are still interpreted as discounts in the client's own currency and then converted.
This way, you can maintain the market partner-specific discouns regardless of rate fluctuations.
Configuration is done via an environment variable and can be activated for all market partners,
only for suppliers or only for customers. The rule for the customer applies for project-related
discounts.
The evaluation whether or not a discount is converted is done on the basis of the document data
(currency, calculation in foreign currency), which is drawn at the beginning from the market
partner master data. If it is changed manually in the order, then it will also influence the
discounts.


Environment variable:
MP_DISCOUNT_OWN_CURRENCY = ON - all
= CUSTOMER for customers,project in SA
= SUPPLIER for supplier in PU


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 102
        14.5.8.        Automatic cost rate for packaging
See Section "Rack planning"


        14.5.9.        Discount information on the item level
QR 11/2022
The discount values are currently not broken down by item. This can now be configured for
special discount methods.
There are 3 environment variables in which the methods can be defined. In the environment
variables POSRABATT_VK_METHODEN, POSRABATT_EK_METHODEN,
POSRABATT_KOSTEN_METHODEN, up to 10 discount methods can be listed, separated by |. For
these methods, the discounts calculated in the document are broken down to the item/piece
level. Only the discounts with the direct item reference (CU/kg, CU/qm, CU/G*E) are considered.
Furthermore, only max. 2 discounts from a method + type (sales, purchasing, costs) are
considered.
In order to save the information, 4 main and 4 additional sets of configurable fields (kposprvfld)
are provided on the item level. In the kposprvfld.longval(X) fields, the method number is saved,
and in the kposprvfld.decval<X> fieldsSPn , the recalculated amount. The recalculated amount is
an amount per piece of the item. The surcharges are saved as positive values and the discounts as
negative values. As basis of the calculation, quantity (or delivered or calculated quantity,
depending on the document) is used. Canceled items are not considered. There is also a rounding
difference adjustment in the last active item with quantity>0. In the sets, the data is saved
according to the sequence of the methods in the environment variables.


SET 17 (main set) : Methods 1 - 5 from environment variables for SA/PU methods.
SET 18 (additional set) : Methods 1 - 5 from environment variables for SA/PU methods (if 2nd
discount of the same method is present).
SET 19 (main set) : Methods 6 - 10 from environment variables for SA/PU methods.
SET 20 (additional set) : Methods 6 - 10 from environment variables for SA/PU methods (if 2nd
discount of the same method is present).


SET 21 (main set) : Methods 1 - 5 from environment variables for cost methods.
SET 22 (additional set) : Methods 1 - 5 from environment variables for cost methods (if 2nd
discount of the same method is present).
SET 23 (main set) : Methods 6 - 10 from environment variables for cost methods.
SET 24 (additional set) : Methods 6 - 10 from environment variables for cost methods (if 2nd
discount of the same method is present).


Sets 21 to 24 are only assigned for the SA documents; for the PU documents, these are left empty.



A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                103
Example:
POSRABATT_VK_METHODEN="300|100|500"
In the order, for the method "300" there are two different surcharges; for method "100" there is
just one surcharge, and method 500 has 3 different surcharges


In set 17
longval1 = Method "300"
decval1 = the associated discount amount of the first discount
longval2 = Method "100"
decval2 = the associated discount amount of the first discount
longval3 = Method "500"
decval3 = the associated discount amount of the first discount


In set 18
longval1 = Method "300"
decval1 = the associated discount amount of the second discount
longval2 = 0 (since method 100 has no second discount)
decval2 = 0
longval3 = Method "500"
decval3 = the associated discount amount of the second discount


The third discount of the method 500 is not calculated back in this new structure and saved. The
normal recalculation to the item and incorporation into revenue is done regardless of this new
function.


The recalculation is done during the determination of the gross amount of the document, directly
when exiting the item level in the document footer.
I you would like to check the recalculated values in the order, you can go back from the document
footer to the item and opoen the "configurable fields" there


The calculation is also done during entry by reference. If a discount of the defined method is
included in an order, the recalculation is also done if you answer the question about discount
recalculation with "no." In this case, the existing value is used as starting point for the
recalculation.
The recalculation is also done during the transfer from the dealer to the production site, when
generating the delivery notes (manually or automatically), partial delivery notes, invoices, etc., as
well as for PU invoices that were generated via the invoice check. If partial delivery notes or
partial invoices are generated, then the records for the private fields are also not generated for

A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 104
the items not calculated. The evaluation of the data must always be done in connection with the
item and the quantities booked there (deliivered, calculated).


         14.5.10.       Tables and fields
The tables involved are described briefly below. For a detailed description of the individual fields,
please use altab or read the appendix.
Master Data
The new discount logic is based on three new master data tables and table for the language-
dependent texts:
1. Rabattmeth
   This table includes basic information about a discount method such as the qualifier. The
   "method" field is the primary key.
2. Rabstamm
   This table describes actual discounts. The "rabattid" field is the primary key. Using the
   "method" field, the reference to the "rabattmeth" table is established.
3. Rabattstaf
   The scaling levels of the discounts are stored in this table. This table has no primary key.
   However, there is an index for the foreign key "rabattid."
4. Xsprbez
   The language-dependent names of the entries from the "rabstamm" table are stored in this
   table. The "rabattid" in the "id" field is used as a flag.



 Table rabattmeth

                                                  Primary key. Some discount methods are pre-
 methode                      smallint            defined. New ones can also be defined by the
                                                  customer.
                                                  Name of discount method No language-
 methodenname                 char(80)
                                                  dependent configuration possible.
                                                  Controls the sequence in which the discounts are
 Seqnr                        smallint
                                                  applied.
                                                  0=The amount of this discount is not considered
                                                  for subsequent discounts.1=The amount of this
 discountable                 smallint
                                                  discount is considered for subsequent discounts.
                                                  Subsequent discounts cannot present this effect.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 105
                                     Controls on which hierarchy levels (object,
                                     customer, general) this method may be
                                     maintained:
                                     1 General maintenance possible 2 Market
 Step               smallint
                                     partner-dependent maintenance 4 Object-
                                     specific maintenance
                                     Ex: level = 6 -> object-specific and market
                                     partner-dependent maintenance possible
                                     Specifies the dependency of the
                                     discount/surcharge (Criterion):
                                     0 No qualifier
                                     1 Flag rush order
                                     2 Route
                                     3 Shipping type
 qualifier          smallint         4 Packaging type
                                     5 Delivery type
                                     6 Destination
                                     7 Invoice country
                                     8 Online
                                     9 Special
                                     11 - EDI
                                     0 Discount refers to total weight.1 Discount
                                     refers only to glass weight. 2 Discount refers to
                                     glass weight. If glass weight of all involved items
                                     0, take total weight of items. (This flag is only
                                     evaluated for GR/kg discounts. )
                                     3 Discount refers to the fact. item weight
                                     4 Discount refers only to the invoiced glass
 glasgewicht        smallint         weight
                                     5 Discount refers to the invoiced glass weight. If
                                     the invoiced glass weight of all participating
                                     items is 0, then the invoiced item weight is used.
                                     6 Discount refers to the physical sqm
                                     7 Discount refers to the invoiced sqm


                                     0 Discount is not taken over in credits.
                                     1 Question whether discount should be taken
 gutschrift         smallint         over
                                     in credits.
                                     2 Take over discount automatically in credits.




A+W Software GmbH         EN-CONFIG-A+W Enterprise.docx                               106
                                                   0 For quantity calculation, items with item
                                                   amount of zero are not considered.1 Items
 nullpositionen                smallint
                                                   with zero amount are also
                                                      considered for quantity calculation.

 Starting with ALCIB 2011:                         Marks the discount method as a Delivery
                               smallint
 lieferzuschlag                                    surcharge. See #152136.



 rabstamm
                                                   Primary key, used for clear identification of the
 rabattid                    integer               record. Is used as foreign key in rabattstaf and
                                                   xsprbez.
 methode                     smallint              References record from "rabattmeth."
                                                   Value that the qualifier specified in "rabattmeth"
                                                   must have in an order so that this record is
 qualifierwert               char(10)
                                                   drawn in this order. Records with value 0 are
                                                   always drawn.
                                                   0 Sales discount
 Ekvkkz                      smallint              1 Cost discount
                                                   2 Purchase discount
                                                   Specifies whether for this record there is a
                                                   language-dependent text in "xsprbez."
 fremdsprachig               smallint
                                                   0 No record exists
                                                   1 Record exists
                                                   Name of the discount, pre-populated with
 rabatttext                  char(80)
                                                   method name.
                                                   References market partner or object from
 Mpnr                        integer
                                                   "mp."A "0" means general.
                                                   Market partner type:
                                                   0 Customer
 kuliflag                    smallint              1 Supplier
                                                   2 Other market partners
                                                   3 Object
                                                   Product group for which the discount is granted.
 Wgrnr                       char(6)
                                                   Extended logic ( 1*3*** )!
                                                   0 No graduated discount
 staffelrabatt               smallint
                                                   1 Graduated discount




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                              107
                                          0 No graduated discount
                                          1 Gradation basis square meter
 staffelbasis       smallint              2 Gradation basis kilogram
                                          3 Gradation basis kilometer
                                          4 Gradation basis pieces
                                          If "staffelbasis = 0" percentage or amount of the
 Value              decimal
                                          discount.
                                          0 Fixed value (CU – currency unit)
                                          1 Percentage value (%)
                                          2 Value per piece (CU/pc)
                                          3 Value per square meter glass (CU/sqm)
                                          4 Value per kilogram glass (CU/kg)
 rabattart          smallint              5 Value per kilometer (CU/km)
                                          6 Percent per sales value (%/SA)
                                          7 Percent per cost value (%/Kst)
                                          8 Value per kilogram glass and kilometer
                                          distance (CU/G*E)
                                          This flag describes the handling of fixed
                                          discounts for the generation of partial orders. Is
                                          only required for "rabattart=0."
 fixerabatte        smallint              0 Conversion into percentage discounts
                                          1 Take over complete amount in first   partial
                                          order.2 Duplicate complete amount in all
                                          partial  orders.
                                          0 Discount
 satzart            smallint
                                          1 Surcharge
 minbetrag          money(10,2)           Minimum amount of the discount.
 maxbetrag          money(10,2)           Maximum amount of the discount.
                                          0 Discount is not redistributed.
 Verteil            smallint
                                          1 Discount is distributed to the items.
                                          If "verteil = 2," account to which booking should
 Konto              char(10)
                                          be done.
                                          If "verteil = 2," cost center to which booking
 Kstelle            char(10)
                                          should be done.
                                          If "verteil = 2":
 Skonto             smallint              0 discount not cash discount-capable
                                          1 cash discountable discount
                                          If "verteil = 2," statistical product group.
 statwgrnr          char(6)
                                          References "wgrnr" from "wargrp."




A+W Software GmbH              EN-CONFIG-A+W Enterprise.docx                               108
                                                  If "vertail = 2," value-added tax vector. Specifies
 steuerzu                   char(4)
                                                  which value-added taxes apply to this item.

 gueltigvon                 date                  Date from which the discount record is valid.

 gueltigbis                 date                  Date until the discount record is valid.

                                                  0 discount applies to everything.

 verglkz                    smallint              1 discount only applies to glazing Flag is only
                                                  evaluated for percentage discounts. There, a
                                                  total of kpos.vkverglas is used as basic amount.

 rabattidz                  smallint              For replication: rabattid from the central site

                                                  If in the orders the stored procedure
                                                  "rabattzuord" should be called that is called for
                                                  each item and decided whether this discount
                                                  affects the current item.
 Starting with ALCIB                              RABATT_SP_PARAMETER must be set.
 2008:                      smallint              Attention: When creating stored procedures,
 spaufrufkz                                       you must make sure that if possible, no write
                                                  operations are done on real tables since
                                                  otherwise, due to the transaction logic in the
                                                  document entry, there can be permanent blocks
                                                  to the table.

 Starting with ALCIB                              Should the stored procedure "rabattanpassung"
 2009:                                            be called in the orders that allows adjustment of
                            smallint
                                                  the discount. RABATT_SP_KAUF_PARAMETER
 spaufrufkzkauf                                   must be set.
 Starting with ALCIB                              This field allows the assignment of discounts
 2011:                      CHAR(30)              from purchasing orders received from
 otrabattid                                       OpenTRANS. (#164543)

                                                  You can now configure per discount to which
 Starting with ALCIB                              weight it should refer. This information overrides
 2011:                      smallint              the information from the method master data,
 glasgewicht                                      so that discounts of a method can now have
                                                  different reference weights.
 Starting with ALCIB
 2011:                                            Flag whether the minimum amount should also
                            smallint
                                                  be drawn for a calculated amount of 0.0 GR.
 minbeinullbetragkz



 rabattstaf
 rabattid              integer          Clearly references record from "rabstamm."




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                109
 minimum          decimal        Minimum value of the gradation basis for this level
 maximum          decimal        Maximum value of the gradation basis for this level
 Wert             decimal        Percentage or amount



 Kaufrab
                                        Foreign key from "kauf". Handles the assignment to
 Aufnr               integer
                                        the order.
 Rabattid            integer            Foreign key from "rabstamm".
 Methode             smallint           Foreign key from "rabattmeth".
 Ekvkkz              smallint           Flag for order type from "rabattmeth."
 Txt                 char(80)           Name of the discount from "rabstamm.rabattext."

 Qualifier           smallint           Qualifier from "rabattmeth".

 Qualifierwert       char(10)           Value of the qualifier from "rabstamm."
                                        This field specifies whether subsequent discounts
 Rabattierbar        smallint           count the discount value of this discount in their
                                        basic amount.
                                        Sequence number that produces the sequence in
 Seqnr               smallint           which the records are considered for the calculation.
                                        (rabattmeth.seqnr * 100 + addon)
 Verglkz             smallint           Glazing flag from "rabattmeth".
 Gutschrift          smallint           Credit note from „rabattmeth“.
                                        Consideration of items with amount of 0 from
 Nullpositionen      smallint
                                        "rabattmeth."
 Wagrp               char(6)            Product group from "rabstamm.wgrnr".
 Staffelrabatt       smallint           Flag whether graduated discount from "rabstamm."
 Staffelbasis        smallint           Basis for graduation from "rabstamm."
                                        Minimum value of the gradation basis for the
 Minimum             decimal
                                        currently-drawn level from "rabattstaf."
                                        Maximum value of the gradation basis for the
 Maximum             decimal
                                        currently-drawn level from "rabattstaf."
 Wert                decimal            Value from "rabstamm".
 Satzart             smallint           Surcharge or discount from "rabstamm."
 Rabtyp              smallint           Discount type from "rabstamm.rabattart".
                                        Handling of fixed discounts from
 Fixerabatte         smallint
                                        „rabstamm.fixerabatte“.
 Minbetrag           money(10,2)        Minimum amount of the discount from "rabstamm."



A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx                                110
 Maxbetrag          money(10,2)       Maximum amount of the discount from "rabstamm."
 Verteil            smallint          Redistribution from "rabstamm".
 Konto              char(10)          see "rabstamm"
 Kstelle            char(10)          see "rabstamm"
 Skonto             smallint          see "rabstamm"
 Statwagrp          char(6)           see "rabstamm.statwgrnr"
 Fremdsprachig      smallint          See „rabstamm“
 Steuerzu           char(4)           see "rabstamm"
                                      Basic value that the discount affects:
                                      For "rabattart = 0" => unimportant
                                      For "rabattart = 1" => monetary amount
                                      For "rabattart = 2" => pieces
                                      For "rabattart = 3" => square meter count glass
 Grundwert          decimal           For "rabattart = 4" => kilogram glass
                                      For "rabattart = 5" => number of kilometers
                                      For “rabattart = 6“ => discountable sales value
                                      For “rabattart = 7“ => discountable costs
                                      For “rabattart = 8“ => Glass weight and distance
 Betrag             money(10,2)       Calculated discount amount
                                      0 Discount was deleted from order manually.
 Geloescht          smallint
                                      1 Discount enabled
                                      Vector that is used to save the manually-changed
 Manuell            char(20)
                                      fields.
                                      Existing help field:
 Ekwgrsum           money(10,2)       purchasing total of specified product group
                                      No longer used by new logic.
                                      Existing help field:sales total of specified product
 Vkwgrsum           money(10,2)       group
                                      No longer used by new logic.
                                      Existing field for deposit invoices:
 Artnr              integer           item number of the discount/surcharge
                                      No longer used by new logic.
                                      Existing field for deposit invoices:
 Rechnr             integer
                                      invoice number from the payment schedule

 Bestellnr          integer           Not used at present!

 Glasgewicht        smallint          See table "rabattmeth"




A+W Software GmbH              EN-CONFIG-A+W Enterprise.docx                                 111
                                              If in the orders the stored procedure "rabattzuord"
                                              should be called that is called for each item and
                                              decided whether this discount affects the current
 Starting with ALCIB                          item.
 2008:                     smallint           Attention: When creating stored procedures, you
 Spaufrufkz                                   must make sure that if possible, no write operations
                                              are done on real tables since otherwise, due to the
                                              transaction logic in the document entry, there can
                                              be permanent blocks to the table.

 Starting with ALCIB                          Should the stored procedure "rabattanpassung" be
 2009:                                        called in the orders that allows adjustment of the
                           smallint
                                              discount. RABATT_SP_KAUF_PARAMETER must be
 Spaufrufkzkauf                               set.
 Starting with ALCIB                          This field allows the assignment of discounts from
 2011:                     CHAR(30)           purchasing orders received from OpenTRANS.
 Otrabattid                                   (#164543)

 Starting with ALCIB
 2011:                                        Marks the discount method as a Delivery surcharge.
                           smallint
                                              See #152136.
 Lieferzuschlag
 Starting with ALCIB
 2011:                                        Flag whether the minimum amount should also be
                           smallint
                                              drawn for a calculated amount of 0.0 GR.
 minbeinullbetragkz


Transaction data
The new discount logic uses the transaction table "kaufrab" of the old logic. This table was only
expanded by a few fields.


        14.5.11.        Special functions
Deliverz surcharge (AWD #152136)
ALCIB 2009 (February 2009)
Since this version, it is possible to assign discounts per delivery. There is a new checkbox in the
method master data for this that identifies these discount methods.
During delivery note generation, all discounts for the document are analyzed and for all records
for whose method this flag is set, the following check is conducted. If for the delivery to which this
delivery note applies there is already another deliery note that includes an active discount of this
method, the discount is deactivated in the delivery note to be generated. If there is none and the
discount is deactivated, it is reactivated again. This means that you cannot deactivate the delivery
surcharge for individual orders (see also PF #[AW-165215])
A delivery is identified via the customer, the route, the date, and the delivery address number.
If you use this logic, you must also set the environment variable LS_EIGENE_AUFNR. The effect of
this is that when generating delivery notes, a new internal order number (kauf.aufnr) is always
assigned. If you do not set this variable, there can be inconsistent totals in the orders. – Starting


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   112
with A+W Enterprise 6, this is no longer required. Starting with this version, this is the default
behavior.
ALCIB 2011 / June 2010 (AWD #177072)
This version offers an extended function "shipping surcharges". When generating the first delivery
note for an order, it is now checked whether the delivery surcharge was deactivated according to
the logic described above. If this is the case, the surcharge will be disabled in the order too.
This logic works only if the shipping surcharge is adopted only for the first partial document (flag
'partial document' in discount master data) and if this is a fixed discount (discount type WE).
Because the shipping surcharge is disabled in the order now, it will also be disabled in invoices
related to this order. Invoices will be entered with an order reference despite existing shipping
notes, e.g. if the customer does not accept partial shipment.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   113
15. Small delivery surcharge/shipping fee
ALCIB 2007 allows you to add surcharges for small shipments.




15.1.               Data structures
The tables involved are described briefly below. For a detailed description of the individual fields,
please use altab.
Master Data
    -   kleinliefkomm
This table shows the comments; please choose one of them if you do not want to add a small
shipment surcharge.
    -   kleinliefnein
This table shows the partners for which no small shipment surcharge shall be applied.
Transaction data
    -   kleinlief
This table shows a record for every invoice issued for a small shipment. This needs to be edited.
This means that first you have to decide whether a surcharge shall be applied at all. The
corresponding invoice can be booked after that.


15.2.               Stored Procedure
A stored procedure defines whether an invoice belongs to a small shipment, or to part of a small
shipment. At present, an invoice is considered to belong to a small shipment if the invoice amount
falls below a defined minimum.
The delivery value is the revenue for the item broken down across the quantities, which are
planned for the route in question:
kpos.erloes / kpos.menge * lapool.sollstk
According to standard ALCIB logic, the revenue of the item also includes the discounts/surcharges
charged back. General discounts will not be included in shipment value. The shipment value of a
route includes all order items shipped on a certain date, on a certain route, to the recipient of the
invoice (customer number on invoice/standard debtor for the order).
The stored procedure is called when booking sales invoices unless the market partner is stored in
the table kleinliefnein or the invoice booking is called by the Intauf. If the SP shows that this is a
small shipment, the program will refuse to book this invoice. The user is informed by a message. If
the SP returns an error, the booking of the invoice is also canceled.
Details regarding the functioning of the SP:
    -   For small shipments, the SP makes an entry in table 'kleinlief'. If an entry in table kleinlief
        already exists, the SP checks whether the decision regarding surcharge calculation has
        already been made.

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  114
    -   Invoices the reference orders of which have a payment plan, will not be checked for small
        shipments. Shipment of an order with a payment plan contributes to the shipment value
        however.
    -   An SP call will stop the booking in ALCIB if
            •   this is a small shipment and the SP has created a record in kleinlief.
            •   this is a small shipment and kleinlief shows as yet unedited records for this
                invoice.
    -   A SP call does not affect the booking if
            •   the route is a pick-up route
            •   the route is a direct delivery route
            •   the reference document is neither an order nor an invoice
            •   the invoice refers to an order with a payment plan
            •   table kleinlief already shows an edited record
            •   the shipment value exceeds the value defined in DELIVERY_SURGARGE_LIMIT
    -   The SP writes a log on the database server; the details depend on the help level set in
        ALCIB:
            •   o        < 6:   Only invoice and result of the check will be recorded.
            •   o       >= 6: A detailed trace is written.




15.3.           Dialog logic
Using <Ctrl+K> in the first field of the dialog for the automatic release of sales invoices brings you
to the dialog for editing small shipments. When you open this, all records from table 'kleinlief' are
loaded. The menu is protected by the right VOKZ.
This menu and the mode menu provide the following information on the invoices involved:
    -   Delivery date
    -   Customer number
    -   Route
    -   Invoice number and sub-number
    -   Invoice value
    -   Called quantity (MODE dialog)
    -   Default quantity (MODE dialog)
    -   Shipment value (MODE dialog)
Follows a checkbox with three options. It decides whether or not a surcharge shall be applied.
All checkboxes are empty when you open the dialog. For the records you want to edit, you can
add a green checkmark or a red cross to the checkbox. The green checkmark means that this
invoice will get a surcharge while the red cross means no surcharge. When you apply no


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                115
surcharge, you have to select a reason for this in the last field of the dialog. This is selected by
means of a selo from table kleinliefkomm.
When you start processing of the defined information by <F3>, the following database operations
will be performed within a transaction:
•       The surcharges for all defined invoices will be calculated from master data. For details on
the calculation, please refer to paragraph 'Surcharge calculation'. These invoices will then be
recalculated by means of Intaufs.
•       All invoices that shall get a surcharge will be booked by means of Intauf.
•       The changes are saved in table kleinlief.


15.4.           Surcharge calculation
You can define three different surcharges. The actual surcharge to be applied to the invoice
depends on the customer. Basically, the system will add the surcharge defined in
DELIVERY_SURCHARGE. You can create a configurable partner field called DELIVERY_SURCHARGE
however. If you enter for a customer 'A' or 'B' here, the system will the value defined in
DELIVERY_SURCHARGEA or DELIVERY_SURCHARGEB instead of the value defined in
DELIVERY_SURCHARGE for this customer.


15.5.           Automatic processing of open invoices
To prevent small invoices from piling up and to avoid delays in booking of the invoices, you can
have open invoices automatically processed. Every first invoice of a customer, route, and ltplan
will get the surcharge. The remaining records will get no surcharge. This automation is enabled by
the ALCIB start parameter "-kleinlief" and writes a log called "autokleinlief" while it is run.


15.6.           Environment variables
DELIVERY_SURCHARGE_LIMIT
This environment variable saves the limit to be reached by all shipments on a date and on a route
to avoid the application of a surcharge.
DELIVERY_SURCHARGE
This environment variable defines the general surcharge value. Furthermore, this variable is used
in the program to check whether the logic is active.
DELIVERY_SURCHARGEA
In this environment variable, the GR surcharge value is saved, which is used if an A was stored for
the associated market partner in the configurable field DELIVERY_SURCHARGE.
DELIVERY_SURCHARGEB
In this environment variable, the GR surcharge value is saved, which is used if an B was stored for
the associated market partner in the configurable field DELIVERY_SURCHARGE.
DELIVERY_SURCHARGE_SP




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     116
In this environment variable, the name of the stored procedure is specified that is called from
A+W Enterprise and decides whether this is a "small delivery".
DELIVERY_SURCHARGE_TRACEPATH
This environment variable defines the path for the SP log. If this variable is not set, /tmp will be
used as a path.
REP_FAKTURA
In this environment variable, form types are defined that can only be output if they have been
invoiced or booked. The individual form types in the listing are separate by pipes.




15.7.           Installation instructions
Starting with version 3.2:
-   Create tables kleinlief, kleinliefkomm and kleinliefnein (scripts:
    /develop/alcib/4/1/de/install/xsql/4/1/0/...).
-   You have to enter at least one record in kleinliefkomm because a record has to be selected if
    no surcharge is applied.
-   Install SP (\\\\srvalcib\\globusr\\matthias\\kleinlief\\cu_fillkleinlief.sql).
AWDesk case: 120144




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                117
16. Configuration of the ICE environment
The description of the installation and configuration of the ICE environment is in the system
configuration instructions (DE-CONFIG A+W Enterprise System.pdf or EN-CONFIG A+W Enterprise
System.pdf).




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                            118
17. Document search
If you enter an entry date in the document search, documents AB are searched for on this date
(kauf.edat >= <Eingabe>). Only if you leave the field empty does the search go back only 365 days.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              119
18. Recording with reference
For the document recording with reference to another document, there are a wide variety of
requirements and scenarios that define which data from the reference document will be taken
over and which will be determined anew from the master data.


18.1.           Configured Reference
#198090
Configuring the reference
In the current version, it is possible to control what happens to the order header fields at
referencing. The Master data > Field configuration > Reference configuration menu element
provides access to a new dialog on which the user can define the program behavior at
referencing. The following behavior can be defined for the valid order/reference order
combinations and for a change of market partner, "Yes" or "No":

    •   Copy the items of the reference automatically ("Yes") or only after checking with the user
        ("Question")?
    •   Copy release text ("Yes" or "No")?
    •   Copy configurable order header fields ("Yes" or "No")?
    •   Copy configurable order item fields ("Yes" or "No")?
    •   List of fields that are not to be adopted from the reference order.

The following order/reference order combinations can be handled at present:

    •   Quotation and reference document: Quotation or order
    •   Order and reference document: Quotation, order, inquiry or PO
    •   Inquiry and reference document: Quotation, order, inquiry or PO
    •   PO and reference document: Order, inquiry, or PO

In the fields Document and Reference document you can select the option "All" which refers to all
documents that can be handled.


Analyzing the configurable reference fields in the document
When documents are entered by referring to existing documents, the adoption of certain (not
all!) data from the reference document in the order header is controlled by the new configuration
tool. This way, the data in the new document can be preset flexibly, namely partly with data from
the reference order, and partly with master data, or it is reset to the defaults. The current version
will analyze the data - in case of cross referencing - from the following document types: orders,
quotations, purchase orders, and inquiries.
Rules and peculiarities to be obeyed:

    •   Configurable fields in the order header
        Reloading the fields means that the existing records will be deleted and recreated based
        on master data. This should be used with utmost care if individual logic has been


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                120
        programmed for these fields by A+W. In this case, presetting the data from master data is
        invalid and may not be attempted.
        Then data is loaded from the reference document, the program checks whether the
        market partner has changed. If so, data existing in the reference document will be
        adopted but data that makes reference to the market partner in master data will be
        reloaded from the new partner's master data.
    •   Configurable fields in order items
        When data is reloaded, the records will not be adopted from the reference document. All
        data will be preset from master data. As for fields that refer to an item, the reference can
        be defined by articles, reloading can result "only" in a loss of manual changes.
    •   Fields on item level
        ATTENTION: When reloading the supplier or the supply type on item level, please note:
        If the item is set to 'order from supplier XXX' in the original document while this supplier
        is not the standard supplier for this product, the corresponding entry in the reference tool
        has the following meaning.
             1. If the first supply type defined for the product in master data refers to "PO" , it
                  will remain "PO" in the new order; only the supplier will be changed to the
                  standard supplier.
             2. If the first supply type defined for a product in master data does NOT refer to
                  "PO" , the old supplier will be deleted and the supply type for the product will be
                  changed.

An entry in the configuration tool for the supply type itself would mean that the supply types of
all items would be loaded from master data.


CAUTION: Very important!
If this logic is active, all the switches existing in this environment that may have been active for
reloading the individual fields will not be analyzed any more! Please contact a member of the
project team regarding the configuration.


Environment variable REFERENCE_CONFIG_TOOL
 Current configuration                               To be considered in reference tool
 ADR_FROM_ORGKAUF=ON                                 Field KAUF_LADRNR may not be selected in
                                                     the tool!
 ALL_ADR_COPY=ON                                     Field KAUF_LADRNR may not be selected in
                                                     the tool!
 ANGBMODDRKZ=ON                                      KAUF_MODDRKZ must be on the list. Also
                                                     applies to quotations.
 ANGEBOTSKONTROLLE=ON                                KAUF_KONTROLLMANR may not be set for
                                                     ANGB.
 COPY_EKINFO=ON                                      KAUF_EXBEZ1 may not be selected and must
                                                     be handled correctly!!
 DISABLE_COPY_PRIVATE_CHAR=ON                        KAUF_PRIVATE_CHAR1 must be set to.
 NO_POOL_REASON=ON                                   Reason for the release lock must be set to No



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 121
 PREIS_ANGEBOT_DRUCK=OFF                           KAUF_PREISDRUCKKZ and KAUF_RABDRUCKKZ
                                                   must always be set to No for QUOTATIONS.

The following fields may have to be listed as well because they used to be reloaded automatically.
KAUF_REKLAMART
KAUF_REKLAMORT
KAUF_REKLAMSPEC
KAUF_REKLAMDAT
KAUF_FINSTNR
KAUF_MINSZR
KAUF_MAXSZR
KAUF_ARTKENNFRM
KAUF_POSDRKZ
KAUF_PREISDRUCKKZ see PREIS_ANGEBOT_DRUCK=ON for ANGB: must be on the list as a default
for ANGB
KAUF_RABDRUCKKZ see PREIS_ANGEBOT_DRUCK=ON for ANGB: must be on the list as a default
for ANGB
KAUF_KONTROLLMANR see ANGEBOTSKONTROLLE=ON for ANGB
KAUF_MODDRKZ must be on the list. Should be set to 'default'. For KAUF/BEST=1, for ANGB acc.
to ANGBMODDRKZ
The following fields may have to be listed in case the customer is changed because they used to
be loaded automatically:
KAUF_ROUTENR2 /* if relevant */
KAUF_ROUTENR3 /* if relevant */
KAUF_ROUTENR4 /* if relevant */
KAUF_ANFAHRT       /* if relevant */
KAUF_KILOMETER /* if relevant */
KAUF_SKONTO1
KAUF_SKONTO2        /* if relevant */
KAUF_SKONTO3        /* if relevant */
KAUF_ZAHLZIEL       /* if relevant
*/
KAUF_VALUTA        /* if relevant
*/
KAUF_ORGNAME
KAUF_LESE_ORGNAME /* if relevant */
KAUF_ORGVORNAME
KAUF_LESE_ORGVORNAME /* if relevant */

A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                          122
KAUF_ORGANREDE
KAUF_ORGZHD
KAUF_ORGPOSTFACH
KAUF_ORGPLZ
KAUF_ORGORT
KAUF_LESE_ORGORT     /* if relevant */
KAUF_ORGPFPLZ
KAUF_ORGKFZCODE
KAUF_ORGLAND
KAUF_ORTTEL
KAUF_ORGEMAIL
KAUF_PRIVATE_LONG1
KAUF_PRIVATE_LONG2
KAUF_PRIVATE_CHAR1
KAUF_PRIVATE_CHAR2
KAUF_TEILFAKKZ
KAUF_TEILLEFKZ
KAUF_PREISDRUCKKZ
KAUF_RABDRUCKKZ
KAUF_EXPLBEARBKZ
KAUF_VERGLASKZ
KAUF_ATXTDRUKZ
KAUF_MODDRKZ
KAUF_POSDRKZ
KAUF_TEMPKUKZ
KAUF_GMAXGEW
KAUF_GBELAD
KAUF_LIEFERART
KAUF_VERPACKART
KAUF_VERSANDART
KAUF_AZSNR
KAUF_BZSNR
KAUF_SPRKZ
KAUF_VERTR
KAUF_VERTRERLOE


A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx   123
KAUF_ABVERTR
KAUF_FIBUKEY
KAUF_FINSTNR
KAUF_ZAHLMERK
KAUF_AZAHLKZ


Configurable fields:
For IP, configurable fields for KOPF must not be NO!




18.2.           Takeover of individual items
September 2024 // 4009369
By default, all items are taken over unchanged from the reference document into the new
document. If you do not need individual items in the new order, these must be deleted with F7.
For the entry of complaints for individual items in large orders, this can be time-consuming. For
the entry of orders, a changed behavior can now be configured.
After activation of the new function, during order entry, the question "Do you want to retain all
items from the reference order" is posed through reference.
If you answer the question with "yes," then as previously, all items with the original quantities are
taken over into the new order and they can be adjusted accordingly.
If you answer the question with "no," then all items are taken over with the quantity 0 from the
reference document into the new document. The user can then enter a quantity for the desired
items. The original quantity is displayed as information on the upper edge of the dialog. With
Ctrl+A in the quantity field, you can take over the original quantity. As long as the quantity field is
not filled out in any item, the dialog for item entry cannot be exited with "End". The notice 19623
"This document does not contain any valid items" appears. All other actions, such as inserting or
attaching new items, are only possible if the takeover of the old items has been clarified.
If you try to attach a new item without activating an old item, the notice appears "You have not
activated any items from the reference document. Do you want to delete all items?" If you
answer the question with "no," the old items are retained. If you answer with "yes," the items
with quantity = 0 are deleted.
If the desired quantities are entered, then you can update the order with Ctrl+R or END. Here the
items with quantity = 0 are deleted and the order is totaled up anew.
If a new item is inserted or attached before the status was updated, then there is a query about
whether only X items should be taken over. If you answer the question with "no," the old items
with quantity = 0 are retained and only the newly entered item is considered in the order totaling.
If you answer the question with "yes," the items with quantity = 0 are deleted and the order is
totaled up anew.
The functionality is currently only provided within the order entry, but if desired, it can also be
expanded for quotations, inquiries, and POs.
The function is activated with the environment variable "REFERENCE_SELECTED_ITEMS".


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    124
18.3.           Addresses
If the "configured reference" is not activated, there are fixed rules and extra configurations for
the address determination.
When you enter a document manually with reference to an existing document, the invoice and
delivery addresses are not copied from the reference document, but are taken from the MP
master. The determination of the delivery address (not the invoice address) can be overridden
with the environment variables ADR_FROM_ORGKAUF or ALL_ADR_COPY .
Generally it applies that if a (purchase) invoice or (purchase) credit is entered with credit, the
delivery address is taken over from the reference document. This applies if for purchase
documents reference to a purchase document and for sales documents reference to a sales
document is made.
ADR_FROM_ORGKAUF
If this environment variable is active, the delivery address is taken over from the reference
document. This also happens if the market partner changes between reference document and the
document that is currently being entered. The exception is the reference between sales and
purchasing. If a sales document with reference to a purchase document is entered or vice-versa,
then the delivery address is determined from the market partner master data.
This function is only active if the environment variable NEW_ADRESS_LOGIC is active.
ALL_ADR_COPY
This variable is not evaluated if the environment variable ADR_FROM_ORGKAUF is active. If this
environment variable is active, the delivery address is taken over from the reference document.
The exception is the reference between sales and purchasing. If a sales document with reference
to a purchase document is entered or vice-versa, then the delivery address is determined from
the market partner master data.
If between reference document and the document currently being entered the market partner
changes, then the delivery address is not taken over.
ALTE_RECHADR_TEST
This variable activates the check to see if the invoice address data in the master has been
changed. If this is the case, it is determined anew from the master data. The query is a CU query,
which can be pre-populated with an appropriate default value. The variable has the following
variations:
ON or 1 – the check is done with reference order to order
2 = the check is done with reference order to order AND order to quotation


NEW_ADRESS_LOGIC
With Version ALCIB 2.4, this variable activates the new address logic. This includes extensive
functions in the area of address entry and address selection in document entry, invoice and
delivery note creation, as well as address usage in dispatch.
In the current versions ALCIB 2011, A+W Enterprise 5, and A+W Enterprise 6, this environment
variable should always be active.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   125
18.4.           Orders with foreign currency
A+W Enterprise is multi-currency-capable. This means that different orders and purchase orders
can be calculated in different currencies. Within this multi-currency capability, for the new entry of
a document, the exchange rate currently stored in the master data is taken over into the document
and can be adjusted there if necessary. Since there can sometimes be a longer period between
document entry and invoicing and because the legal requirements are different in different
countries, it can be configured in the system whether and when the exchange rate for a currency is
determined anew.
If no environment variable is set, the exchange rate is only determined anew from the master
data with the new entry of a document without reference. For entry with reference, it is never
determined anew.

For the automatic change of order-related POs or orders within the internal document transfer, the
exchange rate is always determined anew from the master data.
Warning: the combined setting of the following environment variables is not permitted. What
system behavior would come from this is not defined.


         18.4.1.         RECH_KURS_NEU
#33675
If the variable is set, the exchange rate for sales invoices and sales credit notes is redrawn if they
are generated by reference to other transactions.
SALES => INVOICES => AUTOMATIC RELEASE
SALES => INVOICES => MANUAL INVOICE
SALES => INVOICES => COUNTER INVOICE
SALES => CREDITS => ENTER CREDITS
It is now possible with manual or automatic generation of sales invoices or sales credits to
determine the exchange rate anew from the maste data. Since A+W Enterprise converts the
figures only for printout and transfer to financial accounting, the invoice amount does not need to
be recalculated.
For manual entry of a credit with reference, the exchange rate is drawn anew from the master
data.
For the manual entry of an order/quotation/delivery note with reference, the exchange rate is
NOT determined anew.
For the automatic creation of a delivery note, the exchange rate is NOT determined anew.
For the correction of an unbooked invoice/credit, the exchange rate is determined anew.
For the correction of an order, the exchange rates is NOT determined anew.
For the creation or entry of SA document with reference, the exchange rate is always taken over
from the reference documents.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  126
        18.4.2.          BEZUG_KURS_NEU
If this environment variable is active, then the exchange rage of a foreign currency is ALWAYS
determined anew from the master data except for the credit entry if a document with reference
to another document is entered.
If an inquiry, PO, order or quotation is changed in price-relevant fashion, the exchange rate is
determined anew.
If a goods receipt, delivery note, purchase invoice or sales invoice is changed, the exchange rate is
NOT determined anew.


        18.4.3.          UMRECHNUNGSKURS_BEI_BEZUG
#128639
If the environment variable UMRECHNUNGSKURS_BEI_BEZUG is defined with 1 and active, then
the exchange rate is only determined anew in quotations, order, inquiries, and POs with new
entry through reference and in case of correction with price-relevant changes. For invoice
generation, the exchange rate is not determined anew.
If the environment variable is defined with 0 and is active, then the exchange rate is taken over
from the reference document.
ATTENTION: Will be overwritten by BEZUG_KURS_NEU!
For the automatic change of order-related POs or orders within the internal document transfer,
the exchange rate is always determined anew from the master data.


        18.4.4.          WKURS_NEU
This is the oldest variable!

For the manual entry of a SA invoice via Sales – Invoices – Manual Invoice (not for the automatic
generation via Sales – Invoices – Automatic Release!) of SA invoices with reference to an
order/delivery note, the exchange rate is determined anew from the foreign currency master
data.

For the manual entry of an order/quotation/delivery note/credit with reference, the exchange
rate is NOT determined anew.

For the automatic creation of a delivery note with reference to an order, the exchange rate is NOT
determined anew.

For the correction of an order, the exchange rate is NOT determined anew.

For the creation or entry of SA document with reference, the exchange rate is always taken over
from the reference documents.

Conclusion: this variable actually makes no sense, but it is still here for reasons of compatibility.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  127
         18.4.5.    Overview
Action      RECH_KURS_NE BEZUG_KURS_N    UMRECHNUNGSKURS_BEI_BEZ   WKURS_NE
            U            EU              UG                        U
                                         1                  0
Inquiry     Ref.         Master data     Master data    Ref.       Ref.
with
referenc
e
Price-      Ref.         Master data     Master data    Ref.       Ref.
relevant
change
in the
inquiry
PO with     Ref.         Master data     Master data    Ref.       Ref.
referenc
e
Price-      Ref.         Master data     Master data    Ref.       Ref.
relevant
change
in the PO
Manual      Ref.         Master data     Ref.           Ref.       Ref.
goods
receipt
with
referenc
e
Automati    Ref.         Master data     Ref.           Ref.       Ref.
c receipt
of goods
Manual      Ref.         Master data     Ref.           Ref.       Ref.
SA
invoice
with
referenc
e
Automati    Ref.         Master data     Ref.           Ref.       Ref.
c PU
invoice
SA credit   Ref.         Ref.            Ref.           Ref.       Ref.
with
referenc
e




A+W Software GmbH           EN-CONFIG-A+W Enterprise.docx                 128
For the automatic change of order-related POs, the exchange rate is always determined anew
from the master data.


Quotatio    Ref.             Master data        Master data      Ref.           Ref.
n with
referenc
e
Price-      Ref.             Master data        Master data      Ref.           Ref.
relevant
change
in
quotatio
n
Order       Ref.             Master data        Master data      Ref.           Ref.
with
referenc
e
Price-      Ref.             Master data        Master data      Ref.           Ref.
relevant
change
in order
Manual      Ref.             Master data        Ref.             Ref.           Ref.
delivery
note
with
referenc
e
Automati    Ref.             Master data        Ref.             Ref.           Ref.
c
delivery
note
Manual      Master data      Master data        Ref.             Ref.           Master
SA                                                                              data
invoice
with
referenc
e
Automati    Master data      Master data        Ref.             Ref.           Ref.
c SA
invoice
Change      Master data      Ref.               Ref.             Ref.           Ref.
of the SA
invoice
SA          Master data      Master data        Master data      Ref.           Ref.
partial


A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx                            129
 and final
 invoice
 SA credit   Master data        Ref.                Ref.              Ref.            Ref.
 with
 referenc
 e
 For the automatic change of orders within the internal document transfer, the exchange rate is
 always determined anew from the master data.




18.5.           Payment modalities/characteristics
You can now configure the system so that with reference (except for reference order to
quotation), the payment modalities (cash discount payment term, etc.) and payment
characteristics are compared to the data in the master data and if desired, also the master data in
the new order or the new quotation. The queries are CU queries and can be configured away with
a permanently defined response.
For the check, it is also taken into account whether the data has to be drawn from the customer
or project, if present. The special logic if the data must be drawn from projects on the block has
also been implemented (OBJEKTINFOS_IN_KAUF).

ZAHLBEDINGUNG_BEZUG_TEST = ON
alcib - 13.04.11030


18.6.           Notes on documents
        18.6.1.         Locking orders for the reference
There are always important reasons why you would like to lock individual documents for the
reference (e.g. master data adjustments). You can do this by storing a document note with the
priority "lock for reference" (infokauf.wertung=5) in the document to which no more reference
should be made. The note is displayed if the document is selected as reference document.


        18.6.2.         Takeover of document note                        en
In A+W Enterprise, the switch VORGANGSANMERKUNG_SPEZIAL is responsible for how and when
the notes are taken over.
The switch has 4 variations:

VORGANGSANMERKUNG_SPEZIAL
Activates new logic for takeover of document notes.
0 - do not take over
1 - takeover with query (also for invoice and delivery note)
2 - takeover with query (only for quotation, order, inquiry, PO, goods receipt)
3 - always take over


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                              130
If the variable is not active, then the old logic applies, that the notes are only taken over with the
transformation quotation - order, inquiry - PO, order-PO, order-inquiry, order-goods receipt.
Document notes are stored in the table infokauf.


        18.6.3.          Marking reference orders for complaint orders
If in A+W Enterprise a complaint order is entered with reference to another order, then in the
original order, the document marking "Complaint order <Complaintordernumber> (<Entrydate of
the complaint order>)" is written with high priority. The prerequisite is that the complaint type is
populated in the newly entered complaint order.
alcib - 13.04.15803 // September 2023
If within the internal client separation reference is made to an order, then the client number of
the new order is noted in the document note. "Complaint order <Ordernumber><Clientnumber>
(<Entry date of the complaint order>)"


alcib - 13.04.15803 // September 2023
If a complaint order with reference to an order generated via internal EDI is created, then the
complaint information is now also written to the upstream documents PO and original order. The
logic applies only within the internal client separation, so that all POs and orders are present in a
database. If the participating clients are in different databases, the complaint information is
written as previously only to the direct reference order.


        18.6.4.          Note for reference to quotations
alcib // QR2506

If an order was entered with reference to a quotation, then a note with priority "high" is written
back to the quotation. It is presented as soon as you open the quotation. This note remains in the
quotation, it is not taken over by further documents, even if the copying of the notes is active.

If the quotation is being edited at the time the order is saved, then the note cannot be written
back and the operator is informed of this.

The logic can be activated with the environment variable ORDERINO_TO_OFFER = ON




18.7.             Client allocation for internal client separation
BEZUG_ALTES_HAUS (client reference: no)
(Case #221522 04/2011): If this environment variable is set, the site is copied from the reference
document when the sales transaction is generated manually and is not re-populated.
This variable is only evaluated for systems without internal client separation.
For additional explanations, see "EN-CONFIG-A+W Enterprise Internal Client Separation"



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 131
18.8.           Supply types
With reference to another document (for orders and quotations), the supply type is always taken
over from the template document. Due to the activation of the new environment variables
BEZUG_BA_NEU, with reference the user is always asked whether the supply types should be re-
drawn from the master data.
Here, the following rules apply:


    •   For the stock orders, there is no query and the supply type is retained.
    •   For supply type PO and stored supplier in the item, these are retained.
    •   For all other supply types in the item, determined anew.
    •   The supply type is always re-determined in the BOM.
If the supply type of an element in the template document and in the master data was PO, then
the existing supplier from the old document is retained.




18.9.           Environment variables
ADR_FROM_ORGKAUF (client reference: no)
When you enter a document manually with reference to an existing document, the customer and
delivery addresses are not copied from the reference document, but are taken from the MP
master. This switch can be used to ensure that the delivery address is adopted from the
reference document.
ALL_ADR_COPY (client reference: no)
This variable activates the logic that the address is taken from reference document. Only if adr
does not exist in DB is set to default.
ALTE_RECHADR_TEST (client reference: no)
This variable activates the check to see if the invoice address data in the master has been changed
and then fetches it again.
ON or 1 – reference order to order
2 = also with reference order to quotation
BEZUG_ALTES_HAUS (client reference: no)
(Case #221522): If this environment variable is set, the site is copied from the reference document
when the sales transaction is generated manually and is not reoccupied.
This variable is only evaluated for systems without internal client separation.
BEZUG_BA_NEU (client reference: no)
If this environment variable is active, then there is a query in the document entry with reference,
activates the query for reference whether hte supply types in the items and in the BOM should be
re-drawen from the current master data.
Description in #91368 ([AW-115023])

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 132
BEZUG_KURS_NEU (client reference: no)
Variable decides whether the exchange rate should be redrawn when reference is made. If the
variable is set, the exchange rate is redrawn, both for calculating in your own currency and for
calculating in a foreign currency.
NEW_ADRESS_LOGIC (client reference: no)
Variable activates the new address logic (starting with V2.4). It should always be activated in the
current versions!
ORDERINFO_TO_OFFER (client reference: no)
If active, then a note is written to the quotation if an order was generated from the quotation
RECH_KURS_NEU (client reference: no)
If the variable is set, the exchange rate for sales invoices and sales credit notes is redrawn if they
are generated by reference to other transactions.
REFERENCE_SELECTED_ITEMS (client reference: no)
For the reference to an order with several items, you can take over the items selectively in the
new order. First all items from the old document with quantity=0 are loaded. By entering the
quantity only in the desired items and pressing <Refresh> or end, the new order is calculated only
with the active items.


UMRECHNUNGSKURS_BEI_BEZUG (client reference: no)
(Case #128639): Should the exchange rate be recalculated when entering transactions with
reference from the master data?
0 - No, always take the exchange rate from the reference document.
1 - When entering quotations, orders, inquiries and orders, redraw the exchange rate. Otherwise,
maintain exchange rate.
ATTENTION: Will be overwritten by BEZUG_KURS_NEU! see also WKURS_NEU, RECH_KURS_NEU


VORGANGSANMERKUNG_SPEZIAL (client reference: no)
Activates new logic for takeover of document notes.
0 - do not take over
1 - takeover with query (also for RECH/LIEF)
2 - takeover with query (only for ANGB/AUFTR/BEST/ANFR/WAEIN )
3 - always take over
 If the variable is not active, then the old logic applies, the notes are only taken over during the
conversion QUOT-ORDER,INQUI-PO,ORDER-PO,ORDER-INQUI,PO-GOODSRE.


ZAHLBEDINGUNG_BEZUG_TEST (client reference: no)
 If set, with reference cash discount&co, there is always a comparison with the data from the
master data and replacement if desired



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  133
19. Credit not entry
19.1.           Printing items
In the credit note, the field kauf.posdrkz has a different meaning than in the other documents: in
the credit note it means "Print items" (0=no 1=yes). In the other documents, it means "Suppress
item prices" (0-no 1=yes), that is, item prices will not be printed. For credit notes, the code is set
at the end of the entry, regardless of how the question "Print credit note items?" is answered. For
all other documents, the field must be toggled (1.Shp screen for header entry, left side).
For references of invoices to credit notes, this code was simply taken over, which meant that
"Print items" from the credit note became "Suppress item prices" on the invoice.
The following changes were made:
1. Change in 2.10, 2.11 und 2.12: For generation of a manual invoice with reference to a credit
note, kauf.posdrkz is set to 0 (= do not suppress item prices).
2. Change in 2.10, 2.11 und 2.12: Since for credit notes the field kauf.posdrkz is set when saving by
answering the question "Print credit note items", the field on the 2.Shp screen for credit notes is
set to "not changeable".
3. Change in 2.12: The guide text on the 2.Shp screen ("Suppress item prices") is incorrect and
misleading for credit notes. It will be replaced with "Print items".




19.1.           Form Printing
See "Invoice generation > Form printing"




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 134
20. Invoice generation
20.1.            Change log
[AW-114166] alcib - 13.04.14122
In the change log, you can now see for the invoices (SA and PU) whether they were
generated manually or automatically. This information is saved for the invoice (kauf recrod
with kauf.vorgang = 7 or kauf.vorgang=8) in the entry record in the table kaufedit in the
flag kaufedit.prod_rel_aend.
kaufedit.prod_rel_aend = 2 - manual;
kaufedit.prod_rel_aend =0 or 1 - automatic.




20.2.            FinAc Debitor
If for a customer in the market partner master data a different FinAc debtor is stored, during
invoice generation, the MP number of the FinAc debtor is taken over into the invoice (kauf.kunr).
Caution:
In the multisite environment, it applies that a different FinAc debtor can only be entered for a
customer that is itself not an explicit FinAc debtor for a site. An explicit FinAc debtor for a site is
marked with: mp.debitor = 1 and mp.debhausnr > 0.




20.3.            Grouping criteria for collective invoices
Here it is listed according to which criteria the data for the collective invoices is sorted and
according to which criteria a group change occurs, that is, a new invoice number is assigned.
Sorting by:
 Customer number                                      kauf.kunr
 Default debtor                                       Kauf._stddebnr
 Project #                                            kauf.objnr (unless the environment variable
                                                      SRECH_NO_OBJ is set)
 Group                                                Input field on the dialog or value import
                                                      (SRECH_WITH_GRP)
 Date of entry                                        kauf.edat
 VAT percent                                          kauf.mwstkz
 Payment term                                         kauf.zahlziel
 Value                                                kauf.valuta
 Cash discount 1                                      kauf.sktage1



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   135
 Cash discount 2                         kauf.sktage2
 Cash discount 3                         kauf.sktage3
 Currency                                kauf.waehrung
 Calculate in                            kaufp.waehrprs
 Skonto% 1                               kauf.skvh1
 Skonto% 2                               kauf.skvh2
 Skonto% 3                               kauf.skvh3
 Order #                                 kauf.auftrnr




Group change according to:


 Customer number                         kauf.kunr
 Default debtor                          Kauf.stddebnr
 Project #                               kauf.objnr (unless the environment variable
                                         SRECH_NO_OBJ is set)
 Group                                   Input field on the dialog (SRECH_WITH_GRP)
 Date of entry                           kauf.edat
 VAT percent                             kauf.mwstkz
 Payment term                            kauf.zahlziel
 Value                                   kauf.valuta
 Cash discount 1                         kauf.sktage1
 Cash discount 2                         kauf.sktage2
 Cash discount 3                         kauf.sktage3
 Currency                                kauf.waehrung
 Calculate in                            kaufp.waehrprs
 Skonto% 1                               kauf.skvh1
 Skonto% 2                               kauf.skvh2
 Skonto% 3                               kauf.skvh3
 VAT code                                kauf.kukz
 Site Number                             Kauf.hausnr – see environment variable
                                         SRECH_KEINE_HAUSNUMMER
                                         CAUTION: will only work until June 2024 due
                                         to e-invoicing
                                         There is a need for clarification here



A+W Software GmbH            EN-CONFIG-A+W Enterprise.docx                         136
By default, there is no restriction of the number of partial invoices in collective invoices. (Only
subnr is smallint. And so restricted to 32xxx )




20.4.  Grouping of collective invoices through value
  import
[AW-153957] // alcib - 13.04.18024
It is now possible that a grouping is undertaken via the value import for collective invoices.
For this, an individual SQL query must provide the group as third parameter.
SRECHFREI_RELEASE = x y (individual SQL from AdhocSQL)
SRECH_WITH_GRP = ON
SRECH_WITH_GRP (client reference: no)
Normally the Adhoc_SQL returns auftrnr, subnr for the value import for collective invoices. If this
variable is active, the value import should return auftrnr, subnr, gruppe.




20.5.           Payment schedule (partial and final invoices)
#49802
This is an A+W Enterprise module that has to be released specially.
It is now possible to create deposit invoices, manually or automatically, based on a payment
schedule, close this transaction with deposit invoices with a final invoice, then handle these
transactions "correctly” by booking them.
If the payment schedule logic is started up, in this step the FinAc transfer must absolutely be
tested for deposit and final invoices. It cannot be ruled out that the use of payment schedules
requires adjustments in the logic of the FinAc transfer. It's not possible to make a blanket
statement about this. The situation has to be checked individually for each customer.


         20.5.1.         Master data
For the use of a payment schedule, a special articles is required. An article for the deposit invoice
with article type 995 "Deposit invoice" has to be created. This is created in the regular article
master data (Master data - Article). In addition, another special article for the final invoice with
article type 994 "Final invoice" can be created. Several articles can also be created per type and
later selected when creating the payment schedule. This article is then taken over for the
generation of the deposit invoice as item article.
In master data, the article should be stored as a "piece” article without BOM, but with manual
pricing.
The correct booking account must be entered.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    137
        20.5.2.          Payment schedule
SALES => ORDER ENTRY, <MENU>, PAYMENT SCHEDULE
The payment schedule enables you to define scheduled installments, including the amount and
the date. This data is the basis for the automatic issuing of deposit invoices.
Payment schedules can be defined for orders that have not been invoiced yet. You can access the
dialog from order entry via <MENU> => PAYMENT SCHEDULE both on the header or on the item
or footer level of the order. The payment schedule is best created from the order footer since all
totals are known at that stage.
The "payment schedule" dialog first requires input of the date on which the deposit invoice
should be issued. Then you have to enter a special article "deposit invoice" or "final invoice". Next
you can enter a percentage (referring to the current net amount of the order). In this case, the
program automatically calculates the amount that is then shown in the "amount” field.
October 2022; alcib build 13571
In the payment schedule, it is no longer absolutely required to store a special article "Final
invoice." If you enter a special article "final invoice," then it is easier to create a SQL for the pre-
population of the data for automatic generation of final invoices (value import). If you are working
with the payment schedule, then you can also only enter deductions in the plan. The total of
these must be smaller than the order total net. The final invoice will then take the order
automatically and enter all deductions as discounts.


The payment schedule may contain any number of records. The only condition is that the total of
all installment amounts listed in the schedule does not exceed the actual net amount of the order.
Should this be the case, a warning will be issued; the last entered amount is rejected.
If at a later stage, the net order total is reduced so that the total from the payment schedule
exceeds this, the order will be checked before saving, and you will be informed accordingly. You
will not be able to save this order. The payment schedule cannot be changed after the first
deposit invoice was issued. It is therefore also impossible to reduce the net price at this stage.
Caution: If the order is changed afterwards, and the net amount changes due to this, the payment
schedule will not be recalculated! If you do not enter a percentage, the user has to enter the net
amount of the deposit invoice. If a percentage was defined and the amount is changed
afterwards, the percentage will be deleted automatically.
If a payment schedule was defined for an order, the order is automatically switched to "individual
invoice”. It is generally impossible to issue partial invoices for orders with a payment schedule.
This works the other way round as well, i.e. after a partial invoice was issued for an order, it is
impossible to enter a payment schedule.
It is also impossible to issue an invoice for an order with a payment schedule in the previous
menus (SALES => INVOICES => AUTOM. or MANUAL INVOICING). 2 new menu elements have been
created for this: Deposit Invoices and Final Invoices.


        20.5.3.          Deposit invoice
SALES => INVOICES => DEPOSIT INVOICES




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  138
Unlike partial invoices based on partial shipments, the deposit invoice always refers to the
entire order. These invoices do not calculate individual items or parts thereof, but only a
certain installment. The payments for the deposit invoices are booked to special
accounts.
Deposit invoices can be issued automatically, or manually.
For automatic creation of an installment invoice, all records from this order's payment
schedule that were not booked so far, will be shown after you enter the order number.
An entry in the "free” field defines which invoice shall be issued. The system offers these
records with the flag NO. For the value import, a SQL query is stored by default
(QR11/2022: Group 1/ID 110 (for an order) and ID 111 - all). A customer-specific
adjustment is not provided here. You can change the amount of the deposit invoice if
required. This change is saved in the payment schedule. You cannot change the dates of
the payment schedule, however. Deposit invoices are booked without further queries.
The invoice generated can be viewed via the MANUAL DEPOSIT INVOICE menu.
(see "Configuration" - environment variable ABSCHLAG_BUCHEN_MITFRAGE)
Manual input differs from this procedure only insofar that you have to enter a reference
order. If an entry in the payment schedule is found for the input date, the data is adopted
automatically. First, all items of the order are copied to the invoice, predefined as 0 pcs.
"invoiced”. These items are set to display mode. An additional item is created in the
invoice showing the article number from the payment schedule, the invoiced quantity = 1,
and the price/pc. of the item = amount stated in the payment schedule. Discounts and
reductions will not be adopted from the order; the price of the new item becomes the net
amount for this deposit invoice. It is impossible to create an additional item in this
deposit invoice. If the invoice amount is corrected, the appropriate record in the payment
schedule is changed as well.
IMPORTANT: No cash discount conditions are defined for deposit invoices.
QR22/11: see "Configuration" - environment variable
ABSCHLAGSRECHNUNG_MIT_SKONTO
If the payment schedule does not contain an entry for the input date, there is a warning
in field "input date”, and the payment schedule is shown. You can adopt a date from the
selection menu, and proceed with the entry as described above. It is also possible to issue
a new deposit invoice. In this case, the items are adopted from the order, the invoiced
quantity is shown as 0, and the items appear in display mode. A new item is created, and
you get to the article field containing the last items. There is a SELO for this field; only
articles of type DEPOSIT INVOICE are valid. The price/pc. of this item is the net invoice
amount; a new record with these data is created in the payment schedule.
Deposit invoices are identified as kauf.eingang = 12.
The net order value is shown at the bottom of the menu.
When a deposit invoice is created, the invoice number is saved in the payment schedule;
this record cannot be changed in the schedule.




A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                           139
Other records are created in tables kaufstat and kposstat; the deposit invoices are visible
in the order status and the changes log. Issuing a deposit invoice means that the order is
partially invoiced and thus cannot be changed.
It is not necessary to issue deposit invoices for all records of the payment schedule.
Dec/2020 alcib build 13.04.9094
If an invoice was already produced before the order was released, this order was marked
as "produced" and removed from the pool. However, this should not happen if it was only
a deposit invoice. In this case, the system no longer checks whether the order has already
been released or not.

       20.5.4.         Final invoice
SALES => INVOICES => FINAL INVOICES
The final invoice closes the order with one or more deposit invoices. It includes the entire
order, automatically taking into account the deposit invoices. The payments - including
the partial invoices - are then booked to the actual revenue accounts.
Here again, AUTOMATIC or MANUAL FINAL INVOICES are possible.
Deposit invoices are identified in the system as kauf.eingang = 13.
If the final invoice is created automatically, the remaining order value is shown. A SQL
query is also stored for the value import (Group 1/ID 74 - all). A customer-specific
adjustment is provided here. The customized SQL must be stored in the environment
variable SCHLRECHFREI_RELEASE. The records are shown with the release flag YES.
For manual entry, you have to define the reference order.
IMPORTANT: The cash discount conditions of the order apply for the final invoices
In both cases, the items are adopted from the order. For every deposit invoice, a record is
saved in the order discounts; this data is also shown in the MODE menu at the bottom of
the order. The amount of the final invoice is calculated on the basis of these automatically
created records.
When the final invoice is created, remaining records of the payment schedule for which
no invoices were issued, are updated via invoice no. 1; no further deposit invoices can be
issued after this.
To avoid rounding errors, the VAT of the final invoice is not calculated as a percentage on
the net amount, but as the VAT for the order (VAT of 1st deposit invoice + VAT of 2nd
deposit invoice + ...).
Note: for the creation of final invoices, credits are ignored.
October 2022; alcib build 13571
Final invoices whose value is below the order minimum value no longer calculate the
order minimum value, but only the remaining value.
June 2024; alcib build 17915


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                            140
Changed value-added taxes
Invoices take over the VAT rate from the delivery note. If an invoice with reference to an
order is entered, the entry date counts as delivery date and the VAT rate from the order is
retained. In case of deposit/final invoices, the order and the payment plan are always
taken as the basis. By default, the VAT amount is then calculated as residual amount from
the order and all deposit invoices, so that there are no rounding problems.
An alternative solution is the calculation of VAT based on the net amount of the final
invoice. This logic has now been expanded. Then it will be checked on creation of a final
invoice when the last delivery was made (date of the delivery note) and this date will also
be used as the basis for determining the VAT rate. The final invoice will then be generated
with the appropriate % rate. This is configured using the environment variable
"SCHLUSSRECHNUNG_VOLLE_MWST1".

       20.5.5.         Configuration
VAT of the final invoice
SCHLUSSRECHNUNG_VOLLE_MWST (client reference: no)
If this variable is active, then the VAT will be calculated with the full % rate (Std. solution -
as residual from VAT amount of the order less VAT amounts of the deposits).
This can cause the sum of the VAT amounts of all invoices (deposit invoices + final invoice)
to deviate from the amount of the order.
The deviation can be negative or positive and depends on the number of the deposit
invoices.
FinAc, by contrast has no problem since the booking amounts fit net-VAT-gross


SCHLUSSRECHNUNG_VOLLE_MWST1 (client reference: no)
VAT on the final invoice will be calculated as residual amount from the order and all
deposit invoices. However, this does not always fit the direct calculation via % rate and
the net total residual. And change also with VAT.
If the ENV is active, then VAT on the final invoice is always calculated via the % rate.
Furthermore, the date of the last LS is taken as the basis for the determination of the
current VAT rates.


Allow manual booking in case of deposit invoice
#294716
When generating deposit invoices, you can now configure using the ENV settings that the booking
of the invoice does not happen automatically, but only after a query.
ABSCHLAG_BUCHEN_MITFRAGE = ON should be activated.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             141
ABSCHLAG_BUCHEN_MITFRAGE (client reference: no)
For the generation of deposit invoices, these are booked immediately. With the enabling of these
variables, there is, analogous to normal invoices, a query whether the deposit invoices should be
booked.
Deviating payment terms (cash)
QR22/11
By default, deposit invoices without cash discount and final discounts are generated with
the cash discount from the order. This behavior can be changed via configuration.


Through a configuration, you can specify that the deposit invoices are generated with the
cash discount of the order. For the final invoice, all automatically generated discounts for
all existing deposit invoices are also marked as cash discounts. This applies for the old and
also for the new discount logic.


If the new cash discount logic is enabled, it is possible to configure that when creating the
payment schedule, a separate cash discount condition can be entered. When creating the
schedule, the cash discount from the order is always taken over first, but it can be
changed or deleted. This payment term is then taken over into the corresponding deposit
invoice.


However, the final invoice is always calculated with the cash discount data from the
order. For the calculation of the cash discountable invoice value, all cash discountable
discounts are totaled without considering which cash discount was in the individual
deposit invoices. On the manual final invoice, cash discounts can also be changed
manually.


Overview:
ABSCHLAGSRECHNUNG_MIT_SKONTO=OFF
Deposit invoice: no cash discount
Final invoice: cash discount of the order

ABSCHLAGSRECHNUNG_MIT_SKONTO=1
Deposit invoice: cash discount of the order
Final invoice: cash discount of the order

ABSCHLAGSRECHNUNG_MIT_SKONTO=2
Deposit invoice: cash discount from the payment schedule
Final invoice: cash discount of the order

ABSCHLAGSRECHNUNG_MIT_SKONTO (client reference: no)
Generally, deposit invoices are generated without cash discount.
The behavior can be adjusted with the enabling of these environment variables.

A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              142
  = ON or 1 - The cash discount is taken over from the order,
  = 2 - The cash discount can be entered in the payment schedule. QR22/11 required
see [AW-122198]




20.6.           Import of values
The value import can be configured individually via environment variables.
See:
SCHLRECHFREI_RELEASE
INVOICE_IMPORT_FORALL
RECHFREI_RELEASE
SRECH_WITH_GRP




20.7.           Form printing
External invoices/credit notes can be dispatched (printed/emailed) only after the invoices/credit
notes have been completely booked. You can however print internal check forms etc. for
unbooked invoices and credit notes. The environment variable REP_FAKTURA has been
introduced for this purpose. Separated by pipes, this variable defines the form types that can be
printed only after they have been completely invoiced or booked. If the form to be printed is not
listed in variable REP_FAKTURA, it can printed notwithstanding its booking status.




20.8.           Purchase invoices for replacement orders
[AW-170385] // QR 0624
If a replacement order (kauf.kaufart = 5) is used for invoicing (via invoice checking, manual PU
invoices, automatic PU invoices), then it is reported to the user that this is a replacement order
that should not be invoiced. The process for the invoicing is not interrupted by the program, there
is only a note that this is a replacement order.
The message can be configured away via customizing.
It can be configured whether the message only appears in the invoice checking or also in invoice
generation (PO_REPLACEMENT_WARNING)
Within the automatic purchase invoice generation, the value import should be adjusted so that
replacement orders are not loaded for invoicing.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               143
20.9.           Electronic invoices
With QR2410, electronic invoices in the "XRechnung" format can be sent from A+W Enterprise.
Configuration and logic are described in the configuration document "A+W Enterprise B2B
Serviice".
Special settings, which affect the sending via the Print Service, are described in the configuration
document "A+W Enterprise Print Service".




20.10.          Environment variables
ABSCHLAG_BUCHEN_MITFRAGE (client reference: no)
For the generation of deposit invoices, these are booked immediately. With the enabling of these
variables, there is, analogous to normal invoices, a query whether the deposit invoices should be
booked.


ABSCHLAGSRECHNUNG_MIT_SKONTO (client reference: no)
Generally, deposit invoices are generated without cash discount.
The behavior can be adjusted with the enabling of these environment variables.
  = ON or 1 - The cash discount is taken over from the order,
  = 2 - The cash discount can be entered in the payment schedule. QR22/11 required
see [AW-122198]


INVOICE_IMPORT_FORALL (client reference: no)
Only for extended client separation. If no site number is entered for the data import (invoices),
then all data from the sites is retrieved where the user VORE=W


PO_REPLACEMENT_WARNING (client reference: no)
Activates message when invoicing the replacement orders:
ON or 1 only in the invoice checking
2 - also in manual and automatic purchase invoice generation


RECHFREI_RELEASE (client reference: no)
This variable can be used to activate a customer-specific value import for the automatic
generation of invoices. For this you have to create an Adhoc SQL with the name "rechfrei". The
variable contains the group and ID of this Adhoc SQL. (Store group and ID.)


SCHLRECHFREI_RELEASE (client reference: no)


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 144
Enables the customer-specific SQL for the value import for generation of automatic final invoices


SRECH_NO_OBJ (client reference: no)
As of version 2.12, the object number is used as additional grouping criterion when collective
invoices are created;
that is, if the object number changes, a new invoice number is assigned even if the customer does
not change. If this is not required, the environment variable mentioned above must be set.


SRECH_WITH_GRP ( client reference: no)
Normally the Adhoc_SQL returns auftrnr, subnr for the value import for collective invoices. If this
variable is active, the value import should return auftrnr, subnr, gruppe.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               145
21. Automatic features in order entry
21.1.           Entry help
The goal of this extension is to simplify the entry of edge-related processings for which
parameters have been defined per edge or that require various parameters for further processing
(ALCIM, SN) of your own articles in the BOM or for manual conversion of parameters.


        21.1.1.          Enamel strip
For enamel strips, a separate article should be added to the BOM per edge for further processing.
For stepped glass, the user also had to take into account the steps for the parameterization of
processings (and add them to the distance from the edge if necessary).
Enabling this new module in connection with the appropriate master data adjustment will simplify
the input considerably.


        21.1.2.         Master data
In article master data, an article (AA) with article type = meta element and ALCIB type "Enamel
strip“(artikel.atyp=590) can be defined per level (top, bottom, both). This article (AA) has to have
a BOM consisting of a processing step (BB) of the AW processing type "UV protection“(1650) and
a material article (CC). The meta article (AA) itself does not have to have a certain quantity unit
because this is only used for the text. For the material article, a formula for calculating the
quantities for cost calculation can be entered. The material article has to exist in the BOM
because it serves as an anchor for the BOM level for the correct positioning of the processings.
The dimensions ($1 and $2) for the formula are the dimensions of the lite. The decisive criteria
have to be entered for the processing step itself because these dimensions and properties will be
preset at order entry.

1. The valid thickness for edge protection (BB) should be entered in field "Thickness“ on "Phys.
    Properties" tab.

2. The dimensioning record for the processing article (BB) should have the following entries that
    might match the parent article (AA) (if there is a special META element per level).

    o Size parameter 1 should be preset with "Width“ and positioning size 1 with "Distance from
        edge“

    o The level (top/bottom/both) must be entered

    o It may be necessary to enter a processing vector

Further processing articles can also be defined to describe the processing depth.
1. Article 1: Enamel strip up to 10mm : Thickness: 10mm
2. Article 2: Enamel strip up to 50mm : Thickness : 50mm



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                146
3. Article 3: Enamel strip up to 100mm : Thickness : 100mm
4. Article 4 : Enamel strips from 100mm : Thickness: 9999mm
Please make sure that there is always an article with a large thickness per quantity unit so that the
automatic search will always produce results. If there are several processing steps with different
thicknesses, the system will allocate them according to the edge-based entries. You can, of
course, also use just one processing article. In this case, the processing record should include a
width with the default value. The entry in the "Thickness" field should not exceed 9999.


        21.1.3.         Input
When there is a META element (AA) in the BOM (entered or adopted from the previous item),
<F5> or the button Parameter can be used to open a dialog for defining the width of the UV
protection/enamel strip per edge. The dialog shows the geometry of the reference lite with a
table in the top right corner which allows entering the width of the strip per edge and the
distance from the edge. For new entries, the input fields are preset by the data from the
processing record from processing master data (BB) (width/distance), either for all edges - if no
processing vector has been defined or entered in the shape of '1111' - or with the individual edges
according to the processing vector. These can be adjusted per edge if required. While entries are
made for an edge, the current edge is visualized by a checkbox on the lite displayed. After saving
and leaving the entire BOM, the BOM of the meta element will be completed. It gets a processing
per edge (provided that the width of the edge is not 0). The processing steps are determined
based on the defined with, according to the following logic: The smallest entry in field 'Thickness'
is equal or higher than the width defined for the UV protection. The level of the master data
article (BB) is adopted for all newly determined processing steps.
Example 1: The META element "Enamel strip“ has been added to the BOM. In the master BOM,
this article has the processing article 3: "Enamel strip up to 100 mm“ (BB) with a thickness of 100
mm, distance 1 mm, level "top“, and vector 1000 . The new entry is preset with "Width“ = 100
and "Distance“ = 1 for edge 1. The width was changed manually on the 1st and 3rd edge to 40
mm. Here, the existing article (BB) is removed automatically because it no longer fits the defined
width; the new article 2 "Masking up to 50 mm“ (BB1) was added.
If only one META element (AA) was entered in the BOM and a direct change of parameters
(width/distance) has not been started, the element record (table kstufparam, record type = 6) is
created automatically. A change of the width/edge allocation can result in the allocation of a new
BOM number. The processing steps (BBx) of the AW type "UV protection“ cannot be changed in
the BOM. They cannot be deleted or replaced because they are always determined automatically.
The processing parameters of these elements (except perhaps the level) cannot be changed
either.
You can configure whether the level of processing steps (BBx) can be changed on the processing
dialog. If it can be changed, this can be done only on the processing dialog and will apply until the
BOM must be changed because of a change of parameters of a META element (width or edge
allocation). The level will be reloaded from master data.


        21.1.4.         Stepped IG
Attention(!!) For SN, all processing steps must be dimensioned based on the reference geometry.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 147
The input help for the processing UV protection works as described above and always refers to
the individual lite. At stepped edges (stepped lites), the distance to the edge is increased by the
step size.
Since all processing steps are dimensioned in relation to the reference geometry, on the
processing dialog (<Ctrl> + <F8>) for the UV protection of the smaller lite, a changed value
appears for the "Distance" of edge 1. The entries for the UV protection (width/distance) cannot
be changed on this dialog. The data shown on this dialog will be saved in another data structure,
and processed by a program logic for SN; the masking depth of the individual lites will not be
changed.
Example 2: An IG unit with a step of 100 mm on edge 1 consists of two coated lites. The smaller
lite shall get an enamel strip of 50 mm on edge 1 and the larger lite, 150 mm on the same edge.
Input is made separately for every lite, for the smaller lite a width of =50/distance=0 and for the
bigger lite a width of =150/distance=0. Automatic settings are made; for the bigger lite: Enamel
strip 150 mm/distance = 0 for edge 1 and for the smaller lite: Enamel strip 50 mm/distance =100
for edge 1.
If the step geometry is changed afterwards, the distances for the UV protection will be
automatically adapted according to the described logic.


        21.1.5.         Different spacer reductions
From the list of the individual element sizes (<F3> in the price field) a dialog for adapting the
sealing by edge can be opened with <Shift> + <F5> with the cursor on the BOM element 'Spacer'.
Since there is no defined relation between edge connection and UV protection, the data for the
UV protection will not be recalculated.
The width/distances can also be changed on this dialog. You can start the help function by
pressing the "UV protection" button while the cursor is on the META element (AA). Changing the
width may result in the allocation of a new BOM.


        21.1.6.         Text
There is no special text for these processing steps. If the META element (AA) is set to Print YES,
the article description appears in the BOM text if there is no special dimensioning record. The
automatically determined and added processing steps (BBx) are assigned text in the same way as
the "common" edgework by default. For every processing article or AWType, a special text code
can be entered. The width of the UV protection must be encoded as $W1, the distance from the
edge as $W4, and the edge in question as $BVEK.


        21.1.7.         Internal P.O. Transfer
For internal P.O. transfer, the data is adopted as it was entered and calculated. In case of a BOM
element (e.g. the smaller lite of a stepped IG unit), the processing record for UV protection will be
recalculated. Since the reference geometry is passed on from the IG to the individual element in
this case, the processing parameters that took into account the IG step are no longer valid. The
distances will be automatically adapted to the new reference geometry and do not have to be
adapted manually.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 148
        21.1.8.         Edge stripping
For edge stripping, a separate article shall be added per edge stripping depth for further
processing. For stepped lites, the glass steps have to be taken into account as well for the
parameterization of processing steps.

Enabling this new module in connection with the appropriate master data adjustment will simplify
the input considerably.


        21.1.9.         Master data
In the article master data, an article (AA) of article type = Meta element and the ALCIB type "Edge
stripping“ (artikel.atyp=593) can be defined per level (top, bottom, both). This article (AA) must
have a BOM consisting of a processing step (BB) of the AW processing type "edge stripping"
(artikel.awtyp=1025) and an anchor article (CC). The meta article (AA) itself does not have to have
a certain quantity unit because this is only used for the text. The anchor article (CC) must exist in
the BOM because it makes sure that the automatically created processing steps are positioned
correctly. The decisive criteria have to be entered for the processing step itself because these
dimensions and properties will be preset at order entry.

        1. The "Thickness" field on the "Phys. Properties" tab should be stored with 9999. (so that
            the general search logic can also be applied here).

        2. The dimensioning record for the processing article (BB) should have the following
            entries that might match the parent article (AA) (if there is a special META element
            per level).

                o Size parameter 1 should be pre-populated with "Depth“ and defined as
                   "variable“ or "mandatory“ parameter. However, it can be preset. This
                   presetting does not apply to IG articles.

                o The level (top/bottom/both) must be defined as "must" parameter and has to
                   have a suitable presetting.

                o The processing vector must be defined as a variable size parameter.

There is no calculation logic for edge stripping; the system always loads the article number of the
processing step (BB) below the META element.


        21.1.10.        Input
When the META element (AA) exists in the BOM (added or adopted from the previous item) you
can use <F5> or the button Parameter to open a dialog for defining the edge stripping depth per
edge. The presetting for IG is always SR/2 of the item or the spacer reduction of the
corresponding edge. For other products, the depth is loaded from size parameter 1 "Depth“ (see
master data) of the processing article (BB).
If just one META element was entered in the BOM (AA) and no direct change of parameters
(depth per edge) has been triggered, the size record (table kstufparam, record type = 7) is created


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                149
automatically. A change of depth per edge can result in the allocation of a new BOM number in
this case. Processing steps (BBx) of the AW type "Edge stripping“ (awtyp=1025) cannot be
changed in the BOM. They cannot be deleted or replaced because they are always determined
automatically. The processing parameters of these elements cannot be changed either.
The depth can be changed in the list of size parameters of the individual elements (<F3> on the
price field). The input help can be started by positioning the cursor on the META element (AA)
and pressing the button "Edge stripping“. Changing the depth may result in the allocation of a
new BOM.


        21.1.11.         Stepped IG
Attention(!!) For SN, all processing steps must be dimensioned based on the reference geometry.
The input help / display of the processing step 'edge stripping' works as described above and
always refers to the individual lite. The depth of steps (for stepped lites) is increased by the step
size.
Since all processing steps are dimensioned in relation to the reference geometry, the processing
dialog (<Ctrl> + <F8>) for edge stripping of the smaller lite shows a changed value for the
"depth"(!!). This value has been converted for the whole unit. The entries for edge stripping
cannot be changed on this dialog (depth/vector). The data shown on this dialog is saved in a
different data structure and processed for SN by a special program logic.
Example 2: An IG with a step of 100 mm on edge 1 and a spacer reduction of 22 mm consists of
two coated lites. The depth of the larger lite is preset for edge 1 with = 111.0. All other edges are
preset by = 11.0. The smaller lite is preset with =11.0 on all edges. The processing dialog shows for
both lites a depth of =111.0 for edge 1; this value has been converted for the whole unit.
If the step geometry is changed afterwards, the distances for edge stripping will be automatically
adapted according to the described logic. Possible manual changes cannot be kept; the user will
be informed accordingly.


        21.1.12.         Different spacer reductions
From the list of sizes for the individual elements (<F3> in the price field) a dialog for changing the
edge reduction per edge can be opened by positioning the cursor on the BOM element 'Spacer'
and pressing <Shift> + <F5>. Since there is a defined connection between edge reduction and
edge stripping, the edge stripping data will always be recalculated after at least one of the
reductions has been changed.


        21.1.13.         Text
There is no special text for these processing steps. If the META element (AA) is set to Print YES,
the article name appears in the BOM text unless a special dimensioning record exists for this
purpose. Automatically determined and added processing steps (BBx) are assigned text in the
same way as the "common" edgework by default. However, for every processing article or
AWType, a special text code can generally be entered. The depth of the edge stripping must be
encoded as $W1 and the edge in question as $BVEK.
Alternative texting for edge stripping



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 150
If the entry help for the edge stripping is configured, then there is an alternative textsing for this
processing analogous to the texting for the processing type masking.
The level of the processings (AW type 1025/edge stripping) is also transferred to the META
processing of the article type edge stripping (atyp = 593).
The depths of the edge strippings are output on a separate line directly below the META article.
The texting of the individual processings is done without level, however with edge string and lfm
details.
This texting does not apply as default and is activated via an ENV switch.
The META processing may not have its own texting about article dimensioning.
(RANDENTSCHICHTEN_TEXTE_NEU = ON)



        21.1.14.         Internal P.O. Transfer
For internal P.O. transfer, the data is adopted as it was entered and calculated. In case of a BOM
element (e.g. the smaller lite of a stepped IG unit), the processing record for edge stripping will be
recalculated. Since the reference geometry is passed on from the IG to the individual element in
this case, the processing parameters that took into account the IG step are no longer valid. The
distances will be automatically adapted to the new reference geometry and do not have to be
adapted manually.


        21.1.15.         Masking
AWD 250237 / September 2012

The aim of this extension is to simplify the input for the masking of coated sheets. As the masking
depth varies for the individual edges and because a special article should be added to the BOM
per depth for further processing (ALCIM, SN), this used to be a tedious affair. For stepped sheets,
the user also had to take into account the steps for the parametrization of processing and add
them if necessary.
Enabling this new module in connection with the appropriate master data adjustment will simplify
the input considerably.
The switch MODUL_ABKLEBEN should be enabled.



        21.1.16.          Master data

In article master data, an article (AA) with article type = meta element and ALCIB type
„Edgework“(270) has to be defined per level (top, bottom, both) and quantity unit. This article
(AA) has to have a BOM consisting of a processing step (BB) and a material article (CC).The
processing (BB) is defined with processing type "Edges" article type 592 by the AW processing
type "Masking"(1960). The meta article (AA) itself does not have to have a certain quantity unit
because this is only used for the text. The article name should however denote that this is about
masking bottom/top/both. For the material article, a formula for calculating the quantities for


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  151
cost calculation must be entered. The sizes ($1 and $2) for the formula are the dimensions of the
masked sheet. The decisive criteria have to be entered for the processing step itself because these
dimensions and properties will be preset at order entry.

• The dimensioning record for the processing article should have size parameter 1 with thickness
  and level (top/bottom/both), matching the parent article(AA). This level should be defined as
  "fixed".

• The quantity unit for the processing (lin.m/sqm) shall match that of the parent article (AA). It is
  vital to maintain the corresponding field in master data.

• The masking depth (XX) (default) should be entered in field „Thickness“ on tab „Phys.
  properties“.
Further processing articles are necessary to define the processing depth and the quantity units.
Here no distinction per level bottom/top/both is required.

• Masking up to 10 mm(lin.m.): Thickness 10 mm/ QU = lin.m.

• Masking up to 50 mm(lin.m.): Thickness 50 mm/ QU = lin.m.

• Masking up to 100 mm(lin.m.): Thickness 100 mm/ QU = lin.m.

• Masking from 100 mm(lin.m.): Thickness: 9999 mm / QU = lin.m.
Corresponding articles will also be required for the quantity unit SQM. Please make sure that
there is always an article with a maximum thickness per quantity unit so that the automatic
search will produce results even for steps.
Caution: After you have created the article in the master data, you must restart the program
before using it in the document entry.


        21.1.17.        Registration

Once the META element exists on the BOM (entered or adopted from the previous item), you can
use <F5> or the button Parameter to open a dialogue for the edge-by-edge definition of the
masking depth. The dialog shows the geometry of the reference sheet plus an input field on every
edge for the masking depth. For new entries, these input fields are preset by the depth entered in
the dimensioning master data for the processing (BB) and can be changed per edge if required.
After saving and leaving the entire BOM, the BOM of the meta element will be completed. It will
get a processing per masking depth. Matching edge vectors will be assigned to the different
masking depths. The completed processing steps will be determined by means of the following
logic, based on the defined masking depth: smallest entry in field ‚Thickness‘ is equal or bigger
than the defined masking depth. The article's quantity unit (BB) defined in master data will be
taken into account as well. The article level (BB) will also be adopted for all newly determined
processing steps.
Example 1: A meta element „Masking for coating on top (SQM)“ was added to the BOM. This
article shows in the master BOM the processing step 'masking' (BB) with a thickness of 100 mm
and level „top“, and QU=SQM. The depth of all edges was changed to 12 mm by hand. The
existing article (BB) is removed automatically because it does not fit the defined depth; the new
article "Masking up to 50 mm (SQM)“ (BB1) was added.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                152
Example 1.1: If the depth is changed to 12 mm only for one (or several) of the selected edges, two
processing steps will be entered in the BOM. „Masking up to 10 mm“ with the edge vector for the
edges the depth of which remains unchanged and „Masking up to 50 mm“ with the edge vector
for the edges the depth of which was changed. As a processing parameter, the processing (BB1)
shows the defined size of 12 mm.
If only the META element has been entered in the BOM without entering the depth, the depth
record (table kstufparam, record type = 5) will be created automatically. A change of the masking
depth may result in the allocation of a new BOM number in this case. The sub-elements of the
type "Masking“ cannot be changed on the BOM. They cannot be deleted or replaced because they
are always determined automatically. The processing parameters of these elements cannot be
changed either.
Price-relevant quantities (number of widths/heights) for shapes are defined like other edgework:
If all edges are masked, the defaults apply; these are defined for processing articles in sub-menu
„Price properties“ as Qty1 / Qty2. If there is no entry for the article as such or for the AW type
"masking" in general, the edges will be calculated ac. to the shape.


        21.1.18.        Stepped IG

Starting with Version ALCIB 2011, a stepped IG with processing (with AWTyp) always has to be
entered with the surrounding geometry as a reference - this means: without negative steps.
(Reason: At present, SN cannot handle negative steps or processing dimensioned with a reference
to the smaller sheet).
The processing step Masking is entered as described above, and refers to the individual sheet. On
the step edges, the masking depth for the projecting sheets will be increased by the step size
when the input fields are preset.
Example 2: An IG unit with a step of 100 mm on edge 1 consists of two coated lites. On both
sheets, 10 mm shall be masked on all edges; the step shall also be masked. The entries for the
larger sheet are preset automatically: Masking 110 mm on edge 1, masking 10 mm on edges 2, 3,
4, plus default for the smaller sheet: Masking 10 mm on edges 1, 2, 3, 4.
Attention(!!) For SN, all processing steps must be dimensioned based on the reference geometry.
This is why in the processing dialog (<Ctrl> + <F8>) shows a masking depth of 110 mm for edge 1
of the smaller sheet. The entries for the masking depth cannot be changed in this dialog. The data
shown in this dialog will be saved in another data structure, and processed by a program logic for
SN; the masking depth of the individual sheets will not be changed.
In the above example (2), the processing „Masking up to 10 mm“ is determined for edges 2, 3 and
4 for the larger sheet, and the processing „Masking from 100 mm“ for edge 1. For the small sheet,
the processing „Masking up to 10 mm“ is determined, albeit twice. Once for edges 2, 3 and 4 and
once for edge 1. The reason is that SN cannot handle this processing by sheet at present. This is
why edge 1 requires a special processing record which is internally diverted to the reference
geometry.
If the step geometry is changed afterwards, the masking depths will be automatically adapted
according to the described logic. Manual changes will be lost. The user is informed of this fact.
Since the masking depth for IG units is unpredictable, a new BOM number will be assigned
whenever the item product includes a step and masking.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   153
        21.1.19.        Different edge seal
From the list of the individual element sizes (<F3> in the price field) a dialog for adapting the
sealing by edge can be opened with <Shift> + <F5> with the cursor on the BOM element 'Spacer'.
As there is no defined connection between edge sealing and masking depth, the masking depth
per edge cannot be automatically adapted after such a change. This amendment can however be
made based on the META element, as for the amendment of the edge sealing on this list. Here, a
change of depth can also result in the allocation of a new BOM.


        21.1.20.        Texting
        It is essential that the meta elements as well as all processing steps of the type "Masking“
        are always set to Print = "YES" because the text for these elements is based on each other.
        The processing text for example 1.1 is created in the following way:
        „ – Masking for coating on top (article name META) on edges (text supplement 127) 1: 10
        mm 2:10 mm 3:12 mm 4: 12 mm“
        „ – Masking up to 50 mm XXX lin.m. on edge 1             <Price>
         „ – Masking up to 10 mm XXX lin.m. on edge 2 3 4         <Price>
        The sequence of the texting of the individual edges is done in the internal ALCIB edge
        sequence and not in the production edge sequence. Therefore, edge 4 comes before edge
        2 if these have different masking depths.
        For the processing steps, individual text can also be encoded in the dimensioning
        record.The texting of the META part is fixed, by contrast.


        21.1.21.        Internal transfer
        For internal transfer, the data are adopted as they were entered and calculated. In case of
        a BOM element (e.g. the smaller sheet of a stepped IG unit), the processing record for
        masking will be recalculated. Since the reference geometry is passed on from the IG to the
        individual element in this case, the processing parameters that took into account the IG
        step are no longer valid. The depths will be automatically adapted to the new reference
        geometry and does not have to be adapted manually.



21.2.           Modification of supply type
The adjustment of the supply type with reference is documented in the chapter "Entry with
reference - supply types".


        21.2.1.         Spacer procurement like muntins
AWD #215783
If muntins are entered without using grid patterns, a special configuration allows adopting the
supply type of the muntins (incl. suppliers if muntins are ordered) up to the inside spacers. (ENV
switch SPROSSENLIEFERANT_AUF_RAHMEN = ON“).

The following master data maintenance is mandatory for this logic.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               154
    1. Go to Master data-> i Field configuration -> b Article field configuration and enter a new
       record (<F6>) of the type "ALPHANUM“, field name "Espace d'air“. Please make sure to
       stick to this spelling because this field name is used for the linking of data.

    2. In article master data, enter the for the article 'inside spacer' (ALCIB article type 210)
       in menu <ShF4> -> n Configurable fields for the configurable field "Espace d'air“ the
       thicknesses of the inside spacer to be checked when the supply type is adopted. Please
       enter the thicknesses separated by | and as integers, e.g. 8|10|12|14|16|18.
    3. For the inside spacer articles, "P.O." and "Production" should be defined as valid supply
       types in master data.

When the muntin dialog is closed after the sizes and muntins have been entered, the program will
check if the inside spacer of the IG unit shows an entry in the configurable fields that matches the
airspace of the current item. If there is no entry for the spacer or if the current spacer is not listed,
the user will be informed that the adoption is impossible because of the spacer thickness. If the
spacer matches a thickness on the list, the user will be asked whether the supply type or the
supplier shall be adopted for the entire inside spacer. If this is required, the data will be adopted
and if not, the inside spacer will keep the supply type defined in master data or in the existing
BOM.

If more than one bar shall be added to the same inside spacer, the program also checks if all
muntins have the same supply type. If not, the user is informed accordingly and can adjust this. If
the supply types are not adjusted, the possible adoption will not be checked.

If muntins are entered for both spacers of a triple IG unit, each inside spacer will be checked
separately.

Please note that the supply type can be adopted only in the described sequence of input. If the
spacer is exchanged in the BOM afterwards, this information may be lost even if the muntins are
adopted for the new inside spacer. A subsequent change of the airspace does not cause a new
check. The same applies if the spacer is changed, e.g. by adopting the thickness of articles with
thickness variants from the processing catalog.


        21.2.2.          Muntin supplier for the inside spacer
Via a configuration, you can set that the default supplier for the muntins is taken over not just
into the grid, but also into the inside spacers. The muntin supplier is taken over for triple IGU into
both spacers, even if only one spacer has the purchased muntins.
There are only two configuration possibilities:
        1 = during the manual entry, a question is posed whether the procurement type or the
        supplier of the muntin should be taken over for the entire spacer. This variant does not
        apply for EDI orders.
        2 = the procurement type or the supplier of the muntin should always be taken over
        automatically for the entire spacer.This variant also applies to EDI orders.
The configuration is done via the environment variable RAHMEN_BA_SPROSSE = 1/ON or 2.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   155
        21.2.3.   Conversion to purchase order in case of violation
            of dimensional restrictions
If dimensional restrictions of the product to be produced have been violated and the user also has
the right to enter the product anyway, the supply type of the item is automatically converted to
"purchase order". If the "purchase order" is also active as an "alternative" supply type in the
master record and the supplier is also entered, this supplier is also adopted. Otherwise, note
appears to the user to enter the supplier. The supply type can be changed again later. If the
measurement parameters are changed so that the restriction check takes place again, the supply
type is also changed again. If the measurements are subsequently changed in such a way that the
restrictions are no longer violated, no changeover takes place because the possibility of an
immediate correction has already been given at the initial entry.

If the restrictions for the header article have been violated and the hint for this violation has also
been output, this hint is also displayed as a tool tip in the measurement fields. However, the
display only applies to the current item and only during entry or directly after the restrictions
have been checked.

With reference, this automatic conversion does not take place.

DIMCONTROL_VIOLAT_PO = ON


21.3.           Stock orders
        21.3.1.          Manual entry
See section Stock > Stock fill orders > Manual entry


21.4.           Documentation back-up
# 238503
There is always a chance of an unintentional crash of transaction recording caused by technical
problems, unsuitable master data, incorrect operation, etc.The data lost this way for complicated,
and even for completely normal transactions in ongoing operation frequently ensures displeasure
and aggravation. This is why in the new version our goal is to offers support for this topic.
Treatment of DB errors when saving

In very rare cases, the transaction cannot be saved, if, e.g. a DB error occurs. Quite frequently,
this is because of lacking master data input and assignments in particular and not all items. Up to
now, with the occurrence of a DB error, only another attempt was offered, and if that did not
work, the order was not saved. In the new version, it is detected whether the DB errors come
from the item area, which according to our experience is what usually happens, and a report is
made about the item in which a DB error first occurred. If possible, the error range is also located
(directly from the item, from additional item dimensions, from the range of the processing data or
conditions). In this case, the user is offered the opportunity to check the item. Here it is checked
whether the problem can be detected on various dialogs (in case of impermissible values, the


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 156
fields are filled with ***) in order to correct these values if necessary. In the extreme case, it may
be necessary for you to delete the item and check the master data.

Intermediate saving of the transactions
Now there is an opportunity to back up an order/quotation/purchase order/supplier inquiry at
runtime by saving it temporarily. On the lower part of the dialog, there is a new "Back up" button
for this. The possibility for temporary saving exists in the header or the footer of the transaction if
the items are already present, as well as in the item part itself. However, since the item data can
only be backed up in complete form, the button is only active on an item entered up to the
price. In an item that has not been entered completely, this is not possible because it may be that
the data should be loaded later in precisely the backed-up state.

If a transaction has been backed up, then you should heed the further procedure for entry:

    1. Initial entry: for data back-up and subsequent cancellation of the entry (with <ESC> or
       <HOME>), the back-up is not retained.
    2. Initial entry: for data back-up and regular saving of the transaction, the back-up is
       overwritten with the last data entered.
    3. Correction: for orders with data back-up that are not yet released, during correction and
       the subsequent cancellation of the entry (with <ESC> and <HOME>) the user is informed
       that the transaction can only be exited in the last backed-up state and he is asked
       whether he would still like to exit the transaction and leave it in the system only as back-
       up or whether he would like to finish the change/correction.
    4. Correction: for transactions with data back-up that are not yet released, during correction
       and the subsequent cancellation of the entry (with <ESC> and <HOME>) the user is
       informed that exiting is no longer possible because the transaction was just backed up in
       an incomplete state. You can only reset the transaction to the last backed-up state and
       make the correction starting from this state through to the end or finish entering the
       current state of the correction.

If the transaction remained in the system due to a technical fault or was consciously stored as a
back-up by the user (see point 3), then it is no longer available for all additional processes because
the backed-up data does not necessarily correspond to a true end state of the transaction (for
example, the following actions could not have executed: discount calculation and revenue
distribution, determination of the further system throughput, etc.). They MUST be brought to a
consistent state through correct storage in ALCIB.

The back-up state of an order is displayed as a traffic light in the lower left corner of the main
dialog. Backed-up orders have a "green" light. There is no traffic light for orders that are not
backed up. In addition, it is possible to make the traffic light display more "meaningful." With a
switch, you can specify the quantity of production-relevant changes that are regarded as a
"critical number." If the quantity of changes made (for the entry, the newly-entered fields count
as a change) reaches half of the "critical number," the traffic light turns "yellow." If the number of
changes reaches the "critical number," the notice appears (once) that a back-up at the next
opportunity would make sense and the traffic light turns "red." After the successful back-up, the
traffic light turns "green" again and the changes are counted again from the start.

When starting the order entry, first there is always a check whether backed-up orders from this
user are still in the system. These are offered for selection first. If these are orders that are not yet
released, then they appear with the status "green." These orders are not critical and you can re-


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   157
enter them at a later point in time. In this case, it is permissible to exit the selection dialog with
cancel. If a back-up of the order is found that was already released, then the status changes to
"red" in order to show that there is an urgent need to act here. The user can not exit the selection
dialog and discard changes in this situation.

If the intermediate saving encounters a DB error, then the back-up is canceled and the system
behaves as it does during final saving. (see above "Treatment of DB errors when saving").

For the expanded traffic light, you should activate the switch SICHERUNGSSCHRITT = xx.


21.5.           Dispatch type vs. Route
Starting in May 2025 this also affects A+W iQuote (documentservice.hotfix - 13.04.7673)


        21.5.1.    Automatic changing of the dispatch type in case of
            route change (dispatch type - route)
With this configuration, each dispatch type can be assigned only precisely one route and each
route only precisely one dispatch type. With a change of the route, there is an adjustment of the
dispatch type, but with a change of the dispatch type, there is no adjustment of the route.

VERSARTHOLEN_BEI_ROUTENAEND: disabled or OFF

Within the master data (Master data - Keys - System - Dispatch - Dispatch type), a route can be
assigned to a dispatch type. If this route is used for the order entry, the dispatch type is drawn.
With the change of the route (manual, change of the delivery type, selection of the delivery
address), the dispatch type is adjusted. A route change in dispatch does NOT cause a change of
the dispatch type. Similarly, a change of the dispatch type does not cause a change of the route.
This is the default behavior in A+W Enterprise.


        21.5.2.    Automatic changing of the dispatch type in case of
            route change (route - dispatch type)
With this configuration, a dispatch type can be assigned to one route, but a dispatch type can be
assigned to several routes. With a change of the route, there is an adjustment of the dispatch
type, but with a change of the dispatch type, there is no adjustment of the route.

VERSARTHOLEN_BEI_ROUTENAEND: ON or 1

The system can be configured so that within the master data of a route, a dispatch type can be
assigned (Master data - Keys - System - Dispatch - Routes - Routes - Routes). This dispatch type is
then taken over into the document. By default, maintenance of the dispatch type in route master
data is disabled. The logic can be enabled by environment variable. If this environment variable is
active, routes cannot be maintained in dispatch type master data either.

When the new logic is active, every change of route (directly or via direct shipment/collection, or
change of address) will result in the dispatch type for this route being adopted if it is kept in route


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 158
master data. If for the new route no dispatch type is stored, then the current one in the order will
be retained. Manual changes will be dropped if the route is changed in the foreground after the
fact and a dispatch type is stored for this route. There is no takeover of the dispatch type for the
route assignment by the background process in the course of the client assignment after entry in
the call center. Also for delivery "via plant", the data for the dispatch type is taken over from both
routes (internal + route to the customer). On the document dialog ("Properties" tab), the dispatch
type of the route to the customer is always displayed. Shipping information dialog (menu Shipping
information) shows the data for the dispatch type "via plant" if shipping "via plant" has been
selected.

Change of the route in dispatch does not cause a change of the dispatch type.


        21.5.1.          Double-sided change of route and dispatch type
With this configuration, a dispatch type can be assigned to one route, but a dispatch type can be
assigned to several routes. With a change of the route, there is an adjustment of the dispatch
type, but with a change of the dispatch type, there is no adjustment of the route. Furthermore,
this assignment is also checked in dispatch.

VERSARTHOLEN_BEI_ROUTENAEND: 2
alcib - 13.04.20025
lapool - 13.04.20671
documentservice - 13.04.7673


The system can be configured so that within the master data of a route, a dispatch type can be
assigned (Master data - Keys - System - Dispatch - Routes - Routes - Routes). This dispatch type is
then taken over into the document. By default, maintenance of the dispatch type in route master
data is disabled. The logic can be enabled by environment variable. If this environment variable is
active routes cannot be maintained in dispatch type master data either.

1.Document entry

In a document, the dispatch type is drawn first from the route determined. If a route change is
made directly through manual change or indirectly through change of the object, selection of a
different delivery address or change of the delivery type, the dispatch type is also determined
anew.

If a route is used to which no dispatch type is assigned, then the user receives a message that the
route has been assigned no dispatch type and instead, the dispatch type from the market partner
master data is obtained.

If the dispatch type is changed in the order, the system checks whether there is a unique
assignment to the route. If so, this route is taken over. If several routes are assigned, a selection is
offered via selo. If for dispatch type no assignment is found, then the system checks whether the
route and dispatch type match. Only if there is no assignment for dispatch type for the route in
the master data may the combination remain.

If the dispatch type is changed by changing the route or vice-versa, the corresponding discounts
will be recalculated.

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  159
2.Entry in the call center.

The routes and dispatch type assignment should be made in the call center. After entry, there is a
fixed client assignment and the routes are replaced with client-specific routes. The routes must be
configured so that the corresponding route of client X also has the appropriate dispatch type and
the identical discount as the original route from the call center. After the site assignment, there is
NO new discount calculation by background process intauf.

3. Changes in dispatch

If in dispatch the order is shifted from route 1 to route 2, then in dispatch the dispatch type is also
adjusted for the orders if route 2 has a different dispatch type. There is no comparison in the
order itself.

If the dispatch type is changed on the order level, then there is a check whether it fits the route
and the user is informed about the deviation. The changed dispatch type can also be taken over
into the order. However, there is no new calculation of the order (discounts).

4. Change in iQuote.

If the dispatch type is changed in A+W iQuote, there is an attempt to find a route automatically. If
there is a clear assignment, this route is taken over. If there is no clear assignment, the route with
the highest priority (1= highest, 9999 lowest priority) is taken. If no clear assignment is found, the
first appropriate route that was found in DB for this dispatch type is used and the order includes a
note that no clear route could be determined.


        21.5.2.          Configuration
VERSARTHOLEN_BEI_ROUTENAEND (client reference: no)
This environment variable controls the behavior of route to dispatch type and vice-versa.
OFF – route assignment to a dispatch type 1:1
ON/ 1 - dispatch assignment to route 1:n
2 - Dispatch assignment to routes m:n




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 160
22. Product exchange
22.1.  Exchange of the BOM elements for IG and
  LAMI
The expanded dialog for product exchange is started via menu in the process "Product Details"-
>"Product exchange" or use <F3> directly in the document header/footer. Therefore, it is now
possible not just to enter a new product and exchange glass for existing items, but also to
exchange the inner frame for IG products and films for LAMI.




Figure 13: Product exchange: Start dialog after the quantity selection

Important for use is the correct construction of the BOMs. The entries of the assembly positions
for glass but also for frames and films are required. Furthermore, work is possible with just one
film, so that in this place the META films are recommended.
After entry of the new product, in the intermediate range, the original structure according to
master data(!) is displayed. The global exchange rules are not considered at this point. The
glass/IF for IG products that can be marked in the process as exchange will then also be
considered for the desired construction.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                         161
Figure 14: Product exchange - details on exchange

For the glass in the BOM, you can also turn the glass in the BOM through IP change.
With a key combination, it is also possible to implement the desired construction on original
construction. (Configurable? It's being offered, not yet done 08/2021)


22.2.             Exchange of AIR for IG exchange
If IG product is excxhanged, in addition to the familiar questions about the new price calculation
and text/config fields takeover, there is a query whether AIR should be changed. If this is desired,
a dialog appears where you can enter the new AIR per item.




Figure 15: Product exchange for items

If a double is exchanged for a triple IG, then this dialog also opens automatically and you can
adjust both AIRs. (configurable, new *mfo)


22.3.             Product exchange for TG
TGH products can be exchanged, not just on the product level, but also the glass of the 1st level.
(configurable, new *mfo, ENV)



A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                            162
Figure 16: Product exchange for TG

Configuration: PRODAUSTAUSCH_ESG_ERWEITERT


22.4.             Additional processings in the existing BOM
If in the original BOM on the level of the header article itself or on the level of the solid material
the other elements are found (all marked with the "Z" code in the BOM), these are listed in a
separate dialog. In the 1st column, there is a note about where the additional elements were
found. In the "Transfer" column, there is the possibility to take these along to the new BOM
during the exchange (Y) or not (N). If you are working with the helper modules for masking, the
data can only be taken along in the block or not. (configurable, new *mfo)




Figure 17: Transfer additional elements

In this separate table, all processings that have a "Z" code are taken along. Even if these are
directly in the master BOM with this code.
If you are not certain whether or not the processing should be taken over, you can use <F5> to
look at the original BOM of the new glass.



A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                             163
If, e.g. a processing with "Z" in the glass was found before the product exchange, it is offered for
transfer. With F5, you can see in the overview that the new glass itself already has this processing
in the BOM and so you can set Übernehmen=N so that this processing does not occur twice.




Figure 18: Transfer additional elements to BOM




22.5.             Extended product exchange
In order to be able to use the extended product exchange, the environment variable
ERWEITERTER_PRODTAUSCH = ON has to be activated.
Functions of the extended product exchange (#453595)

    1. Further BOM parts for IG/LAMI

         In the case of an extended product exchange, not only glass but also spacers are
         transferred to the list of exchange parts for IG units and can thus be changed. Also in the
         case of LAMI, the first three glasses and two foils (1 foil per gap) can be exchanged in the
         new product. It is also possible to change the assembly position for single glasses. But only
         in the corresponding assembly position.

    2. Additional elements in the BOM (processing steps and parts)

         All processing steps / parts that are marked as "additional" items (Z) in the existing
         product on the first BOM level are taken into account when exchanging products. If IG or
         LAMI is used as the header product, all processing steps / parts that are marked as the
         suffix "Z" on the 1st BOM level of the individual glasses are taken into account when
         exchanging products. These additional elements are displayed in a separate dialog, in
         which the user is given an overview of these additional elements of the selected BOM. He
         can control whether these elements are to be included in the new BOM by converting the
         "Apply" flag.

    3. TG stamp

         In the case of processing of the type "stamp" (A+W type = 1250), both the additional
         marker (Z) and the exchange marker (A) are taken into account if this is located in the first
         BOM level of the product itself or in the first BOM level of the individual glasses. If the



A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                            164
      new product or the new sub-glass itself also has a processing of the A+W type = stamp,
      this is shown in the overview as "exchange".

   4. Qty. stepped IG

      Efforts are also being made to incorporate steps into the new product. If the structure of
      the old product and the new one is adequate (items/sequence of elements within the
      BOM), the steps are transferred.

   5. META elements

      In general, META are not taken over during product exchange, even if they are marked as
      an addition. An exception is made for masking and enamel strips when working with the
      corresponding A+W modules. It is very important that the structure of the mentioned
      METAs in the master corresponds exactly to the regulations. In the overview dialog, you
      can then only select for the META part whether these are to be included in the new BOM
      inclusive processing steps. These processing steps, including META, form a block that is
      not broken apart.




A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                               165
23. Entry with interior view
In A+W Enterprise, entries are made by default in the exterior view (header article has assembly
position 1). However, you can turn the entire product structure by changing the assembly position
of the header article. This happens via BOM F3 (not F5) - header article Shift+F5 or the button
St.Kopfdaten.
The changing of the assembly position causes the lites of the unit to be turned. When changing
the assembly position of a lite or an item in the A+W Enterprise, the positioning of processings on
the lite are not changed. These still refer to the header geometry. The consequence can be that
after turning, the processing is not where the user expects it, especially if whole glass structures
are turned (changing of the AP of the header part).
See AWDesk #412275, #412076
See also section "Views in the SNLive sketch"
Example:
IG consisting of Float1 and Float2. The product structure from the outside: Float1, frame, Float2.
Float1 has sand blasting with level "top"; that means the sand blasting is applied on the outside of
Float1.
Now the product structure is turned around in that the AP of the header part is changed. This
produces the following product structure from the outside: Float2, frame, Float1
Now the sand blasting is positioned on Float1 to the frame, for the level is still "top" and thus the
processing is applied to the outside (in the direction sun -> product structure) with regard to the
overall structure.
However, the expectation could be that the surface processing is now applied away from the
frame on the inside (away from the sun).
The production transfer is influenced by the following switches:
PMEKOPF_EP
If the variable is ON and active, the assembly position of the main part is taken into account when
the routing is created; otherwise the assembly position 1 applies to the main part. This is relevant
if a rotation is to take place for straight assembly positions (PMEHANDLE_GERADE_EP).
The variable is also evaluated in the direct ALCIM import.
PMEHANDLE_GERADE_EP
         If the variable is active and greater than 0, for straight assembly positions          it has to
be considered that the following BOM structure is turned. E.g. In the direct ALCIM data import,
the lites are then taken over in another             sequence.       The same applies for the
OrderXML service. Here, the switch applies by default as             active. To switch it off, it has to be
activated and have the value 0. !!!CAUTION: Up to Version 2011, this variable has to be set for
ORDERXML-         transfer!!! It is not yet activated automatically here!!!!




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    166
24. Bill of material in document entry
With the environment variable "ADD_DEL_BUTTON_OK, you can display the buttons "Duplic.",
"New," "Copy," "Ins.," "Del.", and "A-search" on the BOM dialog. The functions are also available
via key combinations.




Duplic. – Ctrl-A
New – F6
Copy – Ctrl+B
Ins. – Ctrl+O
Del. – F7
A-search – Return in the empty article number field



24.1.  Copying several processings at once between
  BOM levels
alcib - 13.04.10231 // QR 2105
After the processings have been placed on a level, it is now possible to transfer them as a block to
another glass in the BOM. For this, the processings in question must be marked first. This is
possible directly in the BOM in the last field on the "Processing parameters(short)" tab.




After the proceessings are selected, you have to combine them for the copy process. This
can be done with the "Copy" button or the key combination <Ctrl+B>. Here all parameters
entered are noted. If additional processing should now be noted or there are parameter
corrections, then the data must be recompiled directly after this.
If the processings are only marked and not prepared for copying, then the user will be
informed when leaving the BOM because the marking applies only for the current level
and if the data is not compiled for the copying, the marking will be deleted.
If the processings are dimensioned, marked, and prepared for copying, you can navigate to
another glass in the BOM and use the "Insert" button or the key combination <Ctrl+0> to
insert all marked processings.
Here it is important that the processings to be copied are always attached at the end of the
BOM level. They cannot be inserted. Even if on the level on which they were entered they
are not directly next to one another. Directly after all processings were attached on the
level, there comes the query whether these should be transferred to all other glass. If not,


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               167
the marked data is deleted. If so, then you can navigate to the next glass and use "Insert" or
<Ctrl+0> to add the processings again.
For this multiple copy function, only simple processings or parts without their own BOM
(except for product-relevant elements for glass, spacers, muntins, etc.) are suitable.
Copying META processings must be done individually as it was earlier.

For activation, the environment variable PROCESSING_MULTICOPY = ON must be set.



24.2.           Procurement type "* before EDI"
05/22/2024 // alcib - 13.04.17741
In cooperation with "A+W Production", not all "before EDI" procurement types are allowed within
the BOM. Therefore, the entry is subject to certain restrictions.
Generally, a "before EDI" procurement type is only allowed below a purchased part. (see also "EN-
CONFIG-A+W Enterprise Production Interface")
To prevent mis-entry and thus errors in the further process chain, the entry of "before EDI"
procurement types is not allowed in A+W Enterprise by default.
After a corresponding process analysis and advising, the entry of the procurement type "PO
before EDI" can be activated via the environment variable "BA_VORDFUE = 1". If "Production
before EDI" should be applied, then the value 3 must be set in the environment variables
("BA_VORDFUE = 3"). If both procurement types should be possible, then the variable must be
activated as follows "BA_VORDFUE = 1|3".
ATTENTION: It must be noted that when using this function, there is no booking of the dispatch
data for purchasing and no dependent scheduling within A+W Production. These functions are
only made available in the module of the "extended workbench".




24.3.           Environment variables
ADD_DEL_BUTTON_OK (client reference: no)
This environment variable activates the ADD + DEL button display in the BOM


BA_VORDFUE (client reference: no)
You can allow "PO before EDI" (bestellkz = 1) and "production before EDI" (bestellkz=3) in the
BOM. In the variable, you can enter these "bestellkz" separated by '|' so that AWE does not reject
the entry.
Please only set if it is coordinated with AWP.


PROCESSING_MULTICOPY (client reference: no)
Activates the possibility of copying several processings between BOM levels.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                              168
25. Notes on documents
Notes on documents can be entered manually in the document entry with "Shift+F4" - "Document
notes".
How document notes are treated during entry with reference is documented in section "Entry
with reference - document notes".




25.1.          "Order information" menu element
In the menu element "Sales - Overview - Order information" you can use F5 or the "Notes" button
to view the document notes.
If the environment variable KAUFINFO_AUS_STATUS=2 is active, then you can use this menu
element to enter or change notes. If the order is edited by the system or an employee, there is an
appropriate notice here and the notes are displayed in read mode
 If an employee with active environment configuration has opened the dialog for the "document
notes" via the "Order information" menu element, the order is locked for other employees and
the system for processing.
If the document notes are exited with saving, then there is a security query asking whether the
information should actually be saved. If you answer "yes" to the query, then the document notes
will be saved. However, the order will NOT be transferred to the background process "intauf" and
the customizing script "vorgangs_sql" will also not be called.
This way, document notes can be corrected and added without otherwise changing the order or
system load by causing all of the processing through the background processes.
The environment variable can be activated employee-specifically.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              169
26. Order pool (Order pool)
26.1.           Access
With appropriate configuration, now it is possible to input order numbers on the start screen of
the "Generate POs" program or to select them via selo (plus expanded search).
If no order numbers are entered or selected, the program "Generate POs" proceeds as previously;
that is, all PO suggestions that are not locked by other users are loaded for PO generation.
If on the start screen a valid order number was entered or selected, then only the PO suggestions
for these orders are loaded as PO generation unless they are locked by other users.
The environment variable ABTONLY must have the value "7".
The environment variable MODUL_EINKAUF must have the value "3".




26.2.           Grouping
Within the PO pool, you can mark individual items to be ordered and POs. Which PO items are
combined into a PO depends on the items' data. It can be defined via environment variable
whether all items should be combined into a PO or if one PO per supplier should be generated. If
the environment variable is set to 0 (or not activated at all), then all marked items are ordered
from the supplier on which the cursor is currently.
BESTPOOL_GRUPPIEREN
  Controls how the PO pool records are grouped by default:
  0 = by selected items
  1 = by supplier
In addition, there are other permanently defined criteria in the program:
    -   Change if the delivery address changes (e.g. in case of direct shipment)


26.3.           Breakage
Within the PO pool, on the "Details" tab, it is possible to enter a breakage reason and a breakage
location (release February 2021). If a breakage remake is being processed with A+W Production,
the breakage location and/or breakage location is transferred from production.
The breakage reasons are maintained in the table pmsbg gepflegt. The breakage locations in
xbruchorte. There is no maintenance dialog for both tables. They are filled appropriately during
the reporting of the breakage reorders from production.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               170
26.4.           Delivery date
If in the default PO pool order items with different delivery dates are grouped for a PO, then the
earliest delivery date for the entire PO is taken over for the entire PO.
If in the course of the "Extended workbench" several processings with different delivery times are
ordered at the same time from the same supplier, it can still be necessary that not the earliest but
the latest delivery date should be taken over in the PO.
Now the PO pool can be configured precisely this way (environment variable
BESTPOOL_LATE_PROCESSING). If this configuration is active, a few restrictions apply. If both
ordered processings and glass are marked together, processings and glass are grouped in separate
POs. For the glass order, the earliest delivery date will be used as previously and for the
processing PO the latest delivery date. If for processings to be ordered accessories or foils are
ordered, then these are marked during the marking of the processing to be ordered. In this case,
these accessories are inserted into the PO for the processings and the PO receives the latest
delivery date. If these accessories and foils are marked and grouped without the associated
processing, they are treated like glass and receive the earliest delivery date.


26.5.           Purchase information/restriction display
By default, in the PO pool in the "Pu" column (purchase information), an "I" appears if in the
associated order, information is entered explicitly for purchasing.
QR 2406 / alcib - 13.04.18137
Through a configuration (environment variable BESTPOOL_INFO_EXTENDED, Stored Procedure
„cu_bestellpool_ekinfo“), the column "Pu"(purchase information) receives additional
characteristics.
For each PO item, the customer-specific SP "cu_bestellpool_ekinfo()" is called. It can check
customer-specific restrictions. If the SP returns a value = 1, then the restrictions are violated. The
column looks as follows:
"." - if there is no purchase information and no restriction violation.
"I" - if there is only purchase information
"R" - if there is only a restriction violation but no purchase information
"*" - if there is both purchase information and a restriction violation.


The customer-specific SP „cu_bestellpool_ekinfo()“ is called with the following parameters :
cu_bestellpool_ekinfo (<ext.Auftragsnummr(auftrnr)>, <interne Auftragsnummer(aufnr)>,
<int.Positionsnummer(posnr)>, <Tupelnummer(tnr)>,<Breite>,<Höhe>,<Gewicht>) and returns = 1
for following special restrictions, otherwise = 0. The transfer parameters refer to the order for
which the PO should be generated.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 171
26.6.           POs for packaging (boxes)
The function for box orders is currently in the pilot phase
17.02.2025: Currently the documentation is in the Sharepoint A+W Clarity R&D -
Dokumente\General\Enterprise\BestellKisten.docx
As soon as the module has been tested successfully with pilot customers, the
documentation will be taken over into the Enterprise configuration notes.



26.7.           Environment variables
ABTONLY (client reference: no)
The variable indicates that the current user is working with department restriction.
1 = Department of the article must match Dept. entered or be 0.
2 = user of the order must be equal to the user of the PO or be 0.
3 = Department of the order must be equal to the Dept. entered or be 0.
4 = For completely ordered item: Department of the product group of the item is compared to the
department entered. If the department of the product group is 0, the department of the article is
compared.
    For parts from the BOM: same logic as 1.
5 and 6: special logic for user 24.
7 = Specification of order numbers possible


BESTPOOL_GRUPPIEREN (client reference: no)
This variable controls how the PO pool records are grouped by default:
  0 = by selected items
  1 = by supplier


BESTPOOL_INFO_EXTENDED (client reference: no)
If this environment variable is active, for the population of the colum "Pu" (purchase information),
the stored procedure "cu_bestellpool_ekinfo" is also called.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                             172
27. PO management/PO entry
27.1.    Warning in case of change in POs with order
  relation
QR 2503
If in a PO with order relation items are deleted or quantities are changed, the PO no longer
corresponds to the order requirements. This means that reports cannot be executed completely
in the order and dispatch. This has consequences for delivery note and invoicing. Thus, with
appropriate configuration (LIEFERSCHEIN_CHECKER), no delivery note can be generated if the
incoming goods message is missing for individual items. For this reason, there is now a warning
message on the PO dialog. However, the change is not disabled.
If the message is not required, it can be removed via customizing. This is message 38513.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             173
28. Dispatch notification
28.1.           Message on PO date postponement
Note: Here, the concern is only the sending of e-mails for the manual change of the goods receipt
date of a PO. The concern is not that the change of a planned goods receipt date of a PO
automatically shifts the delivery dates and goods receipt dates of upstream documents. This
always requires personal communication and manual adjustment.


see also document 95577: January 2005
Purchase - Dispatch Notification

If a dispatch notification is saved for a PO, an e-mail can be sent to configured employees.
For this, the environment variable AVISE_MAIL must be activated. If the environment variable is
not active, no e-mail will be sent. In the environment variable, you can specify who should receive
the e-mail.
Starting in Feb 2024: An employee can be specified per process notice, PO management, EDI (see
below QR24/02)

ON or > 4 – Inside sales employees of the order customer in the market partner master data
(mp.innenmanr)
  1: User (kauf.eusr)
  2: Person in charge (kauf.abvertr)
  3: Sales representative (kauf.vertrerloe)
  4: Department employee of the customer for the order (abteilung.manr) – starting in Feb 2024)
(see below QR24/02)

Per PO item, it is checked whether the PO item has an order reference. If this is the case, it is
checked whether the order is on delivery type "drop shipment". Here only the delivery type of the
order not that of the relevant order item is checked. If this is a "drop shipment", no e-mail will be
sent.

If it is not a drop shipment, then it is checked whether the planned goods receipt date is earlier than
the delivery date of the order. If the planned goods receipt date is on the same day or later than the
delivery date of the order, the appropriate e-mail ID 41 is sent.

Starting on 05/23/2024 // alcib- 13.04.17743
The check with regard to the delivery date of the order has caused too many messages and was
not goal-oriented. Therefore, the check has been changed. Now it is only checked whether the new
goods receipt date is in the future with regard to the old goods receipt date.

With appropriate system configuration, it is also possible to activate a customer-specific logic
which, prior to sending the email,
    • checks whether the e-mail should actually be sent
    • compiles an individual text for the e-mail.


For this, the stored procedure (SP) "cumailsp41" is called.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  174
If this SP is not present or was created with the incorrect number of parameters, the default e-
mail is sent. If the SP encounters a different error than SC= -674, then an error e-mail is sent to
the defined employees. In the first parameter, the SP returns whether an e-mail should be sent,
and in the second parameter the mail text. The mail subject is always populated in the program
with text no. 31553 : "Change of delivery date in the dispatch notice".
The default mail text is populated with text no. "31554: "The delivery date of the order <ordernr>
must be changed!" .
Starting with QR 23/10:
Text no. 38324: "The goods receipt date of the PO <PO number> has been postponed, therefore
the delivery date of the order <Ordernumber> must be postponed!"


The SP is called with the following parameters:
INTEGER: external order number (kauf.auftrnr)
SMALLINT: internal item number in the order (kpos.posnr)
INTEGER: external number of the PO (kauf.auftrnr)
SMALLINT: item number in the PO (kpos.posnr)
INTEGER: new PO date
INTEGER: old PO date


The SP must return the following data:
SMALLINT: 0, if the mail should not be sent
           not equal to 0 if it should be sent
CHAR(1500): The text that should be sent in the mail.


For performance reasons, the existence of the respective SP is noted. If it is not present, there is
no further unnecessary call of the SP. If the SP is deleted in ongoing operation - and even if only
for a brief time, for a change - this causes an error. In both cases, A+W Enterprise must be
restarted.


[AW-137151] // October 2023
The message is now also sent if the planned goods receipt date is changed manually in the PO
management (Purchasing - PO Management).
If in an existing PO the date is postponed manually (PO management) or via notice, then the
status 204 (WARENEINGANGSTERMIN) is reported to the PO and in the order. This status is also
transferred if the PO arose from the internal transfer. This status can be seen in the PO and in the
order under document information.
Furthermore, the date postponement via dispatch notice can be seen in the delivery date
postponement log of teh PO and the dispatch notification itself is noted in the change log of the
PO and the order.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 175
Analogous to the date postponement via dispatch notification, for the postponement in the PO,
the system message 41 is sent. Via the environment variable AVISE_MAIL, the recipients of the e-
mail can be defined separately for dispatch notification and PO management. If no separate
configuration is done for the PO management, the configuration of the dispatch notification
applies.
The characteristic of the environment variable AVISE_MAIL has been changed, in that 2
parameters can be defined separated with "|" (pipe). The first parameter specifies the recipient
for the change under dispatch notification and the second parameter for the change in the PO
management. If only one parameter is specified, it applies for both.
If the status 204 - goods received date is transferred to the upstream distributor, the sending of
the e-mail ID 95 can be configured there using the System menu.
For more precise information, see configuration instruction "EN-CONFIG-A+W Enterprise System"
section "Messages" and section "" and "EN-CONFIG-A+W Enterprise" section "Messages".


Starting with QR24/02 (February 2024)
Expanded control of the information about manual changes to the planned goods receipt dates
The environment variable AVISE_MAIL has been expanded and the application standardized.
The environment variable can now accommodate up to 3 values separated by "|" (pipe).
The first value is used if the goods receipt date is changed on the "Notice" dialog.
The second value is used if the goods receipt date is changed via the "PO management" dialog.
The third value is used if status is transferred about a change of the goods receipt date is
transferred via EDI from the production client to the trade client.
If the 2nd or 3rd value is missing, the first value is used instead.
Value - message number - default message recipient
1        41 and 95            user (kauf.eusr) or for eusr=-1 like 4
2        41 and 95             Person in charge (kauf.abvertr)
3        41 and 95            Sales representative (kauf.vertrerloe)
4:       41 and 95             Department employee of the custoemr for the order
                              (abteilung.manr)

With AVISE_MAIL = 4, the recipient is determined via the customer of the order's department
(kauf.kunr -> mp.abtnr -> abteilunge.manr). If no assignment is found, then the user (kauf.eusr) is
defined as recipient.
Furthermore, the determination is expanded for the variant AVISE_MAIL = 1. Thus, for all orders
that have "System2 (-1)" as user (EDI, online), the recipient is also determined via the customer's
department.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                             176
29. Finished products stock
The finished goods stock in A+W Enterprise has absolutely nothing to do with the "Stock" module.
The finished goods stock is a kind of disposition stock for goods that are ready to deliver to the
customer. Goods in the finished goods stock always have a relation to the customer order. The
finished goods stock provides an overview of the whereabouts of the goods at all times
The functionalities of the finished goods stock are linked to many modules of A+W Enterprise
(dispatch control, incoming goods). For this reason, there are overlaps with the respective module
documentation.


29.1.           Configuration
OHNE_FERTIGWARENLAGER (client reference: no)
Switches off the booking from the finished goods stock.


FERTIGWARENLAGER_MIT_VLS (client reference: no)
The booking to the finished goods stock is made via the advance delivery note. At ADN goods are
booked on "trucks" and only booked out of the site. But they are in FG stock with target site=-1.
Only DN books out the records with destination site=-1.
If no ADN is generated for the order, the data is output directly from house X for the DN. Source
of error: Partially ADN and then completely LS not from shipping.


LAPFERTWBPROTO_OHNE_KST (client reference: no)
The variable deactivates the query for the missing cost center and the missing reason in the case
of manual back bookings in the finished goods stock


LAPFERTWBPROTO_WE_STORNO (client reference: no)
(case #200332): If this environment variable is set, if the quantity of an item in an existing goods
receipt is reduced, a reason for this reduction can be entered. If a reason is entered, it is stored in
the finished goods stock log (lapfertwbprot.buchtext).


WAEIN_LAPFWLAGER_DATUM (client reference: no)
  (Case: #200054): If this environment variable is set, only users with write right DIWR within the
automatic and also within the manual incoming goods generation can backdate the incoming
goods date into the past.
   Furthermore, this date is transferred instead of the current date to the finished goods stock log
(lapfertwbprot.mandatum).


LAPOOL_VERPACKT_DATUM (client reference: no)



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 177
If this variable is active, the functions "Check missing quantities" and "Correct packed quantities"
are used in shipping to be more restrictive.
For the missing parts check, the booking date can only be changed if the user has the LAVD right,
but only in the past.
For "Correct Packed Quantities", the booking date and booking text are mandatory.




29.2.           Dispatch control
        29.2.1.         Delivery note
For the delivery note creation, a corresponding entry was made in the finished goods stock. Here,
the arrival date (LAPOOL.ANKUNFT) will always be used as the booking date.

If an order is locked during delivery note creation but the corresponding finished goods stock
booking has already been made, this booking will be cancelled automatically. Now, this booking
also uses the arrival date. For the finished goods stock booking that is triggered when a delivery
note is cancelled by hand, the current date is used as booking date
(LAPFERTWBPROT.MANDATUM).

For the delivery note creation in dispatch control, a restriction check was implemented, which
checks whether the order's arrival date falls inside or outside a closed period. If the date falls
within a closed period, the delivery note cannot be created. This restriction check can be enabled
with an environment variable. The check is then active for both delivery note creation in the
foreground, and in the background (AUTOLS).

When a delivery note is cancelled, the reason for the cancellation is transferred to the finished
goods stock log (LAPFERTWBPROT.BUCHTEXT).
If an order that has already been reported complete is cancelled in dispatch either by means of
order cancellation or cancellation by transfer (internal or customer cancellation), the reason for
the cancellation or the transfer will be passed on to the finished goods stock log
(LAPFERTWBPROT.BUCHTEXT).
The environment variables PERIODENPRUEFUNG (ON/OFF) and
LAPOOL_LS_PERIODENPRUEFUNG (ON/OFF) must be enabled for the restriction check at delivery
note creation.


        29.2.2.         Packed message
Dispatch control offers two functions for passing on the 'packed' report to the finished goods
stock log: Check missing quantities, and Correct packed quantities. A new environment variable
can be used to enable a different behavior for bookings in the finished goods stock log. Previously,
the current date was always transferred as the booking date. Generally, the booking date may not
be in the future and for past dates, the user has to have write rights for the new user right LAVD .
The check for missing quantities offers a special column, Buch.datum for entering a different
booking date. The date must not fall within a closed period. When the date is changed, it can be



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   178
passed on to the following items. After that, the booking date is transferred to the finished goods
stock log, item by item.
Function Correct packed quantities is available on item level. When you change the quantity in
column Packed, a booking dialog appears where you can enter the booking date, the cost center,
and booking text. Booking date and booking text are compulsory fields. The booking date is preset
by the present date. The amended booking date must not fall within a closed period. When you
quit the dialog, the entries will be transferred to the finished goods stock log.
The environment variable for enabling the logic in dispatch control is called
LAPOOL_VERPACKT_DATUM. The environment variable PERIODENPRUEFUNG must be set to the
end of period for this check.
Environment variable LAPFERTWBPROTO_OHNE_KST must not be set.


If data is manually reduced in the finished products stock because of a correction of packed
quantities, rebooking to truck in the via plant site, or because deliveries cancelled at the via plant
site, an additional menu will ask for the reason, date, and cost center for the booking. This data is
visible in the booking log.
If the booking refers to several order items, the query screen will open for every item; the data
will be preset with the first data entered. This logic can be disabled.



         29.2.3.          Inventory, finished products stock
With the "Finished products inventory" menu on the shift menu, you cano lock the finished products stock
during inventory. During that time, all bookings are kept in the report server until the finished products
stock is released again after inventory. The list of data is accessible during inventory, however. The system
will only inform you that inventory is under way. The "Inventory log" shows the progress of inventory. Who
has started and finished the inventory. The inventory can only be started and ended for the current site.
The log shows the data for all internal sites.




29.3.            Receipt of goods booking
A new environment variable WAEIN_LAPFWLAGER_DATUM can be used to enable a different
behavior for bookings in the finished goods stock log after manual and automatic receipt of
goods. Previously, the current date was always transferred as the booking date. With the new
logic, the date entered by the user will be transferred to the finished goods stock in case of
automatic receipt of goods and the customer's requested date in case of manual receipt of goods.
If this logic is active, the following rules apply for the input of goods received:

    •    Receipt of goods with a date higher than the present date cannot be entered.
    •    The right DIWR is required to antedate the receipt of goods.
    •    Antedating the receipt of goods will produce a security check.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                     179
        29.3.1.         Manual creation or cancellation of receipt of goods
When goods received are cancelled, the reason for the cancellation is transferred to the finished
goods stock log (LAPFERTWBPROT.BUCHTEXT). An environment variable
LAPFERTWBPROTO_WE_STORNO can be used to enable a logic that allows you to enter the
reason for the change if the item quantity of an existing receipt is changed. It is also transferred to
the finished goods stock log (LAPFERTWBPROT.BUCHTEXT).


29.4.           Stock removal bookings
In addition to the stock removal, the module "order-related stock removal" also produces a
finished report for header parts and thus an associated finished goods stock receipt.
See also EN-CONFIG-A+W Enterprise Interne Mandantentrennung.pdf




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 180
30. Stock
30.1.           Item master data
This is the master data in the "Stock"module and not the general article master data in the main
module.
In the article master data, you can define the inventory limits and the available variants. The
inventory limits are required for the automatic triggering of PO proposals (see section"Triggering
PO proposals").



        30.1.1.          Variants
The use of dimensional variants in stock is subject to some settings and relationships.
See section "Keys – Product keys – Dimensional variants"
The settings in the dimensional variants and the configuration of the document entry with regard
to physical quantity directly influence the display of the inventory forecasts.
"Variable variant"
The variable variant is always required if an article is not removed as a piece from the stock and is
also not entered or removed as piece. This is the case with colors, for example. Even if no fixed
packages (e.g. 1 can with 10 liters) are kept in stock, but rather the total quantity in liters (or
kilograms), the variable variant is required. It is used for incoming goods booking for stock goods,
removal from production, and for cost calculation.
For this, the environment variable WLDISPO_VARIABLE must be used.
See also "Size variants in stock"




30.2.           Room master data
Menu element "Master Data - Room" - creation of a new warehouse
Field "In-house": company for multi-site work - currently not evaluated
    - Division not required according to physical stock - logical stock possible
    - normal stock: - loose stock
     High-rack warehouse: - Special Bamberg; transfer of a file to an external warehouse system
        Rack stock: see „Rack-related incoming goods - rack stock“
    - Size/costs: - only information




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                             181
        30.2.1.         Box stock
Only complete boxes of an article (e.g. stock sizes) are entered in the box stock. Only complete
boxes can be booked in and out. If a lite should be removed from a stock size box (opening a box),
an entire box must be resolved (removed) and booked to another stock (e.g. normal stock).
For the use of automatic and semi-automatic (delivery note/manual order-related) it should not
be entered as default stock in the article master data.


        30.2.2.         Slot warehouse
For this stock type, booking of a stock slot assignment is required.




30.3.           Booking of incoming stock
For manual incoming stock, the price from the article supplier assignment (artliefzu) is used. If a
variant is booked, then from the article-variant-supplier assignment (artfarbzu, artvarzu). If you
remove the supplier from the booking dialog, no price is determined.


30.4.           Stock inventory
How does inventory in the stock work?
When opening an inventory, all inventories of the associated stock are copied to an inventory
stock (stock number * -1)(The tables are: wls, wlx, wlsv, wlxv, wlxifo, wlfach). The inventory
differences can now be recorded in this stock (negative stock number).
At the same time, incoming and removal bookings can be made in the normal stock. Here you
only need to be careful that these bookings are considered when counting.
If the recording of the inventory is complete, the inventory completion can also be initiated on
the inventory screen. Here, the following actions take place:
1.      The positive stock is deleted with reference to the tables named above.
2.      The negative inventory stock is copied to the positive stock number.
3.    All bookings that were made since the beginning of the inventory in the positive stock are
made again now.
It is also possible to cancel an inventory. Here, the negative inventory stock is just deleted with
the associated bookings.
During inventory completion or inventory cancellation a log record with "status 923 - inventory
completion" or "924 - inventory cancellation" is written to the stock history (stock log).




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 182
30.5.            Inventory evaluation
        30.5.1.           Average price
In the stock, there is an average price. The average price is determined by dividing the total value
(wlx.g_preis, wlxv.g_preis) after a booking by the total stock (wlx.g_best, wlsv.g_best) of a booking.
This is done on the article level as well as on the variant/color level.
In case of negative stocks, the average price can no longer be calculated correctly. Here, the data must
be corrected by an inventory.
You can prevent negative stocks with the environment variable "WL_KEINE_NEGATIVEN_BESTAENDE".
The total stock of the article (wlx.g_best) must match the total of the total stock of the associated
variants (wlxv.g_best). If this is not the case, you will have different average prices for the article and
the variants. To clean this up, you must also conduct an inventory.
The tookings can be made in wlh_ok and in wlprot. If you haven't done an inventory in a long time, of
course it is difficult to find an incorrect booking in the quantity of bookings."
With appropriate configuration, the stock average price is used for the material cost calculation.
In addition, there is a stock evaluation according to the FIFO and LIFO method. These values are
currently calculated but not used for the cost calculation.




        30.5.2.           FIFO and LIFO values
· FIFO (first in, first out)
Goods are received in the following sequence:

Receipt of goods dated 20.08. + 10 pcs. at 5,- € each                      =          50,- €

Receipt of goods dated 05.09. + 20 pcs. at 10,- € each                     =          + 200,- €

Total                                                                                  250,- €

Outgoing stock dated 08.10.            - 10 pcs. at 5,- € each             =           - 50,- €

Stock on hand (by FIFO)                                                               200,- €




LIFO (last in, first out)
Goods are received in the following sequence:



A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                     183
Receipt of goods dated 20.08. + 10 pcs. at 5,- € each                 =       50,- €

Receipt of goods dated 05.09. + 20 pcs. at 10,- € each                =       + 200,- €

Total                                                                          250,- €

Outgoing stock dated 08.10.         - 10 pcs. at 10,- € each          =        - 100,- €

Stock on hand (by LIFO)                                                       150,- DM


Of all the following methods, only LIFO is valid for tax purposes. The system records the average
price, the maximum and the minimum price. Two other stock monitoring methods are LOFO
(lowest in - first out) and HIFO (highest in - first out). As these methods are invalid for tax
purposes, ALCIB does not support them.

The calculation of the FIFO values is done using the table wlxifo. There, on stock receipts, new
records with b_menge = quantities received and FIFO + LIFO quantity = 0 are written.For stock
removals, the oldest record in the table for the corresponding key (article, stock, color, variant,
box) is searched for, which has the FIFO quantity < b_menge. The value found there is then used
for the calculation. If the quantity removed is greater than the difference between b_menge and
FIFL quantity, the next record with the same criterion is searched for.
The LIFO process runs similarly. Only that here the newest records are searched for.
The FIFO value determined using this process is then writtten to wlprot.



        30.5.3.          Backdating of an inventory evaluation
An inventory was completed on 12/31/2022. Now, this inventory should be provided with
additional values after the fact. The current inventory of articles that must be evaluated is
different today.

This function is not available. A completed stock inventory cannot be reevaluated after the fact.



30.6.           Correction of stock bookings
        30.6.1.          WL_KORR_DURCH_GEGENBUCH
In principle, there is a distinction between whether the variable WL_KORR_DURCH_GEGENBUCH
is set or not. If this variable is set, then corrections in stock bookings are made with the difference
and opposite. BSP: By accident, 100 pieces were removed from stock, but only 10 were supposed
to have been removed. With this process, 90 pieces are booked back in. This procedure is actually
easy to implement, but it causes a falsification of the assessments according to FIFO, LIFO, and
average process.



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 184
        30.6.2.          Standard procedure
If this variable is not set, the following logic holds. In the tables wlx_m, wlxv_m, etc., cyclical
inventory back-ups are created. These tables have the same structure as the original tables; only
the fields savetime and savedate, where the back-up time is saved, were added. A maximum of 2
complete back-up inventories are kept. With the command wlspec 0, a generation of the back-up
inventories can be initiated directly. No backups can be created if an inventory is open or if there
are open bookings. Important for this procedure is that the backups are kept current and that no
records from wlh_ok are deleted.
Based on these back-ups, all bookings can then be corrected, which lie between the oldest back-
up state and the current date.
The correction works as follows:
    •   The booking record to be corrected is written with negated booking status and with the
        corrected booking price and with the corrected booking quantity in the table wlh. The
        original time of the booking creation (field time) is retained.
    •   The stock booker then processes this record and detects from the negative booking status
        that this is a correction.
            o   It thus shifts all data for the combination of article number, stock to the stock +
                100.000 (tables wlx, wlxv, wlfach, wlgest, wlxifo, wlprot for all records with
                timestamp > then the backup time in the _m tables) .
            o   Then the latest backup in the _m tables is determined, which is older than the
                backup to be corrected. From this the backup records for the article/stock
                combination in question are copied back. (tables wlx, wlxv, wlfach, wlgest, wlxifo,
                wlprot with timestamp – see above )
            o   The record to be corrected in wlh_ok is set to error -1000.
            o   Then all bookings for the article/stock combination with booking time >= backup
                time and error != -1000 are pulled back into the table.
            o   The corrected record is written with positive B status and new quantity or new
                price into the table wlh.
            o   Then the stock booker writes a final correction record with B_status 101 into the
                table wlh. This has as waittime the time of the last record, which was obtained
                from wlh_ok. In addition, it is set to error -5, so that it is processed only after the
                last booking re-presented. The record contains in b_menge the difference
                between the B_menge of the original booking and the corrected booking.
                Afterwards, this difference must be identical to the difference between the
                backed-up total quantity in stock + 100,0-00 and the total quantity that arises
                after executing all re-presented bookings.
    •   Now all bookings are processed individually by the stock booker.
    •   In the end, for the processing of the record with status 101 it is checked whether the
        differences mentioned above match.
            o   If yes
                        The records with stock number + 100,000 are deleted
                        The final correction booking is written with error -1000 to wlh_ok.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   185
             o   If no
                         The records in the tables wlx, wlxv, wlfach, wlgest, wlxifo and wlprot
                          (with timestamp limitation) will be deleted for the current article/stock
                          combination.
                         The records backed up with stock + 100,000 are pushed back.
                         The correction record in wlh_ok remains with error - 1000, so that it
                          makes no sense to try making the correction again since this booking
                          would no longer be considered.
                         The final correction record is set to an error status.




30.7.            Stock filling orders
        30.7.1.          Incoming stock booking for packing notification
Until now, the incoming stock booking was always carried out for stock filling orders when the
completion report was made. The logic was based on the assumption that in this case the goods
produced would be placed directly to the stock without any packaging notification. Sometimes,
however, it is better for organizational reasons to carry out the incoming stock booking with the
packing message, then, for example, breakage messages are no longer relevant for completed
lites.

Breakage reports from the shipping area of A+W Production are not taken into account by this
logic.

The incoming stock booking is made using status 415 "Incoming (packing message)" and no longer
via 403 "Incoming (completion report)".

Configuration

The WL_STOCKORDER_WHENPACKED switch can now be used to activate the incoming stock
booking via the packing message. This setting is global. It affects all incoming stock bookings for
stock filling orders. Presently, it cannot be set differently for individual sites of an internal multi-
site system.

The variable PMVERSANDSTUUER may not be set here, since this leads to a packing message
being carried out directly with the completion report

The variable AWC_IGNORE_PACKINGMESSAGE must not be set.


        30.7.2.          Manual entry
If an order with the customer who corresponds to the current site (xhaus) is entered, now the
associated order is automatically converted to "Stock order“. All items entered are then changed
to supply type = PRODUCTION, regardless of whether the supply type "PRODUCTION" is provided



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                  186
for these articles in the master data. Similarly, there is no check whether the supply type "STOCK"
is defined for the article entered. Exceptions are only the items with supply type = NONE.
If in such a stock order an article is entered that is not known in production, under some
circumstances, the entire order cannot be scheduled for production planning.
Also with reference to another order/quotation of another customer, both the order type and the
supply type of all existing items are converted. For the determination whether the customer
corresponds to the current site, the data is determined from the table xhaus. Thus, the evaluation
is positive if an entry in the table exists with kunr=<Customer number from the order> and hnr
<Company number from the order>. Since the evaluation depends on 2 criteria, for the change of
the company number it is also checked whether this is an order for the current site. If a
subsequent change of the company number makes the initial conversion to "Stock order" moot,
now it is asked whether the order type = "Stock order“ should be retained. If so, the supply types
of the items are retained. If not, these are determined anew according to the existing logic on
request. If an order for any other customer with the reference to the "Stock order" is generated, it
is also queried whether the type of the order should remain. If this is not desired, then in this case
only the type is converted; the supply type in the existing items and those taken over is not
determined anew. There is also no determination of the supply types if the order type has been
changed manually.
LAGERAUFTRAG_ERWEITERT = ON


30.8.           Report of stock plates
        30.8.1.         Motivation for this function description
In A+W Enterprise, the stock plates are managed in A+W Enterprise Stock. In order to keep
inventory as precise and automated as possible, the stock removal booking by production of stock
plates can be done based on the cutting data.


        30.8.2.         Configuration
See EN-CONFIG-A+W Production.docx - Reporting of stock plates
The reporting must be switched on in XOPTON.CFG:
In A+W Enterprise
PMXTVRLOESCHOPT
By default, in the past data from wlppms was not taken into account for the forecast and also not
removed. With the new environment variable for A+W Enterprise "WL_WLPPMS_ADAT_SHIFT" it
is also possible to consider data from the past. This variable is filled with a numeric value if you
want to increase the starting date for selecting the stock forecast data from table wlppms (Stock >
Information System > Forecast) by 1 or more days. The selection of the data from wlppms is
selected with wlppms.a_datum >= today. Now the selection can be shifted with the value from
the variable into the past. (wlppms.a_datum >= today - value from WL_WLPPMS_ADAT_SHIFT)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 187
         30.8.3.        Resolve reservations (#289178)
The reservation is canceled by adjusting the forecast data in table WLPPMS. For each XTV
feedback, the corresponding records in WLPPMS are updated for all transferred BOM elements.
The booked quantity and quantity are adjusted according to the transmitted data and the status is
set. As long as the booked quantity (WLPPMS.A_VERBUCHT) is smaller than the expected quantity
(WLPPMS.B_ANZ), the status (WLPPMS.STATUS) is set to 1 ("partially booked"). When the
booked quantity has reached the value of the expected quantity, the status is set to 2
("completely booked").

To adjust the forecast data, only the BOM element transmitted with the XTV confirmation is
considered. The entire BOM below the tuple is not checked for entries in WLPPMS.

Examples:

    -    If an item article is reported as finished (produced), the parts below are booked out of
         wlppms accordingly.
    -    If an item article is reported packed, the parts below are only cleared from wlppms if the
         packed quantity is > the finished quantity.

XTV feedback when using the A+W ERP Stock Service

With use of the Stock Service, previously the XTV reporting had to be deactivated since otherwise
removals from coupled stocks were made twice.

The XTV reporting can now be used together with the Stock Service - for the stock booker now
checks the stock properties for removals with status 68 (PMS_ABGANG_EXT). If the stock from
which the removal should be made is a portal stock (WLRAUM.INTERFACE = 2), no stock removal
is made. In this case, the stock in question is a synchronized third-party stock that is removed by
the Stock Service. A corresponding entry in the stock booker log documents that this removal is
suppressed. The record is then deleted from the table wlh.




30.9.           Size variants in stock
         30.9.1.        Motivation for this function description
In A+W Enterprise, articles can be created as dimension, color or size variant. In order to treat
articles with size variants correctly in the stock, several settings are required, which will be
summarized here. The configuration will be explained using the example of the spacers.


         30.9.2.        Item master data
Normally, spacers are defined as BOM elements in the frame. Here, the item structure of the
spacer is described via the frame for the IG.
Spacer



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   188
In A+W Enterprise master data – item the spacer is defined as a part of item type 220 – spacer. In
this configuration, the quantity unit = 3 – length (mm) and the variant is on size. Whether the
quantity unit 1 linear meters or 3 millimeters is set doesn't matter at all for stock-keeping. Which
of the two quantity units is used decides in which quantity unit the article is ordered. In the
"Color/size variant" field, you can then use F5 to assign the size variants and their supply type
(stock) (Master data – Keys – Products – Variants – Sizes). If you would also like a forecast and if
necessary an automatic removal, the inventory change for the item must be entered accordingly
(e.g. completion report - see master data manual).
The spacer must be saved in the article master data as follows:
    -    Identification:             Artikelart = Teil

                                     Article type = 220 spacer

    -    Phys. properties:          ME = 1 length (lfm) or 3 length (mm)
                                    Color/size variant = sizes
    -    Supply:            Supply type = 1, 4, 5 or 7
    -    Stock:                      Default stock should be defined
                                     Stock change = completion report

Furthermore, for the spacer an item dimensioning (Shift + F4 – Dimensioning – Item
dimensioning) must be stored. This item dimensioning is important so that the thickness (AIR)
from the item is inherited by the spacer.




Figure 19 Article dimensioning in master data



SPACER
In the master data – item the spacer is defined as a part of item type 210 – IG spacer. The spacer
is also defined as "Size" in the "Color/size variants" field and assigned the appropriate size
variants (production) with F5 (Master Data – Keys – Products – Variants – Sizes).




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                          189
In the BOM of the frame, the spacer is attached with Anz1 = 1 and Anz2 = 0 and an appropriate
inheritance formula. Important here is the inheritance of $3, in which the thickness variant is
inherited.




Figure 20: Dimension conversion dialog (formula for spacer thickness)



If for the spacer with size variants variant-dependent prices should also be calculated, then the
required settings must also be made for the spacer the item dimensioning (such as spacers) and
also under price details (Shift +F4 - Price details).
IG
In the BOM of the IG, the frame is attached with the appropriate inheritance formula.




Figure 21: Dimension conversion dialog (formula for spacer)




         30.9.3.             Stock - item master data
Under Master Data – Item, for the spacer (not the frame), the appropriate inventory data for the
automatic order is entered.
The variant is "variable"




Figure 22: Article master data in stock



A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                        190
30.10.          Triggering PO proposals
Within the A+W Enterprise stock module, it is possible to trigger PO proposals for filling up the
stock based on forecast quantities. Whether this happens depends on some prerequisites.


        30.10.1.        Prerequisites
The environment variable WL_PROG_BEST controls whether PO proposals should be triggered. If
the variable is active, PO proposals are triggered. The setting is database-wide and not site-
specific.
WL_PROG_BEST:
PO proposals are triggered based on a forecast by the stock booker.
If a PO proposal should be triggered for an article, it must have the supply types Stock –
Production or Stock – PO in the master data. At the same time, a default stock and a resupply
time have to be entered. Whether an inventory forecast is done for an article depends on the
setting of "Change in Stock" in the A+W Enterprise article master data (master data - article tab
"Stock")
In the stock master data (stock module), inventory limits have to be entered (see also section
"Purchase order forecast without alarm stock").
Furthermore, the PO quantity process has to be defined via the environment variable WLBMV
(see section "PO quantity process").
A PO forecast based on square meters is also possible for box stock. The inventory limits in square
meters are maintained per article, stock, and variant.


        30.10.2.        PO quantity process
The PO quantity process specifies according to which method the quantities for PO proposals for
filling up the stock are calculated. The PO quantity process is set database-wide, not site-
specifically.
WLBMV:
This variable activates the warehouse PO quantities procedure:
      1 = Standard quantity
      2 = Quantity booked
      3 = Up to maximum stock
      4 = Once to maximum stock (trigger new purchase orders only when goods receipt is
      booked)
      5 = N * Standard quantity up to maximum stock

Within the PO forecast, the forecast stock inventory on a defined date is compared to the
expected stock inventory. What the expected stock inventory is defined via the environment
variable WL_PROG_BEST_ALARM. By default, the minimum inventory for triggering stock filling
POs is used. If, however, the environment variable WL_PROG_BEST_ALARM is activated, the
alarm stock is used instead of the defined minimum inventory.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   191
WL_PROG_BEST_ALARM:
The forecast PO in the warehouse refers to the alarm stock and not to the minimum stock.



        30.10.3.        Default quantity (WLBMV=1)
In A+W Enterprise, the default quantity for re-supply is stored under Master Data –
Article.
For articles that are produced via the company's own production for stock (supply type
Stock – Production), they are entered on the Supply tab in the Default quantity field. With
this supply type, the default quantity cannot be maintained according to the variant
(#456862).
For articles whose inventory is filled up via POs to stock (supply type Stock – PO), the
default quantity is maintained in the Article – Supplier allocation. With this variant, it is
possible to define this variant-specifically.
The default quantity cannot be stored site-specifically
Generally, it is the case with this procedure that the default quantity determined is
always used. However, if the stock again falls below the alarm stock, including an already
existing purchase order proposal, the purchase order proposal is deleted and the double
quantity is entered.

        30.10.4.        Quantity removed                (WLBMV=2)
Precisely the quantity of the last stock removal is ordered.

        30.10.5.        Up to maximum stock                     (WLBMV=3)
The stock is filled to the maximum. After this, the difference between actual stock and
maximum stock is ordered as long as the alarm stock is not underrun.

        30.10.6.        Once up to maximum stock (WLBMV=4)
When the alarm stock is underrun, the exact quantity required to reach the maximum stock is
ordered.

POs are only triggered if good receipt is booked. If, however, within the re-supply time the
forecast stock including the PO triggered drops below the alarm stock, another PO proposal is
triggered.


        30.10.7. N * default quantity up to maximum stock
            (WLBMV=5)
In A+W Enterprise, the default quantity for re-supply is stored under Master Data – Article.


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                192
For articles that are produced via the company's own production for stock (supply type Stock –
Production), they are entered on the Supply tab in the Default quantity field.
For articles whose inventory is filled up via POs to stock (supply type Stock – PO), the default
quantity is maintained in the Article – Supplier allocation. With this variant, it is possible to define
this variant-specifically.
The default quantity cannot be stored site-specifically

Generally, it is the case with this procedure that the default quantity determined is always used.
However, if the default quantity is not sufficient to reach the maximum stock, a multiple of the
default quantity is ordered.


        30.10.8.         Purchase order forecast without alarm stock
In addition to standard articles that you would always like to have on hand, there are also non-
standard articles.
These should only be kept in stock if they have actually been used up. You won't want to maintain
an alarm stock for such articles since these articles would otherwise be permanently in stock. A
PO proposal should only appear if there is an actual need, that is, an order.

#456796 For articles for which no stock on hand is to be kept in the warehouse, there is now the
possibility to define an alarm stock level of 0. However, a maximum stock on hand level must be
specified and the switches WL_PROG_ALARMBEST_NULL and WL_PROG_BEST_ALARM must be
activated.

If there is no stock on hand for the article in question, the purchase order forecast determines a
negative forecast stock on hand up to the supply time. Since this stock on hand is thus smaller
than the alarm stock, a purchase order request is generated according to the set procedure
(WLBMV).

A maximum stock level is nevertheless required so that, on the one hand, up to this level can be
replenished (WLBMV = 3, 4 or 5). On the other hand, this serves to identify the articles that are to
be forecast using this method. This avoids unwanted purchase order proposals for articles for
which no stock limits have been defined.

If a maximum stock is defined in sqm < 1, then only as much is ordered as is actually required.
However, this is only possible across variants. The maximum stock for a specific variant is always
at least 1 unit.


        30.10.9.         Variant-precise PO forecast:
Environment variables:
WLDISPO_VARIABEL:
If the variable is active, the stock items in the order are transferred to table wldispo as 'variable to
be debited'. This does not debit the variant (piece), but the concrete dimension!
Is the forecast stock of the variant-precise PO forecast less than the alarm stock or the minimum
stock?

The forecast stock is determined based on unbooked receipts of goods and is composed of:

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  193
      Stock on hand
+     Total of all unbooked receipts of goods based on stock POs (date-dependent) – table wldispo
-     Total (from today up to the replacement time) of the variant-related order removals (manual or
      delivery note-removal)


                              Only articles whose stock change
                              is set to manual or delivery note-
                              removal.


Only articles whose stock change is set to manual or delivery note-removal.
In this document, WL_PROG_BEST = ON, WL_PROG_BEST_ALARM = ON and WLDISPO_VARIABEL
= ON


         30.10.10. Order forecast for fixed articles
[AW-127400] January 15, 2023
If for fixed articles the inventory change "AWP" or "*/AWP" was selected, it could happen that
order-releated, e.g. for QM articles and the quantity in QM and not, as required for fixed articles,
wlppms was stored in pieces in the table. However, since for such articles pieces are always saved
in the forecast, this causes problems with the inventory forecast. This program behavior has been
corrected. For fixed articles, the forecast data is always written in number of pieces with
inventory change AWP.


In addition, in the stock check during import, a change was made, the effect of which is that
dimensioned articles are also treated as piece articles.


For correction of old data: From our point of view, it must be sufficient for all fixed articles (article
prodbemass>0) in wlppms to set the b_menge (quantity in quantity unit of the article) = the b_anz
(quantity).


         30.10.11. PO forecast for color or thickness variants with
             inventory change AWP
QR2506
Articles with color or thickness variants could thus far be incorporated into the nightly PO forecast
via A+W Production with use of a forecast type. For this, there was previously only one
overarching forecast for the entire article, which makes no sense for different thicknesses or
colors.
The program behavior has now been changed so that this is possible. In stock, these articles, e.g.
spacers, are then stored and booked variably.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   194
         30.10.12. Environment variables
WL_PROG_BEST (stock reference: no)
PO proposals are triggered based on a forecast by the stock booker.


WLBMV (client reference: no)
This variable activates the warehouse PO quantities procedure:
        1 = Standard quantity
        2 = Quantity booked
        3 = Up to maximum stock
        4 = Once to maximum stock (trigger new purchase orders only when goods receipt is
        booked)
        5 = N * Standard quantity up to maximum stock

WL_PROG_BEST_ALARM (client reference: no)
The forecast PO in the warehouse refers to the alarm stock and not to the minimum stock.

WL_PROG_ALARMBEST_NULL (client reference: no)
If this variable is activated, articles with minimum or alarm stock = 0 will also be considered in the
PO forecast. This can be used if, for example, stock sizes should only be ordered if there is a need
(order-related). Generally, however, you do not want to have stock on hand for these articles.


30.11.             Spacers/Thiokol in stock
         30.11.1.          Spacer
The spacer should be removed from the stock by linear meter. The completion report in AWP
triggers the stock removal. See also 18.3
The spacer must be saved in the article master data as follows:
    -    Identification:           article type = 220 spacer

    -    Phys. properties:         ME = 1 length (lfm)
                                   Color/size variant = sizes
    -    Supply:           Supply type = 1, 4, 5 or 7
    -    Stock:                    Default stock should be defined
                                   Stock change = completion report




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                              195
Figure 23: Master data: Identification tab, Phys. properties, stock and <F4>->Variant info

For the correct calculation of the number of linear meters per variant, the formula must be
defined in the BOM of the IG frame.
The spacer is a child part of the IG frame.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                      196
Figure 24Article master for spacers

IG frame BOM:




Figure 25: BOM for spacers

Article sizes:
Thus, this article receives $1, $2 and $3 from its parent.




Figure 26: Article dimensioning for spacers

Formula 233:
Example:
Item: IG with quantity = 10, width = 1000, height = 1000 and AIR=16.
$1 = (2 * 2000) / 1000 = 4 m




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx   197
Figure 27: Spacer formula



Stock info system per variant:




Figure 28: Info stock per variant

There are 15,504.61 m of variant 16 mm.


Out:
The system calculates how many meters should be removed per item. It removes the stock.
Afterwards, the system checks whether stock order should be generated.

 Example:
Item: IG with quantity = 10, width = 1000, height = 1000 and AIR=16.
10 x 4 m = 40 m.
For the 16mm variant 15504.61 – 40.00 = 15464.61 m
Is 15464.61 <= 1m? Yes, a stock order is generated 9see stock order).

Stock order:
The variant-precise stock is the forecast stock (calculated in the night) or that after a removal. The
system checks each size variant.
If the variant-precise stock <= stock <= alarm stock, a stock order is generated.
Example:
For the 16 mm variant, we have minimum = 100, alarm = 500, and maximum = 1000.
The quantity in the purchase order is:
     -    For WLBMV = 1 (default quantity):
          This quantity is in detail (F2) of colors/sizes (Shift+F4).

           E.g. purchase order quantity = 2000 m




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                             198
Figure 29: Article master data, <F4> Variant info, <F2>

    -    For WLBMV = 2 (quantity removed):

Only for removal, not stock forecast.
         Example:
        Item: IG with quantity = 10, width = 1000, height = 1000 and AIR=16.
        10 x 4 m = 40 m.
        For the 16mm variant 440.61 – 40.00 = 400.61 m
        400,51 < Alarm = 400,51 < 500? Yes.
         Purchase order quantity = 40 m
   - For WLBMV = 3 (up to maximum stock):
         Purchase order quantity = 1000 m
   - For WLBMV = 4 (once up to maximum stock):

A new PO is triggered only once the goods receipt has been booked.
       The system checks whether there is a goods receipt for the 16 mm variant.
        Yes, no PO
        No, PO quantity = 1000 m

    -    For WLBMV = 5 (N * default quantity up to maximum stock):

Example:
      If default quantity for 16mm variant is 300, the PO quantity is:
       N * 300 >= Maximal = 3 * 300 = 1200 m.
      N = 2 is not enough.
       Purchase order quantity = 1200 m

Goods receipt:
On goods receipt, the system removes the stock.



         30.11.2.             Drying agents
Drying agents are stored in the warehouse in 25, 140, and 600 g containers.
In the article master data, the drying agents must be stored as follows:


A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx           199
    -    Identification:               article type = 250 drying agent

    -    Phys. properties:           ME = 8 weight (kg)
                                     Dimensional variant activated
    -    Supply:             Supply type = 1, 4, 5 or 7
    -    Stock:                        Default stock should be defined
                                       Stock change should be defined, e.g. delivery note




Figure 30: Phys. properties for drying agent




Figure 31: Variant info for drying agent



For the correct calculation of the number of kilograms, the formula must be defined in the BOM
of the IG spacer.
IG spacer BOM:




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                    200
Figure 32: BOM level for spacers

Drying agent BOM:
There is no formula for article 98530000 in the BOM. It takes $1 and $2 from its parent. See article
dimensioning of the article 9853000




Figure 33: BOM of drying agent

Formula 210:
Example:
Item: IG with quantity = 10, width = 1000, height = 1000 and AIR=16.
$1 = ((2 * 1000) + (2 * 1000)) / 1000 * 16 * 0.002 = 0.128 kg




Figure 34: Calculation formula for drying agent



Stock master data:
A variant is required for each container (e.g. 600 kg, 140 kg, and 25 kg)
+ a variable variant




Trockenmittel 35: Stock master data for drying agent




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                         201
Stock info system per variant:




Figure 36: Info stock per variant

There is 1999.77 kg in stock.
Out:
The system calculates how many kg should be removed per item. It removes the stock.
Afterwards, the system checks whether stock order should be generated.

Example:
Item: IG with quantity = 10, width = 1000, height = 1000 and AIR=16.
10 x 0.128 kg = 12.8 kg.
For the variable variant 1999.77 – 12.8 = 1986.97 kg
Is 1986.97 <= 1200 kg? No, no stock order.

Stock order:
The variant-precise stock is the forecast stock (calculated in the night) or that after a removal. The
system checks for variant 600 kg, 140 kg, 25 kg, and variable.
If the variant-precise stock <= stock <= alarm stock (1200 kg), a stock order is generated.
Info about PO quantity is described in Chapter 18.5.1.
Trigger variant:
If the employee takes a new container from stock, he must remove a container manually. For this,
he uses the resolve variant (shift+F8).
         •    Booking > out: select variant, e.g. 600 kg container

         •    Enter the quantity in the Booking field

         •    Resolve variant with Shift+F8.


Example:
2 containers 140 kg (stock = 4) and 14 kg (stock = 4).
The system removes a 140 kg container and books 140 kg into the variable variant.
    -     Before:




Figure 37: Info stock per drying agent variant



     -    Resolve variant



A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                          202
1 container of 140 kg is resolved.




Figure 38: Drying agent stock exit



     -    after:




Figure 39: Info stock for drying agent after exit



30.12.              Inventory check on import / scheduling
[AW-72192]: Here, for all stock articles that are marked with the inventory change flat "AWP", a
prediction (stock forecast) up to the production start date is made. If there is not enough in the
appropriate stock, a defined employee will be informed.
The function is documented in "EN-CONFIG-A+W EnterpriseProductionInterface".




30.13.              Determination of the variant number
To determine the AWE variant number, the stored procedure wlgetbitnr from the stock booker is
loaded with the parameters article number, quantity unit, size 1 and size 2. This returns the
variant number:
     •    · >0, if a suitable variant was found in the area of size +- 20 (this variant will be booked)
     •    · <0, if no suitable variant was found in the area of size +- 200 (this booking is set to error -
          20022)
     •    · =0, if no variant with the mentioned restrictions was found. (This record will not be
          booked since it is a residual lite)


The logic with Delta range +200 was introduced to distinguish residual lites from missing data in
the stock booker.
If during the processing by the stock booker the variant "0" is determined, it is assumed that this
is not a residual lite. The record is not booked and counts as successfully processed.

If during the processing by the stock booker a negative variant is determined, the record is set to



A+W Software GmbH                           EN-CONFIG-A+W Enterprise.docx                              203
error -20022. This offers the opportunity to react to the error. In this case, the master data can be
created and the record can be re-presented to the stock booker for processing.
The logic with Delta range +-200 was introduced as a tool. The sense can be questioned today.
The SP "wlgetbitnr" can be adapted to the customer's needs on the customer system.
See AWDesk #53945.




30.14.             Environment/solving problems
In the table "wlh_OK" there are cleanly booked records.
With the script "wlhinfo" you get a display of what is still in front of the booker /table "wlh").


Error:
23       Stock is in inventory
-2000x error, no booking
-5   record is waiting for booking of a previous record (sequence!!)
-4 only for stock removal if the article to be booked is not recognized in the stock from which it
should be removed (no inventory);
         mostly relevant if order booking should be from box stock (does not work -
         box must first be resolved)


Reaction:
           •   Update records with error -2000x to 0. This way, frequently records can be booked
               that previously encountered a record lock.
           •   Incorrect bookings, e.g., remove individual lite from box stock - delete from the table
               "wlh" and user must make manual removal booking


Error patterns
I.) wlh.varart= 0 - no variant
                  1 - dimensional variant
                  2 - color variant
                  3 - double variant (nicht unterst.)


If varart= 1 (2) then the field bitnr (farbnr) != 0.
If bitnr(farbnr)=0, then there was an operational error during goods receipt. To enable the
booking, the corresponding PO must be made available again for the goods receipt.




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                                204
II.) wlh.faktor is the conversion factor for pieces in quantity stk * faktor = menge. The
corresponding function gets stk, faktor, and menge transferred and tests whether the equation
above is correct (plausibility check).
If an error, then:
1. If entered in the foreground, then delete record from wlh and re-enter
2. Check where booking comes from (stock inventory, order, etc.)
III.) wlh.lnr is the stock to which the article wlh.artnr should be booked.
       The article must be recognized for stock removals from the warehouse. For stock removal
bookings that are done order-related, the stock may not be box stock.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                          205
31. Route Optimization
31.1.            Infrastructure
Use of the A+W Logistics Optimizer includes four components in an A+W Enterprise environment:
    •   The dispatch control for selection of the routes that should be optimized

    •   The A+W Logistics Optimizer for configuration of the route optimization

    •   The A+W Commercial Logistic Service as interface to the A+W Logistics Optimizer

    •   The LogisticBackEndService as interface to the A+W Enterprise database


The functionality is available in Iapool_otr starting with Build 13.04.1630.
The development refers to case #359839 A+W Route Optimization
The expansion for transmitting rack information and booking racks in and out was implemented
with case 409228.


31.2.            Prerequisite
    •   See 10.1 Voraussetzung
    •   The file lapool_otr must be present
    •   Binfile logisticbackendservice is also required.
    •   Both Binfiles lapool_otr and logisticbackendservice are translated on computer awedev-
        rhel7 and automatically copied to srvalcib after makeall. This means, all necessary
        binaries can be used from there.
    •   In the spec/cmd folder, there is a sample script (lapool) with which you can call the right
        lapool depending on the configured environment:
            o    MODUL_LAPOOL_OTR = ON -> lapool_otr
            o    MODUL_LAPOOL_OTR = OFF -> lapool


31.3.            ICE environment
        31.3.1.         Unix
See 10.3 Unix.


        31.3.2.         Windows
See 10.4 Windows.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                206
31.4.           A+W Enterprise
        31.4.1.         Switch
The optimization is activated in A+W Enterprise by the switch:
    •   MODUL_LAPOOL_OTR auf ON

So that the racks out and in are not booked by the production system, but rather by the A+W
Logistic Optimizer:
    •   AWC_IGNORIERE_GESTELLMELDUNG to OFF


        31.4.2.         Master data
The A+W Logistics Optimizer requires a pool of routes. In the dispatch control, routes of the type
'Route' are selected in order to optimize them with the A+W Logistics Optimizer. After the
optimization, the A+W Logistics Optimizer assigns the routes new routes of the type 'Opti.'
A sufficient quantity of routes with the type 'Opti' must be created so that the A+W Logistics
Optimizer can always find a non-assigned Opti route in the master data for an optimization.
The routes for the A+W Logistics Optimizer are created under:
A+W Main Menu > Master Data -> Keys -> System -> Dispatch -> Routes -> Route
Requirements:
    •   Optimization routes must be specified in the selection of the arrival days on each possible
        day (Mo-Su).

    •   The selection 'Art' must be set to 'Opti'

    •   The routes must be assigned to a site

    •   For each site, a pool of 'Opti' routes must be created


        31.4.3.         Tracing
See chapter 8.5 (ICE logging)


        31.4.4.         Database
The expansion for the optimization data is in the table 'Iapool.'
The 'optistatus' column descdribes the progress of the optimization. There are three states of a
route:
    •   0       not optimized

    •   1       in optimization

    •   2       Optimization completed



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                207
With reaching of the state 2 'optimization completed,' the original route is set to an available
optimization route of the type 'Opti.'
The 'optitransid' includes different information depending on the progress of the optimization.
    •   If no optimization has been run, the values is '0.'

    •   If routes are transferred for optimization ('optistatus' = 1), then the value is set to a
        sequential negative ID. For each key 'routenr' and 'auftrnr' in 'Iapool,' a new sequential
        negative ID is assigned. The IDs are displayed for the user in a message.

    •   The A+W Logistics Optimizer determines an individual sequential ID for optimized routes.
        This route ID is taken over in the 'optitransid' field after completion of the optimization
        ('optistatus‘ = 2). The route ID of the A+W Logistics Optimizer is not identical to the A+W
        routes the optimized routes assigned in the field 'routenr.'


        31.4.5.         Transmission of rack information
For the transmission of rack information, either the data from bcbock or from table gestzu is
used. This can be configured with the switch AWC_GESTZU_BUCHEN.


        31.4.6.         Racks out and racks in
The booking of racks out and racks in is done with the A+W Logistic Delivery app. If a rack is
marked here as delivered, the message is processed in A+W Enterprise. The same applies for the
pick-up.
So that the booking is not already done by A+W Production, the switch
AWC_IGNORIERE_GESTELLMELDUNG must be activated.
So that the bookings are made by the A+W Logistic Optimizer, in the A+W Infrastructure Web
under Configuration > Commercial > Logistic Settings the switch Gestellrückmeldung an must be
set to the value 1-ERP Gestellsystem.


        31.4.7.         Packaging dimensions
[AW-124162] - QR November 2022
Transmit one-way packaging to A+W Logistics Optimizer
[AW-121278] - QR November 2022
Previously, one-way packaging (boxes) could not be transferred to the A+W Logistics Optimizer.
The relevant items were optimized, but not with the correct packaging dimensions. Starting with
this version, one-way packaging materials with dimensions are transmitted to the A+W Logistics
Optimizer.
Determination of the exterior dimensions for boxes for OTR
[AW-124162] - QR November 2022
For transmission of the exterior dimensions of one-way packaging (box) to the OTR, it is now
possible to store a new entry on the dialog Logistics > Rack management > Rack master data >
RAck types > Parts list for manufacturing (CTRL + F10). This record must be marked with the



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  208
checkbox in the "ED" (exterior dimensions) column. There may be only one record with this code
per box type.For this record, the fields length, width, thickness (=height) must be filled out.
The code is not displayed in the packaging planning. Here, it should be possible to see via the
parts name that these are the exterior dimensions. In the table gskistrukt, the code is taken over,
however, so that it can be evaluated there.


During the transfer of the data to the OTR, the record is taken from the table gskistrukt, which as
lfdnr corresponds to the ordnr from the box BOM 9table gsl) to the aussenmass flag. If there is no
record there, the interior dimensions from the table vsaufgest are transferred.


31.5.             A+W Logistics Optimizer
        31.5.1.         Database
The A+W Logistics Optimizer requires a Microsoft SQL Server database. The connections must be
configured in two places.
A+W Logistics Optimizer
In A+W Logistics Optimizer -> Menu Configuration -> Configuration -> OTR Connection tab

    •   Data Source: Host\SQL Server Instance

    •   Initial Catalog: Name of database

    •   User ID

    •   Password

In A+W Infrastructure 6 Web
In A+W Infrastructure 6 Web -> Configuration -> A+W Logistics Optimizer -> Database Connection

    •   Database: only 'SQL server' may be selected

    •   Host Name


    •   Instance

    •   Database

    •   Data Source Name (DSN): can be selected freely

    •   Windows authentication: only 'OFF' may be selected

    •   User

    •   Password




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               209
        31.5.2.         A+W products
The A+W LogisticService must be configured for an A+W Enterprise Installation since the A+W
LogisticService is used in all three A+W products Cantor, Business, and Enterprise. This setting
specifies which service is addressed in order to procure data from the corresponding A+W
database and save it. In an A+W Enterprise installation, the LogisticBackEndService is addressed.
    •   A+W Infrastructure 6 Web -> Configuration -> Commercial -> Backend => Enterprise


        31.5.3.         Installation path application
The installation path of the A+W Logistics Optimizer must be assigned to an A+W Enterprise
switch so that the A+W dispatch control can start the A+W Logistics Optimizer:
Switch 'OTR_PATH' Value z.B.: 'C:\Program Files (x86)\A+W\OTR\Ort.App.exe'


 Environment variable                              Value                  Description
                                                   (default/example)
 AWSOA_ICEHOST                                     -                      Name of the host on
                                                                          which the A+W Service
                                                                          Locator Administrator
                                                                          is running
 AWSOA_ICEPORT                                     12000 (default)        Port on which the
                                                                          A+W Service Locator
                                                                          Administrator can be
                                                                          reached
 MODUL_LAPOOL_OTR                                  ON                     Activates optimization
                                                                          for A+W Enterprise
 AWSOA_LOGLEVEL_LOGISTICBACKENDSERVICE LOG_ERROR (if                      Tracelevel of
                                       variable does not                  LogisticbackendService
                                       exist)
 AWSOA_LOGLEVEL_LOGISTICCLIENT                     LOG_ERROR (if          Tracelevel of the
                                                   variable does not      optimization within
                                                   exist)                 the dispatch control




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                 210
32. A+W iQuote
ATTENTION: the iQuote-specific settings should be listed in the separate document (EN-CONFIG-
A+W Enterprise iQuote).


32.1.   A+W iQuote order characteristics in A+W
  Enterprise
If you are underway in A+W Enterprise, you may often ask how you can detect an A+W iQuote
order.
The following characteristics identify an iQuote order:




1 -> The field input in the order header is automatically set to online.
2-> In the change log, the first system processing is by intauf with mode -77
3-> Similarly, in the change log, the customer name is entered as user.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                           211
33. Field recording
(#122094 // #409468)
On particular dialogs, changes made by the user can be traced using field recording values. Here,
not just the changing of the field values, but also the creation or deletion of data records is
logged.


33.1.           Available dialogs
The following dialogs offer this logging possibility:

    •   Master data > Market partner (ALCIB 2008)
           o (without sub-menu; database table 'mp'; menu 'MP')
    •   Master data > Market partner > Menu > Bank accounts (ALCIB 2008)
           o (Database table 'bankv'; menu 'MPBANKV')
    •   Master data > Article (ALCIB 2008)
           o (without sub menus; database tables 'artikel'; screen 'NARTIKEL')
    •   Master data – Prices – IG prices – Basic prices (A+W Enterprise 6.4)
            o (Database table 'pisomat'; screen 'PISOTAB')
    • Master data – Prices – IG-prices – Individual lites (A+W Enterprise 6.4)
            o (Database table 'isoeinzel'; screen 'ISOEINZEL')
    • Master data – Prices – IG prices – Pattern exchange (A+W Enterprise 6.4)
            o (Database table 'paus'; menu 'PAUSTAB')
    • Master data – Prices – IG Prices – Exchange TG/LAMI/Special (A+W Enterprise 6.4)
            o (Database table 'isoaust'; screen 'ISOAUST')
    • Master data – Prices – PCD prices – All article price vectors (A+W Enterprise 6.4)
            o (Database table 'prsvek'; screen 'PRSVEK')
    • Master data – Prices – PCD prices – Spec. article price vectors (A+W Enterprise 6.4)
            o (Database table 'prsvek'; screen 'PRSVEK')
Note: The change log will be kept precisely to the dialog. This means that if you change a data
record in "All article price vectors" and then change the same data record under "Spec. article
price vectors", you will see each change only on the change log belonging to the dialog.

    •   Master data – Prices – PCD prices – All vector assignments (A+W Enterprise 6.4)
            o (Database table 'pkzprs'; screen 'PKZPRS')
    • Master data – Prices – PCD prices – Processing vectors (A+W Enterprise 6.4)
            o (Database table 'beavek'; screen 'BEAVEK')
    • Master data – Prices – PCD prices – Spec. processing vectors (A+W Enterprise 6.4)
            o (Database table 'beavek'; screen 'VEKBEA')
Note: The change log will be kept precisely to the dialog. This means that if you change a data
record in "Processing vectors" and then change the same data record under "Spec. processing
vectors", you will see each change only on the change log belonging to the dialog.

    •   Master data – Prices – PCD prices – LAMI articles – LAMI basic prices (A+W Enterprise 6.4)
            o (Database table 'pkzvsg'; screen 'PKZVSG')
    •   Master data – Prices – PCD prices – LAMI articles – Spec. LAMI basic prices (A+W
        Enterprise 6.4)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                212
            o  (Database table 'pkzvsg'; menu 'SPEZVSG')
    •   Master data – Prices – PCD prices – LAMI articles – LAMI exchange / additional prices
        (A+W Enterprise 6.4)
           o (Database table 'vsgaust'; screen 'VSGAUST')
   •    Master data – Prices – PCD prices – Colored articles (A+W Enterprise 6.4)
           o (Database table 'pkzfarb'; screen 'PKZFARB')
   •    Master data – Prices – PCD prices – Spec. colored articles (A+W Enterprise 6.4)
           o (Database table 'pkzfarb'; screen 'SPAZFARB')

Note: The change log will be kept precisely to the dialog. This means that if you change a data
record in "Colored articles" and then change the same data record under "Spec. colored articles",
you will see each change only on the change log belonging to the dialog.
    • Master Data > Conditions > Daily Conditions > General Daily Conditions (ALCIB 2008)
             o (Database table 'kond'; screen 'TKON')
    • Master data > Conditions -> Daily conditions > Product group conditions (ALCIB 2008)
             o (Database table 'wgkond'; screen 'TAGWGKOND')
    • Master data > Conditions > Special conditions > General conditions (ALCIB 2008)
             o (Database table 'kond'; screen 'AKON')
    • Master data > Conditions > Special conditions > Product group conditions (ALCIB 2008)
             o (Database table 'wgkond'; screen 'WGKOND')
    • Master data > Conditions > Special conditions > Article conditions (ALCIB 2008)
             o (Database table 'artkond'; screen 'ARTKOND')
    • Master data > Conditions -> Special prices > Article prices (ALCIB 2008)
             o (Database table 'kuartprs'; screen 'KUARTPRS')
    • Master data > Conditions > Special prices > Colored articles (A+W Enterprise 6.4)
             o (Database table 'kufarbprs'; screen 'KUFARBPRS')
    • Master data > Conditions > Special prices > Processing prices (ALCIB 2008)
             o (Database table 'kubeapr'; screen 'KUBEAPR')
    • Master data > Conditions > Special prices > IG exchange prices (A+W Enterprise 6.4)
             o (Database table 'kuaustpr'; screen 'KUAUSTPR')
    • Master data > Conditions > Special prices > IG single lites (ALCIB 2008)
             o (Database table 'spezeinz'; screen 'SPEZEINZ')
    • Master data > Conditions > Special prices > IG basic prices (ALCIB 2008)
             o (Database table 'spezpisomat'; menu 'SPEZPISO')

    •   Master data > Conditions - Special prices > LAMI exchange/additional (A+W Enterprise
        6.4)
             o (Database table 'spezeinz'; screen 'SPEZEINZ')
    •   Order entry - Header
             o Changes to the delivery date cannot be recorded here. Please use the delivery
               date change protocol for this purpose
             o (Database table 'kauf'; screen 'KAUF')
    •   Order entry - Items
             o (Database table 'kpos'; screen 'KPOS')
    •   Order entry - Consignments




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                213
33.2.           Configuration
To activate logging for a dialog field, the user must position the cursor on this field, call up the
system menu (<CTRL+F4>) and select the System configuration > Field recording menu element.
If the logging is already active for this field, it is deactivated again with this menu element.
When the user selects the System configuration > Record field or System configuration > Log
record menu element, he can display the changes in the current field or current record.

Both the menu elements on the system menu as well as the System > Field recording menu
element are secured by the right SYPR.


33.3.            Evaluation
To get a complete overview of the field changes, the table alproto must be evaluated. For this
purpose, reports can be commissioned for evaluation. There is no standard evaluation in A+W
Enterprise.
The information about which fields should be logged is saved in the tables alprototabinfosa and
alprotofeldinfos. In these tables, it is also possible to store customer-specific names, which should
be output by reports instead of tables, field or key field names. The program for maintaining
these customer-specific names can be reached with the System > Field recording menu element.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 214
34. Fixed private fields in document entry
In the document, in addition to the "configurable fields" there are fixed private fields for
document header and item level. On the header level there are two of the type long and two of
the type char. Labels can be assigned for the fields via the environment variables KAUF_LABEL<n>
and EK_KAUF_LABEL<n>.
On the item level, there are two of the type long and one of the type char. Labels can be assigned
for the fields via the environment variables KPOS_LABEL<n>.
The evaluation of the fields is customer-specific. However, there are some "customer-specific"
program logics that are linked to these fields.


kauf._private_* => Takeover into "Data warehouse"


kposp.private_char1 => Includes the file name with use of "Connection to A+W CAD Designer
(Bars)"
kposp.privat_long1 => includes the rack number for MODUL_KISTENBESTELLUNG - ON


DISABLE_COPY_PRIVATE_CHAR1 (client reference: no)
This environment variable can be used to switch whether the field is to be included in the
reference or not. With ON, the value from the field kauf.private_char1 is not copied into the new
document.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                 215
35. Delivery date
35.1.           Configuration options in A+W Enterprise:
CHECK_LTPLAN
Does not allow a new entry if the planned delivery date (ltplan) is in the past. In case of
correction, the question is asked whether this is what you want.
DIRECTSHIPMENT_NO_SUPPLHTIME (client reference: no)
If this environment variable is active, then for orders that are on direct shipment, the supplier's
handling time is not considered for the calculation of the goods receipt date. Important: The route
of the order is not evaluated, but rather
LTPLAN_EQUAL_LTIDEAL
This switch activates a warning, if the arrival time (ltplan)
deviates from the date requested by the customer (ltideal)!
NO_CHECK_LTPLAN
Normally it is not possible to enter an order whosedelivery date is in the past. If the variable is
set,you can also enter a delivery date that is in the past.
TOURENPLAN_LTIDEAL
Variable is only important if you are working with route plan. Current default behavior: as delivery
date (kauf.ltplan), the next date from the route plan is always taken. With set variables: the next
date from the route plan is taken over, which is less than or equal to the requested delivery date
(kauf.ltideal).
AWC_NEU_LTPLAN_EMPF
Configuration option, who should be informed in case of a postponement of delivery date:
0       User (kauf.eusr)
1       Person in charge (kauf.abvertr)
2       Sales representative (kauf.vertrerloe)
DEFAULT_VSTERMIN_MANR
If the employee responsible has been defined, he receives
the message if the date from production is after the date of
the order and the data have not been transferred to shipping. Evaluation site-exact in case of
internal client separation


35.2.           Postponement of delivery date with AWP
        35.2.1.          Motivation for this function description
There are always internal and external inquiries about the delivery date of an order.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    216
With the incorporation of A+W Enterprise into A+W Production, there are some program points
that affect the delivery date: whether it is a manual input or an automatic change by the system.
This document will try to discuss all (!) points and their relationships with respect to the delivery
date.


         35.2.2.           Configuration options in A+W Production:
1. Configuration parameter ALLOW_LATE_POSTPONE_TO_PAST




Figure 40: Parameter administrator in A+W Production



2. Configuration parameter: POSTPONE_DELIVERY_DATE (applies for AWE and AWB)




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                              217
Figure 41: Shift delivery date-Parameter in A+W Production




         35.2.3.            A+W Enterprise: order entry
In the order header, a requested delivery date (kauf.ltideal) is stored during order entry. Using
various characteristics (calendar, route days, etc.), a planned date is calculated in AWE:
kauf.ltplan.




Figure 42: Dates in the order entry

Both dates are also written to the OrderXML for the scheduling:
<DELIVERY_DATE>
 <DELIVERY_START_DATE>2017-12-15T00:00:00</DELIVERY_START_DATE>
 <DELIVERY_END_DATE>2017-12-17T00:00:00</DELIVERY_END_DATE>
</DELIVERY_DATE>

A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                              218
         35.2.4.            Postponement of delivery date by A+W Production
It frequently happens that the ERP delivery date is postponed during scheduling. For example, if
the production duration is longer than the delivery time.




Figure 43: Information in order regarding delivery dates

The new date is written back to the order after scheduling and also logged.
Here is an example with the order 5000708:
Entry: ltideal=’25.11.17‘, ltplan=’22.11.2017‘
Postponement: ltideal=’25.11.17‘, ltplan=’29.11.2017‘ (date postponement by production)



         35.2.5.            Order rescheduling in A+W Production
With the appropriate configuration, the delivery date can be postponed in the rescheduling
editor,
A+W Production->Order pool->Context menu->Processings->Context menu->Edit work plan-
>Reschedule




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                       219
Figure 44: Order rescheduling in A+W Production



In this case, the new date is reported back to A+W Enterprise. However, Kauf.ltplan is calculated
again considering the calendar, route days:




Figure 45: Delivery date amendment log and document info in order

The postponement of delivery date in the rescheduling editor is documented in AWE.


A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                          220
Table kaufstat.status=206.
This status is booked if the production must postpone a delivery date automatically during
scheduling or if the delivery date is postponed due to a manual rescheduling in production.
A detailed description of all statuses can be found here:
\\JUPITER\DOKU_DocuWare\ALCIB-
PMS\DFUE\Status_Rueckmeldung\Status_Rückmeldungen.doc


         35.2.6.             Configuration option in A+W Production
Parameter: RESCH_POSTPONE_DELIVERYALLOWED




Figure 46: Parameter "Postponement of delivery date in rescheduling editor"


         35.2.7.             A+W Enterprise: Dispatch control
After an order has been taken into order in the order entry and released for further processing in
the system, it is visible in the dispatch control. The data in the dispatch control is always kept up-
to-date by other modules, for example, in case of production-conditioned postponement of
delivery date.
See here the example with the order 5000707 (shift from the rescheduling editor on 01/02/2018):




Figure 47: Delivery date display in dispatch control




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                           221
In the dispatch control, it is also psosible to postpone the date:
    ■    You can postpone complete routes or orders or individual items to another day
    ■    On the respective level, you can postpone the dialog with <F3> or <F4 – a Postpone>.
         Depending on the level, the pre-population in the header of the dialog is a bit different.
         Here is an example of an order postponement:




Figure 48: Postponement dialog n dispatch




Figure 49: Order information in dispatch

Whether the date is written back to the order from dispatch depends on the system configuration
(see "Delivery date back to the order")
The postponement in the dispatch control is documented in the database table 'lapproto':
select * from lapproto where auftrnr=5000707
vonltplan     02.01.2018
zultplan      28.12.2017
vonroute      300
zuroute       300
auftrnr 5000707
lfdpos 0
anzahl 0
aend_manr     99999
aend_dat      22.11.2017
aend_reason 0
aend_txt
gnr     0
aend_time     2017-11-22 11:51:52
vmodus        0
vorgang       5




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                          222
         35.2.8.            Delivery date back to the order
There is an option to configure the system so that the date is written back from dispatch to the
order (kauf.ltplan).
LAPOOL_TOUR_TO_KAUF
If this switch is set, then with each order correction the date and route of the next delivery in time
is taken over from dispatch control into the order. If the order was postponed completely to
another route, then this route specification is retained despite order change since the route is
taken over from dispatch into the order.
That is, if this switch is deactivated, kauf.ltplan remains unchanged after the dispatch
postponement.
In this case, you have only an indication in the delivery date change log of this:




Figure 50: Delivery date change log from the order

If the switch is active, there are other operationg whether the date is written back. In this case,
there is also a search for items -> delivery date on which most items (larger order quantity) will be
taken over into the order header.
The order with the new date is scheduled again. If the date fits from the capacity point of view
from dispatch, it is taken over into the order data. If the new date is too tightly scheduled, this
date is postponed again by the production system.
These date changes are also visible in the delivery date change log:




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                               223
Figure 51: Delivery date change log in order by postponement




         35.2.9.           A+W Enterprise: delivery date per item-different
             POs
It is also conceivable that for an order (e.g.: 5000791) two or more POs (e.g. 100348 and 100350)
exist with different delivery times.




Figure 52: Document info in order




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                        224
Figure 53: Order pool in A+W Production

The simplest handling: the whole order will be produced and delivered on the last possible date as
soon as all the goods have arrived -> uninteresting with respect to delivery date.
The case described here assumes different production dates.


         35.2.10.          A+W Production: delivery date per item
In A+W Production, the following points with the delivery date must be named:


POOL_AUFTRAG.LIEF_TERM (delivery date for the entire order)




Figure 54: Select-Statement from A+W Production

POOL_POS.LIEF_TERM (delivery date per item: can, depending on configuration, be different than
POOL_AUFTRAG.LIEF_TERM)




Figure 55:: Select-Statement (query per item) from A+W Production




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                       225
POOL_BESTELLTEILE.LIEF_TERM (delivery date per ordered items)




Figure 56: : Select-Statement (purchase parts) from A+W Production

The flow is relatively the same (see also 23.1.5):
A+W Enterprise writes the date per order in the KAUF.LTPLAN. This date is schedule in A+W
Production with OrderXML.
In the example above, the goods ordered only arrive after the calculated production date. Here
the system expects manual action: after consultation with the customer, the delivery date
can/must be postponed and rescheduled (important: when working with the "Late change"
MODULE, the change of the delivery date does not count as production-relevant. For this reason,
you absolutely need a new A+W Production). However, this is only possible as long as the order is
NOT in the mode GLOBAL_exit
:




Figure 57: Delivery dates for purchase orders




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                       226
Figure 58: Excerpt from Service Monitor for scheduling



The second possibility: reschedule affected items (goods receipt) in A+W Production.

In the process, A+W Production replans the order, calculates another shipping date, and reports it
back to A+W Enterprise.
AWE updates the KAUF.LTPLAN or not and documents this in kaufedit.




Figure 59: Logging of delivery date



The new delivery date is also transferred to shipping.




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                              227
35.3.           Via plant
The delivery date handling is also influenced by the plant logic. The via Plant function is only
enabled with internal client separation. The associated function description is in the separate
A+W Enterprise configuration description for internal client separation.


35.4.           Packaging optimization
Here too, an ltplan is treated:


        35.4.1.          Logical rack (production rack):
 If for the source rack and target rack the following fields match:
        •   Order number (kposgest.auftrnr)
        •   Delivery date         (vsaufgest.ltplan)
        •   Route number (vsaufgest.routenr)


        35.4.2.          Physical rack (dispatch rack):
 If for the source rack and target rack the following fields match:
    •   Delivery date       (vsaufgest.ltplan)
    •   Route number (vsaufgest.routenr)
For detailed documentation, see   \\JUPITER\DOKU_DocuWare\ALCIB-PMS\GESTELLE-
PACKMITTEL\User_Manuals\Packmittelplanung.docx.




35.5.           Influence of the MP travel time
The travel time can be defined per market partner (customer, supplier, object). This is defined
under Master Data > Market Partner, Delivery tab. This travel time is taken over in the order and
can be changed there on the Properties tab.
Caution: The change of the travel time in the order is only possible if the environment variable
ROUTENFAHRZEIT is not active. (see also chapter Routen-Fahrtzeit)


        35.5.1.          Travel time of the customer
As an example, a customer with mp.anfahrt=2 days was taken.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                               228
Figure 60: Consideration of travel time




Figure 61: Delivery date calculation for longer travel time

Already during order entry, the customer's travel time is considered: either automatically
according to the requested date entry or with changes (route, date) after the message
confirmation (see screen shots). A+W Production determines the possible delivery date starting
with the kauf.ltplan.


         35.5.2.             Travel time of the supplier
As an example, a supplier with mp.anfahrt=1 day was taken.
After the determination of the start of production by A+W Production, bestpool.solldat is
determined considering the supplier's travel time.




Figure 62: Example for an order with P.O. parts



The planned delivery date was calculated with consideration of 2 days travel time.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                     229
Figure 63: Delivery date for purchased parts in A+W Production



A+W Production calculates the date on which the goods should be in production.




Figure 64: Calculated order date with consideration of the supplier's travel time

With consideration of the supplier's travel time (1 day + weekend), the Ordered for the date is
calculated (bestpool.solldat).


         35.5.3.            Travel time of the object
If you are working with the extended object data (OBJ_ALL_INFO=ON), then you can also maintain
the travel time for object in the Master Data ->Market Partner.
Object with travel time=4 days
In the order entry, the travel time of the object will override that of the customer.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                          230
Figure 65: The project can own the arrival time, too




35.6.              Travel time in the address
It is also possible to store the travel time (caution: different meaning) per address.


The travel time from the market partner's address plays no role for delivery date calculation,
insofar as the environment variable ROUTENFAHRTZEIT is set. Even if the address has no
individual travel time, the travel time of the route is considered. In the dispatch control (Order
level > Delivery address tab > FD column), this travel time in days is displayed.
If you are not working with ROUTENFAHRTZEIT, then the value from the address is taken over in
the order entry. Depending on the time of the order entry at which the different delivery address
is selected, the kauf.ltplan is not calculated taking the address travel time into consideration. The
delivery date is only finally determined with background processing (intauf).


35.7.              Route travel time
The configuration of the travel time for routes is influenced, among other things, by the
environment variable ROUTENFAHRTZEIT.
This variable activates the option of storing the travel time in the route master. In the order, the
travel time (2nd mode dialog) is fetched only after determination of the route . The customer's
travel time plays no role with set variables.
CAUTION: If a travel time is defined for the route but the variable is not activated, inconsistencies
will occur in the delivery date calculation!
In the Master Data > Keys > System > Dispatch > Routes, in the Time field, the travel time for the
route can be specified. This travel time is taken over directly in the order and cannot be changed
there.


A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                             231
With the use of the route travel time, the details for market partner (customer/object) are
superfluous.
In the following figure, the route travel time (2 days) is taken over into the order as non-
changeable field. The delivery date is calculated with consideration of this travel time.
The figure in chapter Fahrtdauer des Objektes can serve as counter-example for
ROUTENFAHRZEIT variable not set.




Figure 66: Travel time from delivery address




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                        232
36. Delivery date change log
Entries in “Delivery date change log”
This list makes no claim to completeness
 Action                       Fix text                       Comment
 External order interface     26673 : "Order transfer"
 Internal document
 transfer
 Change of the delivery       Manual text or                 Environment variable
 date via the "Transaction                                   VGRUND_INDIVIDUELL
                              26003 : "Change of date"
 change" menu element
 Order generation             Purchase order
 Order entry                  cu_xvgrund or                  In case cu_xvgrund where
                                                             xvgnr=2 and automatic=1
                              27099 : "Order entry"
 Changing the customer        Manual text
 requested date in the
 order entry
 Changing the route in        Manual text or cu_xvgrund or   In case cu_xvgrund where
 order entry                  30288 : "Route changed"        xvgnr=1 and automatic=1
 Change of the "delivery"     Manual text or cu_xvgrund or   In case cu_xvgrund where
 in the order entry to        30289 : "The delivery was      xvgnr=3 and automatic=1
 "drop shipment"              changed to drop shipment.""
 Change of the "delivery"     Manual text or cu_xvgrund or   In case cu_xvgrund where
 in the order entry to        30291 : "The delivery was      xvgnr=4 and automatic=1
 "pick-up"                    changed to pick-up."
 Change of the route          Manual text or cu_xvgrund or   In case cu_xvgrund where
 through change of the        30288 : "Route changed"        xvgnr=1 and automatic=1
 "delivery"
 Entry or change of the       Manual text or cu_xvgrund or   In case cu_xvgrund where
 object in the order entry    30290: "Object entered or      xvgnr=5 and automatic=1
 (to !=0)                     changed". The object route
                              was obtained.
 Deletion of the object in    Manual text or cu_xvgrund or   In case cu_xvgrund where
 the order entry (to 0)       30288 : "Route changed"        xvgnr=1 and automatic=1
 Changing the "Travel         Manual text or cu_xvgrund or   In case cu_xvgrund where
 time" in order entry         30294: "Travel time changed”   xvgnr=6 and automatic=1
 Manual shift of a whole      Manual text or                 Environment variable
 route to "dispatch"                                         VGRUND_INDIVIDUELL
                              22600: "Dispatch info" +
                              manual text
                              or                             If no manual text was entered


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             233
                      22600: "Dispatch info" +        Depends on "reasons for moving"
                      30382 : "Moving a route" +
                      32982 : "Customer request"
                      22600: "Dispatch info" +
                      30382 : "Moving a route" +
                      32983 : "Backlog"
                      22600: "Dispatch info" +
                      30382 : "Moving a route" +
                      26001 : "Cancellation"
                      22600: "Dispatch info" +
                      30382 : "Moving a route" +
                      32984 : "Operation
                      cancellation"
                      22600: "Dispatch info" +
                      30382 : "Moving a route" +
                      30177 : "Tour plan"
                      + 34534 : "Route<old route>
                      to route <new route>"
Manual moving of an   Manual text or                  Environment variable
order in dispatch                                     VGRUND_INDIVIDUELL
                      22600: "Dispatch info" +
                      manual text
                      Or                              If no manual text was entered
                      22600: "Dispatch info" +        Depends on "reasons for moving"
                      30383 : "Moving an order" +
                      32982 : "Customer request"
                      22600: "Dispatch info" +
                      30383 : "Moving an order"+
                      32983 : "Backlog"
                      22600: "Dispatch info" +
                      30383 : "Moving an order"+
                      26001 : "Cancellation"
                      22600: "Dispatch info" +
                      30383 : "Moving an order" +
                      32984 : "Operation
                      cancellation"
                      22600: "Dispatch info" +
                      30383 : "Moving an order" +
                      30177 : "Route plan"
                      + 34534 : ""Route <old route>
                      to route <new route>"
Manual moving of an   Manual text or                  Environment variable
order in dispatch                                     VGRUND_INDIVIDUELL
                      22600: "Dispatch info" +
                      manual text


A+W Software GmbH          EN-CONFIG-A+W Enterprise.docx                              234
                           Or                             If no manual text was entered
                           22600: "Dispatch info" + +     Depends on "reasons for moving"
                           30385 : "Moving an item"+
                           32982 : "Customer request"
                           22600: "Dispatch info"
                           +30385: "Moving an item" +
                           32983: "Backlog"
                           22600: "Dispatch info" +
                           30385: "Moving an item" +
                           26001: "Cancellation"
                           22600: "Dispatch info" +
                           30385: "Moving an item" +
                           32984: "Operation
                           cancellation"
                           22600: "Dispatch info" +
                           30385: "Moving an item" +
                           30177: "Route plan"
                           + 34534: ""Route <old route>
                           to route <new route>"
Manual moving of a         Manual text or                 Environment variable
partial item in dispatch                                  VGRUND_INDIVIDUELL
                           22600: "Dispatch info" +
                           manual text
                           Or                             If no manual text was entered
                           22600: "Dispatch info" +       Depends on "reasons for moving"
                           30384: "Moving a partial
                           item"+ 32982: "Customer
                           request"
                           22600: "Dispatch info" +
                           30384: "Moving a partial
                           item"+ 32983: "Backlog"
                           22600: "Dispatch info" +
                           30384: "Moving a partial
                           item"+ 26001: "Cancellation"
                           22600: "Dispatch info" +
                           30384: "Moving a partial
                           item"+ 32984: "Operation
                           cancellation"
                           22600: "Dispatch info" +
                           30384: "Moving a partial
                           item"+ 30177: "Route plan"
                           + 34534: ""Route <old route>
                           to route <new route>"




A+W Software GmbH               EN-CONFIG-A+W Enterprise.docx                             235
Change of the delivery   Manual text that was entered    In case cu_xvgrund where
date in production       when rescheduling in A+W        xvgnr=13 and automatic=1
                         Production or cu_xvgrund or
                                                         If the table cu_xvgrund exists,
                         30361 : "Delivery date moved
                                                         the reason is always taken from
                         by production system"
                                                         this table (as described above)
                                                         unless the variable
                                                         VGRUND_TEST_FUER_MELDUNG
                                                         is also activated.
Printout of a form       37064 : "Delivery date on 1st   Environment variable
                         OC"                             VGRUND_INDIVIDUELL
                                                         BUCHE_LTEDIT_BEI_FORMART




A+W Software GmbH             EN-CONFIG-A+W Enterprise.docx                          236
37. LAMI
This chapter explains for the user (A+W Enterprise customer) how laminated glass items can be
entered correctly.
Among other things, the sequence of entry is listed using examples and figures.


37.1.             Laminated glass stock size
The laminated glass stock size BOM generally has a BOM that looks as follows:




Figure 67: Example of a laminated glass BOM with AP 1 and 3




Figure 68: Example of a laminated glass BOM with AP 2

On this BOM level, in particular the assembly positions of the glass and foils are important. The
glass is labeled consecutively from the outside to the inside beginning with 1. As in other multiple
glass types, two assembly positions (IP) per glass can be assigned. Depending on the coating and
structure, two IPs per glass are possible (see Figures 1 and 2).
The foils are generally assigned the same assembly position as the glass. If a glass has the
assembly position 2 or 4, then the foil that follows it does not absolutely have to have IP = 2 or 4;
instead, it can remain IP=1 or 3. If several foils are installed between the individual glass layers,
the foils are not incremented. Their sequence is determined via the actual sequence in the BOM.
At the end of the BOM, the processings required for production (such as pre-lamination and
lamination) are entered.
The values in the AZP column affect the price calculation. In this case, an exchange or additional
price is sought for the appropriate BOM element. If the exchange is undertaken in the order
entry, the exchange flag is set automatically by the program.




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                             237
The formulas in the Frnr (formula number) column specify how the dimensions of the lites are
calculated. If the laminated glass is produced or ordered as stepped laminated glass, the step
formulas 100 (outer lite(s)) and 110 (inner lite(s)) are also required. In formula 110, the flag
Stufenabzug is set. It serves to pre-populate the reference and offset lites in the order entry:




Figure 69: Display of the stepped glass using the BOM formulas (order entry)

The print flag DR in the BOM indicates whether the structure of the unit should also be output on
the order papers. If the flag is not set, only the header designation will be printed. Possible values
for the print flag are:
         N        the item designation will not be output on the papers
         J        The item flag is only output on all specified papers
         V        The item designation is only output on sales papers
         P        The item designation is only output for production papers.
The Group and Designation fields are only relevant for A+W iQuote (web application) and will be
described within this application.
The laminated glass stock size is stored in the item type 183 and has the supply type (Supply tab)
stock:




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                           238
Figure 70: Item type and supply type of laminated glass stock size




37.2.              Laminated glass cut size items
In addition to the stock size item, the cut size BOM includes the processing Cutting. It makes
sense to use a processing Laminated glass (package) cutting in order to make finding the work
process easier later on in A+W Production.




Figure 71: Example of a BOM level for laminated glass cut sizes

Whether a cut size is cut or assembled from its individual lites, is determined in the order entry
via the supply type or pre-populated accordingly from the master data and must therefore be
changed only in exceptional cases (e.g. extremely small/large lites, shape lite, exchange in the
BOM, step).




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                          239
Figure 72: Supply type of the laminated glass in the order entry

Generally a complete laminated glass BOM has one additional level "processed laminated glass."
By default, this level includes a high-quality processing and is used in the order to insert additional
processings on the entire laminated glass.




Figure 73: Example of a processed laminated glass with additional processings in the order



37.3.              Entry of laminated glass items in the order
In the document entry (quotation, order), during entry of an item, a copy of the master BOM is
generated according to the table aufstrukt. It can be expanded or manipulated through the
exchange of items.
During the entry of processed laminated glass cut sizes, essentially two cases must be
distinguished: the processing is done on the cut size itself or the processings are done on the
individual lites of the cut size before they are assembled into a unit. For this purpose, the items
must also be entered differently.


         37.3.1.            Laminated glass package processings
Here is a schematic depiction of a laminated glass BOM tree with edge processing:



A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                           240
Figure 74: Processed laminated glass with edge processing.




Figure 75: Laminated glass BOM display in the order (<F3>, height field)

Because the processing requires an individual part from production to which it is attached, an
additional item Processed CS is required as header article. The laminated glass cut size can
optionally have the supply type Stock or Production. In the first case, the cut size would be cut; in
the second case, assembled from the float cut sizes before the edge processing is applied (see
Figure 8).




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                           241
         37.3.2.             Laminated glass with processings on individual
             lites
If in the laminated glass manufacturing the case occurs that the processings are only applied to a
lite, the BOM will generally have a somewhat different structure:




Figure 76: Laminated glass structure with processings on individual lites.

For the entry of a laminated glass cut size from processed float, essentially first the level
Processed Laminated glass-CS is not required unless this item has another produce group than the
"normal" laminated glass-CS. For the reason named above (a processing requires a part to which
it can be applied), here the intermediate level on the float level is required: the item Float CS is
therefore exchanged in the cut size BOM for a Processed float CS item. This is only allowed if the
cut size item has the supply type Production. Float CS under the processed Float CS is then
assigned to the appropriate processings (see Abbildung 104 VSG-Aufbau mit Bearbeitungen an
Einzelscheiben.)
Important: if necessary, remove the A/Z flag so that no exchange price is pulled for the processed
float.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                        242
Figure 77: BOM display with a processed float



37.4.             Inherited processings
Depending on the processing type or operation-specific edge conditions, processings applied to
the laminated glass package can be inherited. That is, the processing must be added on the same
BOM level as laminated glass edgework. Depending on the processing/possibly glass type, these
can be inherited.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                      243
Figure: Schematic depiction of the laminated glass BOM with inherited processings

In Abbildung Schematische Darstellung der VSG-Stückliste mit vererbten Bearbeitungen, the
processings highlighted in gray are inherited, that is, they are applied to the individual lites before
the laminated glass is assembled. The inherited processings require the inheritance flag
(artikel.bearbcopy=1). The laminated glass/CR inheritance flag is found on the "Production" tab in
the item master data. This field is only accessible for processings and meta parts.
The inheritance happens both directly after the order entry by the intauf as well as during an
order transmission.
Note: for test purposes, this behavior can be configured in the system. By activating the
environment variable VSG_VERERBUNG_SOFORT, the inheritance for one item will take place in
the foreground. The intauf logic remains unaffected by this.
Since the bearbcopy field is obtained from the local item master data, it can be that at a dealer,
the BOM remains unchanged in the order entry while the BOM for the same order is blown up (by
the inheritance mechanism) in the production order.
The intauf marks the artificially generated processings (depicted with dashed lines in the figure
above) in order to delete and re-generate after an order change. The field aufstrukt.aendkz is
used for this.
The "inheritance logic" is restricted to the item types LG-FD and CR-FD. Only there is a search for
inheritance-relevant processings (according to artikel.bearbcopy) and are these added artificially
to the first CS part (artikel.atyp = cut size; artikel.teilflag = part) on deeper levels of the BOM tree.
The artificially inserted processings (depicted with dashed lines) generally have the following
properties:
Supply type = "none"; AZP = not assigned; DrKZ = "N"


A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                               244
Only if the processing is on TG does the following property apply:
Supply type = "Production"; AZP = not assigned; DrKZ = "N"
Further along, the print flags (in the BOM) will be set for the artificial processings to "N" so that
they are not declared in the order. If, however, a processed laminated single lite is purchased,
then the print flag must be implemented for the purchase. Therefore, the intauf for processings
with auttrukt.aendkz=1 changes the aufstrukt.druckkz to "J" (this is an artificial processing).


        37.4.1.          Additional information (5/21/2019)
Here, the topic "LAMI inheritance" is addressed again and the most important points for
constructing the BOM are pointed out.
       1. Under LAMI FD, there must be a level with glass FD. Preferably also with processed
            float FD. It must be possible to recognize this through AP. If under LAMI FD there is an
            intermediate level with LAMI FD (processing LAMI FD = LAMI FD + cutting), this may
            not have any AP, otherwise it will be recognized as relevant level for the inheritance.
       2. The inherited processing should not be on the level of the glass.
By default, we support the following structures:




Figure: LAMI BOM

All other deviations and special features will only be done for a fee.


In Version AWE6.0, there are a few extensions for LAMI as header part (!!!) that were made as a
result of customer requests:
    1. Glass level for LAMI is deeper than 2 levels under processed LAMI. Inheritance follows on
       the 4th level.
Processed LAMI FD = LAMI FD + inheritable processing
                          LAMI FD = LAMI FD META + …. (costs level for IP)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 245
                             LAMI FD META = glass level (processed FD with EP) + lamination…
     2. Inheritable META processings with the individual BOM.
     3. In LAMI as header part, the inheritable processings can be entered without an individual
        level. That is,




Figure: These expansions only exist for LAMI as header article.



This does not apply if LAMI is installed in an IG. In this case, there are several multiple glass levels,
which sharply increases the complexity of the inheritance. For LAMI in IG, currently only the
standard specified by AWE is supported.


            37.4.2.          Examples of an inheritance downward
Case 1: Non-inheritable articles in AWE (LAMI/CR inheritance = 'N')
 SN file        AWE (for edge, drilling, other processing)
     Step       Sales papers              Sales papers            Sales papers          Sales papers
                Production papers         Production papers       Production papers     Production papers

 0              LAMI article              LAMI article            LAMI article          LAMI article
                • PT=Prod                 • PT=Prod               • PT=Prod             • PT=Prod
                • EA=A                    • EA=A                  • EA=A                • EA=A
                • PC=Y                    • PC=S                  • PC=P                • PC=N
 1              No article                No article              No article            No article
 2              No article                No article              No article            No article
In this case, a SN file can be used because the processing is not inheritable. The SN file contains
the processings that are recorded on header article.
The supply type is the one that is defined in the article master data.

The prices for processing on header are calculated.
Case 2: inheritable article in AWE (LAMI/CR inheritance = 'J') normally without SN file

               For edge, drilling, other processing

               The prices for processing on header are calculated.



A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                             246
                                        PT = Production                           PT = none
 Article master data           LAMI level        Float level         LAMI level         Float level

 Sales papers                  •   PT=Prod       •   PT=Prod         •   PT=none        •     PT=Prod
 Production papers             •   EA='A'        •   EA=''           •   EA='A'         •     EA=''
                               •   PC=Y          •   PC=N            •   PC=Y           •     PC=N
 Sales papers                  •   PT=Prod       •   PT=Prod         •   PT=none        •     PT=Prod
 Production papers             •   EA='A'        •   EA=''           •   EA='A'         •     EA=''
                               •   PC=S          •   PC=P            •   PC=S           •     PC=P
 Sales papers                  •   PT=Prod       •   PT=Prod         •   PT=none        •     PT=Prod
 Production papers             •   EA='A'        •   EA=''           •   EA='A'         •     EA=''
                               •   PC=P          •   PC=N            •   PC=P           •     PC=N
 Sales papers                  •   PT=Prod       •   PT=Prod         •   PT=none        •     PT=Prod
 Production papers             •   EA='A'        •   EA=''           •   EA='A'         •     EA=''
                               •   PC=N          •   PC=Y            •   PC=N           •     PC=Y



           37.4.3.         Customer-specific logic inheritance with print flag
#451313
Especially for the customer Nowak, an environment variable VSG_VERERBEN_MIT_DRUCKKZ was
created. If this variable is ON and activated, the processing are calculated on header leavel, but
the texting of processings is on the float level.
If the variable is OFF and activated is the standard logic. (The processings are calculated and
texted on the header level.)
CAUTION:
     -     The field LAMI/CR inheritance must be set to 'N'; otherwise the processings are doubled in
           the BOM.

     -     The print flag 'sales papers' and 'production papers' are not evaluated.
VSG_VERERBEN_MIT_DRUCKKZ = ON (Nowak)
Below, an example for processings on float - LAMI with TG is described.
Please note:

           -   If the edge processings are already in the BOM, the will be retained. Only the edge
               processing on the header level is inserted.
           -   The print flag for the edge processing on float level is the one defined in the BOM in
               the article master data.
 SN file        AWE
     Step       Edges                            Edges                      Drilling
                (in the BOM)                     (not in the BOM)           / other processing
 0                  LAMI article                      LAMI article                LAMI article
                •   PT=none                      •    PT=none               •     PT=none


A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                    247
               •   EA='A'                       •    EA='A'                   •   EA='A'
               •   PC=N                         •    PC=N                     •   PC=N
 1                 Float article                     Float article                Float article
               •   PT=Prod                      •    PT=Prod                  •   PT=Prod
               •   EA=''                        •    EA=''                    •   EA=''
               •   PC= as BOM                   •    PC=Y                     •   PC=Y
 2                 Float article                     Float article                Float article
               •   PT=Prod                      •    PT=Prod                  •   PT=Prod
               •   EA=''                        •    EA=''                    •   EA=''
               •   PC= as BOM                   •    PC=Y                     •   PC=Y


VSG_VERERBEN_MIT_DRUCKKZ = OFF (default)
Below, an example for processings on float - LAMI with TG is described.
Please note:

           -   If the edge processings are already in the BOM, the will be retained. Only the edge
               processing on the header level is inserted.

           -   The print flag for the edge processing on float level is the one defined in the BOM in
               the article master data.


 SN file               AWE
       Step            Edges                              Drilling
                                                          / other processing
 0                         Float article                      LAMI article
                       •   PT=none                        •   PT=none
                       •   PC='A'                         •   PC='A'
                       •   PC=S                           •   PC=S
 1                         Float article                      Float article
                       •   PT=Prod                        •   PT=Prod
                       •   PC=''                          •   PC=''
                       •   PC= P                          •   PC=P
 2                         Float article                      Float article
                       •   PT=Prod                        •   PT=Prod
                       •   PC=''                          •   PC=''
                       •   PC= P                          •   PC=P

Below, an example for processings on float - LAMI with coating/screen printing (especially for
Wernberg) is described.
The meta part screen printing has a BOM with a processing screen printing. The parameters for
this processing (print, A/Z) are retained in the BOM.
 SN file               AWE
       Step            Edges



A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                              248
 0                       LAMI article

 1                       Float article

 2                       Float article
                     •   PT=Prod
                     •   EA= as BOM
                     •   PC= as BOM

 SN file             AWE
       Step          Edges
 0                       LAMI article

  1                      Float article
                     • PT=Prod
                     • EA= as BOM
                     • PC= as BOM
 2                       Float article
                     • PT=Prod
                     • EA= as BOM
                     • PC= as BOM
The screen printing is not inherited.

The prices for are calculated for screen printing on the 1st lite or 1st and 2nd lites.



           37.4.4.       Inherited processing in the internal EDI
If the system has been configured so that distribution defines how laminated glass is going to be
produced and/or processed, you can now pass on these decisions regarding the supply types to
the producing site.
This includes the decisions as to whether laminated glass stock sizes shall be produced or taken
from stock, and where the processing steps for the laminated units to be applied to individual
elements shall be performed. The rule for the inheritance is defined in Chapter 28.4.5.
Please note that this applies only to the processing of laminated glass, not to the processing steps
the system has been passed on to the elements at distribution. These will be removed at the
production site, and will be passed on again based on the production site's master data. However,
you can prevent the supply type of the processing step on the laminated glass level from getting a
new supply type after the transfer; instead it adopts it from the distributor, then passes it on to
the elements.


Important!
There is no mixed version in which the supply types are sometimes adopted and sometimes
loaded from the production site's master data. Once the system has been configured to adopt the



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              249
supply types for laminated glass stock sizes and/or processing steps from distribution, this applies
to all orders. You can change this later of course, for the production site.
INTAUF_BEARBCOPY_BA_HALTEN = ON: If this switch is active, the processing steps marked as
'can be passed on' in master data will adopt the supply types from distribution instead of loading
it from the production site's master data as for all other elements.
INTAUF_VSGLM_BA_HALTEN=ON: If this switch is active, the processing steps marked as 'can be
passed on' in master data will adopt the supply type from distribution instead of loading it from
the production site's master data as for all other elements.


         37.4.5.            Processing with supply type "none"
Basically, OrderXML adopts all processing steps from the ALCIB BOM. The receiving production
system usually decides which processing steps are relevant and which are not.
However, the system can now be configured so that processing steps explicitly set to supply type
"none" in the ALCIB BOM will be suppressed in the OrderXML file.
Please note: Defining processing steps (like cutting, tempering or IG production) to be executed in
the ALCIB BOM below a purchased or stock item do not have to be explicitly set to supply type
"none." They will be suppressed anyway.
During input, the supply type of the processing step to be passed on the laminated glass/cast
resin level can already decide how the processing shall be passed on to individual elements. The
former logic where all processing steps for tempered glass elements showed the supply type =
PROD and all others, = NONE , has been extended as follows.
If the processing step shall be passed on to certain elements of a laminated lite and if this
processing step shows supply type = PROD for the laminated lite, the old logic will be applied. If
the processing step's supply type is = NONE, this processing step will be added to all glass
elements with fixed sizes and supply type = PROD. It is also possible to keep this supply type even
after the transfer to the production site. (see Chapter 25.4.4)
To suppress processing steps of the supply type "none" in the OrderXML file, activate the switch
ORDERXML_IGNORIERE_BEARB_BESTELLKZ0 in ALCIB and set it to 'ON'.


         37.4.6.            Inheritable LAMI processings
Master data
Under Keys -> Products -> LAMI/CR inheritance you store the rule for inheritance of LAMI
processings on glass or glass types.




Figure78: Rules for inherited processing steps

Special master data maintenance is needed for countersunk drillings because, depending on
parameters, these must be inherited as countersunk hole or normal drilling and parameters must
also be changed depending on the depth of the sinking.




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                         250
Figure: Rules with indication of glass number

Here, by entering the glass number, you can enter various articles for the inheritance that are
determined by the left/top parameter of the countersunk drilling (D+D1+angle top +depth top)
(glass = 1), the part that should eventually be taken over as drilling (glass = 2) and as countersunk
drilling, which are determined by the right/bottom parameters of the countersunk drilling
(D+D2+angle bottom and + depth bottom) (glass = 3). The inputs for glass number = 3 are not
absolutely necessary if it is the same article as the countersunk drilling for glass number = 1.
This rule does not mean that for glass=1 that the countersunk drilling is always exchanged in for
LAMI, but only if both diameters (and depth top) is specified for this side. If the input for the
sinking on the side is missing, then the rule for glass = 2 (drilling) is applied. The same also applies
for 2nd glass. If the sink depth is greater than for the previous glass, then for the 2nd depth, the
rule for the countersunk drilling is also applied.
Maintenance of the master data is only possible if the switch VBEA_KUNR is active and as value
contains the number of a pseudo customer. Only then can you maintain the master data.
Because it depends on diameter/depth which processings are inherited, the functionality from the
background process was taken over in the foreground. Intaufart -22 (BOM structure) for the
foreground entry of orders is omitted.
The inheritance starts if you insert an inheritable LAMI processing in the BOM manually or via
iTOE. If in iTOE the processing is only distributed to individual lites, the processings will come
separately for individual lites and are not linked with one another in the AW Enterprise BOM.
If the LAMI processing was inherited, then it is marked on the BOM dialog and also on the
processing dialog and the parameters cannot be changed.


         37.4.7.            Environment variables
INTAUF_BEARBCOPY_BA_HALTEN (client reference: no)
If the system has been configured so that distribution defines how laminated glass is going to be
produced and/or processed, you can now pass on these decisions for inherited processings via
site.
If the switch is active, the processing steps marked as 'can be passed on' in master data will adopt
the processing type from distribution instead of loading it from the production site's master data
as for all other elements.
INTAUF_VSGLM_BA_HALTEN (client reference: no)
If it is already decided in the trade whether LAMI SD is produced or comes from stock, this
decision can be passed on to production.
If this switch is active, the processing steps marked as 'can be passed on' in master data will adopt
the processing type from distribution instead of loading it from the production site's master data
as for all other elements.



A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                              251
ORDERXML_IGNORIERE_BEARB_BESTELLKZ0 (client reference: no)
In the standard system, the OrderXML service transfers all BOM processing to the OrderXML file.
This switch can be set if you want to ignore the processing of the BOM. Then it is sufficient in the
A+W Enterprise BOM to set the procurement type of the processing concerned to "None", and
the processing is not taken over.


VBEA_KUNR (client reference : no)
The customer number for E/A for the inherited processing is defined in the variable. Also activates
the possibility to create one.
Otherwise is always applies that: the same article as in the header is inherited.


VSG_VERERBEN_MIT_DRUCKKZ (client reference: no)
Switch for intauf. Novak. For inheritance of the processing from LAMI, DRUCK-KZ is set for the
sub-elements according to BA.
If BA=PROD, then druckkz = P (inheritance without iTOE)
AWDesk 451313 : complete description


37.5.  Definition of the iTOE rules for inheritance
  upward
This section describes which parameters a SN file must contain for the entry so that the ITOW
rules take effect. This section will describe how you must define the iTOE rules so that they take
effect.
Package processing: processing on header article or on the LAMI after combination. For example,
a drilling in LAMI, edges polished on LAMI. The individual lites of the LAMI are not drilled before
the combination of the LAMI. Only possible if the LAMI does not contain any TG. This processing is
not inherited upward or downward in AWE.
Individual processing: processing on the individual lites of the LAMI before combination. For
example, a drilling in both TGs. This processing is inherited upward in AWE for prices and print
flag.


These examples are subdivided into:
    •   Part 1 for normal processing such as edge processing, normal drilling and notches

    •   Part 2 for stepped drilling

    •   Part 3 for countersunk drilling


        37.5.1.   Part 1 - for normal processing such as edge
            processing, normal drilling and notches
LAMI with 2xFloat – package processing

A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                252
How you must define an edge processing, drilling, section if this is a package processing.
For this processing, the following level must be activated in the SN file:




Figure 79: Excerption from A+W CAD Designer (Shapes)

The processing should not be inherited downward in AWE, so LAMI/CR inheritance must be set to
'N' in the article master data.
In the iTOE rules in order to find the article for header articles, the system searches by product
type = 170 LAMI article FD and intermediate level art-type empty.
Example for edge processing polishing (A+W processing type = 1010):




Figure 80: LAMI with edge polishing

VSG with 2xTG – individual processing
How you must define an edge processing, drilling, section if this is an individual processing.
For this processing, the following level must be activated in the SN file:




Figure 81: LAMI with 2xTG – individual processing in A+W CAD Designer (Shapes)

The processing should be inherited upward in AWE.
The processing should not be inherited downward in AWE, so LAMI/CR inheritance must be set to
'N'.
In the iTOE rules:




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                               253
    -    in order to find the article for TG, the system searches by product type = 170 LAMI article
         FD and intermediate level art-type = 150 TG glass.

         Example for edge processing polishing (A+W processing type = 1010):




Figure 82: Example for TG edge processing polishing (A+W processing type = 1010):

    -    in order to find the article for the LAMI, the system searches by product type = 170 LAMI
         article FD and intermediate level art-type empty.

Example for edge processing polishing (A+W processing type = 1010):




Figure 83: Example for LAMI edge processing polishing (A+W processing type = 1010):



ISO with 2xFloat
How you must define an edge processing if in IG it must be on both lites.
For this processing, the following level must be activated in the SN file:




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                           254
Figure 84: Information from A+W CAD Designer (Shapes)

The processing should not be inherited upward in the IG inherited in AWE, (LAMI/CR inheritance =
'N').
In the iTOE rules in order to find the article for float, the system searches by product type = 200 IG
article and intermediate level art type = 100 float glass.
Example for edge processing polishing (A+W processing type = 1010):




Figure 85: Example for Float edge processing polishing (A+W processing type = 1010):

IG with 2xLAMI (each LAMI of 2xTG) – individual processing
How you must define an edge processing if in IG it must be on both TG lites.
For this processing, the following level must be activated in the SN file:




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                            255
Figure 86: Indications in A+W CAD Designer (Shapes)

The processing is inherited upward in the LAMI, but not in the IG in AWE (LAMI/CR inheritance =
'N').
In the iTOE rules in order to find the article for the TG, the system searches by product type = 200
IG article and intermediate level art type = 170 float glass.
Example for edge processing polishing (A+W processing type = 1010):




Figure 87: iTOE exchange rules

    •    It works.

    •    The polished edges are inherited upward in LAMI, but not in IG.

IG with 2xLAMI (2xFloat) - package processing
How you must define an edge processing if in IG it must be on both LAMI lites. The edge
processing is a package processing on the LAMI.
For this processing, the following level must be activated in the SN file:



A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                           256
Figure 88: Indications in A+W CAD Designer (Shapes)



The processing is not inherited upward in the IG, but inherited in AWE (LAMI/CR inheritance =
'N').
In the iTOE rules in order to find the article for the LAMI, the system searches by product type =
200 IG article and intermediate level art type = 170 float glass.
Example for edge processing polishing (A+W processing type = 1010):




Figure 89: iTOE exchange rules



    •    It works.

    •    The polished edges are inherited upward in the IG.


         37.5.2.            Part 2 - for stepped drilling
Stepped drilling in LAMI with 2xTG – individual processing




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                           257
This example explains how a stepped drilling must be entered if it must be inherited from the
LAMI to both TG lites or sub-lites. In this case, the stepped drilling functions like single processings
on the existing TG or sub-lites in the BOM.
If you enter a stepped processing in the A+W CAD Designer, then via the menu element
Processing -> BOM the processing level for the level 1 and 2 (not level=0) must be activated:




Figure 90: Indications in A+W CAD Designer (Shapes)

In the example, the stepped drilling is entered as follows: 1st lite: d1=20 mm, 2nd lite: d2=30 mm.
In production, both lites are drilled before the LAMI combination (before the TG furnace). The
iTOE synchronization brings this stepped drilling as inherited processing to the individual lites. The
master data flag (LAMI/CR inheritance = 'N') does not absolutely have to be set for this case.
The iTOE rules must be stored so that the product type = 170 LAMI article FD and intermediate art
type are empty:




Figure 91: iTOE exchange rules

In order to find the drilling on the 1st + 2nd lite (d=20 mm + d=30 mm), the rule for the product
type = 170 LAMI article FD and intermediate art type = 150 TG glass is required.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                              258
Figure 92: iTOE exchange rules

Note: this rule will not take effect here because it is stored for a diameter > 30 mm:




Figure 93: iTOE exchange rules



The stepped drilling will be added in the BOM on the 1st level:




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                        259
Figure 94: Processing entered in BOM

After the synchronization with iTOW, the drillings must be inherited by the sub-lites. On the 1st
lite:




Figure 95: Processing after synchronization with A+W CAD Designer (Shapes)



    -    On the 2nd lite




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                          260
Figure 96: Processing in 2nd lite

Production sketch:




Figure 97: SNLive sketch

In the production sketch (AWE order entry-> BOM), the processing parameters are taken over
depicted on the sketch. However, the side view cannot reflect the difference between two
diameters.
Stepped drilling in LAMI with 2xFloat – package processing
How you must define a stepped drilling if it has to be on the LAMI. The stepped drilling is a
package processing on the LAMI.
For this processing, the following level must be activated in the SN file:




Figure 98: Indications in A+W CAD Designer (Shapes)

On level 1 (1st lite): d1=20 mm, on level 2 (2nd lite): d2=30 mm



A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                          261
The stepped drilling is a package processing.
The stepped drilling is not inherited in AWE (LAMI/CR inheritance = 'N').
In the iTOE rules:
    -    in order to find the article for the LAMI for , the system searches by product type = 170
         LAMI article FD and intermediate level art-type empty.




Figure 99: iTOE exchange rules

Drillings in the BOM:
    -    Header article




Figure 100: Drillings in the BOM

Stepped drilling only on header level.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                               262
Figure 101: BOM view

Production sketch:




Figure 102: SNLive sketch


         37.5.3.            Part 3 - for countersunk drilling
Countersunk drilling in LAMI with 2xTG – individual processing
How you must define a countersunk drilling if in LAMI it must be on both TG lites. The stepped
drilling is an individual processing on the TG.
For this processing, the following level must be activated in the SN file:




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                               263
Figure 103: Indications in A+W CAD Designer (Shapes)

On level 1 (1st lite), a countersunk drilling d1=30 mm, d=20. The depth (30-20)/2 = 5 mm
On level 2 (2nd lite), there is a drilling: d=20 mm
Both lites must be drilled before the LAMI combination.
The stepped drilling is inherited in AWE (LAMI/CR inheritance = 'N').
In the iTOE rules:
    -    in order to find the article for header articles, the system searches by product type = 170
         LAMI article FD and intermediate level art-type empty.




Figure 104: iTOE exchange rules

    -    in order to find the article for countersunk drilling on the 1st lite, the system searches by
         product type = 170 LAMI article FD and intermediate level art-type = 150 TG glass.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                             264
Figure 105: iTOE exchange rules

    -    in order to find the article for normal drilling on the 2nd lite (d=20 mm), the system
         searches by product type = 170 LAMI article FD and intermediate level art-type = 150 TG
         glass.




Figure 106: iTOE exchange rules - Details

Drillings in the BOM:
    -    Header article




A+W Software GmbH                           EN-CONFIG-A+W Enterprise.docx                     265
Figure 107: Item processing steps

     -    On the 1st lite




Figure 108: Processing steps on 1st lite



     -    On the 2nd lite




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx   266
Figure 109: Processing steps on the 2nd glass

Production sketch:




Figure 110: SNLive view

Countersunk drilling in LAMI with 2xFloat – package processing
How you must define a countersunk drilling if it must be on the LAMI. The countersunk drilling is a
package processing on the LAMI.
For this processing, the following level must be activated in the SN file:




Figure 111: Indications in A+W CAD Designer (Shapes)



A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                        267
The countersunk drilling is a package processing.
The stepped drilling is not inherited in AWE (LAMI/CR inheritance = 'N').
In the iTOE rules:
    -    in order to find the article for header articles, the system searches by product type = 170
         LAMI article FD and intermediate level art-type empty.




Figure 112: iTOE exchange rules

Drillings in the BOM:
    -    Header article




Figure 113: Processing steps in BOM




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                              268
Production sketch:




Figure 114: SNLine sketch




A+W Software GmbH           EN-CONFIG-A+W Enterprise.docx   269
38. Limit check
       38.1.1.          Log
$PROTOPFAD/Kuplus<mmdd>
Starting with QR 2403
There is a new table kuplushistorie, in which the transactions in the table kuplus (open
orders/open items) are written.

The table logs the type of booking (receipt, removal)

   •   1 = Receipt in OA (order entry, correction)
   •   2 = Removal in OA (order correction, invoice booked)
   •   4 = Removal OP (credit)
   •   6 = Receipt OP (invoice booked)
   •   5 = Transfer to FinAc - OPs are zeroed out.
   •   12 = Removal OA (correction with finalization/complete invoice)

Thus in case of unclear data, you can trace which bookings were made.
If an invoice is booked, then the bookings are made

   •   With the invoice number for OP (art = 6) amount X
   •   With the order number for OA (art =2) amount -X
   •   However, directly thereafter, a correction can be made (ARt = 12) if it was a final
       invoice

Sample bookings for an order:
art       oa         oa_brutto
   1     185.36       240.97 - order received
   2     -74.14      -96.38 1st partial invoice
   2     -55.61      -72.29 2nd partial invoice
   2    -185.36       -240.97 3rd partial invoice (final, no additional invoices follow)
  12      129.75       168.67 - correction via kuplusproto.

There are the following bookings for the 3 invoices:
  art         op     op_brutto
   6        74.14        96.38 1st partial invoice
   6        55.61        72.29 2nd partial invoice
   6        18.54        24.10 3rd partial invoice (no additional ones follow)
Furthermore it is also noted from which action the booking was executed
(automatic/manual individual invoice, collective invoice, book invoice, credit, etc.).
For collective invoices there is a single OP booking for all part of the invoice. The removal
of the OAs is done per order (or delivery note).




A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                            270
Furthermore, we point out that with the automatic order retotaling, which is done due to
particular discounts because a discount was deactivated, the amounts in the open orders
are not changed.

This log table is only written if the environment variable KUPLUS_HISTORIE = ON (global).



38.2.           Market partner master data
The system can be configured so that the limits from the financial accounting together with the
balances are transferred to A+W Enterprise. For this, the environment variables
AKV_LIM_TO_ALCIB and KRED_LIM_TO_ALCIB must be set appropriately. If the variables are
active, you cannot enter the corresponding field in the market partner master data.
QR 22/11: Separate expiration date for AKV and company limit
In the market partner master data, it is now possible to store an individual expiration date for the
company limit. This is checked accordingly in document entry.
Update of the totals by the AWE FinAc Service
If the FinAc transfer from documents is configured via the FinAc service, there is an updating of
the totals via the FinAc Service.
After the transfer of transaction data (invoices/credits), there is a check whether the open items
must be updated. In the table kuplus or limits, depending on the env variables
KUPLUS_ACTIVE_FIELDS, the values in "fibu_op" and "op" and "op_brutto" are updated.
For a detailed description of the logic, see the configuration document of the FinAc Service.




38.3.           Check including liability
AWD #6835 /Version 2.9
With set environment variable WECHSELOBLIGO="ON" it is now possible that liability of the
customer in the limit check is also evaluated, insofar as this data is available from the FINAC.
During the check, not just OA and UA
are added together, but also liability




38.4.           Individual check (stored procedure)
There are situations in which the limit check provided by A+W does not meet our customers'
requirements.
By setting the environment variable "LIMITS_SP", it is possible to implement an individual limit
check for customers.
The name of the executing SP, which returns the open items to be checked for the customer
(default debtor), is stored in the environment variables.
Transfer parameter for SP: default debtor.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  271
Return values: (sequence important!) oa, op, wo, op_brutto, oa_brutto, fibu_op




38.5.           Environment variables
AKV_LIM_TO_ALCIB (client reference: no)
If this variable is enabled, the AKV limit is transferred in the course of the balance transfer from
the FinAc to A+W Enterprise. You cannot enter the corresponding field in the market partner
master data.


KRED_LIM_TO_ALCIB (client reference: no)
If this variable is enabled, the company limit is transferred in the course of the balance transfer
from the FinAc to A+W Enterprise. You cannot enter the corresponding field in the market partner
master data.


KUPLUS_HISTORIE (client reference: no)
If this environment variable is active, the table kuplushistorie is also booked.
Available starting with QR 2403.


LIMITS_SP (client reference: no)
The name of the SP that returns the limit for customers is stored in the variable. Transfer
parameter for SP: default debtor.
Return values: (sequence important!)
  oa, op, wo, op_brutto, oa_brutto, fibu_op


LIMITFREI_POOL_MANR (client reference: no)
Responsible employee who is notified if there is a limit violation during order correction. Together
with the switch LIMITFEI_AUS_POOL




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 272
39. Order Release
Within order entry, the user is asked at the end of the entry whether he wants to release the
order for further processing. If you answer this question with "yes," the order is transferred to
production, dispatch, the warehouse, and purchasing.
Depending on the employee rights, e.g. for exceeding or limit or restriction violations (special
documentation EN-CONFIG-A+W Enterprise EDV Modulkuerzel.pdf), this question is not asked
and the order is placed in the release pool and can then be released by authorized employees.
See also "EN-CONFIG-A+W Enterprise System“ section "Background process 'Intauf' – 'Margin
check including production costs'"
See also "EN-CONFIG-A+W Enterprise Internal Client Separation"


39.1.           Control of activation via stored procedure
(AWDesk #409726)
In addition to the existing locking reasons when releasing the orders for further processing, there
is a new option for locking the orders using an individual SP. These are then placed in the release
pool. The SP receives the order number, document type and the corresponding site number as
transfer parameters. Two parameters are expected as a result of the test: Error code and error
message (max. 80 characters). An error code > 0 means a lock. Error code = SUCCESS (0) means
that release is permitted. The name of the customer-specific SP should be entered in the ENV
switch RELEASE_SP_INDIVIDUAL.

The check takes place when the order is processed by the background process intauf:

    -   after the entry
    -   after acceptance by EDI
    -   after the order correction (if the order has not yet been transferred to AWP)
    -   after activation from the pool
    -   after when transferring to AWP using transaction change




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   273
40. Release Pool
Orders with receipt identifier ONLINE (A+W Enterprise iQuote) cannot simply be released from
the release pool. You have to use Shift F5 to go into the order and save it with release.


[AW-141687] alcib - 13.04.14857 ( April/2023)
Release of A+W iQuote orders
All online orders (A+W Enterprise iQuote) are not released directly; instead, they are put in the
release pool. You can only forward these orders by entering and releasing directly from the order
to production.
With the large quantity of online orders, a simplified solution can be enabled. If the environment
variable "ONLINEFREI_AUS_POOL" is active, then orders without notes can be released directly
from the release pool. Since the entry in A+W Enterprise iQuote offers a reduced functional
scope, important information about orders can be entered as notes. If an A+W Enterprise iQuote
order has a note, then it still cannot be released directly from the release pool. You have to enter
these orders via Shift+F5 from the release pool and acknowledge the information sent along with
them. If no changes must be made to the order, then you should reduce the priority of the note
(low or medium)


[AW-145848] alcib - 13.04.15872 (September/2023)
Release and site assignment of A+W iQuote orders in the call center
If A+W iQuote orders are entered in the call center and do not run immediately through the
automatic site assignment via the configuration IQUOTE_CALLCENTER_STAY, they all land in the
call center's release pool. For online orders from the call center, separate possibilities for release
apply:
    1. You can change directly to the order with <ShF5>/"Order", check the order there and
       release it when saving. During the check, a new site assignment can also be made
       manually. If the order is saved without site change, then you should agree to an
       automatic site assignment.
    2. You can release orders without notes directly from the pool. This way, the order is run
       through the automatic site assignment and released in the new site.
    3. For orders without notes, you can enter a new site number directly in the pool and then
       release them. This way, the order is assigned to this site. The automatic determination of
       the site is thus avoided.
It can be that the order in the new site lands in the pool for other reasons.
Orders with notes
The online orders in the call center that include important information ("|" in the Info field) get
special treatment. For these orders, you can neither change the site assignment (3.) nor mark the
order for release (2.) until the notes have been read. After the call of the notes with <F5>/"Info",
they apply as "read". This action allows release as described in 2. and 3. The information that the
important notes were read by the user is temporary and applies only for the current session. If




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 274
the order is not released, then the notes must be marked as "read" again after the new start or
update of the data.
A site change via the "document change" for these orders is not possible.


[AW-156214] alcib - 13.04.14857 ( April/2023)
EDI orders remain in the release pool of the call center
Due to the new configuration DFUE_CALLCENTER_STAY and within the configuration of the
document transfer (System - Data Transfer - Document Transfer - Configuration) (id = 65)
for customers, it can be specified that all orders that are scheduled via external or internal
EDI in the CALLCENTER site, the automatic site assignment is ignored (id = 65). The
orders are placed in the call center's release pool.
From the pool, you can then release these orders as follows

    •   by entering the order and manual site assignment.
    •   through client assignment directly in the pool and release
    •   through release without manual client assignment so that the assignment is made
        automatically.

If an EDI order has important notes, then these must be marked as read. The document can
only then be released directly from the pool.




40.1.           Configuration
You can use environment variables to restrict the possibilities for release from the release pool:
[AW-156214] October/2023
DFUEFREI_AUS_POOL (client reference: no)
Activates the possibility of releasing EDI orders (internal and external) directly from the release
pool in the CALLCENTER. Exception: EDI order with notes. These must still be released directly
from the order.


[AW-156214] (September/20233)
DFUE_CALLCENTER_STAY (client reference: no)
EDI orders (external and internal) in the release pool of the call center can get a site assignment
directly in the pool and be released. With this assignment, the assignment via SP no longer
applies.
Whether the EDI orders remain in the call center release pool is decided via mpdfuectrl ID 65.


DFUEFREI_AUS_POOL (client reference: no)




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                275
Activates the possibility of releasing EDI orders (internal and external) directly from the release
pool in the CALLCENTER. Exception: EDI orders with notes - these must still be released directly
from the order.


[AW-145848] (September/2023)
IQUOTE_CALLCENTER_STAY (client reference: no)
If this environment variable is active, online orders (entered in A+W iQuote) that are entered in
the CALLCENTER remain in the call center. There is no automatic site assignment.


[AW-106108] July/2022
FREIPOOL_MIT_KALK = ON / RABATTMETHODEN_UPDATE_EK = X1|X2 - methods for update.
When orders with longer lead times are entered, it can happen that the material costs at the time
of production start have already changed and so the contribution margin calculated no longer
corresponds to current costs. Since these orders are usually put in the pool first and only released
from there later, you can now link the release generally to a new material cost calculation. If the
logic is active, then the pre-defined cost discounts are updated. The discount methods that must
be updated are stored in an ENV switch separated by |. Only existing discounts with this method
will be updated. If the discount was entered later in the master data, it is not re-drawn.
ONLINEFREI_AUS_POOL (client reference: no)
Orders that were entered with A+W Enterprise iQuote and do not contain any document notes
can be released directly from the release pool.
TEKAPFREI_NUR_PROD (Client reference: no)
Within the release pool, the possibilities NIE and VS are no longer offered. It is only possible to
release for production (YES) or not to release (NO). If there is no release, the order remains visible
in the release pool.
TEKAPFREI_OHNE_NIE (Client reference: no)
Within the release pool, the possibilities NIE and VS are no longer offered. It is only possible to
release for production (YES), on the dispatch (VS) or not to release (NO). If there is no release, the
order remains visible in the release pool.




40.2.            Release note
The release note/reasons that are displayed on the "Sales - Order release - Release" dialog are
available as text in the table kspectxt.txt where ttyp=7000. The lock vector is in freitek.sperrvektor
and in kspextxt.txt where ttyp=7001.

There are several processes that decide whether or not an order is released. That's why the
release text comes from different sources.

The texts are:

    -   entered manually in the order entry


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                276
        => kspectxt.txt for kspectxt.ttyp = 7000;

    -   come from fx_texte Nummer 5073, 33409, 27802, 37111 … This also affects all lock
        reasons that received their text from the locking vector.
    -   For CALLCENTER with CALLCENTER_SP_ART=1 from the stored procedure
        getProductionSite()
    -   read from "Master Data - Keys - System - Text Supplements" (table xzustxt) (see section
        "Text supplements" of this document)

The list of lock reasons is only displayed if there is more than one reason for locking in addition to
limit lock.


40.3.  How does an order get into the release pool
  and what can be seen there (not complete)
 Type                           Lock      Freitek.sperrmo     "Note" column in     List
                                vecto     dus                 the release pool
                                r                             *
 Manually                       Item      0                   Kspectxt.txt         Fx_texte:
                                20
                                                                                   36177 : "Release
                                                                                   not desired by
                                                                                   operator"
 Missing shape parameter        Item      10                  Customer EDI         Fx_texte: 36180
 for order via internal or      2                             (fx_texte: 5073)     : "FREITEK
 external EDI (environment                                                         setting"
                                                              27802 : "No
 variable
                                                              shape                36163 : "Missing
 INTAUF_CHECK_DFUE_RES
                                                              dimensions"          shape
 TRIKT)
                                                                                   parameter"


 Order has to be checked –      Item      22                  26360: Check         36166 : "Order
                                5                                                  has to be
 A checking employee was                                      + Name of the
                                                                                   checked"
 entered during order entry                                   employee who
                                                              should check
 Order type was set             Item      0                   35285 : "Return      36168 : "Order
 manually to "Return order"     6                             order"               type = return"
 (kaufart=21)
 SN file generation incorrect   Item      30                  Additional text      37014 : "CAD
 for order via external EDI     16                            104                  error"
 Only with use of templates                                   Or fixed text
 in the external order                                        "ALSNControlServi
 interface                                                    ce incorrect” or
                                                              "SNAuto incorrect”




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 277
Type                           Lock    Freitek.sperrmo   "Note" column in   List
                               vecto   dus               the release pool
                               r                         *
Transferring supplier does     Item    20                Additional text    36178 :
not exist in the local         17                        108                "Incorrect
market partner master                                                       supplier"
                                                         or
data (internal EDI)
                                                         32659 : "EDI:
(environment variable
                                                         incorrect
INTAUF_CHECK_LIEFERANT
                                                         supplier"
)

If an article is locally       Item    21                Additional text    36179 : "Not
available                      18                        113 or             available/suspen
                                                                            ded article"
Environment variable                                     34147 : "Article
INTAUF_CHECK_STILL                                       not
                                                         available/suspen
                                                         ded"
Orders via internal external   Item    4                 Customer EDI       Fx_texte: 36180
EDI if environment variable    19                        (fx_texte: 5073)   : "FREITEK
INTAUF_FREITEK is set                                                       setting"
appropriately

Customer-specific solution:    Item    45                Comes from the     36182 : "External
                               24                        SP                 EDI (individual)"
Release of external orders
via SP decides when the
scheduling in the
CALLCENTER is done.
Environment variable
CALLCENTER_SP_ART
Environment variable           Item    41                Comes from the     36183 : "Local
RELEASE_SP_INDIVIDUAL          25                        SP                 SP"
Restriction check for order    Item    4                 Customer EDI       Fx_texte:
via internal or external EDI   27                        (fx_texte: 5073)
                                                                            36180 : "FREITEK
(Environment variable                                    Additional text    setting"
INTAUF_CHECK_DFUE_RES                                    100
                                                                            and
TRIKT)
                                                         32661 : "EDI:
                                                                            36184: Product
                                                         incorrect
                                                                            restrictions
                                                         restrictions"
Missing processing             Item    4                 Customer EDI       Fx_texte:
parameter for order via        28                        (fx_texte: 5073)
                                                                            36180 : "FREITEK
internal or external EDI
                                                         Additional text    setting"
                                                         116
                                                                            and




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                              278
 Type                           Lock    Freitek.sperrmo   "Note" column in     List
                                vecto   dus               the release pool
                                r                         *
                                                          36126 : "EDI:        36184: Product
                                                          missing              restrictions
                                                          proc.parameter"
 Order is waiting for PMO       Item    35                Additional text      36187 : "PMO
 response                       30                        109 or               error"
                                                          „PMO Error“
 Is the customer of an order    Item    34                37888 :              37888 :
 that is scheduled via          31                        "Suspended           "Suspended
 external EDI suspended?                                  customer"            customer"
 Environment variable
 INTAUF_CHECK_DFUE_KUN
 R
 A+W iQuote orders              Item    40                36160 : "Order       36160 : "Order
                                21                        received online"     received online"
 see also environment
 variable
 IQUOTE_CALLCENTER_STA
 Y
 For one/all customers, the     <non    0                 38308 : "EDI
 "automatic client              e>                        order received in
 assignment in the                                        the call center"
 CALLCENTER" is
 deactivated for the
 external or internal EDI via
 "System - Data Transfer -
 Document Transfer -
 Configuration" ID 65.
Remarks:
What is in the column is different for different reasons and depends on the combination of the
different reasons. The list only has to be opened if there is more than one lock reason.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              279
41. Document Change
41.1.           Updating the discounts
QR11/2022
Since the surcharges must often be adjusted due to increasing energy costs, it is also possible to
update these in the existing documents. You could use self-defined scripts or help from A+W
Services to put the documents before the background process intauf with still=-26. This intaufart
then has updated the methods defined by the environment variable RABATTMETHODEN_UPDATE
and recalculated the order. This type of updating can also be used if for the individual discounts in
the discount master data on day X the values (e.g. CU/kg) were changed. Another intauf-Art (still =
-28) could insert a new discount method into the existing orders and recalculate the order. With
this type, however, only the discounts/surcharges in the document could be refreshed if no
discounts of the method existed. In both cases, the discounts were only updated partially and no
consideration was given to the expiration date.
You can now initiate this update via "Document change" on the "Sales - Sales change" menu. For
this, there is a new field on the 3rd tab "Calculation." On the dialog, you can:
a) transfer orders for a new calculation of the prices (SA, PU, all) to the background process intauf
(analogous to ShF12 directly in the document)
b) transfer orders for an update of the discounts to the background process intauf
        Here it is possible to distinguish
        1. Update existing discounts (intauf -26)
        2. Insert the new discount methods (intauf -28)
        3. Redraw all discounts and retotal the order.
This functionality is only available for non-invoiced orders, quotations or delivery notes.




41.2.            New cost calculation of orders
If the environment variable "NEUKALK_VKEK" is active, a new calculation of the order can be
started for an existing order on the header level in all fields beginning with "Erf.Datum" up to
"Knd-Pos" with Ctrl-F9. Here, a selection is offered whether you would like a to make complete
recalculation, recalculate sales prices or purchase prices. The "type calculation" function is still
available on the fields after the "Knd.Pos".
The environment variable "NEUKALK_VKEK" has effects on the function for recalculation of the
item prices via "Ctrl+F9" and "Shift+F10". Here too, a dialog is offered for selection whether you
would like a to display a complete recalculation, sales prices or purchase prices.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 280
42. Weight Calculation
Within A+W Enterprise, the item weight is calculated using various criteria from the BOM
elements.


42.1.           Article master data
# 111308 (Feb. 2006)
On the Phys. Properties tab, there is now also a Product Weight tab. With this field, you can
control whether the weight of the BOM or that of the item article should be evaluated.
N - weight calculation using the BOM article.
Y - weight calculation using the item article.


42.2.           Document entry
During the entry, the identifier "Product weight" is evaluated from the article master data and the
calculation made accordingly. If a product with this identifier is used within the BOM of another
article, the identifier is not evaluated.
If the following glass has BOMs with glass, the BOM is always resolved.
 Article type Name

 20 0           IG articles

 130            Special glass cut sizes

 140            Cast resin cut sizes

 183            Laminated glass articles stocksizes

 17 0           Laminated glass articles cut sizes

 16 0           Fire protection glass cut sizes

 187            Fire protection glass stocksizes



If the environment variable GEWICHT_FLOAT_ESG is active, then for 100 Float FD and 150 TG FD
the BOM is also resolved.


42.3.           Shapes
[AW-101928] 03/22/2022


A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                            281
Within the A+W Enterprise, there are no functions available that can calculate the correct
physical quantity and the resulting weight for each shape. This depends among other things
on the fact that particular additional dimensions are not available.
For manual order entry, a query with "A+W CAD Designer (Shapes)" would be possible,
however it would not apply for POs and DFÜ orders.

For special shapes, instead of the circumscribing rectangle, an approach of the real area is
calculated (e.g. triangle). For complex shapes, there can be degenerations so that this area
is smaller than the actual area. The calculation is converted to the circumscribing rectangle
if the dimensions of the circumscribing rectangle are larger than the main dimensions from
the shape parameters. However, the logic applies only for special, complex shapes.



42.4.           Environment variables
GEWICHT_FLOAT_ESG (Sales)
The variable activates the weight calculation from the lower BOM levels also for Float FD and TG
within IG (LG, special glasses, cast resin are standard)
NOSGEWICHT (sales)
Weights only for header articles. The BOM is not considered.
NO_NULL_POSGEW (Sales)
Helps to calculate the weight of the complex products from BOM. If weight is not defined in the
master for the article, the weight is taken from the BOM (if there is any) even if the piece was not
changed in the document.
GEWICHT_NEU
Client reference: no. Activates the more accurate weight calculation.
GEWICHT_NEU_BEI_BEZUG
Client reference: no
The variable activates a new weight calculation during referencing. Applies only to orders and
quotations.
GEWICHT_RUNDUNG
Client reference: no
The accuracy of the rounding is stored in the variable for weights (does not apply to glass
weights).




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                282
43. Display of the muntin sketch
Whether a muntin is continuous or not depends in A+W Enterprise on various rules:
    -   A thicker muntin is always continuous
    -   With a T-muntin, continuous are set to horizontal if a part of the vertical muntin is
        missing.


Deviating from this, the continuous muntin can be permanently configured
DURCHGSPROSSE (client reference: no)
  0 - Global continuous horizontal muntin
   1 - Global continuous vertical muntin
  default : 1


In A+W Enterprise, the muntin sketch is displayed with the help of the "A+W CAD Designer (Bars)"
module.
A+W Enterprise transfer into the interface whether the horizontal or vertical muntin is
continuous.
BUT:
For a muntin sketch, only all vertical or all horizontal muntins can be displayed as continuous
muntins. A mixture of both will be supported by neither OrderXML (without .AWD file, or entered
through ITOE) nor the A+W CAD Designer (Bars) interface. A direct use of the "A+W CAD Designer
(Bars)" enables the entry of such a construct.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               283
44. Text
44.1.           Environment variables
BEARBTXT_AWTYP_ZUSAMMEN (client reference: no)
For some of the standardized processings with AWTYP, the entry is only permitted with
number=1. If the parameter list is not decisive for the expression, it creates much-too-long texting
without visible reason.
 This environment variable activates the logic that the absolute(!) identical texts are merged for
the same processing and the number of processings are incremented.


EP_ZUSATZTEXT (client reference: no)
Activates the texting of the structure lites by entering the AP from the BOM.


ESG_BEARBTXT_NEU (client reference: no)
The variable activates LAMI texting with marking of the printable lites.


FREMDPOSZU_NEU (client reference: no)
This environment variable activates the new entry of foreign language descriptions. Relevant only
if more than one language is configured in the system.


GEN_ARTBEZ (client reference: order)
The variable controls the coding of the article text
A1 – main description - artbez1
A2 – internal description 1 - artbez2
A3 - internal description 2 - artbez3
K – short description – kurzbez
L1 – long description 1 - langbez1
L2 - long description 2 - langbez2
L3 - long description 3 - langebz3
G1 - Glass1
G2 - Glass2
The length is in the first brackets, the separator in the second.
Separator (NL) for new line
G1..G2...-combination serves as anchor and should always occur at the last position.




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                            284
GUTS_MIT_KONFIGTXT (client reference: no)
After entry, the credit notes run through intauf with still=-50 for the generation of the
config.texte


ISO_BEARBTXT_NEU (client reference: no)
The environment variable activates the texting for IG with marker by letter for glasses and
assignment for processing texts to.


NEUBEST_NEUE_TEXTE (client reference: no)
The article descriptions are redrawn for the purchase order generated from the order.


NEUKAUF_NEUE_TEXTE (client reference: no)
The variable activates new text generation for internal EDI.


RECH_MIT_KONFIGTXT (client reference: no)
After entry, the invoices run through intauf with still=-50 for the generation of the config.texte


STRUKT_DRUCK_METH (client reference: no)
The variable controls the ISO article text generation for additional texts:
0: 1+4 : installation position texting for AP 1 or 4.
1: 2+3 : as above, for AP 2 or 3.
2: 1-4 : as above, for all APs.
3: 1+4+S: structure texting for AP 1 or 4
4: 2+3+S: as above, for AP 2 or 3
5: 1-4+S: as above, for all APs.
5: 1-4+S: as above for all assembly positions.


SCHEIBENKENNZEICHEN_ZAHLEN (client reference: no)
The "newest" text generation, where the lites are not marked with a)- x) but with the number
sequence 1. 1.1, 1.2, 3.1.1 and so the processing texts and articles can also be sorted.
Prerequisite : ISO_BEARBTXT_NEU, VSG_BEARBTXT_NEU, VSG_BEARBTXT VSG_DREH_TEST should
be active!
If GEN_ARTBEZ is not active, the addition "1." MUST be generated to the header article directly
when printing (REP).


SPROSSEN_LANGBEZ (client reference: no)



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                  285
Activates the generation of the long description in the muntin texts. (possibly abbreviated to the
permissible length)


SPRTXT_ALS_ARTTXT (client reference: no)
If the variable is active, the muntin description in the BOM text is generated and only re-
determined for BOM header change. The information about the number of horizontal, vertical
muntins and the color will not be texted here.


SPROSSEN_ZUSATZTEXT (client reference: no)
The drilling points are also generated in the processing text for muntins.


TEXTE_NEUE_VERSION (client reference: no)
Improved text generation (especially for META processings)
Info in case 448841.
Automatically activates: ISO_BEARBTXT_NEU, VSG_BEARBTXT_NEU, ESG_BEARBTXT_NEU,
TEXTSORT_IGNORE, SCHEIBENKENNZEICHEN_ZAHLEN, VSG_DREH_TEST


TEXTSORT_IGNORE (client reference: no)
This variable suspends the special sorting of texts: In standard sorting, the spacers and sealants
are only generated after the glasses. If this variable is active, the article texts are generated as
they appear in the BOM.


VSG_BEARBTXT (client reference: no)
The variable activates the texting of processings for complicated LAMI structures. All processings
are displayed textually with the corresponding glasses. If the variable is set, it applies to all LAMI
articles (if printable processing is available).


VSG_BEARBTXT_NEU (client reference: no)
The variable activates LAMI texting with marking of the printable lites.


VSG_DREH_TEST (client reference: no)
LAMI texting: for the texting of LAMI (also in IGU) the IP of the LAMI must be heeded and glass
numbering of the LAMI subelements converted appropriately


VSG_DRUCK_METH (client reference: no)
Complete texting (input of the lite position and view for structure and coating) for LAMI and cast
resin items.
O = for no APs.



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 286
1 = for items with AP 2, 3, (4,5,...) all except for outer AP
2 = all AP except for AP1
3 = all AP
4 = like 1 only for structure/coating
5 = like 2 only for structure/coating
6 = like 3 only for structure/coating




44.2.            Article texts
In A+W Enterprise, there is an automatic text generation for article texts. This texting refers to the
text of the item article. Additional articles such as accessories, processings, and muntins are not
texted with the article texts, but rather as "processing texts"
The structure of the article text can be configured deviating from the default texting with the
environment variables "GEN_ARTBEZ". This configuration refers only to article texts and not to
the "item texts."


44.3.            Muntins
Muntins are generated as "item texts" (processing texts) instead of "article texts". This can be
changed by setting an environment variable SPRTXT_ALS_ARTTXT.
For muntins there is a separate permanently defined text generation from A+W, which cannot be
changed via environment variables. For muntins, the symmetry and number of bars vertically or
horizontally as well as the color can be generated in the text. Currently, there is not enough space
to include the article long designation in the text generation. This must be solved in expressions.
[AW-122834]
The text additions No. 9-12 and 26 and 27 are used for texting the muntin construction.
September 2023 // [AW-124704]
Via an environment variable, it is possible to integrate a part of the Langbezeichnung1 into the
texting of the muntins. Here, the existing building blocks of the muntin texting remain untouched.
The muntin text is constructed according to the following scheme:
Main article name (artbez1) (max 30 characters) [Langebzeichnung 1 (max.permissible length)]
[Farbe (max. 25 characters)] . The symmetry and number per orientation are texted in a new line
<Symmetry> <Number per direction>.
The permissible length is calculated from the maximum length of the text line (80) less the actual
length of the article main name and the color designation, if this is present.
If the long name 1 is not present in the customer's language, it will also not be texted.
This configuration cannot be used together with the function "Muntin text as article text".


Examples:
No variable active: The muntin will be texted as "Item text"


A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                              287
-<Main name> <Color> <Symmetry supplementary text[11|12]> <Number per direction with
supplementary text [9 | 10 ]>
-SK-Muntin 45mm 9010 white symmetrical 1 horizontal 2 vertiical


Variable SPROSSEN_ZUSATZTEXT aktiv: The drilling points will be texted if not a symmetric
structure
-<Main name> <Color> <Symmetry supplementary text[11|12]> <Number per direction with
supplementary text [9 | 10 ]>
 <Orientation with supplementary text [9 | 10> <Reference edge with supplementary text
[26|27]> <Drilling points>
-SK-Muntin 45mm 9010 white symmetrical 1 horizontal 2 vertical
 horizontal from lower glass edge , 500,0/
 vertical from left side Glass edge , 396,2/, 803,8/


Variable SPRTXT_ALS_ARTTXT ist aktiv: Muntin name as article text
If SPROSSEN_ZUSATZTEXT is also active, the drilling points will be texted via the color.
< Main name> - as article text
SK muntin 45mm 9010
< Color> - as item text
white


Variable SPROSSEN_LANGBEZ active: The muntin will be texted as "item text" with long name.
If SPROSSEN_ZUSATZTEXT is also active, the drilling points will be texted under the symmetry.
-<Main name> <Langbezeichnung 1> <Color>
<Symmetry supplementary text [11|12]> <Number per direction with supplementary text [9 | 10
]>
-SK muntin 45mm 9010 Long name white
symmetrical 1 horizongal 2 vertical




        44.3.1.           Configuration
For the configuration, attention must be paid that the environment variables are set globally and
not per employee. If a variable is set employee-specifically, this is only in effect for the preview in
the document. It can be used for test purposes. The background process "intauf" generally
generates the "item texts" anew and evaluates only the globally defined environment variables.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                 288
Text supplements
9-12 for orientation and symmetry
26 / 27 for drilling points


SPROSSEN_ZUSATZTEXT (client reference: no)
In the item text for muntins, the drilling points are also texted if it is not a symmetrical design.


SPRTXT_ALS_ARTTXT (client reference: no)
The muntin name will be generated in the article text (BOM text) and only re-drawn for BOM
header change.
The information about the number of horizontal, vertical muntins and about the color will not be
texted here.
Cannot be used with "SPROSSEN_LANGBEZ".


SPROSSEN_LANGBEZ (client reference: no)
Activates the generation of the long name 1 in the muntin texts. (possibly abbreviated to the
permissible length)
Cannot be used with "SPRTXT_ALS_ARTTXT".


44.4.  Article names and additional texts for
  processings in foreign languages
# 173002
The option of entering article names and supplementary text for processings in a foreign language
has been extended considerably with this version. Display of the input dialog no longer depends
on the print code in the BOM and on a change of text; instead, the dialog is accessible anytime
with the key combination <Shift+F5> from the corresponding field in order to enter alternative
text. This change also applies to muntin entry. This serves to enter alternative text in a foreign
language. This dialog also offers a new field for the language. If the entry refers to a foreign
customer, this field will be preset in the customer's language. You can, of course, enter text in
other languages, e.g. in the supplier's language.
The data of the underlying database table will be transferred in case of internal EDI. When the
data has been saved, it will not only be used for creating text but will also be adopted for the
BOM and processing data if the recipient's language does not match the sender's language. Please
note that text creation is based on the site's language, not only on the customer's/supplier's
language. If the customer's/supplier's language differs too, text creation will be based on the
transferred data in the customer's/supplier's language.
For fixed products, foreign-language data will also be fixed; if these products are used as main
articles or BOM elements, the data will be applied.
To enable this logic, please set the environment variable FREMDPOSZU_NEU. In order to convert
the old data, you need the scripts (on hand at A+W).


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     289
To change the text at the recipient's, the variables NEUBEST_NEUE_TEXTE and
NEUKAUF_NEUE_TEXTE should be active.


44.5.            Display SL + processings
#448841
Now there is another text generation. This is important with the use of META processings since
here the associated glass is searched for across the META level and thus an assignment to the
processed glas is possible. Nevertheless, it is still very important that for all processings and
elements that should appear on the papers beyond the item texts (processing texts) that there
always be a glass with text present so that the assignment can be made successfully. Otherwise,
the processings cannot be assigned correctly. The texts are thus not unambiguous.
By activating the new texting, the lites are marked with numbers automatically (e.g. - "(1.2.1.2.)
Float 5 mm"), so that it is clear from the position of the glass within the product and the
processings are grouped on the glass with the heading "Processing on (1.2.1.2)".
Here, the assembly position of the LAMI within an IGU is also evaluated automatically (without
additional ENV switch), in the process the subparts of the LAMI are output depending on the
assembly position.
Furthermore, the texts are also indented step by step depending on the position of the glass.
Analogous to the indentation of the BOM text.
If all processing texts within a block (on a glass) are only selected for production papers, then the
block heading "Processing on..." is only adapted on this form vector.
Configuration:
The new environment variable TEXTE_NEUE_VERSION automatically activates the following ENV
switches:
ISO_BEARBTXT_NEU
VSG_BEARBTXT_NEU
ESG_BEARBTXT_NEU
TEXTSORT_IGNORE
SCHEIBENKENNZEICHEN_ZAHLEN
VSG_DREH_TEST



        44.5.1.         Printing of the coating/structure
June 2024 // alcib - 13.04.18110
The texting of the BOM (coating and structure position) was expanded for 4-way IGUs.
For this, the text addition 154 must be created analogous to 92 for the 3.AIR in all languages.
Without this addition, the texting for lites with assembly position = 6 in 4-way IGUs will not be
complete.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 290
        44.5.2.         Combination of identical processing texts
This function is activated with the environment variable "BEARBTXT_AWTYP_ZUSAMMEN".
For some of the standardized processings with AWTYP, the entry is only permitted with
number=1. If, however, the parameter list is not decisive for the expression, it creates much-too-
long texting without visible reason.
This abovementioned environment variable activates the logic that the absolute(!) identical texts
are merged for the same processing and the number of processings are incremented.


Currently (15.11.2024) alcib - 13.04.19111, this applies for the following A+W processing types
    •   DRILLING (1100)                                  * COUNTER-SUNK HOLE (1110)
    •   STEPPED DRILLING (1120)                          * COATING (1200)
    •   FROSTING (1205)                                  * SAND BLASTING (1210)
    •   COLORING (1215)                                  * ENAMELING (1220)
    •   SCREEN PRINTING (1225)                                    * FLUTED BEVELING (1230)
    •   STAMP (1250)                             * LOGO (1255)
    •   BOGENFOERMIGER_RANDAUSSCHNITT (1402) * INNER CUT-OUT (1415)
    •   EDGE CUT-OUT (1400)                      * TALK-THROUGH OPENING (1405)
    •   HANDLE (1410)                            * ROUND CORNER (1310)
    •   MACRO (1900)
    Expansion with alcib - 13.04.19158
    •   AREA MACRO (1910)                        * PARAM_MACRO (1920)
    •   PARAM_FLAECHENMACRO (1930)


44.6.           Automatic text generation
The texting in A+W Enterprise provides many design possibilities. The automatic text generation
will be discussed below. Whether automatic text generation should apply for an article is defined
in the article master data on the Article dimensioning dialog (Article master data dialog -> <F4>
menu -> Dimensioning -> Article dimensioning -> Texts). If the article is set to (yes), the texts for
this article will be generated automatically. The text consists of the Main name of the article and
the details entered in the fields Name and Default.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 291
Fig.115 Article dimensioning



If the flag for automatic text generation is set to 'N', the order texts for this article or article type
are generated from the details that are stored in the fields for the Processing text 1/2.




Fig.116 Article dimensioning -> Texts

This way, the text can be designed individually. Here, reference can be made to various variables.
In the next section, there is an overview of the variables.




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                                  292
The section after that explains the text supplements stored in AWE. Text supplements are
maintained in multiple languages and are evaluated during the automatic text generation. The
table (xzustxt) in which the text supplements are located is included by A+W. The texts can be
changed or deleted by the user. If there is a change, it affects the entire automatic text
generation. is overview, which is listed in the "Text supplements" section, is not complete. It will
grow with developments.


The last section will discuss the creation of foreign-language article dimensioning.



        44.6.1.         Variables
For the texting of articles, dimension parameters can be addressed via variables. For information
about which dimension is in which dimension variable, see the Article dimensioning and Texts
dialog (see Fig.). The variable name is next to the individual fields on the Article dimensioning tab.
The following variables can be used for the output of the text:
 Variable name               Value for:
 $1                          Width
 $2                          Height
 $3                          AIR1 (airspace 1) or depth
 $4                          $4 = AIR2 (airspace 2, for triple IG)
 $5                          Cutting correction
 $6
 $7                          Step right
 $8                          Step top
 $9                          Step left
 $10                         Step bottom
 $11                         SR (spacer deduction)
 $W1                         Size parameter 1
 $W2                         Size parameter 2
 $W3                         Size parameter 3
 $W4                         Item size
 $W5                         Item size 2
 $W6                         Item size 3
 $W7                         Size parameter 4
 $W8                         Size parameter 5
 $W9                         Size parameter 6
 $W10                        Size parameter 7




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                               293
 $W11                         Size parameter 8
 $W12                         Size parameter 9
 $W13                         Size parameter 10
 $T1                          Main article name
                              The length of the text is specified in parentheses, e.g.: $T1(20);
                              corresponds to a 20-digit supplementary text
 $T2                          Internal name
                              Text length see $T1
 $ZT                          Additional text
                              Text length see $T1
 $LEVEL                       Number 120-122 from the table xzustxt. This corresponds to the
                              display level in the order entry
 $AP                          Price-relevant quantity
 $A1                          Quantity 1
 $A2                          Quantity 2
 $PR                          Price
                              Number format: $PR(5.2) 5 places of this are 2 places after the
                              decimal point
 $REFPOINT/$REPPUNKT          Number 128-132 from the table xzustxt. This is the texting of the
                              reference point
 $BEVEK                       Assigned edges
 $CORNER                      Assigned corner
 $QUALI                       Edge quality




        44.6.2.          Text supplements
Text supplements are used in automatic text generation. They are used in the automatic text
generation of the A+W processing type and depending on set environment variables, activate a
special type of texting. The table below provides a brief overview of the text supplements that are
used within the automatic text generation. Text supplements are available in several languages.
The dialog is under Master Data->Keys->System->Text supplements


 Nummer     Text supplement                Logic
 (number)
 1          Outer lite                     No. 1 and 2 are used for texting multiple structures. They specify
                                           textually which glass lite is inside or outside. The evaluation is not
                                           done for single glass.
 2          Inner lite



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                       294
Nummer     Text supplement                 Logic
(number)
3          Pattern outside                 No. 3-6 will be used, among other things, for the texting of coated
                                           and structured glass. The evaluation is done depending on the set
                                           texting method and is controlled by VSG_DRUCK_METH (for LAMI)
                                           and STRUT_DRUCK_METH (IGUs).
4          Pattern inside
5          Coating outside
6          Coating inside
7          horizontal                      No. 7-8 are used for the sense of pattern for patterned glass (see
                                           also No. 36)
8          vertical
9          horizontal                      No. 9-12 are used for texting the muntin construction. The
                                           following variables influence the muntin texting:
                                           SPROSSEN_ZUSATZTEXT, SPRTXT_ALS_ARTTXT
10         vertical
11         symmetrical
12         asymmetrical
13                                         No. 13 provides the text output of the shape number.
                             Shape
14         Qty. stepped IG                 No. 14 is used for the output of existing steps in item texts.
15         on edge                         No. 15-16 are used, among other things, for the texting of
                                           particular processings such as masking, enamel strips. Example:
                                           "mask up to 10 mm on edge 1", "distance from corner 1" (see also
                                           No. 151)
16         from corner
17         re:                             No. 17-20 will be used, in addition to No. 14, for the output of the
                                           steps or the sealing depth. Example: "Steps un: 10 mm, li: 40"
18         ob:
19         un:
20         li:
21         mm                              No. 21-26 provide the output of dimension units.
22         stk
23         rm
24         sqft
25         l
26         kg
27         from lower glass edge           Texting of the muntin drilling points for SPROSSEN_ZUSATZTEXT
28         from left side Glass edge       Texting of the muntin drilling points for SPROSSEN_ZUSATZTEXT
29         Outside:
30         Inside:
31         coated



A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                        295
Nummer     Text supplement            Logic
(number)
32         View of pattern side       No. 32-33 specify from which side the glass with the pattern is
                                      regarded.
33         View smooth side
34         View coated side           No. 34-35 specify from which side the glass with a coating is
                                      regarded.
35         View uncoated side
36         Sense of pattern           No. 36 is used to output the sense of pattern on the lite. In the
                                      rules, the direction of the pattern is also texted (No. 7-8, No. 90)
                                      Example: "View pattern side pattern direction vertical"
37         Purchase order
38         ASYM
39         Partial lengths
40         Art.
41         Type
42         Qty.
43         Per lite
44         each
45         Intersections
46         Grid dimension
47         Dist.deduction
48         Drillings
49         IR
50         SP
51         from bottom
52         from the left
53         asymmetrical
54         Muntin sections
55         Clear fields
56         Outside
57         Inside
58         Material consumption
59         Reference point for
60         Positioning sizes:
61         bottom right corner
62         bottom left corner
63         left
64         right



A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                                      296
Nummer     Text supplement                 Logic
(number)
65         Lite                            This text supplement is required in order to text complicated
                                           structures (e.g. 3x IG). Here, each lite is given a number that is
                                           determined from the assembly position. The evaluation is
                                           controlled with the environment variables EP_ZUSATZTEXT. Key
                                           no. 65 can be "Glass" or "Lite".
66         Minimum processing price
67         Difference
68         Please select
69         the outer lite
70         the inner lite
71         the muntin
72         the processing
73         the gas
74         the available stock
           dimension
75         System cannot start
76         Delivery date in the past
77         Article is suspended
78         Article is not complete
79         Dimension restrictions not
           recorded.
80         Delivery date exceeded
81         reserved
82         IR shape                        No. 82 is used within the eCommerce module. For shaped lites,
                                           this text is displayed at the edge of the dialog with the associated
                                           shape number.
83         Sealing Depth                   Spacer/colored spacer
84         Height of sealing               No. 84 is used for the output of the sealing depth.
                                           Example: "Height of sealing un:12.0mm li:12.0mm ob:12.0mm
                                           re:12.0mm"
88         Stepped lite
90         diagonal
91         middle lite                     For multiple structures (starting with three glass lites), the middle
                                           lite can also be texted. For this, No. 91 must be created.
92         for the 1st AIR                 No. 92-96 and 154 are needed in order to generate the texting of
                                           coated or patterned glasses within an IGU. In the article master
                                           data, the surface structure in the "Surface" field on the
                                           "Phys.Eigensch" must be selected for the article in question.
                                           Possible inputs: no|structure one-sided|structure both-
                                           sided|coating. Furthermore, in the "Structure" field, the sense of
                                           the pattern - vertical, horizontal, diagonal - must be specified. The
                                           texting of IG units is controlled by the environment variable
                                           STRUKT_DRUCK_METH.


A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                     297
Nummer     Text supplement               Logic
(number)
93         for the 2nd AIR               See 92
94         Structure                     See 92
95         Coating                       See 92
96         at pos.                       See 92
97         AP                            No. 97 is used for the texting of assembly positions. With set
                                         EP_ZUSATZTEXT, patterned lites are texted with the specified
                                         assembly position from the BOM.
98         Processing at
99         Declaration of                No. 99-110, 113-116 are used in the release pool. These numbers
           performance:                  provide the lock reason for the order lock in case of error. If these
                                         text supplements are not found, the message for the respective
                                         lock reason is determined from the table errmsg.
100        EDI restrictions              see also No. 99 – alternative fx_texte: 32661
                                         Release note for EDI - kspectxt.txt where ttyp=7000
                                         Used for the display of the lock reasons in the release pool
101        EDI prices                    see also No. 99 – alternative fx_texte: 32660
                                         Release note for EDI - kspectxt.txt where ttyp=7000
                                         Used for the display of the lock reasons in the release pool
102        online                        see also No. 99 – alternative fx_texte: 34378 or 31145
                                         Release note for EDI - kspectxt.txt where ttyp=7000
                                         Used for the display of the lock reasons in the release pool
103        Text eCommerce                see also No. 99 – alternative fx_texte: 34379 or 31145
                                         Release note for external EDI - kspectxt.txt where ttyp=7000
                                         Used for the display of the lock reasons in the release pool
104        SNAuto error                  Depending on configuration MODUL_SN_TEMPLATE
                                           Alternative: fixed text "ALSNControlService incorrect” or "SNAuto
                                         incorrect”
                                         Release note for external EDI - kspectxt.txt where ttyp=7000
                                         Used to display the lock reasons in the release pool
105        negative D-margin             No. 105,106, 107 will be used to display the lock reasons in the
                                         release pool. For VOSE/VOOD- rights violation the lock mode is
106        DB underrun
                                         displayed as follows:
107        Margin limits violation       tekapfrei.sperrmodus=1 Text 105 : for price corridor
                                         (alternative fx_texte: 32500)
                                         tekapfrei.sperrmodus=9  Text106 : for contribution margin
                                         (alternative fx_texte: 32599)
                                         tekapfrei.sperrmodus=12 Text 107 : for margin in item
                                         (alternative fx_texte: 32500)
                                         (For additional info: VG. #90508)
108        EDI: supplier not in DB       see also No. 99 – alternative fx_texte: 32659
                                         Release note for EDI - kspectxt.txt where ttyp=7000
                                         Used to display the lock reasons in the release pool
109        PMO invalid                   Alternative fixed text: “PMO_Error”
110        CE invalid                    see also No. 99 – alternative fx_texte: 33382
                                         Release note - kspectxt.txt where ttyp=7000
                                         Used to display the lock reasons in the release pool
111        Br.                           No. 111-112 provide texting of the template dimension or extent
                                         of a motif.
                                         Example: "Screen printing 0.0qm W.:200.0mm H.:200.0mm"


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     298
Nummer     Text supplement                Logic
(number)
112        H
113        Article not available          see also No. 99 – alternative fx_texte: 34147
                                          Release note for external EDI - kspectxt.txt where ttyp=7000
                                          Used for the display of the lock reasons in the release pool
114        CALLCENTER                     see also No. 99 – alternative fx_texte: 33411
                                          Release note - kspectxt.txt where ttyp=7000
                                          Used to display the lock reasons in the release pool
115        SN file generation complete
116        EDI/Online:Proces.Param.       see also No. 99 – alternative fx_texte: 36126
                                          Release note for external EDI - kspectxt.txt where ttyp=7000
                                          Used for the display of the lock reasons in the release pool
120        top                            No. 120-122 are used for the texting of the level, e.g. in case of
                                          sand blasting, coloring, etc. For the texting, the coding with $LEVEL
                                          must be done manually in the article dimensioning.
121        bottom
122        both
123        Level
124        at corner                      No. 124 is output for an alarm wire with AWTYP= 1245.
125        Stamp no                       Text No. 125-126 is output if the stamp or logo number was
                                          recorded as such.
126        Logo no
127        on edge (approx.)
128        Corner 1                       No. 128-131 (corner 1-4) and No. 132 (middle of the area) are used
                                          for texting for the reference points for area and complex
                                          geometric processings. For the texting, the coding with $REFPOINT
                                          must be done manually in the article dimensioning. This is not a
                                          standard function in A+W Enterprise.
129        Corner 2
130        Corner 3
131        Corner 4
132        Surface center
133        DoP No.                        Text No. 133 is output in roder to designate the assigned and
                                          generated declaration of performance number in the item texts.
                                          Example: „DoP No. 500055xy“
138        Layer as above
139        Layer on opposite side
140        Pattern as above
141        Pattern on opposite side
145        (included)
146        Invoice                        No. 146-148 are used to generate a final invoice. They are required
                                          in order to generate designations in a different customer language
147        Credit note
148        General discount


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    299
 Nummer     Text supplement            Logic
 (number)
 150        Level mirrored             No. 150 is used in the function, which is controlled by the
                                       environment variable ZEIGE_EBENE_DREH_INFO. For complex IG
                                       units which include laminated glass elements, assembly positions
                                       2, 4, 6… for laminated glass mean that the laminated lite is rotated
                                       for IG assembly which is why the laminated glass sub-elements
                                       appear in reflected sequence in the product sketch. The first lite of
                                       the laminated glass becomes the last and vice versa if the assembly
                                       position of the laminated lite in the IG unit is 2,4… . Since the bills
                                       of material in ALCIB have a modular concept however, the position
                                       of the individual sub-elements is recognizable only in connection
                                       with the entire BOM tree, not from looking at a single BOM level.
                                       In order to make this interplay of the individual levels and the
                                       whole structure easier to understand, the text supplement 150 is
                                       stored, which is displayed when entering the BOM in the
                                       transaction.
 151        on edge
 15 4       For the 3rd AIR            See 92
 170-173                               A+W iQuote messages for entry stop
                                       The message is compiled from these 4 numbers.
                                       If all 4 text blocks are not maintained, there is no check for entry
                                       stop.


 174-177                               A+W iQuote messages for the limit check
                                       The message is compiled from these 4 numbers.
                                       If all 4 text blocks are not maintained, there is no limit check.




        44.6.3.   Creating foreign-language article dimensioning
            texts
The texting that comes from the article dimensioning is maintained on the "Text" dialog in the
article dimensioning. (Master data dialog -> <F4> menu -> Dimensioning -> Article dimensioning ->
Texts). Here, you can choose between article number, article type or A+W processing type.
Designations for dimension parameters, position dimensions, and other parameters are
maintained in the configured AWE language on the corresponding tabs on the "Article
dimensioning" dialog. On the dialog rump via the "Texts" button, you can access the language-
dependent language sets. By default, the "Language" field is pre-populated with the AWE
language. For other language-dependent designations, the corresponding language must be
selected.


After the change to the "Texts" dialog, the dimension parameters are displayed in the AWE
language. If another language was selected, the parameter designations in the column behind this


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                      300
are displayed in the AWE language. To simplify the data maintenance, the parameter designations
are displayed in the AWE language in the column behind this.




Figure 117: Foreign language texts in article dimensioning



44.7.              Configurable texts
    ■    Determination of the texts within SPs
    ■    Call of the SPs from Master data > Text management > Configurable texts
    ■    Takes place after the document is saved
              ‒    Table auftxtzu
              ‒    auftxtzu.splname depending on auftxtzu.drupos.
              ‒    Drupos = 1(header), 2(footer) splname(auftrnr, subnr, vorgang).
              ‒    Drupos = 3 (article texts)            splname(auftrnr, subnr, vorgang, poskonr)
              ‒    Drupos = 4 (item texts) splname(auftrnr, subnr, vorgang, posnr)
              ‒    The text is then generatedif the return value of the SP = RET
              ‒    Then the text is taken over from file
              ‒    Ex.: Complaint text, special text for a customer for particular articles in the BOM -
                   Warning special glass...


         44.7.1.            For invoices and credit notes
The configurable texts are generated by the background process intauf. Since the invoices (and
credit notes) are not always processed by intauf during the generation, it can actually happen that

A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                              301
these texts are missing on invoices or credit notes. To close these gaps, the two switches
RECH_MIT_KONFIGTXT and GUTS_MIT_KONFIGTXT were created. If these switches are activated
with "ON," invoices and credit notes also run through the intauf and the configurable texts should
always be present.



        44.7.2.    Automatic text generation – expansion of the
            configurable texts
Configured texts (both article and item texts, header, footer texts) are ALWAYS generated anew
by intauf!!!
Since behind the configurable texts there is always a rule defined by the customer, A+W
Enterprise cannot detect whether after an order correction the data that is evaluated in the SP
was changed or is still correct. This is the basic function of the configurable texts.
The configurable texts are always generated according to the automatically or manually
generated texts. Therefore, manual changes to the texts in the document entry are generally
overwritten after saving.
# 443384:
For the configurable texts, you can, as before, have an individual text generated if the
document/item corresponds to particular criteria specified via a SP. This increases the flexibility of
text generation. The generated text is always stored permanently. In order to increase the
flexibility still more, you can now use the individual variables (Master Data -> Text management ->
Text Generation -> Variable Names) in the stored texts.

If, for example, for the particular article an additional text about the total thickness is required,
then you store a variable GESDICKE with reference to the field "dicke" in the DB table "ktechw"
and the appropriate WHERE condition ktechw.aufnr=$AUFNR and ktechw.posnr=$POSNR. Under
Master Data -> Text Management -> Configurable Texts, you can store a SP and a file. In the file,
you can now also use this variable in the text: "Total thickness of the item is ${GESDICKE}". This
even works with format specifications such as "Total thickness of the item ${GESDICKE}[%4.2lf]. In
WHERE condition of the individual text variables, you can use the global variables such as
$AUFTRNR, $AUFNR, $POSNR, $POSKONR, $LFDPOS. These do not have to be stored separately.
Please note that for header/footer texts, no text variables with the reference to the information
of individual items can be used. This means that the variables with the reference to $POSNR,
$POSKONR, $LFDPOS are not suited for the header/footer texts.

Furthermore, it is now possible to store the configurable texts also for multi-language generation.
For this, you enter the texts in other languages. Here, the form vector has to be created for the
config. text. If it is entered for foreign-language customers, the content of the file for language X is
read in. The stored vector is compared to the vector for the foreign languages and adjusted.

E.g. for a SP "test-sp" and ReturnCode = 1, there is a form-vector assignment
"Quotation+OC+invoice+ProdPapers". Text1 is stored in German, Text2 in English, and Text3 in
French. The country language is also German.

If you enter an order for a German-speaking customer (customer language = country language),
the "text-sp" also returns = 1. Thus, Text1 is generated in the texts and the form vector is taken
over.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  302
If you enter an order for the English-speaking customer, then Text1 is pulled first and the form
vector adjusted according to the stored vector for foreign-language forms. After that, Text2 is
pulled, and here too, the form vector is adjusted according to the stored vector for the local
language papers.


        44.7.3.         Variable texts (kspectxt)
    ■   Generation of variable texts according to kspectxt
    ■   Master data > Text generation >
            ‒   Variable definition – with reference to table field
            ‒   Text formulas – text definition with reference to a formula number
    ■   Market partner master data > Printout
            ‒   Text formulas – assignment of a text formula to a market partner
            ‒   Application
e.g. for generation of the spacer texts




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  303
45. Product group logic
45.1.               Product groups: Superior / sub product group
Arrangement of product groups
XX XX XX
                           Superior product group
                                  Sub product group
Product group
Product group tree structure:




Figure 118: Product group view




45.2.               Structure of Product Groups
Glass product groups                                    Plastic product groups
F        - Float                                        X      - Acryl glass XT
G        - Patterned glass                                     G          - Acryl glass GS
L        - Coated glass                             P   - Polycarbonate
P        - Parsol                                       H      - PVC-U hard foam boards
M        - Madras                                       S      - Acryl glass crosspiece lites
R      - Mirror raw glass                                      T          - Polycarbonate crosspiece
boards


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              304
S       - Mirror                              U      - Crosspiece board profiles
Z - Automotive glass D - other plastics
A       - Antique mirror                                      Z         - A: Accessories
D       - Wired glass
E       - TG
K       - Artistic glazing
B       - Fittings
N       - Genuine antique
O       - Wire ornament
T       - Garden glass
U       - U glass
V       - LG
X       - Special glass


LG product groups                                    IG product groups
A       - A type                                     S        - Standard
B       - B type                                     A        - Heat protection
C       - C type                                     B        - Sound protection
D       - D type                                     C        - Heat/sound protection
2       - 2-lite                              D      - Sun protection
3       - 3-lite                              E      - Sun/heat protection
4       - 4-lite (and more)                          F        - Security I
Z       - Automotive glass                                    G         - Security II
L       - Coated glass                        H      - Curved. Facet, antique
G       - Cast resin                                 I        - ISOROLL, ISOLETTE
X       - Special combinations                       K        - Triple IG
                                                     L        - Panel
                                                     X        - Auxiliary material


Fire protection types                                Fire protection times
G       - G type                                     1 -                < 30 min.
F       - F type                                     2 - 31             - 60 min.
                                                     3 - 61             - 90 min.
                                                     4 - 91             - 120 min.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                          305
Glass thickness                                              Plastic thickness
1       -          1- 3mm                                    1       -       1- 3mm
2       -          4mm                                       2       -       4- 6mm
3       -          5mm                                       3       -       7- 12mm
4       -          6mm                                       4       -       13- 20mm
5       -          7mm                                       5       -       21-30mm
6       -          8mm                                       6       -       31-40mm
7       -          9-10mm                                    7       -       41-60mm
8       -          > 10mm                                    8       -       61- 80mm
                                                             9       -       > 80mm


Color type
0       - Normal
1       - colored
2       - frosted
3       - patterned


Glass type                                                   Plastic type
(has an effect on UPG 11, 15, 3*, 4*)
        0- FD (unprocessed)             A = 0 + Shape                0       - FD (piece)
        1- SD                           B = 1 + Shape                1       - SD
        2- SD                           C = 2 + Shape                2       - SD
**      3- Multi processed              D = 3 + Shape                3       - Pipe
        4- Single processed             E = 4 + Shape                4       - Bar
        5- Alarm transmitter                     F = 5 + Shape               5        - Profile
*       6- Surface treated      G = 6 + Shape
        7- Curved                       H = 7 + Shape
        8- Curved                       I = 8 + Shape


IG structure                                     IG type
(has an effect on UPG 5*)                                    (has an effect on UPG 5*)
0       - normal                        0        - unprocessed                        A = 0 + Shape
1       - 1 x Patterned                 1        - UV edge compound                   B = 1 + Shape
2       - 1 x TG                2       - muntin                             C = 2 + Shape
3       - 1 x LG                3       - Artistic glazing           D = 3 + Shape


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                     306
4       - 2 x Patterned                      4          - Capillary insert          E = 4 + Shape
5       - 2 x TG                     5       - Offset                        F = 5 + Shape
6       - 2 x LG                     6       - UV edge compound + Offsets G = 6 + Shape
7     - TG / LG                              7          - Colored spacer                     H=7+
Shape
8       - Cast resin                         8          - Gluing             I = 8 + Shape
9       - Special
*       Enameling - Sand blasting
**      Grinding - Sand blasting


Product group                                                                       Matchcode
10 * * * *         Basic glass (stock dimensions)                                            B
10 * * * *         Glass product group
10 * * * *         Glass thickness
10 * * * *         Color type
                   (only 0, 1, 2)
10 * * * *         Glass type
                   (only 1)


11 * * * *         Basic glass (fixed dimensions - unprocessed)                              B
11 * * * *         Glass product group
11 * * * *         Glass thickness
11 * * * *         Color type
                   (only 0, 1, 2)
11 * * * *         Glass type
                   (only 0)


15 * * * *         Basic glass (fixed dimension - processed)                                 C
15 * * * *         Glass product group
15 * * * *         Glass thickness
15 * * * *         Color type
                   (only 0, 1, 2)
15 * * * *         Glass type
                   (only 0, 3, 4, 6, 7, 8)




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                              307
20 * * * *   Plastic (unprocessed))                                 K
20 * * * *   Plastic product group
20 * * * *   Plastic thickness
20 * * * *   Color type
20 * * * *   Plastic type


25 * * * *   Plastic (processed))                                       L
25 * * * *   Plastic product group
25 * * * *   Plastic thickness
25 * * * *   Color type
25 * * * *   Plastic type


30 * * * *   TG                                                             E
30 * * * *   Glass product group
             (only F, G, L, P, M, R, S, Z)
30 * * * *   Glass thickness
30 * * * *   Color type
             (only 0, 1, 2)
30 * * * *   Glass type
             (only 0, 3, 4, 5, 6, 8)


32 * * * *   Fire protection TG                                             E
32 * * 0 *   Fire protection type
32 * * 0 *   Fire protection time
32 * * 0 *   Glass type


35 * * * *   TG processed pre-toughened                                     E
35 * * * *   Glass product group
             (only F, G, L, P, M, R, S, Z)
35 * * * *   Glass thickness
35 * * * *   Color type
             (only 0, 1, 2)
35 * * * *   Glass type
             (only 0, 3, 4, 5, 6, 8)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx               308
36 * * * *   TG processed partly pre-toughened                     E
36 * * * *   Glass product group
             (only F, G, L, P, M, R, S, Z)
36 * * * *   Glass thickness
36 * * * *   Color type
             (only 0, 1, 2)
36 * * * *   Glass type
             (only 0, 3, 4, 5, 6, 8)


40 * * * *   LG (stock dimensions)                                 V
40 * * * *   LG product group
40 * * * *   LG thickness
40 * * * *   Color type
             (only 0, 1, 2)
40 * * * *   Glass type
41 * * * *   LG (fixed dimensions - unprocessed)


42 * * * *   Fire protection LG                                    V
42 * * 0 *   Fire protection type
42 * * 0 *   Fire protection time
42 * * 0 *   Glass type
45 * * * *   LG (fixed dimensions - processed)


50 * * * *   IG                                                    I
50 * 0 * *   IG product group
50 * 0 * *   IG structure
50 * 0 * *   IG type


52 * * * *   Fire protection IG                                    I
52 * * * *   Fire protection type
52 * * * *   Fire protection time
52 * * * *   IG structure
52 * * * *   IG type


6*****       Glass systems                                         G


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx       309
60 * * * *   Glass door systems (GGA)
60 * 0 0 0   Glass product group
60 0 0 0 *   (1 = Accessory, 2 = Installation, 3 = Maintenance)
62 * * * *   Inside doors                                              T
64 * * * *   Sanitary facilities                                       S
66 * * * *   Balustrades                                           R
68 * * * *   Special elements                                              X


70 * * * *   free (for special requirements)                       A


Product group Matchcode
9* * * * *   Services / Commercial articles


90 * * * *   Services                                              D
90 00 * *    general services
90 00 * *    10      - Glazing / Installation
             20      - Salary work
             30      - Glass construction
             40      - Service work
90 15 * *    Basic glass processings
90 25 * *    Plastic processings
90 30 * *    TG processing
90 40 * *    LG processing
90 50 * *    IG processings
99 99 99     various product groups


95 * * * *   Commercial articles                                           H
95 * 000     B       - Fittings
             W       - Tools
             X       - other commercial articles


96 * * * *   Muntins
96 * 0 * *   A       -         Alu muntins
             D       -         Duo/Trio
             M       -         Brass



A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx           310
                S       -       Swiss cross
                T       -       Thermo muntin
                W       -       Vienna muntin
96 * 0 * *      01      -       white
                02      -       colored
                03      -       multi-colored




45.3.           Customer-specific product group (SCHOLL)
WARENGRUPPENART = 3


If the product group begins with "2", "3" or "5"
    -   Grooves: article with article type 552 - "grinding grooves" or processing type 1230 "fluted
        beveling"
    -   Screen printing: article of article type 588 - "screen printing" or processing type 1225
        "screen printing"
    -   Sand blasting: article of article type 587 - "sand blasting" or processing type 1210 "sand
        blasting"
    If grooves, screen printing, AND sand blasting       => product group ****75
    If grooves AND sand blasting (no screen printing)        => product group ****35
    If grooves AND screen printing (no sand blasting)        => product group ****45
    If sand blasting AND screen printing (no grooves)        => product group ****75
    If ONLY grooves => product group ****30
    If ONLY screen printing => product group ****40
    If ONLY sand blasting => product group ****70
         Here, whatever comes first from top to bottom wins out


If the product group begins with "4" (IGU)
Spacer type of the RahmenID of the articles from the BOM will be determined
Select xxrahmentyp.alcibrahmentyp
from artikel, xxrahmentyp
where artikel.artnr = <aufstrukt.artnr>
  and artikel.rtyp = xxrahmentyp.rahmenid;


    -   TPS spacer: Rahmentyp=3 or article number 806299 or 806299
    -   Muntins: article with article type 230 - "muntins"


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  311
    -   Steps: article with article type 510 or 511 - "steps"
    -   Edge compound: article with article type 595 "UV coating"
    -   Patterned: article with article type 110 - "patterned FD"
    -   TG: article with article type 150 - "TG FD"
    -   LAMI: article with article type 170 - "LAMI FD"
    -   Cast resin: article with article type 140 - "cast resin FD"
    If edge compound => product group *****1
    If steps => product group *****8
    If muntin       => product group *****6


    If TPS spacer AND product group *0**** => product group *3****
    If NOT TPS spacer AND product group *3**** => product group *0****


         Here, whatever comes last from top to bottom wins out


    If cast resin                 => product group ****8*
    If TG AND LAMI         => product group ****6*
    If TG AND patterned => product group ****4*
    If patterned AND LAMI => product group ***5*
    If LAMI         => product group ****2*
    If TG           => product group ****3*
    If patterned           => product group ****1*
    If none of the above types of glass is right => product group ****0*
         Here, whatever comes last from top to bottom wins out


45.4.               Customer-specific product group (Pilkington)
Variables:
NEW_WAGRP_LOGIC
PILK_WAGRP_NEU
WARENGRUPPENART


If variable PILK_WAGRP_NEU is set, only for IG the following applies:
Last char in the product group (first is highest priority)
1. gas and Alarm device => C
2. gas and Georgian bars => 6


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx        312
3. gas and Analysis group 17 => E
4. Gas and Steps => 7
5. Georgian bars and steps => 8
6. Steps and Analysis group 17 => F
7. Alarm devices => B
8. Georgian bars => 2
9. Analysis group 17 => D
10. product with product typ Gas (260) => 5
11. product with product typ Step (510) => 4
12. product with product typ Colour coat (320) => 9
13. product with product typ Silk-screen printing (588) => 3
14 product with product typ between grinding (550) and Sandblasting (587) => 1
15. Analysis group 18 => A
16. nothing of them => 0


i.e
=> gas and Georgian bars and Alarm device => C


5th char in the product group (first is highest priority)
1. analysis group 11 => M
2. analysis group 10 => L
3. analysis group 9 => K
4. analysis group 8 => J
5. analysis group 7 => I
6. analysis group 14 => H
7. analysis group 13 => G
8. analysis group 12 => F
9. LSG-article CS (170) and analysis group 15 => E
10. TSG-glasses (150) and analysis group 15 => D
11. TSG-glasses (150) and LSG-article CS (170) => C
12. Patterned sheets CS (110) and analysis group 15 => B
13. Patterned sheets CS (110) and LSG-article CS (170) => A
14. Patterned sheets CS (110) and TSG-glasses (150) => 9
15. twice analysis group 15 => 8
16. twice LSG-article CS (170) => 7


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx              313
17. twice TSG-glasses (150) => 6
18. twice Patterned sheets CS (110) => 5
19. Analysis group 15 => 4
20. LSG-article CS (170) => 3
21. TSG-glasses (150) => 2
22. Patterned sheets CS (110) => 1
23. FLOAT-sheets CS (100) => 0
24. nothing of them => N


3rd char in the product group (first is highest priority)
1. three times FLOAT-sheets CS (100) or three other glasses (100,110,120,130,140,150,170) => A
2. analysis group 11 or 10 or 9 or 8 => 9
3. analysis group 16 => 8
4. analysis group 1 and (3 or 4 or 5 or 6) => 7
5. analysis group 2 and (3 or 4 or 5 or 6) => 7
6. analysis group 6 => 6
7. analysis group 5 => 5
8. analysis group 4 => 4
9. analysis group 3 => 3
10. analysis group 2 => 2
11. analysis group 1 => 1
12. nothing of them => 0




45.5.           Customer-specific product group (Wernberg)
The product group calculation for Wernberg is bracketed with the environment variable
WARENGRUPPENART=10. The initial value for the determination is not product type of the
product, but rather the product group stored in the master data:
5xxxxx – IG
4xxxxx- LAMI
3xxxxx- TG
11xxxx – BASIS FD
15xxxx – BASIS proc. FD




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                          314
        45.5.1.          Goal
Creation of a product group logic that enables meaningful statistics. In the insulated glass range
(5th and 6th digits), the characteristics of the A+W product group logic should be retained, due to
the master data structure (pricing/item types), however, the determination of the criteria must be
done another way.


        45.5.2.          IG: 5th and 6th digits
Due to the intended pricing via exchange prices in insulated glass, the A+W product group logic is
not suitable for use at Flachglas Wernberg since all glasses of the BOM bring with them an A/Z
identifier from the master data. Essentially it must be ensured that the product group drawn from
the master data matches the product group theoretically determined based on the set A/Z
identifier (e.g. 50A000 for item 50020000 of float and Low-E).
IG characteristic (only 5th digit) from A+W product group logic
Here, a hierarchy must be obeyed!
If the IG consists of two common lites, the 5th digit is 0.
If it is one patterned and one TG lite, then the 5th digit is 2. That is, with different kinds of glass,
the highest ID is written to the 5th digit.
0 - normal
1 - 1 x Patterned
2 - 1 x TG
3 - 1 x LAMI
4 - 2 x Patterned
5 - 2 x TG
6 - 2 x LAMI
7 - TG / LAMI
8 - Cast resin
9 - Special - not applicable
In the A+W product group logic, all IG that contains one lite with item type 130 special glass has a
9 as the 5th digit. Since patterned glass (also for pricing reasons) is created as item type 130, and
evaluation of patterned glass in the 5th digit of the product group logic is therefore not possible.
Coated glass is also created as item type 130. A conversion to item type 100 (float FM) fails if only
for item type 130 are the structural identifiers "cleanly" mapped in the visual BOM display.
Therefore, for item type 130, the following is desired for the future:
If surface property of the glass is structure one-sided (1) or structure both sides (2), then
1 = 1x patterned glass
4 = 2x patterned glass
Otherwise: 0
The determination of the characteristics with TG, LAMI, and cast resin should be retained as in the
A+W product group logic, characteristic 9 is not applicable.


IG characteristic (only 6th digit) from A+W product group logic
Here as above, a hierarchy must be obeyed!


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   315
If the glass is a shape, then instead of the number the corresponding letter is set.
                                         Shape
0   -   unprocessed                      A
1   -   UV-edge compound                 B
2   -   Muntin               C
3   -   Decor. glazing       D
4   -   Capillary insert     E
5   -   Step                             F
6   -   Step + edge compound             G
7   -   Colored spacer                   H
8   -   glued                I
9   -   Curved, bent         J

In the A+W product group logic, the 6th digit is currently filled as follows (value in brackets =
shape)
    -   1 (A): UV edge compound (atyp 595)

    -   6 (G): Step + edge compound (atyp 595 + step)

    -   8 (I): glued atyp 599 artnr=99915200

Item type 599 is used here for gluing on adapter frame and pressing in of U-profiles.
For characteristic 1 or 6, in the future atyp 595 should not be evaluated, but rather the BOM
should be searched according to sealants (atyp 240) with artikel.versieglungstype > 0. The
determination of the characteristics 2, 3, 4, 5, 7, and 9 remains unchanged as in A+W logic (shape
analogous).



        45.5.3.         TG and fixed dimension 6th digit
The determination of the 6th digit of the product group for TG and fixed dimension according to
A+W product group logic is unclear, therefore, an individual approach was determined by FGS,
which is described in the linked Excel lite:




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  316
Figure 119: Excel table for product group logic for TG and FD



45.6.              Extension of the product group logic (art 6)
For the product group type calculation 6 (environment variable WARENGRUPPENART=6), a special
determination for article type 149 (door attachments) was included. Here, the product group is
obtained from the relevant glass article from the first BOM level. The price calculation is then
initiated via this product group.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                    317
46. Cost center logic in A+W Enterprise:
A cost center is saved in the order entry per item in the field kpos.kostenst, alphanumerically, 10
digits.
The field Cost center is on the 1.Shp dialog (Eigensch. tab) of the item entry.


46.1.           Environment variable: DEFAULT_KOSTENST
The variable DEFAULT_KOSTENST sets the desired cost center procedure.
Presently, the following procedures are available:


0 = Department number            Based on the department number of the procedure (kauf.abtnr),
                                 the cost center is read from the department table
                                 (abteilung.kostenst)
1 = TTY (terminal-related)       With the number of the logical terminal from the terminal
                                 assignment (termzu.logterm), the cost center is read out of the
                                 terminal table (xterm.kostenst).
2 = none                         There is no automatic determination of the cost center, it must be
                                 entered manually for each item.
3 = Header                       The cost center from the order header (kauf.kostenst) is taken
                                 over in the cost center field of the item (kpos.kostenst). The cost
                                 center in the header must be entered manually.
4 = Product group                With the product group from the order item (kpos.wagrp), the
                                 cost center is read from the product group table
                                 (wargrp.kostenst). Here, the following logic applies: first, there is a
                                 search with the product group from the table kpos (kpos.wagrp).
                                 If no record with this product group is found or if the cost center
                                 of the record found is empty, the search is conducted again with
                                 the subproduct group (wwww**). If no record with this
                                 subproduct group is found or if the cost center of the record
                                 found is empty, the search is conducted again with the superior
                                 product group (ww****).
5 = Object number                Based on the object number of the procedure (kauf.objnr) (if
                                 present), the cost center is read from the object table
                                 (objekte.kostenst), whereby the object table (objekte) in the
                                 meantime is only a view of the market partner table (mp).


6 = Item number                  Based on the item number from the item (kpos.artnr /
                                 shmart.artnr), the cost center is read from the item master data
                                 (artikel.kostenst)
7 = Market partner number        Based on the customer or supplier number of the procedure
                                 (kauf.kunr), the cost center is read from the market partner table
                                 (mp.kostenst)


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   318
Special logis Schwabenglas, Site 50: If the department of the order (kauf.abtnr) = 1122 or 1128,
based on the department number of the order (kauf.abtnr), the cost center is read from the
department table (abteilung.kostenst), regardless of the value of the environment variable
DEFAULT_KOSTENST.




46.2.            $ALDATPFAD/kostenspec.dat
If entries exist here, these override the cost center procedure that is specified by
DEFAULT_KOSTENST.
The entries in the file kostenspec.dat apply only for the Sales area and look like this:


<Number>      <Cost center>
<Number>      <Cost center>


Here, the following cost center types are specified by the entry in the field <Number>:
101 = Supplier                   If the number 101 is entered in kostenspec.dat and the supply
                                 type of the item (kpos.beschaffart) is set to BESTELLUNG (= 1), the
                                 cost center entered next to the number 101 from kostenspec.dat
                                 is taken over into the item.
102 = Route                      If the number 102 is entered in kostenspec.dat and the business
                                 type of the item (kpos.geschart) or of the header (kauf.geschart) is
                                 STRECKE (=1) and the order was not transferred from another site
                                 (kauf.hausnr = kauf.parhausnr), the cost center entered next to
                                 the number 102 from kostenspec.dat is taken over in the item.
103 = Stock                      If the number 103 is entered in kostenspec.dat and the supply
                                 type of the item (kpos.beschaffart) is set to LAGER (= 2), the cost
                                 center entered next to the number 103 from kostenspec.dat is
                                 taken over into the item.
104 = Production                 If the number 104 is entered in kostenspec.dat and the supply
                                 type of the item (kpos.beschaffart) is set to LAGER (= 3), the cost
                                 center entered next to the number 104 from kostenspec.dat is
                                 taken over into the item.
105 = Included                   If the number 105 is entered in kostenspec.dat and the supply
                                 type of the item (kpos.beschaffart) is set to MITGELIEFERT (= 4),
                                 the cost center entered next to the number 105 from
                                 kostenspec.dat is taken over into the item.
106 = Project order              If the number 106 is entered in kostenspec.dat and this is a
                                 project order (kauf.objnr > 0), the cost center entered next to the
                                 number 106 from kostenspec.dat is taken over into the item.
107 = Miscellaneous customer If the number 107 is entered in kostenspec.dat and this is a
                             miscellaneous customer (kauf.tempkukz = 1), the cost center
                             entered next to the number 107 from kostenspec.dat is taken


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                319
                                 over into the item.
                                 Special logic Glaskontor Bamberg: if the number 107 is entered in
                                 kostenspec.dat and the field mp.private_long1 is 1 in the
                                 customer's market partner master data (kauf.kunr), the cost
                                 center next to the number 107 from kostenspec.dat is taken over
                                 into the item.


If several conditions apply to an item, the sequence of the entries in kostenspec.dat is decisive:
the deeper the line of the entry, the stronger the condition. An entry made in line 5 overrides an
entry made in line 3.




46.3.           Purchasing
Starting with Version 2011 build date > 12/14/2012, the file $ALDATPFAD/kostenspec.dat will not
be evaluated in purchasing. The variable DEFAULT_KOSTENST also applies in the purchasing area
unless the variable KOSTENSTELLE_EK is set.


        46.3.1.          Variable KOSTENSTELLE_EK
If the variable KOSTENSTELLE_EK is set, the cost center is copied from the article master of the
item article when purchasing documents are entered.


        46.3.2.          Customer-specific solution (Interpane)
When generating POs in the PO pool:
When loading order-related PO items in the PO pool, the cost centers are written to the field
bestpool.kostenst:
    a. For the completely ordered items, the content of the environment variables BPKOSTENST
       is written to bestpool.kostenst.
    b. For child parts: there is a lookup in aufstrukt of the parent item of the PO item
       (aufstrukt.parent). If the article found this way (aufstrukt.artnr) is a metapart
       (artikel.teilflag = 2), there is a lookup for its parent article. This is done until a processing
       (artikel.teilflag = 0) or a part (artikel.teilflag = 1) is found. If there is something in the
       private_char2 field (artikel.private_char2) of the article found this way, the field
       artikel.private_char2 is taken over as cost center into bestpool.kostenst.
    c. For stock orders, the content of the environment variables LAGERKO"STENST is written to
       bestpool.kostenst.

For the transfer into purchasing, the content of bestpool.kostenst is taken over into the table kpos
(kpos.kostenst).
With manual generation of POs in PO management (only Plattling):
The private_char2 field (artikel.private_char2) of the article ordered (kpos.artnr) is taken over as
cost center into the PO item (kpos.kostenst).



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  320
46.4.           Manual entry in kauf.kostenst
IMPORTANT! If in the cost center field of the order header (kauf.kostenst) a cost center was
entered or selected, this cost center is taken over into all articles, regardless of which of the cost
center procedures is active and regardless of whether or not there is an entry in
$ALDATPFAD/kostenspec.dat. The cost center can be entered on the 2. Shp screen of the header
entry, in the 2nd field.


46.5.  Cost center determination for the transfer to
  purchasing (PO generation):
For stock orders, the cost center is always determined anew. For the customers Schöninger and
Boermanns, the cost center is always determined anew. If the environment variable
INTAUF_KSTNEU is set, the cost center is determined anew both for transferred orders as well as
for the PO generation.
Starting with Version 2.12: If the environment variable EK_KSTNEU is set, the cost center is
determined anew for the PO generation, but not for transferred orders.
If none of these conditions apply, the cost center is taken over from the order in the PO or the
transferred order.


46.6.           Cost center transfer
        46.6.1.          General
The cost center transfer is done using the trm_ctrl. For this, the trm_ctrl is called with the transfer
type 16.
The cost center transfer only takes place with the CSS FinAc (FIBU_ART=2).
The transfer of the cost centers is done to the included recipients (parameter 6 for the trm_ctrl
call) or if this is 0 on the sites defined in the variables FIBU_ZENT. The variable FIBU_ZENT is not
evaluated specifically for the site. This means that all internal sites within a database have the
same FinAc
For the customer SCHOLL, Fischer, Interpane, the ALCIB table ip_kost is used as cost center table.
For all others, the table csskb.
Process:
Waitlock and lock exclusively on ip_kost bzw csskb
Check whether there are still records with ueflag = -1
Set all records for hausnr in (xhaus.hnr) to – 1.
Unload all records marked with -1 according to $DFUEDIR/dat/<file>
Checksum (number of records in ip_kost where ueflag=-1)
Count number of records in file and compare to checksum
Write time ID to unloadfile


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 321
Set records in ip_kost / csskb to ueflag (with waitlock and exclusive lock)
Finish unload
Start load
Delete _ip_kost / _csskb
Load file written in unload according to _ip_kost or _csskb
Calculate checksum and check
Read time ID
||: determine number of records for min(<haus>)
Generate cssfile: call of the script Erzeuge cssfile: "kostincss <file_k> <hausnr> <anz> <file_a>
<err_file>"
Delete records from _ip_kost / _csskb that were previously processed and continue with
determine number of records for min(<haus>) :||



        46.6.2.         Logs
The log is written to $DFUEDIR/proto/kost_proto (not site-specific!).
Additional log: $PROTOPFAD/fbd<zeit> (not site-specific!)


46.7.           FinAc interface: accounts and cost centers.
\\jupiter\Doku_DocuWare\ALCIB-PMS\FIBU\AWE_KontenUndKostenstellen.docx




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  322
47. Deco numbers for special edges
Order entry:
Deco numbers can now (#436733) be stored for special edges (AWType 1090). The deco numbers
are transferred to the production as well as to the SN/SNLive when generating sketches and SN
files, so that a corresponding deco text appears on the sketch.
The deco number is also transferred in the iTOE.
Master data in A+W Enterprise:
Processing steps with AW processing type=1090 should be stored in Article master-><F4> >Article
dimensions data with fixed parameter. It will not be possible to change this during order entry.
A+W CAD Designer (Shape):

In the SN.ini, the deco settings are stored in the [Decoration] section.
For the Deco numbers of special edges on single glasses, the ranges Deco11 to Deco27 and
Deco100 to Deco131 are provided as standard. Please note that the deco numbers stored in the
AWE have an offset of +1 to the deco variable in the SN.ini. AWE Deco number 12 therefore refers
to "Deco11" in the SN.ini etc. Deco number is to be stored as a fixed and non-modifiable
parameter under article dimensioning.

A patch for AWP must be delivered for this process! S. #431605




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             323
48. DXF Import
48.1.           Configuration
You activate the takeover of DXF file via: MODUL_ITOE = 2 (#404784)
Caution:
The DXF import can also be used without SN license. In this case, after the import of the DXF file,
no synchronization of the SN BOM with the AWE BOM can be done. No data from DXF/SN are
taken over into the AWE item.
The generated SN file is assigned to the item, however.
The DXF import cannot (status as of 07/15/2025) be configured independent of the iTOE
(MODUL_ITOE=2). The iTOE always requires an SN license.This is not a nice situation; hopefully it
will be corrected soon (see PF [AW-236842]).


alcib.hotfix - 13.04.20698
For the case that DXF files are imported without SN license, a new configuration has been
developed. If it is activated, then the import of the DXF files is only possible after the
determination of the BOM and geometry in AWEnterprise. After selection of the DXF file and
confirmation of the form import, the SN file is created, which is attached to the item.
If during the configuration an SN file is attached to the item, then there is no synchronization of
the data and the processings must be entered manually in the BOM.



        48.1.1.         Environment variable SN_DXF_NONMODAL
The DXF import is now not available as a non-modal dialog. With the previous (modal) DXF import
dialog, program errors or even a program crash were possible. This is prevented with the current
non-modal dialog (#436654).
The non-modal DXF import dialog is activated by setting the environment variable
SN_DXF_NONMODAL to ON.


        48.1.2.         Master data
Under Keys -> System -> Document types a document of the type DXF must be created. Only one
document of this type may be present. Under this type, a copy of DXF file is attached to the
position.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 324
48.2.           Functions
        48.2.1.         Order entry
It is possible in the dimension fields of the item to import a DXF file analogous to the takeover of a
SN file. During the import, a SN file is generated from the information of the DXF file.
With Ctrl+B you use the file explorer to select an existing DXF file. This starts the DXF import
dialog on which the form to be imported is displayed. If the import is confirmed with OK and if the
import can be done without errors, then the user has the opportunity either to synchronize the
AWE BOM with the generated SN file or to take over the generated SN file directly without
synchronization.
The initially selected DXF file is added to the item as file attachment, so that it remains traceable
how the SN file was generated.The DXF file attachment has a fixed type (see master data) and can
only be present once per item.
The DXF file attachment has a fixed type (see master data) and can be present only once per item.
In addition to the method described above, the assignment of a DXF file can also be done directly
from the CAD file field in the item (Properties tab) via the selo (<F9>). Here, the user is initially
asked which file type (SN or DXF) he would like to select. In the file explorer, then only the files of
the selected file type are displayed.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 325
Figure 120: DXF import dialog

October 2024 // alcib.hotfix - 13.04.18861
For all glass products in A+W Enterprise, it is possible to determine the item via *DXF file and to
synchronize the data. Since it is not known which information will be reported back by SN, now
there is a check after the report whether the form or also new processings such as drillings or cut-
outs should be taken over.However, the new processings can only be taken over if the product
has a BOM. For this reason, in the case that there is no BOM, the entry or takeover of the
information from the DXF files is interrupted and reported to the user. The user should then
select another product for the entry.
Important here is correctly maintained master data. If an article is on BOM "yes" but factually has
no BOM, this check cannot work correctly. This applies generally. If an article has no BOM, it must
be set to BOM "No"!



         48.2.2.           EDI
In the external order scheduling, there is no logic available for the import of DXF files.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              326
49. SN interaction/SNLive sketch in general
September 2024 / alcib - 13.04.18658
In a completely entered item, it is possible to call up the display of the product sketch directly
with the key combination Alt+l.


49.1.           Additional documentation
In case of questions about the SN interaction, an additional document is also available in
Sharepoint, in the "Interfaces" area.




49.2.           View in the SNLive sketch (#412076)
The view in the SNLive sketch is determined by the assembly position of the header part of a
BOM. The assembly positions of the lites within the BOM, in turn, influence the positioning of the
lites below the header part.
With the view of the product structure, you can determine at which side of the glass structure you
are looking in the SNLive sketch, namely on the "outside" (to the sun).
The display the side view is activated via SN.ini, section PICTURE.
see also "EN-CONFIG-A+W CAD Designer (Shapes)" section "Profile view"Limit
see also section "Entry in interior view"


Note about product structure
The sketch is generated by Albwir.Alcim.ProductViewCreator.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   327
        49.2.1.           Example: header part AP 1




Figure 121: BOM view with AP

The following screenshot shows the assembly position of the BOM lites. The special glass
(Planitherm) has AP 3, for example, which causes the coating to be inside (toward the
intermediate space).




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                           328
Figure 122: BOM view with coating to AIR

The following screenshot shows the processing parameters of the sand blasting. The level is not
specified relative to the glass, but absolutely with regard to the product structure. "Top" always
means to the "outside"; that is, according to the product structure image, toward the sun.
"Bottom" means toward the "inside"; that is, according to the product structure image, away
from the sun.




A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                        329
Figure 123: Processing parameters

The side view (profile view) can, in contrast to the top view, be adjusted with SN.ini settings
according to the user's ideas.
In the example shown here, the side view (right) is shown as if the user goes to the right of the
set-up glass structure (to the side of his right hand) around the structure until he sees the profile.
The side view (bottom) is shown as if the user would dive under the glass structure until he sees
the profile.
The arrows next to the side view point in the direction of the "outside" (toward the sun), with
regard to the top view, toward the "top."
Arrows, positioning of the side view, and structure of the side view can be configured in the
SN.ini. (for description, see below.)




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 330
Figure 124: SNLive sketch zoomed


         49.2.2.          Restrictions
When changing the assembly position of a lite, the positioning of processings on the lite are not
changed. The consequence can be that after turning, the processing is not where the user expects
it, especially if whole glass structures are turned (changing of the AP of the header part).
See AWDesk #412275


         49.2.3.          Documentation of the SN.ini switch
The documentation of the SN.ini switch can be found under:
\\Jupiter\DOKU_DocuWare\Shaping_Nesting\!General\Installation_Configuration\SNINI_XML_Do
ku\SNINI-Doku.xml
(open xml file with Internet Explorer, Edge does not work)
All settings that affect the side view are in the "Picture" area and contain the word "Profile" in the
switch name.



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                331
49.3.           Configuration
        49.3.1.         DATEI_REF_PFAD
In A+W Enterprise, the environment variable DATEI_REF_PFAD must absolutely be configured. In
this path, all file references are stored, especially also template, macro and motif files in the
appropriate subfolders.
The subfolder for templates is called "template."
The subfolder for macros is called "macro."
The subfolder for motifs is called "motif."
To prevent problems with the Samba release, a Windows directory with path specification in UNC
notation should be used.
If a Unix path must be used, the stored file path (or a superior path) must be connected as
network drive on the Windows server.
Both the A+W Enterprise CAD service as well as the A+W CAD Designer (Shape) require access
rights to the path stored in DATEI_REF_PFAD as well as all subdirectories.
In the OrderXML file, macro and motif files are transferred with the complete file path. If in the
OrderXML file the basic path (DATEI_REF_PFAD) is missing in the OrderXML path specification for
motifs and macros, you must check whether the OrderXML service can access the macro/motif
path.
Within a configuration of the internal client separation, there has to be a definition of the
environment variables with site 0. The master data is stored in the directory defined with site 0.


        49.3.2.         SNFILES_DIR
The environment variable SNFILES_DIR is defined in A+W Enterprise. The file path stored here (or
a superior path) must be connected as network drive on the Windows server.
Both the A+W Enterprise CAD service as well as the access rights required by A+W CAD Designer
(Shape) to the path stored in SNFILES_DIR as well as all subdirectories.
The variable must absolutely be configured if you are working with A+W CAD Designer (Shape)
files in A+W Enterprise. It contains the path to the A+W CAD Designer (Shapes) files.
For OrderXNL transfer to A+W Production with attached A+W CAD Designer (Shapes) files,
SNFILES_DIR must match the configured path for the A+W CAD Designer (Shapes) files in the A+W
Production (POOL_SN/DATAFILEPATH), which can be reached via the menu: Master Data >
Configuration > Rough Scheduling > (Shaping & Nesting) Data File Path (see also #347756). Since
in the OrderXML file only a relative path is transferred, the SN file can only be found in AWP if the
root directory is known.
Glass flipping problem (AWDesk #398256)
Caution: Since AWDesk #398256 ("glass flipping problem") there is an additional environment
variable in AWP (ALCIM_SHAPE / SNERPPATH), which must also be configured if the AlcimWorks is
set so that it may manipulate SN files. In this case the path that is stored in the AWP environment
variable POOL_SN/DATAFILEPATH is used in order to save copies of the SN files modified by
AlcimWorks.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                332
In this case, the paths stored in the AWE environment variables SNFILES_DIR and the AWP
environment variables ALCIM_SHAPE/SNERPPATH must match so that SN files attached in AWE
can be found again in AWP. The path that is used for SN files if you are working in AWP with 2
directories must, according to Wolfgang Trost, be another than P:\SN. P:\SN is the default setting
for POOL_SNDATAFILEPATH and it cannot be foreseen what will happen if this setting is changed.
If a system has to be reconfigured after the fact, that is, SNFILES_DIR must be set to a different
path, it is absolutely necessary that all SN files generated/used in AWE are moved too
(subdirectories TOE, DXF, data subdirectories). Since in AWE only the relative path of the SN file
(below SNFILES_DIR) is saved in kposp.brokefile, otherwise the SN files generated with the old
configuration could no longer be found when opening a production sketch.


        49.3.3.         SN_CADFILES_DIR
If this variable is active, then the *.sn files for the ALCIB Shaping/Nesting connection are divided
across several directories (YMM/DD*.sn).
Caution: in the iTOE, the variable is not evaluated. SN files that are generated by the call of the
iTOE are written to the directory $SNFILES_DIR/TOE/<Year>/<Month>/<Day> by default.


        49.3.4.         SNLIVE_EVAL_PRINTFLAG
If the variable is active, the print indicator for the processings is evaluated in the print service
when the SNLIVE sketch is generated. Depending on the form to be printed, the system decides
which processings appear on the sketch. The variable does not influence the display of the SNLIVE
sketch in the frontend. Here all processings of the AWType catalog always appear on the sketch,
independent of the print indicator.


        49.3.5.         Restrictions to be observed
        1. The SN sketch that the user sees in the order entry is not the same that appears on
           the printout. In the SN sketch of the order entry, all edits are still displayed,
           independent of the print flag.Exception: An SN file is attached to the item. In this case,
           the SN sketch in the order entry shows the image that also appears on the printout.
        2. If an SN file is assigned to an item, the drawer of the SN file is responsible for ensuring
           that the print sketch is in the correct form, i.e. the print sketch only contains the
           processings that the recipient of the print sketch is to see. In this case, the print
           program does not influence the print sketch.
        3. When the iTOE is used, the same applies as in point 2: When using the iTOE to attach
           an SN sketch to an item, the user operating the iTOE is responsible for ensuring that
           the print sketch contains only the processings that the recipient of the print sketch
           should see. In this case, the print program does not influence the print sketch.


49.4.           Sketches for spacer headers
(AWDesk #449895)
A spacer sketch differs from a glass sketch in the missing surface color. So the spacer sketch is
white. The glass sketch is usually blue.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    333
Zoom view is not possible for spacer sketches.


49.5.           SNLive Zoom
        49.5.1.         Configuration
The non-modal SNLive ZOOM sketch is activated with the env variable SN_ZOOM_NONMODAL.
The default dimensions of the zoom window can be specified with the env variables
SN_ZOOM_HEIGHT and SN_ZOOM_WIDTH . If these variables are not active, the front end uses
the default dimensions stored in the program.
CAUTION: It is recommended that you use the non-modal zoom sketch
(SN_ZOOM_NONMODAL=ON)!
When using the modal zoom, there can be undesired side effects on through to the crash of AWE.
If the variable SN_ZOOM_NONMODAL is not active, a message is output in the front end log,
which indicates that the variable should be set in order to prevent program crashes. The variable
is stored in the table alenv as default ON and ACTIVE (#368320, #412111).


        49.5.2.         Functions
When opening the SNLive zoom sketch, with appropriate configuration
(SN_ZOOM_NONMODAL=ON) now the AWE window is no longer locked. The zoom sketch can
therefore remain open regardless of the operation of AWE. An updating of the zoom sketch is
done at each point in time when the SNLive sketch is also updated. The zoom sketch can be
changed by dragging the size of the window. Maximizing and minimizing are also possible.
In case of an item change, the zoom sketch of the last item remains in place until the SNLive
sketch is displayed for the current item. For performance reasons, there is no additional update
with each item change.
The size of the locking (by default active) zoom sketch can also be adjusted, maximized and
minimized. Here it must be noted that minimizing the sketch is not sufficient in order to be able
to keep working in AWE; the zoom sketch must be closed completely.
The non-locking zoom sketch is activated with the env variable SN_ZOOM_NONMODAL.
The default dimensions of the zoom window can be specified with the env variables
SN_ZOOM_HEIGHT u=and SN_ZOOM_WIDTH . If these variables are not active, the front end uses
the default dimensions stored in the program.


49.6.           SNLive sketch in the Print Service
        49.6.1.         Evaluation of the print identifier
(AWDesk #424283)
If the print service requests an SN sketch for an item, a special logic runs if the env variable
SNLIVE_EVAL_PRINTFLAG is active. The print flag (aufstrukt.druckkz) is checked for each AW type



A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               334
processing of the BOM and a decision is made whether the processing appears on the SN sketch
based on the current form type and the setting of the print flag.
Print flag „N“   =>      Processing is not printed
Print flag „Y“   =>      Processing is printed
Print flag „P“   =>     Processing is printed, if the form type is „Production paper“.
Print flag „V“   =>     Processing is printed, if the form type is „Sales paper“.


49.7.            Error research SNLive sketch
        49.7.1.         Incorrect model dimensions in the SN sketch
During DXF import
Check whether there is a kmodparam record with refflag=1.
See also AWDesk #452561, #427378, #423222
During EDI orders
Phenomenon: for EDI orders, the SN sketches are printed with the incorrect dimensions. Only the
dimensions on the sketch are incorrect. The dimensions in the item descriptions on the printout
are correct.
The cause of this is that of the kmodparam records of the EDI item, none is marked with refflag=1.
For the SN sketch generation, it can then not be decided which kmodparam record contains the
valid model dimensions. As a result, no dimensions are transferred to the SN.
In this case, SNLive uses the default dimensions from the model file for the sketch (probably).




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 335
50. Connection to A+W CAD Designer (Bars)
AWDesk #349983
In A+W Enterprise, only horizontal and vertical muntins and omitted muntins can be entered
directly. Diagonal or bent muntins cannot be entered in the A+W Enterprise internal muntin
entry.
To enter and produce diagonal or bent muntins, the module "A+W CAD Designer (Bars)" is
required. With this module, it is possible to enter more extensive muntin patterns (see separate
documentation).
Files that were created with the "A+W CAD Designer (Bars)" module can be assigned to an A+W
Enterprise item.
Warning: if this connection is configured, the item-specific private field kposp.privat_char cannot
be used for other purposes.


50.1.           Order entry
In the item entry, it is possible to fill item-specific private fields (environment variable
KPOS_LABEL1-3). For this connection to A+W CAD Designer (Bars), the field kposp.privat_char is
used. The appropriate label text is defined with the environment variable KPOS_LABEL3. You can
reach the field on the item level via F4 - d private fields. Here, you can store an AWD file name in
the appropriate named field.
The muntin pattern from a file created with A+W CAD Designer (Bars) can be displayed in the
order entry if the environment variable AWDESIGN_BILD_BASISPFAD is active.


50.2.           Transfer to production
If the field kposp.privat_char1 contains a file name for a file created with A+W CAD Designer
(Bars), then it is also transferred to A`W Production in the OrderXML interface. The transfer can
be switched off with the environment variable PMXPOOL_NOAWDFILE. If this is NOT active, the
value from kposp.privat_char is written to the field <ORDER ITEM - USER EXTENT - PRODUCT -
PRODUCT_ELEMENTS - Item BarGrid – reference>.

Where the production expects the transferred file is configured separately in A+W Production.


50.3.           Print
The muntin pattern from a file created with A+W CAD Designer (Bars) can be printed via the print
service if the environment variable AWDESIGN_BILD_BASISPFAD is active. For further information
about configuration of the printout, see the configuration instructions for the print service "EN-
CONFIG-A+W Enterprise Print Service".


50.4.           Environment variables
AWDESIGN_BILD_BASISPFAD (client reference: no)


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                336
This variable specifies for the A+W CAD Designer (Bars) the basic directory in which the file is
located. In the variables, a Windows path (UNC) has to be stored, which can be reached both via
the A+W Enterprise front end as well as by the print service.
KPOS_LABEL3 (client reference: no
This variable can carry the lead text for a private item field. The field is of type CHAR
(kposp.private_char)!
PMXPOOL_NOAWDFILE (client reference: no)
The environment variable is evaluated in ALCIM transfers (OrderXML, direct import). If it is ON
and active, there is no A+W Enterprise - A+W CAD Designer (Bars) connection.
The entry in table field kposp.privat_char will not be analyzed as an A+W CAD Designer (Bars) file
name. The field can be used for other purposes in this case.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                             337
51. Marginal income
51.1.           Order entry
The correction VOOD is the employee authorization for whether orders with margin violation may
be entered (see "EN-CONFIG-A+W Enterprise EDV Module Abbreviation").
The limits for the margin per position are defined via the environment variables
MAX_POS_SPANNE and MIN_POS_SPANNE. The settings in the environment variables will
override those in the file $ALDATPFAD/steuerp.dat. When the margin of an item is exceeded, the
user is informed accordingly, provided that he does not have the VOOD right. Input is still possible
if VOOD="r", but no release. The order is transferred to the release pool with a note "VIolation of
margin".


51.2.   Negative/minimal        coverage                                               amount
  according to cost calculation
AWD #90508 / 01.2005
Since Version 3.1, with appropriate configuration, even orders with a negative contribution
margin caused by additional cost calculation in the background can no longer be transferred to
the release pool; instead, they are placed in the release pool.
Prerequisite: The cost calculation is configured including labor and machinery costs
The foreground check for negative contribution margins used to be linked to the VOSE
authorization; this proved to be impractical, however. This dependency was cancelled. The
contribution margin check was completed by the analysis of the lowest possible margin.
The authorizations VOSE and VOOD are written in variable kauf.erfrecht. The user rights are
checked again after cost calculation via the production system.
All 3 markers for the release pool can be maintained and modified:
STAMMDATEN=>SCHLÜSSEL=>SYSTEMSCHLÜSSEL=>TEXTZUSÄTZE:
        105 : for price area
        106 : for marginal income
        107 : for margin in item
Orders that are transferred to the release pool due to a general violation of the contribution
margin can be found there via sperrmodus =9 (table ‚tekapfrei’). When the price area is violated,
sperrmodus is set to 11; if the margin is violated in the item, this is set to 12.
Orders that are shown with lock mode 9, 11, or 12 in the release pool, can be released only by
users with the appropriate rights. Lock modes 9 and 12 require the VOOD authorization while lock
mode 11 needs the VOSE right.


The margin check was expanded and optimized again for released orders regardless of employee
rights.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               338
QR 23/07 - Margin check including production costs (AWC_CHECK_MARGIN)
See „EN-CONFIG-A+W Enterprise System” section „Background process ‚intauf‘“



        51.2.1.          Environment variables
CHECK_DB_MANR (client reference: no)
The employee number of the employee who is notified is entered in the variable if the order
receives a negative marginal income due to additional production costs.
CHECK_MINUS_DB (client reference: no)
The orders that have received a negative contribution margin of MIN_DB_WERT due to
production costs are handled in a special way:
=1 - an info mail is sent to the employee determined by CHECK_DB_MANR.
=2 - in addition also the user gets an info mail
=3 - in addition also the orders that are activated for the first time will be saved in the release
pool with corresponding note.
IMPORTANT! IF =3, IT IS ASSUMED THAT MODUL_KOSTENKALK=1 IS ACTIVE, NOT 3!


MIN_DB_WERT (client reference: no)
The minimum contribution margin value (in home currency) for the evaluation is defined in the
variable if CHECK_MINUS_DB is active. If CHECK_MINUS_DB is active, but this variable is not, then
a minimal value of 0 is assumed.


MAX_POS_SPANNE (client reference: no)
The maximum permissible margin (%) is defined in the variable in the VOOD authorization.


MIN_POS_SPANNE (client reference: no)
The minimum permissible margin (%) is defined in the variable in the VOOD authorization.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    339
52. Cost calculation
52.1.             Prerequisite
See also "Prices" manual, "Cost calculation" chapter
Article master data:
    -     Supply type
    -     Quantity unit
    -     Bill of materials (BOM)
    -     Dimension inheritance / formulas
    -     Cost calculation flag
    -     Loss
Configuration:
    -     Miscellaneous Environment variables
Prices:
    -     Cost price list (see also "EN-CONFIG-A+W Enterprise Internal Client Separation")
In case of after the fact introduction of the cost calculation, attention must be paid that during
entry with reference, the purchase prices are calculated anew, since otherwise a back calculation
from the PO does not work. If there is no material cost record, no costs can be written back from
the PO.


52.2.             Cost types
    •     Material costs – are calculated in A+W Enterprise
          All parts of the BOM are used for the material cost calculation. Here, only parts, no
          processings or metaparts are considered. This means that all materials for which the
          costs should be determined are created as part in the article master data and must be
          entered in the BOM. In addition, the supply type influences the cost calculation.
          12.04.2023: [AW-136032] / Azure #88066 / alcib - 13.04.14949
          In the course of the "extended workbench", processings are ordered. For internal
          reasons (for the back calculation of costs), the material cost record for the processings
          is required. If a processing with the quantity unit "linear meters" is ordered, then the
          millimeters are converted to linear meters within the material cost calculation.
          A detailed description is included in the "Prices" manual in the "Cost calculation"
          section.

    •     Machine costs – are calculated in the production system and reported back to A+W
          Enterprise
    •     Personnel costs – are calculated in the production system and reported back to A+W
          Enterprise
    •     Internal contribution margin – calculated in A+W Enterprise

A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   340
52.3.           Process
The material costs are determined for the entry of an order in the course of price calculation.
Material prices for purchased subparts can be reported back from the PO after the fact
(environment variable EK_RUECKRECHNUNG; intauf -17)
The machine – and personnel costs are calculated in the production system and then reported
back to A+W Enterprise (intauf -10).
During the entry, the material costs for each item are calculated and from this, a coverage
margin. The order is processed after saving in the order entry by the background process intauf
(still -3). After that, it is transferred to the production system for calculation of the machine
and personnel costs. As long as the order was not yet reported back by the production sytsem,
the order remains locked with still -10. If the production system reports the costs to A+W
Enterprise, the order will be processed again by intauf -10. Here, the machine and personnel
costs are written back to the order, new revenues and contribution margins are calculated.
Which parts of the BOM are considered within the material cost calculation is described in
detail in the "Prices" manual.
The flow can be changed through the configuration with the environment variables
AWC_POOL_NO_KOSTENKALK.
See also "EN-CONFIG-A+W Enterprise Production Interface"


52.4.           Material costs
The material costs for non order-related purchased goods are maintained in a separate cost price
list (Master data -> Conditions -> Daily conditions -> General daily conditions - Purchasing) (s.a.
„EN-CONFIG-A+W Enterprise Internal Client Separation“). In addition, the average stock price can
be used for stock goods (environment variable KOSTENKALK_MIT_LAGERPREIS; see also section
"Costs for articles in stock"). In the stock module, there is also a stock evaluation according to the
FIFO and LIFO method. These values are currently calculated only in stock but not used for the cost
calculation.
What quantities are used for the cost calculation can be configured. For production articles, the
loss defined in the article master data is always used (see manual). For articles with the supply
type stock and PO, this can be configured with the environment variable
KOSTENKALK_MIT_VERLUST.
So that the quantities for the material costs for the individual BOM articles can be calculated
correctly, the dimension inheritance in the BOM must be correct (e.g. steps, spacer deduction,
quantity of sealant, etc.). This is done via the formulas in the BOM. The quantity unit for the
articles in the master data must also be maintained correctly for BOM parts.
For muntins, the individual parts in the order entry are calculated using the muntin geometry. For
precise cost calculation, you must pay attention that the articles contained in the muntins, such as
muntin crosses, edge seals are present in the muntin's BOM.
If during entry of an order in the master data no correct dimension inheritance is present for the
article, it is no longer drawn with a change in the master data. The order item must then, so that



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  341
the correct dimensions are taken account of after the change of the master data in the order, be
deleted and re-entered.
If the customer wwants to work with the cost calculation sometime, the articles should be created
as early as possible with the correct dimension inheritance. Otherwise, after activation of the
module, there can be problems, e.g. for orders with reference.


52.5.           Fixed costs/internal contribution margin
FIXKOSTEN_MATERIAL (client reference: no)
In the variables, the percentage share of material costs per item is specified that is booked as
fixed costs. Use in parallel with internal DB is not possible!
poskost.satztyp = 6 – fixed costs
poskost.tnr = -1 – fixed costs for material


FIXKOSTEN_PMS (client reference: no)
The variable controls the booking of percentage share of machines and wage costs per item as
fixed costs. If the variable is active, the data is also overwritten in the table kposp.intdb. Use in
parallel with internal DB is not possible!
poskost.satztyp = 6 – fixed costs
poskost.tnr = -2 – fixed costs for personnel and machines


52.6.           Machine and personnel costs
The machines and personnel costs are not calculated in A+W Enterprise. They are calculated in
A+W Production and then reported back to A+W Enterprise.
If an order with reference is entered, then the production costs are retained. Only after the
transfer to production (Configuration) are the production costs updated.
01. December 2022: With a special configuration (environment variable
    KEINE_KOSTEN_BEI_BEZUG), it is possible to achieve that the production costs of the old
    order are deleted during entry with reference.


52.7.   Inheritance of manual changes in cost
  calculation
In the dialog of the cost calculation results (Order entry > Item > Price field > Ctrl+F10) different
data can be changed manually. These changes normally only affect the costs of the current item.
If the environment variable COPY_MANUAL_COSTS is active, the question "Do you want to apply
the manual changes to all items of the document? appears. Configuration is possible for individual
employees.

If the question is answered with "Yes", the manually changed values are transferred to all cost
rates of the order for which the cost type, the article number, the reference article number and


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                      342
the supply type are identical to the changed cost rate. This also means that it is only inherited by
already-existing items.

If the question is answered with "No", the changes remain active only for the current item.

If the dialog is entered more than once, the answer only applies to the changes after re-entry.
This allows you to make local and global changes in different steps.

Only the manual changes to the following fields are transferred to other items:

            -   Manual flag
            -   Cost Center
            -   Loss
            -   Quantity/Calculation
            -   Price per qty.unit
            -   Item price
            -   Date
            -   Price per quantity unit / Completion report
            -   Price per item / Completion report

Please note the following: If the calculated quantity is changed manually and then transferred, no
comparison with the original quantity takes place. The changed quantity is also entered in the
other items. If, however, the loss is changed and transferred, the calculated quantity is
recalculated based on the original physical quantity. The same applies to the price per item. If the
price per item itself is changed, it is transferred to the other items regardless of the quantity and
the price per quantity unit. However, if you change the price per quantity unit, the item price is
recalculated.

If you make a manual change to one of the cost rates, this record is marked as "Manual". This
"Manual" indicator means that this record is not changed during a recalculation. All data records
that are affected by a transfer of manual changes also receive the "Manual" indicator. However, if
you want to recalculate the data record, you can delete the "Manual" indicator with <F3>. This
deletion can also be transferred to the cost rates of the other items.


52.8.   Quantity unit linear meter in the material cost
  calculation
# 454051
Previously, in material cost calculation for articles with the quantity unit "linear meter", it was
assumed that the correct quantity was calculated using the master data via a corresponding
formula. However, with some BOM setups, this can lead to problems with the quantity calculation
for the normal price calculation. For this reason, the quantity calculation for linear meter items
has been adjusted so that millimeters are converted to linear meters when the environment
variable KOSTENKALK_MM_IN_LFM is set. Before setting the environment variable, please note
that no item with the unit of measure "linear meters" may be calculated using a size transfer

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                343
formula, since otherwise the quantity calculation of the cost calculation will convert this value
into linear meters again.
12.04.2023: [AW-136032] / Azure #88066 / alcib - 13.04.14949
In the course of the "extended workbench", processings are ordered. For internal reasons (for the
back calculation of costs), the material cost record for the processings is required. If a processing
with the quantity unit "linear meters" is ordered, then the millimeters are converted to linear
meters within the material cost calculation.


52.9.            Costs for articles in stock
With the environment variable KOSTENKALK_MIT_LAGERPREIS it is possible to control that the
average stock price is used for the cost calculation for articles in stock. The variable has 2
variations
ON – first there is a search for price in the material cost list. If no price is found there, the average
stock price of the article in the standard stock is used. If no price is found there either, the user
receives a corresponding message. The message (number 30482) can be suppressed with
customizing. It must be heeded here that in this special case, the "Starting with PLCd" logic does
not apply. If the price is found in another than the material cost list, the price for the material cost
calculation does not apply.
PRIO - With active variable with the value PRIO, for stock articles first the average price of the
standard stock is obtained and if it cannot be determined, only then is the price obtained from
the calculation list.
Whether the price that is reported from the stock is interpreted as unit price or price per quantity
unit depends on the stock master data. If in the stock a "variable" variant is defined, then the
price is interpreted as price per quantity unit.
Here it is irrelevant whether or not there is inventory for the article in question.


52.10.           Writing back of changed costs from the PO
The writing back of the costs from purchasing into the order must be configured explicitly.
If the costs in the order are overwritten manually, the costs for this part from purchasing are no
longer taken over into the order.
Environment variable EK_RUECKRECHNUNG. There are others. See section „Environment
variables“
Prerequisite: material cost calculation
In case of after the fact introduction of the cost calculation, attention must be paid that during
entry with reference, the purchase prices are calculated anew, since otherwise a back calculation
from the PO does not work. If there is no material cost record, no costs can be written back from
the PO.


        52.10.1.         Complaint PO
If a PO is marked as complaint PO, then there is no writing back of the costs to the associated
order. There are several variants for how this can be used:


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   344
    a) Environment variable REKLAM_NO_RUECKRECH (client reference: no)
If the variable is set, for complaint POs (kauf.reklamart > 0 or kauf.reklamort > 0), there is no
writing back of the purchase price to the order.
    b) Environment variable EK_RUECKRECHNUNG_NUR_ERSTE_BEST (client reference: no)
If the variable is set, the prices are written back to the order from the purchase documents only
for the first document (first PO). If there is reference to a PO (new PO entered), then these prices
will have no effect on the order.
The sole deletion of the item price is not a criterion for hindering a cost write-back.


        52.10.2.         Free POs
If the item price is equal to zero in a PO, then it is not written back to the associated order.
However, it can be configured that this happens nevertheless.
EK_RUECK_NULLKOSTEN = ON
alcib - 13.04.13128
This logic has now been expanded. If a PO is set to "free", zero prices are written back to the
order and not the item prices included in the PO.
EK_RUECK_NULLKOSTEN = 2


        52.10.3.         Extended Workbench
See for the extended workbench the separate configuration instructions "EN-CONFIG-A+W Clarity
Extended Workbench" in the "Cost calculation" section


        52.10.4.         Use of PU discounts
If in the PO discounts are used (not discounts of type "costs" in the order), then it must be defined
with an environment variable how these discounts should be handled. It must be decided
whether and which discounts (none, only redistributed, all) should be written back to the order as
costs.
RUECKSCHREIBEN_EK_IN_VK (client reference: no)
This variable is only evaluated if EK_RUECKRECHNUNG is ON. This variable specifies which value is
written back from the purchasing document to the appropriate sales transaction:
0 – net unit price (kpos.nstpreis) – includes no discounts)
1 – net price/piece less discounts (kpos.erloes/kpos.menge)
2 – Net price/pc. less all discounts (kpos.ekverglas/kpos.menge)


        52.10.5.         Multi-stage cost write-back
[AW-106081] (July 2022)
Writing back the costs of the internal suborder in the original order



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  345
If an internal component order (self-transfer environment variable IBHAUS) returns from
production after the cost determination for cost totaling, the associated internal PO is put in the
background process intauf. For this, there is a new intauf processing type (-117), which takes over
the totaled costs including the written-back cost discount (kpos.ekerloes) from this component
order to the internal PO as PU item price (kpos.npospreis) and recalculates the PU unit price
(kpos.npospreis/kpos.menge). With existing written-back discounts, the PU revenue is also
recalculated.
The component order is put before the intauf (KOSTENKALKEK) to determine the new PU costs
with still=-15. The costs in the original order are totaled anew, the new PU price, the cost
discounts from the original are recalculated and the contribution margin re-determined. Thus, the
2-stage reporting of the costs from the glass order via PO for the component order is guaranteed.
If in the internal order the elements are also ordered externally, then the PU prices from the
external order are taken over into the internal order through writing back (still = -17). Here,
analogous to the production costs reported from AWP, a re-totaling of the costs for the internal
order (still = -15) is initiated. And here, the logic described above also applies, which then takes
over anew the costs determined incl. discounts into the order and then into the main order.
Generally, it applies that each change of the prices or costs in this internal component order due
to the production costs from AWP or due to the purchase prices for external POs is written back
to the internal PO and taken over as material costs for the BOM element (of the appropriate
component).
To be noted is that the write-back chain is only triggered with the successful reporting from
production for the component order and not directly after generation incl. price calculation, since
the final costs are only known after the calculation of all costs in the component order.
Important: Furthermore, it must be noted that if the price is changed manually in the internal PO,
then the costs from the internal component order will no longer be written back to the PO.
Environment variables
•   VK_RUECKRECHNUNG = ON
•   EK_RUECKRECHNUNG = ON


52.11.          Cost calculation after order release
[AW-106108] July/2022
FREIPOOL_MIT_KALK = ON / RABATTMETHODEN_UPDATE_EK = X1|X2 - methods for update.
When orders with longer lead times are entered, it can happen that the material costs at the time
of production start have already changed and so the contribution margin calculated no longer
corresponds to current costs. Since these orders are usually put in the pool first and only released
from there later, you can now link the release generally to a new material cost calculation. If the
logic is active, then the pre-defined cost discounts are updated. The discount methods that must
be updated are stored in an ENV switch separated by |. Only existing discounts with this method
will be updated. If the discount was entered later in the master data, it is not re-drawn.
Caution: The recalculation only occurs if the order is released directly from the order release.
However, if the order is released after the fact via the order entry, there is no recalculation of the
material costs or discounts.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 346
52.12.          Special prices
Special prices that are created under Master Data - Conditions - Special Prices are not considered
in the material cost calculation in the order for subparts. Only through the PU back calculation
from the PO are the costs in the order corrected.


52.13.          Ready report costs
This is done via the booking process "rserv" with aufruftyp=5. This call type is written for each
finished report if the environment variable PB_STATISTIK is active.
PB_STATISTIK (client reference: no)
If the variable is set, the table ypbpos (production report) is posted to in case of a ready message.




52.14.          Environment variables
CHECK_MINUS_DB (client reference: no)
The orders that have received a negative contribution margin due to production costs are handled
in a special way:
        1 - an info mail is sent to the employee determined by CHECK_DB_MANR.
        2 - in addition also the user gets an info mail
        3 - in addition the orders that are activated for the first time will be saved in the release
        pool with corresponding note.
IMPORTANT! If =3, it is assumed that MODUL_KOSTENKALK=1 is active, not 3!


COPY_MANUAL_COSTS (client reference: order)

If this variable is active, manual changes to the cost calculation records can be copied from one
item to all other items. #416295


EK_RUECK_NULLKOSTEN (client reference: no)
If this variable is set, the purchase price of the order is updated when the price in Purchasing
(purchase order generation, purchase order management, advice, man receipt of goods, man.
invoices, invoice control) changes to the value zero.
ON – only the item price is considered
2 – A zero price is also written back if the item price!=0, but the PO is on "free".


EK_RUECKRECHNUNG_NUR_ERSTE_BEST (client reference: no)




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  347
  If the variable is set, the prices are written back to the order from the purchase documents
only for the first document (first PO). If there is reference to a PO (new PO entered), then these
prices will have no effect on the order.


FIXKOSTEN_MATERIAL (client reference: no)
In the variables, the percentage share of material costs per item is specified that is booked as
fixed costs. Use in parallel with internal DB is not possible!
FIXKOSTEN_PMS (client reference: no)
The variable controls the booking of percentage share of machines and wage costs per item as
fixed costs. If the variable is active, the data is also overwritten in the table kposp.intdb. Use in
parallel with internal DB is not possible!
FREIPOOL_MIT_KALK (client reference: no)
For the order release from the release pool, a cost calculation is initiated again.
KALK_WIE_PREISBERECHNUNG (client reference: no)
With a set variable, the quantities to be calculated for the production calculation considering the
measurement rounding are calculated.


KEINE_KOSTEN_BEI_BEZUG (client reference: no)
Machines and personnel costs are deleted with reference in the order.


KOSTENKALK_MIT_LAGERPREIS = PRIO (client reference: no)
   With active variable with the value ON, in the cost calculation, first a price from the calculation
list is determined for stock articles. If no price is found in the calculation list, then the average
price of the standard stock is obtained.
  With active variable with the value PRIO, for stock articles first the average price of the
standard stock is obtained and if it cannot be determined, only then is the price obtained from
the calculation list.
KOSTENKALK_MIT_VERLUST (client reference: no)
This environment variable can contain a list of up to ten article types. If this environment variable
is active, the cost estimate for child parts with supply type Stock or Purchase Order whose article
category is included in the list calculates the costs with material loss.
KOSTENKALK_MM_IN_LFM (client reference: no)
Within the material cost calculation, for linear meter articles, the quantities are converted from
millimeters to linear meters. Then no separate measurement inheritance formula is required.
MODUL_KOSTENKALK (client reference: no)
This variable activates the production cost calculation. It is used instead of a purchase price
calculation to determine the purchase price. The setting 3 may only be used with PMS, NOT
with A+W Production!
          1 - with PMS or AWP for determination of personnel and machine costs
          2 - without PMS or AWP for determination only of material costs


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 348
          3 = 1 - changed background processing sequence for released
           orders (only PMS!! not AWP!!)
         INTAUF->PMS (scheduling and cost calculation) ->INTAUF (cost calculation)
  CAUTION: number ranges for order and quotation must be disjunctive


ORDERED_PROCESSING_KOST (client reference: no)
This variable activates the cost calculation logic for the extended workbench. It is only evaluated
when the "Extended workbench" module is active.


REKLAM_NO_RUECKRECH (client reference: no)
If the variable is set, for complaint POs (kauf.reklamart > 0 or kauf.reklamort > 0), there is no
writing back of the purchase price to the order.


RUECKSCHREIBEN_EK_IN_VK (client reference: no)
This variable is only evaluated if EK_RUECKRECHNUNG is ON. This variable specifies which value is
written back from the purchasing document to the appropriate sales transaction:
0 – net unit price (kpos.nstpreis) – includes no discounts)
1 – net price/piece less discounts (kpos.erloes/kpos.menge)
2 – Net price/pc. less all discounts (kpos.ekverglas/kpos.menge)


RUNDUNG_3NACHKOMMASTELLEN (client separation: no)
If this variable is active, the price-relevant dimensions are rounded to three decimal places. By
default, rounding is to 2 decimal places.
  ON - Sales
  SA+PU - Sales and purchasing including material costs
Note: This does not affect the physical quantity of the position. RUNDUNG_PHYMESTK_3STELLIG
is responsible for this.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  349
53. Prices
It generally applies that conditions have priority over prices. This also applies for the minimum
calculation.


53.1.            Roundings
Within the price calculation, there are different roundings -- size roundings and price roundings.
They can be defined and controlled differently. The size roundings are only done for the price
calculation and create a price-relevant quantity.


        53.1.1.          Precision of the rounding
RUNDUNG_3NACHKOMMASTELLEN (client separation: no)
If this variable is active, the price-relevant dimensions are rounded to three decimal places. By
default, rounding is to 2 decimal places.
  ON - Sales
  SA+PU - Sales and purchasing including material costs
Note: This does not affect the physical quantity of the position. RUNDUNG_PHYMESTK_3STELLIG
is responsible for this.



        53.1.2.          Processings
The rounding for processings can be set equal to the rounding of the glass article.
(BEARBMASSRUND_WIE_GLAS)


53.2.    Price calculation for subelements based on
  the item dimensions
[AW-125576] / QR 2403
Within the article price vectors and the special article prices, it is now possible to define that for
the price calculation that the item dimensions and not the dimensions reduced by dimension
inheritance formulas should be used. This function is only implemented for the pricing methods
"PCd prices general". If the flag in the price vector is set, but not for the special article price, then
the setting of the special aticle price counts. The condition hierarchy does not apply here.
The flag is also used for the calculation of the quantity fo quantity-dependent scaled levels.
The dialogs for the proportional customer article prices and the special article prices with fixed
IGU structure were not expanded with the new logic.
Similarly, the price calculation in the PO pool and the stock assessment were not expanded.



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   350
Similarly, the flag is not taken over into the order data. Thie means if for a processing the pricing
type is changed manually, this flag is not applied.
The new function is not for
    •   stock assessment,
    •   price calculation in the PO pool,
    •   rack invoices
    •   old pricing method "IGU matrices", "processing matrices"
    •   pricing method "PCd whole-glass systems"
    •   pricing method "PCd processings"
    •   pricing method "PCd color articles"
    •   Customer-specific material calculation customer 10
    •   Proportional prices (enf? KUARTPRS_GRUPPE)
    •   Fixed IGU structure (KONDITIONEN_FESTER_ISOAUFBAU)




53.3.           Global price maintenance
Currently, global price maintenance is available on the following menus:
    •   Master data – Prices – IG Prices – Exchange TG/LAMI/Special
    •   Master data – Prices – PCD prices – All article price vectors
    •   Master data – Prices – PCD prices – Processing vectors
    •   Master data – Prices – PCD prices – LAMI articles – LAMI exchange / additional prices
    •   Master data – Prices – PCD prices – Colored articles
    •   Master data - Prices - PCD prices - Variant prices
    •   Master data - prices - Muntin prices - Muntin price categories
    •   Master Data - Prices - Surcharges - Shape surcharges
    •   Master data - Conditions - Special prices - Article prices (no copy function, only conversion
        item-specifically)
    •   QR09/2022: Master Data – Conditions – Special Prices – Processing Prices (no copy
        function, only conversion)



        53.3.1.         Functions in the global price maintenance
Key F5: Copy values from first line.
As soon as values for the increase have been entered in the first line (step 1), you can copy these
values to all additional steps (lines). This way, you can easily increase all steps with the same
values (e.g. % value) without having to enter it on each individual lines.


A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                               351
53.4.           Processing prices
        53.4.1.         Calculating no processings
AWDesk: 72311
Normally you can only define yourself for the processing whether or not it should be calculated.
However, there are constellations (e.g., use of AWBroke) where it is necessary not to calculate
processings depending on the item article.
If the environment variable SN_KEINE_BEARBPREISE is active and for the item article in the
master data the private field long1 (artikel.private_long1) is equal to 1, no processings will be
calculated. Accessories are still calculated and cannot be switched off via this function.

The decision what a processing is made using the article type.

Within the price calculation, among other things, processing and accessories are distinguished.
Which article types are price-relevant processings and which price-relevant accessories is defined
permanently in the program (see "Price-relevant article types").




        53.4.2.         Price-relevant article types
Whether or not a price is drawn for an article in the BOM depends on several conditions.
    a) There if a fixed definition of article types for which the processing prices or accessory
       prices are determined. See also the listing of the price-relevant article types and
       assignment to "processings" and "accessories" below.
    b) Settings in the article master data - article dimensioning
    c) Creation of prices and terms

Price-relevant processings are the following article types:

505 – Cuttingt                                   580 – Speak-thru
512 – Bending                                    584 – Color application
513 – Curving                                    585 – Enameling
515 – Tempering                                  586 – Etching
516 – Partial tempering                          587 – Sand blasting
540 – Other processing                   588 – Screen printing
545 – Packing                            589 – Coating
550 – Grinding                                   592 – Masking
551 – Mitering                           593 – Edge stripping
552 - Groove grinding                            595 – UV protection
553 – Arissing                                   596 – Inside thread
560 – Drilling                                   597 – Edging
561 – Countersunk hole                           598 - Forming
565 – Rounded corners                            599 – Gluing
566 – Corner cut-off                             235 – Lead muntins


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   352
570 –Corner cut-out                               703 – Wood cutting
571 – Edge cut-outs                               752 – LAMI foil cutting
575 – Handles

Price-relevant accessories are the following article types:

210 – Spacer                                     600 – Rails
211 – Colored spacer                             610 – Tubes
220 – Spacer                             700 – Heat soak
260 – Gases                                      800 – Accessories
270 – Edge protection                            820 – Bleche
280 – Capillary inserts                  830 – Fittings
300 – Foils                                      840 – Locks
320 – Color layer                        850 – Handles
340 – Resin                                      870 – Alarm transmitters
590 – Enamel strips                              999 - Other articles
591 – Stamp
594 – Pressure compensation

Article types that do not flow into price calculation
534 – Muntin construction: The article type is not considered in the addition of the prices, even if
a processing price is displayed on the processing dialog. The background is that muntins have
their own calculation logic.


        53.4.3.          Edgework for shapes
For the calculation of edgework by the linear meter, for shapes it is not the real edge lengths that
are calculated, but always the edge lengths of the circumscribing rectangle.


        53.4.4.          Processing factors
Under Master data - Conditions - Special prices - Processing prices, you can create individual
prices and factors for processing items. Here, however, the effect of the entry of a factor ! = 0 or
price = 0 is that no price is calculated. If you would like to enter a different factor here, you must
also enter a price.
Otherwise, it applies that:
The processing factors can currently only be defined in A+W Enterprise with reference to the item
or the price list. Currently, there is no possibility for defining separate factors for individual
processing items (exception: see above).
Where can processing factors be defined:
            -   Daily conditions
            -   Daily product group conditions (product group of the item)
            -   General conditions of the market partner
            -   Product group conditions of the market partner (product group of the item)
            -   Item conditions of the market partner (item - not BOM item)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  353
s.a. environment variable KEIN_TZ_BEI_SPEZARTPRS


        53.4.5.          Special processing prices
alcib - 13.04.11733 – Jan 2022
If the environment variable KUBEAPRS_VEKTOR is active, then in the "Master data - Conditions -
Special prices - Processing prices" you can store individual prices for processing vectors in addition
to prices for processing artkcles.
  If the variable is active, it is possible to store special processing prices for processing vectors.
The price calculation then first searches for a special price for the article. If no price is found, a
special price with the vector number assigned to the article is searched for next. Here, the
"Starting with PLCd" logic is considered. If starting with PLCd 1 a price for the article is stored and
starting with PLCd 5 a price for the vector, then the behavior is as follows:
PLKZ in the item = 2: The price for the article is pulled
PLKZ in the item = 6: The price for the vector is pulled
s.a. environment variable KEIN_TZ_BEI_SPEZARTPRS


        53.4.6.          Minimum processing prices
For processings in LAMI and TG items in the order, you can specify scaled minimum prices
according to the square meter in Master Data - Prices - PCd Prices - Minimum Processing Prices. If
the total of processings relevant for the comparison is smaller than the minimum price that
applies for the rounded square meter of LAMI or TG item, then this will be used as total price for
these processings.
For the comparison processing total/minimum price, only such processings are summed up in
which item master data (F4 - Price Properties) the identifier Minimum price rel. is set to 'Y'. All
other processing will continue to be calculated separately.
In the price calculation of the sale price, the minimum processing price is compared to the total of
the processing prices of all minimum price-relevant processings in the BOM. If the total is smaller
than the minimum processing price, then the minimum price is calculated and the difference
amount is allocated proportionally to the individual processing prices and the revenue
distribution.


Note:           A comparison with the minimum price only happens if the item article is a LAMI or
                TG. There is no comparison for LAMI or TG in IG.


The function is switched on separately for TG and LAMI via the environment variables
ESG_MIN_BEAPREIS OR VSG_MIN_BEAPREIS
In the general daily conditions, you can specify whether the minimum processing price should be
calculated generally (the field minimum processing price = e.g. "Y"). In the special general
conditions, you can then override this setting for particular customers (minimum processing price
= e.g. "N"). The evaluation of the minimum processing price is done only during the determination
of the sales price. For this reason, this functionality is only available for sales in the general daily



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                    354
conditions and in the special general conditions for the customer, sales objects, and customer
groups.


Example:
In LAMI, there are two minimum price-relevant countersunk holes, for which the prices 10.00DM
and 30.00DM were determined from the master data. However, the minimum processing price
for LAMI is 60.00DM.
First the total of the drillings is determined: 10+30=40.00DM,
then the difference between the minimum processing price and the total calculated:
60-40=20.00DM,
this difference amount is distributed proportionally across both drillings:
20.00 is added as 5.00 share for the first drilling and 15.00 share for the second drilling.Therefore:
in the revenue calculation, 15.00DM is written for the first countersunk hole and 45.00DM for the
second.
After the complete texting of all processings in the item, an additional text line is generated:
"Minimum processing price: xxxxx Difference: xxxxx".
The line is then only generated if such a difference (between the total of all processing prices per
item and the minimum processing price) exists.
Prerequisite: The system has been configured appropriately.
The flag Minimum price rel. in the item dimensioning of the processing must be set accordingly.
Menu: SALES⇒ORDER ENTRY, Price field, <A12>, then <DETAIL>, 3. Mode screen for processings
and <A55>, Revenue distribution
Interpane, AWDesk 25137

        53.4.7.         Minimum calculation
Within the processing vectors and the special processing price, a minimum calculation can be
specified in the basic quantity unit.
Minimum calculation ... TQU Specification of the processing quantity in basic quantity units,
the minimum price that is calculated. The basic quantity unit is determined from the article
master data. If the price-relevant processing quantity in the order is less than the defined
minimum quantity, the price for this minimum quantity is charged.
For edgework, this means that the total of the edges to be processed is compared to the
minimum calculation.
For the article type 550, this can be configured so that the minimum calculation is calculated per
edge.
MINBER_AUF_KANTE (Client reference: No)
If this variable is set, the minimum calculation per edge is calculated when the processing prices
for grindings (article category 550) are determined if the price category GR/TQ is maintained and
the article has the basic unit of measure linear meter or millimeter.
MINBER_AUF_KANTE (Client reference: No)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 355
If this variable is set, the same minimum calculation for processings is calculated as for the main
articles to be processed.


        53.4.8.            Processing group surcharges
Master Data > Prices > Surcharges > Processing surcharges
On this dialog, you create surcharges for processing groups. These surcharges are added to the
price of a processing or subpart if the processing group is assigned to the glass article in whose
BOM the processing is included.
The assignment to the processing group is entered in the article master data on the "Prices" tab in
the "Processing group" field.
Processing group surcharges are only considered if the processing price is determined from the
master data. They are not calculated if a special price is stored in the conditions.
The processing group surcharge is only calculated for processing articles with one of the following
pricing methods:
7 - Processing matrices
25 - PCd prices general
26 – PCd Processings
31- PCd colored articles
60 - UV protection


Processing group
Specification of the processing group. The code consists of two alphanumeric characters. Upper
and lower-case letters are distinguished, e.g. 5H and 5h. There is no master data table for this.
Surcharge
Specification of the surcharge. This surcharge is charged on the basic price of the processing.
Depending on surcharge type, the value is interpreted as percentage or fixed amount.
If you specify a fixed amount, the value has to fit the currency of the price list code (PLCD) to
which these surcharges are assigned.
In the order, the processing price is displayed in the item conditions including surcharge.
Price type
Specification of to what the specified price refers:
• CU/value:
The surcharge is charged as fixed value on the processing price.
If the surcharge on the order is charged as a fixed amount, the currency of the PLCd determined
for the header article applies. The currency is not converted.
• Percent: The surcharge is calculated and charged as a percentage of the processing price.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  356
         53.4.9.          Size surcharges
See section "Prices - size surcharge" below.


         53.4.10.         Parameter-dependent processing prices (formulas)
QR2406
It is now possible to create the processing prices per glass type and according to the processing
parameters (e.g., diameter for holes).
Therefore, the dialogs for maintenance of the processing vectors and processing prices have been
reworked.The main views (table view) were expanded to include the fields "Glass type" and
"Formula".
The detail view of a processing vector or of the processing prices were also reworked extensively.
On the upper part of the dialog, the "Glass type" field was inserted. The selection field
"Calculation type" has been expanded to include the value "Formula". On the lower part of the
dialog, the two-column structure has been removed. The individual data records are now all lined
up as in a table. This was necessary since a new field "Formula" for maintenance of the
parameter-dependent prices was inserted.


Master data maintenance
Master data - Prices - PCD prices - Processing vectors
Master data - Prices - PCD prices - Spec. Processing vectors
Master data - Conditions - Special prices - Processing prices

"Glass type" field:
In this field, yuou can maintain for which glass article type a processing price vector or processing
price is valid. The following values are available:
All: This data record is used for all glass article types
Basis: This data record is used for the article types
        "Float FM (100)", "Float LM (180)", "Cast FM (110)", "Cast LM (181)",
       "PVC FM (120)", "PVC LM (185)",
        "Special glass FM (130)", "Special glass LM (182)" and "Artistic glazing (175)".
TGH: This data record is used for the article types "TGH (150)".
LAMI: This data record is used for the article types "LM FM (170)" and "LM FM (183)".
IGU: This data record is used for the article types "IGU (200)".
Fire: This data record is used for the article types "cast resin FM (140)", "cast resin LM (184), "fire
protection glass FM (160)" und "fire protection glass LM (187).
If the price calculation does not find a special entry for a glass type, then the glass type "all" is
used. That is, if there are entries for "All" and "LAMI", then, for example, the data record for "All"
is used for "TGH". The hierarchy here is: "Product group, PLCD, glass type, quantity, thickness"


"Calculation type" field:




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                 357
The "calculation type" field has been expanded to include the characteristic "Formula". If this
calculation type has been selected, you can enter the "Formula" fields at the bottom of the dialog.
In the "Formula" field, you can access the variables from the article master data. If you would like
to scale the prices per diameter, for example, enter the formula "$W1 > <value>" in the field. The
entry in this field is checked for syntax, however not for whether this parameter is available with
the corresponding processing. This also means that this calculation type can only be applied for
articles with A+W processing type. However, this restriction cannot be checked due to the
complexity of the price and condition maintenance.
Starting with alcib - 13.04.18658 (17.09.2024)
Since QR 2406, it is possible to scale processing prices according to parameters. However, e.g., for
drillings it was not possible to scale according to parameters and quantity. This is possible now.
Within the formula, access to the item quantity is possible within the price calculation with "$PA".
This is not the number of drillings in a lite, but the number of lites in the item. Thus, prices
previously stored as calculation type "Pcs/Item" can now also be summarized with calculation
type "formula".
For the sequence of the steps, you must pay attention that when using "greater than" or "less
than" for example, that the order of the entries is correct.




Replication:
For this function, the tables "beavek" and "kubeapr" must each be expanded to include a new key
column "glastyp". If these tables are replicated via key replication, the configuration for both of
these tables must be expanded accordingly. The expansion is already possible BEFORE installation
of QR2406. The table expansion has already been carried out with QR2306.


53.5.           Minimum calculation
It generally applies that conditions have priority over prices. This also applies for the minimum
calculation. This means that a minimum calculation, which is entered in the general product group
conditions (Master data > Conditions > Daily conditions > Product group conditions) overrides the
minimum calculation that is entered in the article vector (Master data > PCd prices > Article
vectors)
In addition, the minimum calculation for processings can be set equal to that of the glass
MINBER_WIE_GLAS (client reference: no)
If this variable is set, the same minimum calculation for processings is calculated as for the main
articles to be processed.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                358
53.6.           Min. price
        53.6.1.         Minimum price for child parts (accessories)
The minimum price that you define under MASTER DATA => PRICES => PCd PRICES => ARTICLE
VECTORS and under MASTER DATA => CONDITIONS => SPECIAL PRICES => ARTICLE PRICES is
evaluated for item articles and in particular cases also for accessory child parts.
The child part must have an accessory article type and must be calculated by pricing method 25
PCD "general prices". The item articlein rhe process item has to have one of the following pricing
methods: IG-current, PCD-basic glass, PCD-finishing, PCD-TG, PCD-LG, or PCD-glass doors. The
minimum prices will be considered only for sales price calculation. The accessory price is first
calculated with all surcharges and the factor, and then compared with the minimum price.
This function is not available if the environment variable SPEZ_EINFACHGLAS is active.


        53.6.2.         Minimum price for IGU
The minimum price is only done after the addition of the AIR surcharge.


53.7.           Georgian bar
        53.7.1.         Prices for ordered muntins/grid patterns
Muntins are ordered as complete grid patterns. For this, in PU, a correct PU price calculation
should be achieved in the PO. For this, you have to work with grid patterns. For this, the grid
pattern must have the price method 23 "PCd basic glass". No price must be stored for the grid.
#238482 // #368937 // #393276 // #420510 // #434997


        53.7.2.         Calculation of the LM-K-R to be calculated
Prerequisite: SPROSSENKREUZE_NEU_LOGIK set



        53.7.3.         Calculation type 14 – "K or LM"
K or LM means – crossed or linear meters.
If the grill pattern does not include a cross, then calculation is done by linear meters. Otherwise,
calculation is done as cross.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 359
53.8.           Exchange prices
        53.8.1.          Order article prices without exchange prices
AWDesk document 441481: 25.11.2019:
It happens that for a special article structure in an order, a fixed square meter price is awarded,
on which no more exchange prices are to be calculated, but the processing. For this reason, the
field "Without exchange" has been added to the dialog for entering order-related article prices
(F4 - Price data - Order prices - Item prices). If this field is checked, no exchange or additional price
will be calculated for the affected article within the price calculation for glasses and foils.
However, an exchange price can be entered manually in the item conditions dialog. This is then
also taken into account in the price calculation.
It should be noted that exchange in the LAMI in IG is controlled via the indicator in the IG article.


        53.8.2.          Exchange prices by vector

        53.8.3.          IG
The IG exchange prices are currently always defined with regard to the article number of the glass
in the master data. Now it is possible to configure the system in such a way that the exchange
price for a glass can be stored for the vector assigned to this glass.
The logic is possible both in the general TG/LAMI/special exchange prices and in the individual IG
exchange prices for market partners. The price calculation first checks whether IG exchange prices
for individual market partners have been defined. In this case, the system first checks whether an
exchange price has been defined for the item. The OC-PLCd logic must be observed. If no market
partner-specific exchange price is defined for the article, the system determines which price
vector is assigned to the article. The system then checks whether an IG exchange price has been
defined for this price vector.
If no market partner individual IG exchange price is defined, the same 2-level search is carried out
for the general TG/LAMI/special exchange prices.
This function is controlled via environment variable
AUSTAUSCH_VEKTOR ( client reference: No)
  The variable controls that exchange prices can be stored in IG and LAMI for vectors. The price
calculation then searches for exchange prices for the respective article. If none is defined, the
system searches for the corresponding vector number for the article and checks whether a price
has been defined for it.
The individual values define the range of conditions: IG Prices | LAMI Prices | IG Conditions |
LAMI Conditions replaces KUISOAUST_VEKTOR.


        53.8.4.          LSG
The LAMI exchange prices are currently always defined with regard to the article number of the
glass in the master data. Now it is possible to configure the system in such a way that the
exchange price for a glass can be stored for the vector assigned to this glass.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   360
The logic is possible both in the general LAMI exchange/additional prices and in the market
partner individual LAMI exchange/additional prices. The price calculation first checks whether
LAMI exchange prices for individual market partners have been defined. In this case, the system
first checks whether an exchange price has been defined for the item. The OC-PLCd logic must be
observed. If no market partner-specific exchange price is defined for the article, the system
determines which master exchange list is defined and whether an exchange price is defined for
this article. If no price is found there either, the system determines which price vector is assigned
to the article. The system then checks whether an LAMI exchange price has been defined for this
price vector. If no price is defined for the vector in the exchange list (the OC-PLCd logic must be
observed), the following is checked with the vector in the master exchange list.
If no market partner-specific LAMI exchange price is defined, the same multilevel search is carried
out for the general LAMI exchange/additional prices.
The function must be switched on via an environment variable.
AUSTAUSCH_VEKTOR ( client reference: No)
  The variable controls that exchange prices can be stored in IG and LAMI for vectors. The price
calculation then searches for exchange prices for the respective article. If none is defined, the
system searches for the corresponding vector number for the article and checks whether a price
has been defined for it.
  The individual values define the range of conditions:
  IG prices | LAMI prices | IG conditions | LAMI conditions
  replaces KUISOAUST_VEKTOR


           53.8.5.      Exchange price by matrix (size scaling)
To be able to create IG exchange prices size-scaled, the calculation type 'Matrix' was made
configurable. According to the default logic, with the calculation type "Matrix", the exchange price
is determined from the difference between the matrix of the exchange glass and the matrix of the
header article. With the configurable new logic, the price is taken directly from the matrix of the
exchange glass as exchange price; that is, the exchange price is independent of the price of the
header article.

Default:

IG basic price: 59.40

Matrix exchange price: 10.95

Calculation 50.40 + 10.95 =70.35 / 2 =35.17 - 59.40 = -24.22

Environment variable ISOAUST_KEINE_MISCHMATRIX

If you set the environment variable, 10.95 is used directly as exchange price.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 361
        53.8.6.         Exchange factor
The exchange factor from the product group conditions is only used for the exchange directly in
the item article. It is not used for exahcnge in the LAMI in IG. The special exchange list factors can
be used for this. To be noted here is that the product group of the exchanged article is used by
default and not that of the item article. To change this, the environment variable
SPEZATLFAKT_KOPFWAGRP has to be activated.
Pre-settings for the replacement factor in IG
2011-08-05
According to the pricing standard logic, the factor defined for the main article will be used for
glass and film layers to be exchanged or added to a LAMI in an IG. This is done only if no
replacement/addition factor for laminated glass has been defined in the terms.
With the environment variables DEFAULT_AUST_FAKTOR_VSG it is possible to configure that in
case of exchange/addition in the VSG in an IG article, not the factor of the header article but if
present, the exchange factor of the VSGs in the IG is taken as exchange factor for glass and foils in
the VSG.


        53.8.7.         LAMI exchange prices
[AW-69695]
Within the LAMI exchange prices (Master data - Prices - PCD prices - LAMI articles - LAMI
exchange/additional prices and master data - Conditions - Special prices - LAMI
exchange/additional prices), a new calculation type "total quantity per BOM header" is now
available. In the course of introducing the new calculation type, the operation of the field has
been changed from toggle to selo.
AWD #89837: inheritance of manual LAMI exchange prices
Product/Module: ALCIB / Prices /Terms (ALCIB 4.0) 28.11.2005:
By default, manually entered or changed LAMI exchange prices are not taken over into another
article.
The system can now be configured so that manual exchange prices are inherited.
    a) One possibility is the inheritance of the manual changes within a document entry. The
       LAMI exchange prices for a document item are displayed on the dialog, which can be
       reached as follows:
        In the price field of the document position, press <Shift+F9> to reach the terms dialog;
        from there, the dialog with the LAMI exchange prices can be reached with <Shift+F10>.
        On this dialog, any field you can enter can be changed. Every manual change is recorded
        internally. If an item with the same BOM structure (and same BOM number) is then
        entered anew, the changes recorded are taken over into the new item.
        This possibility can be activated as entry help. Here it must be noted that the noting of
        manual changes is temporary: if the document is exited and loaded again later, the data
        noted is no longer available.
    b) Another possibility is that after loading a document again, existing LAMI exchange price
       information is marked as "manual". If then another item with the same BOM number is
       added to the document, for the new item the system relies on the noted LAMI exchange


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  362
        price information. This possibility applies for re-loaded documents, that is, documents
        that are loaded into the entry screen and expanded again after saving. It does not apply
        for documents that are entered with reference.
In both cases, it applies that the LAMI exchange price information is noted per BOM number. If
there are several items with the same BOM number but with different information in the
document, the last manual change (or for re-loaded documents the last item) is inherited.
There is not only inheritance for newly created items; existing items with the same BOM number
remain untouched by manual changes.
With a new price calculation incl. obtaining of terms (e.g., <CTRL+F9> in the price field or after
specification of order prices) the manual information is overwritten. For additional items with the
same BOM header number, the LAMI exchange prices will also be determined completely from
the master data.
Both possibilities are switchable by activating the environment switch
VSGAUSTAUSCHPRS_VERERBEN. This switch is specified with two parameters, separated by blank
spaces.
If the first parameter is set to 1, the manual changes should be inherited during a document
entry.
If the second parameter is set to 1, with renewed loading of a document, existing LAMI exchange
price information should count as manual.
If only one of the possibilities should be activated, the parameter for the other possibility must
have the value 0.



        53.8.8.         Patterned replacement
The patterned replacement is done differently than for float, TGH, and LAMI according to so-
called pattern classes. Whether the exchange is determined via pattern classes or via the
"normal" exchange depends on the article type of the glass replaced.


53.9.           Step Surcharge
        53.9.1.         Extended options for LAMI step price calculation
Currently it is possible to define step surcharges according to "CU/unit" and "percent" in the LAMI
price master data. This step surcharge currently effects the glass base price of the LAMI item.
These calculation types are now expanded by 4 calculation types.

In the master data dialog for LAMI base prices

"Master data – prices - PKZ prices - LAMI base prices" and "master data - prices - PCD prices -
special LAMI base prices" the step surcharge type is expanded by the characteristics "CU/piece
net","CU/piece gross", "CU/unit net" and "CU/unit gross". The existing characteristic "WE/piece"
is renamed to "WE/piece/GME". The characteristic "percent" is renamed to "percent/GME". The
two existing characteristics are only renamed, but not changed in their calculation manner.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                363
The calculation of the surcharge of the characteristic "WE/piece net" occurs after application of
price surcharge and the factor, however before minimum calculation, model surcharge and
processing.

Number of steps * surcharge = step surcharge net

Price per piece after TZ and factor + step surcharge net

The calculation of the surcharge of the characteristic "WE/piece gross" occurs as follows:

Number of steps * surcharge = step surcharge gross

Price per piece after TZ and before factor + step surcharge gross

The calculation of the surcharge of the characteristic "WE/unit net" occurs after application of
price surcharge and the factor, however before minimum calculation, model surcharge and
processing.

Surcharge = step surcharge net

Price per piece after TZ and factor + step surcharge net

The calculation of the surcharge of the characteristic "WE/unit gross" occurs as follows:

Surcharge = step surcharge gross

Price per piece after TZ and before factor + step surcharge gross



By setting the environment variables KONDITIONEN_VSG_WAGRP = <VSG product group> in the
form <nnnnnn> to <n*****> it is possible to use the expanded step surcharge types also in the
special product groups and special article conditions. ("master data - conditions - special
conditions - product group conditions", "master data - conditions - special conditions - article
conditions"

This expanded step surcharge calculation is controlled with the environment variable
KONDITIONEN_VSG_WAGRP in versions ALCIB 2011 and AWE5.

ATTENTION: In version ALCIB 2011 it is necessary to update the program environment. The
function shall be available in AWE5 as at version 5.3


        53.9.2.         Number of steps
STUFE_KANTE_ALT (client reference: no)
The number of steps is calculated per edge and per glass. In the calculation, for multiple glass (3-
layer IG, LAMI), there were problems if several step records per item were written. The problem
was eliminated, which caused changed price calculation.
If this environment variable is set, generally only one step record per item is evaluated.

A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  364
  #455799 / #454786




53.10.          AIR surcharge
        53.10.1.         Default calculation
Surcharge type GR/piece
        -   Only the first AIR is used to determine the AIR surcharge.
        -   No size surcharges are applied to the AIR surcharge
        -   The AIR surcharge is calculated AFTER exchange factor on every exchange, even if the
            exchange price=0. (SZR_NUR_AUF_GRUNDPREIS)
        -   The AIR surcharge is added to the glass price BEFORE the application of the glass
            factor



        53.10.2.         AIR surcharge on exchange
By default, the AIR surcharge is calculated on the base glass price and all exchange glass. The AIR
surcharge GR/piece or GR/squ is then also calculated on the exchange if not exchange price is
found.
With the activation of the environment variable "SZR_NUR_AUF_GRUNDPREIS" the AIR surcharge
is not calculated on the exchange glass.
If this variable is active, it can happen, however, that no AIR surcharge is calculated. This is the
case if the glass base price + AIR surcharge is less than the minimum calculation.
Surcharge type GR/piece
(glass unit price + AIR surcharge) * glass factor + exchange + shape surcharge on unit price



        53.10.3.         AIR surcharge for triple IG
The following description assumes that the environment variable SZR_ZUSCHLAG_SZR2 is set.
When fetching the conditions for the IG current article, the system first checks whether a
surcharge is found for AIR1. If the search was successful, an additional surcharge for AIR2 will be
applied. The system now checks whether the surcharge categories of these two surcharges are
the same. If this is the case, the surcharges are added together. Otherwise, the overhead must be
converted to a uniform overhead category - CU/piece - before it is added. This only works if the
surcharges are to be calculated on the net basic price, i.e. if the variables
SZR_NUR_AUF_GRUNDPREIS and SZRZUSCHLAG_NETTO are set. If one of these variables is not
set and the overhead types are still different, no unique conversion is possible. An error message
is then displayed and only the surcharge for AIR1 is taken into account for the price calculation.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                     365
The added surcharges for AIR1 and AIR2 are displayed in the AIR surcharge field in the item
conditions of the order.
If the environment variable SZR_ZUSCHLAG_SZR2 is not set, the old logic still applies; that is, only
the surcharge for AIR1 is calculated
AWDESK #17629


        53.10.4.         Size surcharges also on AIR
By default, size surcharges are not added to the AIR surcharge. With the environment variable
GROSSZU_AUF_SZR = ON, it can be achieved that size surcharges of the type "Percent" are
applied to the AIR surcharge.




53.11.          PCd glass doors
alcib - 13.04.11780 Feb 2022
For glass doors and all-glass doors, there is the price calculation method PCd glass doors.
Within this pricing method, previously only the float glass (article type 100), TG (article
type 150), LAMI (article type 170), and IGU (article type 200) were permitted.
Now additional types of glass have been added:
Glass       Article type
Patterned           110
PVC       120
Special glass 130
Cast resin      140
Fire protection 160

Furthermore, the glass had to be created with the pricing methods:
IG current
PCd TG
PCd LAMI
PCs Basic glass
PCd Processed glass
.
New is now also the price calculation method "PCd prices general", which was added.



53.12.          Shape Surch.
        53.12.1. No shape surcharge for articles, with shape in
            article master data
If the article is already defined as shape in the article master data, no shape surcharge is
calculated. In this case, it is assume that the list price already includes the shape surcharge.



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 366
        53.12.2.         Shape surcharge for sealants
Articles of the article type sealants (240) are not calculated as processing, but as accessories. In
addition, a special price calculation applies for sealants within the IG price calculation (IG-current
artikel.vkptype = 41), whereby no shape surcharge is considered. (#386510)



        53.12.3.         Shape surcharge per product group
Starting with A+W Enterprise 6
The shape surcharge can be entered per shape type or per product group. How the product group
is entered and evaluated is controlled via the environment variable.
ALLGEMEIN_WAGRP
controls whether product groups in product group conditions can be selected freely or whether
they must be specified according to the ALCIB convention (10****, 1010**, 101010).
The product groups "******" is only permissible with set environment variables and is only
evaluated then. If the customer creates "******" with a designation in the product group master
data, then the entry within the price master data is possible, but it is not found in the price
calculation.


        53.12.4.         Shape surcharge/minimum shape surcharge
Version 3.0
MASTER DATA=>PRICES=>SURCHARGES=>SHAPE SURCHARGES
MASTER DATA=> CONDITIONS=>SPECIAL CONDITIONS=>SHAPE SURCHARGES
Previously, the minimum shape surcharge that you can maintain on the screens
mentioned above is only evaluated for items with the pricing
 method IG-Swiss. In the current version, the price calculation has been expanded so that
the minimum shape surcharge is also calculated for the pricing methods IG-current, PCd-
basic glass, PCd-finished glass, PCd-TG, and PCd-LAMI.
The minimum shape surcharge is determined from the conditions or the price master data
and displayed in the item conditions for the above-mentioned pricing methods next to the
Shape Surcharge field. This minimum shape surcharge can be changed manually in the
item. The minimum shape surcharge is considered both in the sales as well as in the
purchasing price calculation, and also in the cost calculation for purchased glass, but not
for the processings.
Depending on how the Shape Surcharge field is specified in the conditions, the minimum
shape surcharge is calculated as follows.
Basic   The shape surcharge is only calculated on the basic glass price and then this value is compared to
price   the minimum shape surcharge.
Glass   The shape surcharge is calculated on the basic glass price and on the exchange prices. In this case,
price   the minimum shape surcharge is compared to each of these values.
Unit    The minimum shape surcharge is calculated on the unit price and then this value is compared to
price   the minimum shape surcharge.



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                      367
Environment variable MINMODZU_NUR_AUF_GRUNDPREIS
Client reference: no
If the variable is active and has the value ON, the shape surcharge for the current IG price method
is calculated only on the base price and not on the exchanged lites. To determine whether the
minimum shape surcharge should apply or not, the shape surcharge on the exchanged lites is
calculated. This variable only applies if "Shape surcharge on glass price" is set in the condition
master data.
This means that if the shape surcharge should be calculated on the glass price, the shape
surcharge and the respective exchange glass is calculated first. This total is compared to the
minimum shape surcharge. If the total of the shape surcharges is less than the minimum shape
surcharge, no shape surcharge is calculated on the exchange glass.




53.13.             Size surcharge
          53.13.1.         IG/replacement
With the term "size surcharges" used here, reference is made to the "Size surcharges" dialog, not
to the surcharge matrix. If the surcharge matrix is used, the surcharge is not calculated on the
exchange prices. With size surcharges, the environment variable ISO_GROSSZU_AUF_AUSTAUSCH
can be activated.
If the steps for the size surcharges are not sufficient, the exchange can also be calculated
according to matrix. Here, the variable ISOAUST_KEINE_MISCHMATRIX must be heeded.


          53.13.2.         Size surchargers for processing and accessories
alcib - 13.04.19502
For accessories and processings, by default no aspect ratio and area surcharges from the size
surcharges are applied. With the environment variable BEARB_GROSSZU_ALL = ON, it can be
achieved that these surcharges are also applied.
If, however, the environment variable SEITENVERH_AUF_STUECKPREIS is active, no aspect
surcharge is applied to processings or accessories since their price is already included in the unit
price and otherwise the aspect surcharge will be calculated twice.
alcib - 13.04.19732
For accessories and processings, size surcharges are applied additively; not for glass.
e.g.
Glass: glass base price * overlength surcharge = result 1
       Glass base price * area surcharge = result 2
       Glass base price + result 1 + result 2




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                             368
Accessories: Base price * overlength surcharge = result 1
        (Base price + Result1) * area surcharge = result 2


Furthermore, for accessories and processings, the priority flag is not evaluated in the surcharge
matrix. The environment variable ZUSCHLAGSMATRIX_MIT_PRIO only affects the price method 41
- IG-current.
With the environment variable BEARB_GROSSZU_WIE_GLAS, it can be accomplished that the
surcharges for accessories and processings are calculated as for glass; that is, the size surcharges
are not calculated additively and the priority flag from the surcharge matrix is evaluated.



        53.13.3.         Aspect ratio surcharge
Aspect ratio surcharge on the unit price
#120141
In the current version, there is the configurable possibility to define an aspect ratio surcharge that
is calculated on the unit price of the glass. This logic is available for header articles with the price
methods IG-current, PCd-LAMI, PCd-TGH, PCd-basic glass or PCd-finishing in the sales price
calculation.
The aspect ratio surcharge can be created under Master data > Prices > Surcharges > Size
surcharges on the Shp screen and assigned to the glass articles in the IG basic prices or in the
article vectors.
The size surcharges can also be assigned customer-specifically in the conditions (per product
group or per article).
The new logic replaces the old logic for IG-current, with which the aspect ratio surcharge was
calculated on the glass basic price.
In the display of the item conditions in the document entry (Shift+F9 in the item), the aspect ratio
surcharge is not displayed with this configuration. At the same time, the "Special surcharge" field
is not available. (Up to A+W Enterprise QR2503)
The logic is controlled by the environment variable SEITENVERH_AUF_STUECKPREIS.


Starting with A+W Enterprise QR2503
For accessories and processings, by default no aspect ratio and area surcharges from the size
surcharges are applied. With the environment variable BEARB_GROSSZU_ALL = ON, it can be
achieved that these surcharges are also applied.
If, however, the environment variable SEITENVERH_AUF_STUECKPREIS is active, no special aspect
surcharge is applied to processings or accessories since their price is already included in the unit
price and otherwise the aspect surcharge will be calculated twice.


Starting with A+W Enterprise QR2506




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  369
If the environment variable "SEITENVERH_AUF_STUECKPREIS" is active, you could not use the
special surcharge in the order item. In addition, the aspect surcharge was calculated in the item
conditions, but not displayed.
The program has now been changed, so that even with the price calculation method IG_CURRENT
the aspect surcharge is displayed in the item conditions and the special surcharge can be used.




        53.13.4.        Size surcharges on AIR surcharge
See "Prices > AIR surcharge > Size surcharges on AIR"




53.14.          Reference price
During the document entry, in the current version it is possible to calculate a reference unit price
for each item.
This reference unit price is compared to the current unit price of the item. If the current unit price
is less than the reference unit price by a configurable percentage deviation, the person entering
the document is asked to enter a reason for this deviation. (REFERENZ_ABWEICHUNG)
The reasons are saved with the document and are available for later evaluations through reports.
The checking of the deviation is always done when exiting the current item.
The reference price is a sale unit price that is calculated with the prices and condition master data
of a reference customer. The reference customer can be specified system-wide in an environment
variable or stored for each customer in a configurable MP field (the field must be created as
[NUM] [REF_CUSTOMER]).
When calculating the reference price, the order conditions and order prices are not drawn; the
conditions of any existing project are also ignored. It is recommended that you maintain the
prices and condition master data for the reference customer completely so that no messages
about prices not found will appear during the calculation of the reference price.
The reference price logic allows that a customer can be assigned himself as reference customer.
This configuration would allow the logging of the deviations, which occur due to order price or
manual changes in the item conditions.
In addition it must be noted: If the BOM does not change between 2 items, the conditions are
not re-determined. Only special dimension-dependent values are recalculated. If thus for a
customer different conditions are maintained than for the reference customer, this can mean that
there is a price deviation between 2 identical items.


Cf.: #136027
Previously it was the case that for each item whose price differs sharply from the reference price,
a reason had to be entered. If you now activate the environment variable
REFERENZ_PRUEFUNG_AUFTRAG, you will no longer be asked to give a reason for each item.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 370
Instead, when saving the order, the screen with the data for the first deviating item will open. The
reason given there will be taken over into all other items of this order.
Restrictions:
•       The currency of customer and reference customer must match. When calculating the
deviation, no different currencies are considered.
•        The reference customer may not be assigned prices/conditions with pricde types that
refer to the order total quantities. The reference price is always calculated per item and the total
order quantities would never be considered.


Configuration:
    •   The table cu_sgg_price_comment with the structure
                 commenttxt (char 30 )
                 sprkz smallint – local language from alsysinfo
        must exist and data must be contained.
    •   Kposprvlfd-Set 1 must exist
    •   Private field in the market partner master data: numeric – "REF_CUSTOMER"


REFERENZ_ABWEICHUNG (client reference: no)
This environment variable is only evaluated if REFERENZ_KUNDE is active. The content of the
variable is interpreted as a deviation limit in percent of the reference price. If the item price has
more than the variance to the reference price defined here, the creator is asked in a sales
document to enter a comment as an explanation for this variance.
REFERENZ_KUNDE (client reference: no)
The environment variable activates the logic of the reference price calculation and contains a
default customer to which reference prices and conditions are assigned.
REFERENZ_PRUEFUNG_AUFTRAG (client reference: no)
   (case #136027): This variable is only evaluated if REFERENZ_KUNDE is active. If this variable is
activated, the entry of a reason for break is not required for each item for which the price differs
significantly from the reference price , but the entry dialog in which the reason for break must be
entered is displayed once when the document is saved. This reason is then written back to all
affected items.


53.15.           Terms in the order
        53.15.1.         Wrong prices in the order
If the price is changed manually in the order for a position to be ordered, only the change of the
basic glass price is recorded in the context of the item condition as a manual change and
transferred to purchasing. However, if the exchange price or the exchange factor of a glass is
changed in IG, this change is overwritten during the price calculation within the generation of a
purchase order.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                371
This system was changed to the effect that changes of the SA exchange lists, the SA exchange
prices and the SA exchange factors as well as the purchase exchange lists, the purchase exchange
prices and the purchase exchange factors are recognized as manual changes and are thus also
transmitted to the subsequent programs.

Further fields within the IG price calculation will be incorporated into this function as at version
AWE5.3.

The following fields cause the manual flag to be set in the terms:

Price method "IGU current" (artikel.vkptyp1 = 41) (purchasing and sales respectively)

            -   Manual changing of the PLCD (not for implcit changes due to changing of the PCd)
            -   Matrix or vector number
            -   Basic Glass Price
            -   Base price calculation type
            -   Exchange list 1-3
            -   Excxhange factor 1-3
            -   Exchange price 1-3
            -   Step surcharge type (not the step surcharge value)
            -   AIR surcharge type
            -   Calculation type of the special surcharge
            -   Factor
            -   Size rounding


        53.15.2.        Do not mark IG conditions as manual
The function expanded with version AWE 5 for detecting manual conditions of the price
calculation type IGU-current goes too far for individual customers. Therefore, the function was
made more flexible with the setting of an environment variable.

In the variables KONDITIONEN_ISO_NICHT_MANUELL you can define those fields with whose
change you would not like to have the manual identifier set automatically.


53.16.          Printable prices
        53.16.1.        Requirements
Market partner master data; kaufpreisdrkz

The variable kaufpreisdrkz from the kauf-Memrel (table kauf) decides whether for the current
market partner (customer or supplier) printable prices should be determined. This depends on the
setting in the market partner master data. On the Printout tab, the screen field print Gross
price must be toggled to Y so that the printable prices are even set.


Item master data




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 372
In the item master data of the header article, the field poffen is evaluated. It can be set on the
Prices tab in the Price display field. The field is evaluated depending on how the variable
DRUCKBARE_PREISE is set.


DRUCKPREISUMGEBUNG (client reference: no)
This environment variable is evaluated if the variable DRUCKBARE_PREISE is not set or not equal
to 1, 2 or 3. It specifies by how much the printable prices may deviate. If the deviation is greater,
the prices will not be set. Which values are compared is described in the section "Description;
DRUCKBARE_PREISE not set".


If this variable is not set, 0.01 is allowed as standard deviation.


DRUCKBARE_PREISE (client reference: no)
The envieronment variable has the characteristics:
1       The price per quantity unit or gross unit price should be printed
2       Price per quantity unit of the glass incl. the processing should be printed
3       The base price, gross price or both will be printed
other   If the variable is different or not set, the gross unit price and price per quantity unit are
        set, insofar as the deviation does not exceed a particular value.


SPEZIAL_ME_PREIS (client reference: no)
  If this variable is set, the printable price per quantity unit is calculated by adding all price-
relevant sqm prices. If a non-sqm price is found, the printable price per quantity unit is not filled.
(only for user=25)



        53.16.2.         Factor
It is first set to the factor of the header article. Normally, this will also be the printable factor. If
the factors for exchange prices and/or subelement prices and/or processing prices differ from the
factor of the header article, however, the printable factor will be set to 0.00.
Background: It must be possible to calculate price per quantity unit and unit price apart from one
another via the factor. This only works if the factor is the same for all partial prices.
The printable factor is set regardless of which environment variables or settings are set in the
item master data or market partner master data.
If the factor of the header article is changed manually, it can happen that the processing factors
therefore deviate. The environment variable MANUELLER_FAKTOR_AUF_BEARB can be used for
this.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                  373
        53.16.3.        Prices
The printable prices are determined under the prerequisite that this is permitted for the market
partner in question (kaufpreisdrkz). Then the price determination depends on the environment
variable DRUCKBARE_PREISE. The sales prices are set in the following description; this applies
analogously for the purchase price fields.


DRUCKBARE_PREISE = 1 (BRUTTO_STUECK)

Depending on the setting for the header article in the item master data, the following printable
prices are determined:
1      The price per quantity unit is printed:
       druck_vk_me_preis = vkmepreis (as determined in the course of the price
       calculation)

2      Insofar as the printable factor is set, the gross unit price is printed:
       If SPEZ_BRUTTO_STUECKPREIS is set
               druck_vk_brutto_stkpreis = vk_brutto_stkpreis
               (as determined in the course of the price calculation)
       otherwise:
               druck_vk_brutto_stkpreis = stkpreis/druckbaren Faktor

       If the printable factor is 0, however, the printable gross unit price is not filled.

3      Both the price per quantity unit and the unit price should be printed. The setting of the
       fields is done precisely as described for 1 and 2.

Any other setting for poffen in the item master data causes the printable prices not to be set.


DRUCKBARE_PREISE = 2 (ME_GLAS_MIT_BEARB)

Depending on the setting for the header article in the item master data, the following printable
prices are determined:
1      The price per quantity unit is printed
       druck_vk_me_preis = stkpreis / Glasfläche

2      Insofar as the printable factor is set, the gross unit price is printed:
       druck_vk_brutto_stkpreis = stkpreis/druckbarer Faktor

       If the printable factor is 0, however, the printable gross unit price is not filled.

3      Both the price per quantity unit and the unit price should be printed. The setting of the
       fields is done precisely as described for 1 and 2.

Any other setting for poffen in the item master data causes the printable prices not to be set.


DRUCKBARE_PREISE = 3 (DRUCK_GRUND_BRUTTO_NETTO)


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 374
Depending on the setting for the header article in the item master data, the following printable
prices are determined:
1       The price per quantity unit is printed:
        druck_vk_me_preis = grundpreis (as determined in the course of the price
        calculation)

2       Insofar as the printable factor is set, the gross unit price is printed:
        druck_vk_brutto_stkpreis = brutto_stueckpreis
        (as determined in the price calculation)
        If the printable factor is 0, however, the printable gross unit price is not filled.

3       Both the price per quantity unit and the unit price should be printed. The setting of the
        fields is done precisely as described for 1 and 2.

Any other setting for poffen in the item master data causes the printable prices not to be set.




DRUCKBARE_PREISE is not set

If the variable DRUCKBARE_PREISE is not set or if it has a value other than 1, 2 or 3, the print price
determination is done as described here.
In this case, the environment variable DRUCKPREISUMGEBUNG is relevant.
Regardless of poffen in the item master data, there is an essential attempt to set both the price
per quantity unit and the unit price
Price per qty.unit:
          druck_vk_me_preis = vk_me_preis (as determined in the price calculation)
          Before setting, there is a check whether vk_brutto_stkpreis and vk_me_preis
          * Fläche no longer deviate from one another as defined via the variable
          DRUCKPREISUMGEBUNG.
Unit price:
          druck_vk_brutto_stkpreis= vk_brutto_stkpreis (as determined in the
          price calculation)
          Before setting, it is checked whether stkpreis and vk_brutto_stkpreis*
          druckbarer Faktor no longer deviate from one another as defined via the
          variable DRUCKPREISUMGEBUNG.




SPEZIAL_ME_PREIS is set

If this environment variable is set, the price per unit quantity determines from the total of the
prices per unit quantity of the header article, the exchange glass, and the
processings/subelements.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  375
If there is only one article for which a unit price is defined instead of a price per quantity unit, the
special price per quantity unit (spez_mepreis) is not set.


Price per qty.unit:
          druck_vk_me_preis = spez_mepreis (insofar as spez_mepreis is set)
Unit price:
          If the printable factor is set:
          vk_brutto_stkpreis = stkpreis / druckbarer Faktor
          If the printable factor is 0, the gross unit price is not filled.


There is an essential attempt to set the printable unit price and the printable price per quantity
unit, regardless of the settings in the item master data and the market partner master data and
regardless of any other environment variables.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   376
53.17.            Environment variables
AUSTAUSCH_VEKTOR (client reference: no)
  The variable controls that exchange prices can be stored in IG and LAMI for vectors. The price
calculation then searches for exchange prices for the respective article. If none is defined, the
system searches for the corresponding vector number for the article and checks whether a price
has been defined for it.
  The individual values define the range of conditions:
  IG prices | LAMI prices | IG conditions | LAMI conditions
Example: 0|1|0|1 => for LAMI prices and LAMI conditions, vectors can also be entered; for IG not.
This variable replaces KUISOAUST_VEKTOR.


BEARB_GROSSZU_ALL (client reference: no)
For accessories and processings, by default no aspect ratio and area surcharges from the size
surcharges are applied. If this variable is active, these are also calculated.


BEARB_GROSSZU_WIE_GLASS (client reference: no)
For accessories and processings, size surcharges are applied additively.
  Base price * overlength surcharge = result 1
        (Base price + Result1) * area surcharge = result 2
For glass, calculation is always on the base price
  Glass base price * overlength surcharge = result 1
    Glass base price * area surcharge = result 2
With the environment variable BEARB_GROSSZU_WIE_GLASS, it can be accomplished that the
surcharges are not calculated additively


BEARBMASSRUND_WIE_GLAS (client reference no)
If this variable is set, the processing dimensions are rounded with the same dimension rounding
as the article to be processed. If the variable is not set, the dimension rounding for the
processings is retrieved from the BEARBMASSRUNDUNG variable.
  VA side only.


CUTOUT_PRICELM (client reference: no)
Calculates for corner/edge/inner cut-outs and QU=LM the correct linear meters for the price
calculation if the prices go according to LM (does not consider if the positioning wanders edge to
corner cut-out or inner to edge cut-out, for example)


DEFAULT_AUST_FAKTOR_VSG (Client reference: No)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              377
If the environment variable is set, then with exchange in the VSG in the IG, the exchange factor of
the VSG in the IG is used instead of the item factor. (#218372)


DRUCKBARE_PREISE (client reference: no)
The envieronment variable has the characteristics:
4       The price per quantity unit or gross unit price should be printed
5       Price per quantity unit of the glass incl. the processing should be printed
6       The base price, gross price or both will be printed
other   If the variable is different or not set, the gross unit price and price per quantity unit are
        set, insofar as the deviation does not exceed a particular value.


ESG_MIN_BEAPREIS (client reference: no)
The environment variable switches the maintenance and evaluation of the minimum processing
prices for processings in TG. Only if one of these variables is set you can enter the menu item
"Master data > Prices > PCd prices > Minimum processing prices".
See also: VSG_MIN_BEAPREIS.


GROSSZU_AUF_SZR (client reference: no)
By default, size surcharges are not added to the AIR surcharge. With the environment variable
GROSSZU_AUF_SZR = ON, it can be achieved that size surcharges of the type "Percent" are
applied to the AIR surcharge.


ISOAUST_KEINE_MISCHMATRIX (client reference: no)
If this environment variable is active with the value ON, then for an IG exchange price with the
calculation type Matrix, the price is calculated from the specified matrix directly as exchange
price.


KEIN_TZ_BEI_SPEZARTPRS (client reference: no)
If special article prices or processing prices are available and this variable is active, the inflation
surcharges and discounts switched off (SC=0 and factor=100). The procedure applies to
purchasing and sales.
Attention: This variable (hole_konditionen) overrides the variable BEAFAKTOR_WIE_GLAS during
automatic price calculation!!


KONDITIONEN_VSG_WAGRP (client reference: no)
If this variable is active, expanded functions for the LAMI step price calculation according to
Wagrp can be used. The LAMI product group can be stored as variable value.
Here, the entry of * is allowed. (Vg #237980)


KUARTPRS_VEKTOR (client reference: no)


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   378
If the variable is active, it is possible to store special article prices for article vectors. The price
calculation then first searches for a special price for the article. If no price is found, a special price
with the vector number assigned to the article is searched for next.
Evaluation during sales price calculation for objects (sales), customers, customer groups and
during purchase price calculation for objects (purchasing) and suppliers. The logic only applies to
header articles and not to accessory subparts


KUBEAPRS_VEKTOR (client reference: no)
  If the variable is active, it is possible to store special processing prices for processing vectors.
The price calculation then first searches for a special price for the article. If no price is found, a
special price with the vector number assigned to the article is searched for next.
LIEFERANTENPREISE (client reference: no)
Purchase prices: If this variable is set, the supplier prices from tables artliefzu, artvarzu, and
artfarbzu override the prices found based on supplier conditions.


MANUELLER_FAKTOR_AUF_BEARB (client reference: no)
If the variable is set to ON, manually changed glass factors are also applied to processing and
accessories.


MINBER_AUF_KANTE (Client reference: No)
If this variable is set, the minimum calculation per edge is calculated when the processing prices
for grindings (article category 550) are determined if the price category GR/TQ is maintained and
the article has the basic unit of measure linear meter or millimeter.
MINBER_WIE_GLAS (client reference: no)
If this variable is set, the same minimum calculation for processings is calculated as for the main
articles to be processed.


MINMODZU_NUR_AUF_GRUNDPREIS (Client reference: no)
If the variable is active and has the value ON, the shape surcharge for the current IG price method
is calculated only on the base price and not on the exchanged lites. To determine whether the
minimum shape surcharge should apply or not, the shape surcharge on the exchanged lites is
calculated.
This variable only applies if "Shape surcharge on glass price" is set in the condition master data.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    379
NEUKALK_VKEK (client reference: no)
For the environment variable active with the value ON, pressing <Ctrl+F9> or <Shift+F10> displays
a query dialog on the price field in a position of a sales document, containing a toggle field where
the user can select the following:
No recalculation|Sales and purchase prices|Sale prices|Purchase prices.
Accordingly, no price, both prices, only the sales price or only the purchase price will be
recalculated.


REFERENZ_ABWEICHUNG (client reference: no)
This environment variable is only evaluated if REFERENZ_KUNDE is active. The content of the
variable is interpreted as a deviation limit in percent of the reference price. If the item price has
more than the variance to the reference price defined here, the creator is asked in a sales
document to enter a comment as an explanation for this variance.
REFERENZ_KUNDE (client reference: no)
The environment variable activates the logic of the reference price calculation and contains a
default customer to which reference prices and conditions are assigned.


REFERENZ_PRUEFUNG_AUFTRAG (client reference: no)
   (case #136027): This variable is only evaluated if REFERENZ_KUNDE is active. If this variable is
activated, the entry of a reason for break is not required for each item for which the price differs
significantly from the reference price , but the entry dialog in which the reason for break must be
entered is displayed once when the document is saved. This reason is then written back to all
affected items.


RUNDUNG_3NACHKOMMASTELLEN (client separation: no)
If this variable is active, the price-relevant dimensions are rounded to three decimal places. By
default, rounding is to 2 decimal places.
  ON - Sales
  SA+PU - Sales and purchasing including material costs
Note: This does not affect the physical quantity of the position. RUNDUNG_PHYMESTK_3STELLIG
is responsible for this.


SEITENVERH_AUF_STUECKPREIS ( client reference: no)
If this environment variable with the value ON is active, then the aspect ratio surcharge from the
size surcharges for all glass price methods is calculated on the unit price.


SPEZATLFAKT_KOPFWAGRP (Client reference: no)
If this variable is set, the product group that arises due to the product group logic for the header
part after the exchange is used for the evaluation of the exchange list factors. If the variable is not
set, the product group of the exchanged glass is used.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  380
SPEZIAL_ME_PREIS (client reference: no)
  If this variable is set, the printable price per quantity unit is calculated by adding all price-
relevant sqm prices. If a non-sqm price is found, the printable price per quantity unit is not filled.
(only for user=25)


VSGAUSTAUSCHPRS_VERERBEN (client reference: no)
If the variable is active and set to 1, manually changed LAMI exchange prices are inherited in
items with the same BOM header number.
 The inheritance takes place when the item is newly entered; a subsequent price recalculation
overwrites the manual values. The value can be specified in two parameters. If the first parameter
is 1, only the manual changes during the current document entry are to be temporarily noted. If
the second parameter is 1, the existing information is considered manual when the order is
reloaded.


VSG_MIN_BEAPREIS (client reference: no)
The environment variable activates the maintenance and evaluation of the minimum processing
prices for processing in LAMI. Only if one of these variables is set you can enter the menu item
"Master data > Prices > PCd prices > Minimum processing prices".
See also: ESG_MIN_BEAPREIS.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 381
54. NR server / number ranges
54.1.   Allocation of invoice and credit note numbers
  via SPs
(#112491)
Increasingly, our customers are confronted with a situation where invoice numbers and the
numbers of credits should be assigned from different number ranges. Here, the criteria according
to which the number range is selected are different from case to case.
Now there is a logic with which the number range from which the number for a particular invoice
or credit in sales or purchasing is assigned is selected via a SP.
Here, there are two possible parameters, which are optionally available to the SP for
determination of the correct number range:
            -   Site number
            -   Market partner number
The logic is enabled by environment variable RECH_NRKREISE_HNR.
This variable is assigned with a bit vector (default "0000"). The number 1 means that for the
corresponding transaction type, the selection of the number range is done via a SP.
    -   Point 1: number ranges for sales invoices will be assigned via SP "kaufGetRechkreis".
    -   Point 2: Number ranges for sales credits are assigned via SP "kaufGetGutskreis".
    -   Point 3: Number ranges for sales invoices are assigned via SP "kaufGetEKRechkreis".
    -   Point 4: Number ranges for purchasing credits are assigned via SP "kaufGetEKGutskreis".
The parameters that the respective SPs get when calling from Alcib are controlled by the
environment variables
KAUFGETRECHKREIS_PARAMS
    -   KAUFGETRECHKREIS_PARAMS
    -   KAUFGETGUTSKREIS_PARAMS
    -   KAUFGETEKRECHKREIS_PARAMS
    -   KAUFGETEKGUTSKREIS_PARAMS
.
The SPs must always deliver a valid number range.
See also "EN-CONFIG-A+W Enterprise Internal Client Separation"


54.2.           Release locks #416415
In very rare cases it happened that a number lock got stuck in the number server, which could not
be resolved without restarting the number server. This is particularly critical for large multisite
systems with many sites, as the entire multisite had to be restarted.


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                382
So that this is no longer necessary in the future, it is now possible to release these locks manually.
This must be done very conscientiously, otherwise several users will be able to process the same
order, for example.
The procedure for lock release is as follows:
In a shell session to the corresponding site, enter the command "killserv info". From this, in the
area NR_STATUS, the corresponding number range, the locked number, and the employee
number of the user holding the lock are determined. In addition, the command "psgrep <Login of
the user>" determines the PID of the process holding the lock. If this process no longer exists, the
PID can also be determined from the area ZU_STATUS of the "killserv info" output.
The lock is then released via :
alcib -nrexit <numberrange> <number> <manr> <pid> (This output also appears if you enter only
alcib -nrexit.)
After executing this command, the message appears:
Unlock numberrange <numberrange> number <number> manr <manr> pid <PID>
rc=<ReturnCode>
If successful, the return code -101 is output. In addition, by restarting the command "killserv info",
you can check whether the deletion of the lock was really successful.
Please note:For order blocks, in addition to the external order number from the number range
"lp.kaufex.mfo", the internal order number from the number range "lp.kauf.mfo" must also be
released.


54.3.  Re-use of invoice numbers without invoice
  document
[AW-81443] In extremely rare cases (program crash directly after the final invoice number has
been assigned) it can happen that during the assignment of invoice numbers, there are gaps.
Since these gaps can cause problems in controlling, a possibility has been created to re-use these
numbers. For this, there is now a program setting with which the number server checks for a
dedicated period in the past whether such numbers exist. These are then included in the number
pool and re-assigned during the next invoice generation.
This logic can only be used if you are not working with site-specific invoice number ranges within
a multi-site system.


In this context, the log $PROTOPFAD/Rech<mmdd> is expanded to include the entry "Action
successfully completed".
NRSERVER_CHECKNOTUSEDINVOICENO
This variable switches on a check in the number server that ensures that gaps in the number
range "rechex.mfo" are filled again. The value of the variables must contain the number of days in
the past that the number server should check. If in this period for a number there is no Kauf
record with document 7 present, the number is inserted into the pool and re-assigned on the next
request. Caution: Here there are mismatches in the sequence of the assigned invoice numbers.
This variable must be set so that backdated invoices fall in any case within the time frame to be
checked; otherwise they will be detected as not used and reassigned.

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                383
55. Product and sash size sets
55.1.           Sash size sets
With case #147145 the customer-specific sash size sets were developed. This function was
bracketed with environment variable MODUL_SASCH.
Version 2008 allows the storage of sash sets in Master data-> Keys-> Products-> Sash Size Sets.
These consist of the quantity and the sizes (width and height) of up to ten items. These sash size
sets can be used at document entry. A product code must be entered for each article to be
generated. These items will then be generated automatically.
Master Data > Keys > Products > Sash Size Sets > Manufacturer Code
This menu item is used to create the manufacturers who work with these sash size sets. First
enter a unique number, then the description (or manufacturer's name). The information is saved
in database table 'xsashsizemakercode'.
Master data->Keys->Products->Sash size set->Classification code
The classification code serves to group the sash size sets. Since there are several million sash size
sets, this additional level is quite useful. In the header of this dialog logic, you can restrict the
records to be processed to those for a certain manufacturer. You can also enter the first few
characters of the classification code, followed by an asterisk. This allows you to further restrict the
records to be processed. If you enter neither the manufacturer nor the start of the classification
code, all records will appear in the menu.
If you enter a manufacturer code in the header, you can change or enter only the classification
code and description in the menu body. Otherwise, you can edit the classification codes of all
manufacturers. The information is saved in database table 'xsashsizeclasscode'.
Master Data > Keys > Products > Sash Size Sets > Sash Size Sets
Use this dialog to generate or change sash size sets. In the header, enter a manufacturer code
because without a restriction, you will get too many hits. In addition, you can restrict the number
of hits by selecting a certain classification code or by entering the start of a classification code
followed by an asterisk. You can further restrict the part codes to be processed by entering the
start of a part code followed by an asterisk.
If you open the footer dialog, all part codes matching the information in the screen header will be
loaded. These can be amended. You can enter new part codes as well. These have to match the
restrictions defined in the header. The first mode dialog enables you to enter the part code and
also amend the size. This will be used to adapt the glazing channel. The mode dialog now allows
you to enter a name for this part code and the sizes and quantities for up to ten items. The
information is saved in database table 'xsizemaster'. Since every manufacturer has its own sash
size sets, a sash size set cannot be identified by its part code alone. You will always need a
manufacturer code as well.
As there are many sash size sets, the master data tables for the customer are not filled via this
dialog; instead, the data is loaded into the database via script. The dialog usually only serves to
make minor adjustments.
Document entry




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 384
Solely due to the activation of the environment variable MODUL_SASCH, the entry of the sash size
set in the order is not possible. (see Chapter 40.2)
In the product code field from document entry, press <Ctrl+F10> to apply the sash size sets. First
select the part code you want to use, and enter a multiplier. The actual quantities for the
individual items are calculated from the quantities defined in master data using this multiplier.
This brings you to a screen listing all items belonging to this part code. Enter a product code for
every item. The items will now be inserted into the order.




55.2.           Product sets
In the master data, the so-called product sets can now be entered. Basically, such a set consists of
several predefined items that can be consulted in order entry.
In the master data, it is possible not just to store completely new product sets, but also those with
the reference. For the specification of the reference process, it must be heeded that only
"customers' own" product sets can be used as reference cases. Under Master data -> Finished
products -> Product sets, the product sets (with one or several items with defined structure and
dimension) can be entered anew and existing product sets can be changed.
Currently, there are two possible function scopes:
    -   Entry depending on the manufacturer (Kauf.exbez2), MODUL_PRODSET=0
    -   Generally valid entry, which is relevant for KERMI interface, MODUL_PRODSET=1.
In the process, the number of the product set is assigned from an individual number range
(nr_kreise.mfoname=sasche)
Thus, it is possible to enter the product sets either for a special customer (entry in the field Kunde)
or you create a general "product set customer," whose product sets are generally valid.
If you also want to process the products sets via external EDI, the reference hierarchy must be
heeded: Customer - A/Z debtor - Default product set customer, which is configured in the EDI.
For the use of product sets within the external EDI, additional restrictions have to be heeded,
which are described in the configuration instructions "EN-CONFIG-A+W Enterprise EDI".



        55.2.1.         MODUL_PRODSET=0
With case #145771, the first product set entry for manufacturers was developed. This
development is customer-specific.
Entry of customer-specific sash size sets is only possible if the environment variable
MODUL_SASCH is active. (see Chapter 40.1). The use of these sash size sets in order entry is
associated with the environment variables MODUL_PRODSET=0 and the database configuration
SASH_DB.
To be noted here is that this logic was developed in 2008 especially for a customer, but it was not
implemented. It is recommended that you not use this configuration.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 385
        55.2.2.          MODUL_PRODSET=1
For the setting MODUL_PRODSET=1, A+W Enterprise is configured for the entry of product sets. In
addition, the SASH_DB must be activated. The database name for the creation and obtaining of
the products sets is stored in these variables. This variable must absolutely be set if in Master data
-> Finished Products -> Product sets you create and change the product sets.
For the order scheduling of the product sets used, MODUL_PRODSET_DFUE must be activated. All
module variables are for-fee modules.
Master data entry with reference
Here it must be noted that the attached document is not copied to a new, order-specific or
product-specific directory; instead, it remains in the old storage location. In the new product set,
reference is made to the storage location from the original product set. This means that if the
document is changed, it is changed in the original product set and in all orders generated via
external EDI in which the product set was used.
Document entry
This product set can then be used in order entry. For this at item entry, just enter the set number
instead of the product code or select it with <Ctrl+F9>. On the search dialog (<Ctrl><F9>), the hit
quantity can be reduced by entering the manufacturer (customer in the product set master data)
or an object, product type or product set name. Here, the entry is not required and the search can
be started directly with <F3>.
With a double-click on the desired product set or by pressing the [OK] button, the product set is
marked for transfer into order entry. The cursor activates the Quantity multiplier input field. Enter
the desired multiplier. The complete product set will be added to the document. The item
quantity is calculated from the quantity in product set times the multiplier.
In the order entry, product sets can also be entered in other customers' orders.
The set number is noted for all items and displayed in the order, item level, Properties tab. The
order items entered this way can be changed. You can also delete elements of the set.
If a product set has been entered only with a global net price (no item prices) and you adopt the
set, an additional price item will be added showing the net price for the entire set. Automatic
creation of the total price requires amendment of master data. Please contact your project
manager if you want to use this function.
Additional possibility in the configuration:
SASHPREISARTIKEL
If the variable is activated, during the entry of a product set, an extra price item with the fixed
price is attached to the transaction. As value, the variable must include the article number for this
additional price item. If the switch is not set, the price is not taken over.
If the article is not defined in the master data, there will be problems during the entry: there is no
takeover of the price.
Restriction
If product sets should be used within the external transaction interface, it is absolutely necessary
that each product set consist of precisely one item. In addition, the product set name may not
contain the following characters:
            ' ' (0x20) space (SPC)
             '\t' (0x09) horizontal tab (TAB)

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                386
            '\n' (0x0a) newline (LF)
            '\v' (0x0b) vertical tab (VT)
            '\f' (0x0c) feed (FF)
            '\r' (0x0d) carriage return (CR)

For the use of product sets within the external EDI, additional restrictions have to be heeded,
which are described in the configuration instructions "EN-CONFIG-A+W Enterprise EDI".


Document allocation
If documents are attached to the product set via document link, the link is not taken over in the
order during entry.
#410440: Starting with alcib – build 13.04.0655 (December 2017) the files are taken over into the
order and copied into an order-specific directory.
Article replication
Product sets are not replicated. If they should be used in several locations, the use of a central
product set database (SASH_DB) is recommended.
With A+W Enterprise 6 Build 01.02.2020, product sets can be transferred via internal EDI. For this,
the product sets must be created in the master data and then entered into the table via individual
scripts/procedures. Here it must be noted that the field intver must be = 3. See also "EN-CONFIG-
A+W Enterprise EDI"
External order interface
The functionalities relating to the use of product sets within the external order interface are
described in the special documents "EN-A+W-EDI Import" and "EN-CONFIG-A+W Enterprise
EDI".




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                    387
56. Delivery note creation from shipping
56.1.           Error status
During delivery note generation in shipping, the following errors can occur, which are logged in
the Lieffrei log.
    •   772: The transaction X has a disused currency!
    •   775: Delivery note X cannot be generated because a limit was exceeded.
    •   778: Delivery note X cannot be generated due to a delivery stop.
    •   779: Order X is a stock order. Delivery note cannot be generated.
    •   780: Customer not in the database. Delivery note cannot be generated.
    •   781: Delivery note for order X cannot be generated due to missing goods receipts.




56.2.  Sending of delivery notes as e-mail on
  generation in dispatch
[AW-166963]
Caution: This function cannot be used together with "Delivery note printing in dispatch depends
on a configurable field in the market partner master data".
If delivery notes are generated in dispatch, there is always a direct query for the corresponding
printer. Now, over time, things have changed so that all delivery notes should not really be
printed on paper; instead, they should be sent via e-mail.
Through configuration with the environment variables LAPOOL_LS_EMAIL, you can control from
dispatch whether the delivery notes generated should be printed out or sent directly via e-mail.
For this, the form type of the form to be sent is entered in the environment variables. After
generation of the delivery note in the dispatch control, with active logic, the dialog for sending
the e-mail opens. This is the familiar dialog from the menu "Sales > Forms > E-mail". The e-mail
recipient is determined and suggested by the existing function. It can be changed on this dialog.
Similarly, you can use the code in the first column to determine whether or not the delivery not
should be sent by mail.
If the delivery note is marked as "do not send" here, it will also not be printed. It will only be
generated and can be printed later manually in Sales - Forms.
If this function is active and there is a partial delivery note for an order that was not yet sent via
mail, then with generation of the following partial delivery note, it is offered again for mail
dispatch. In the transition time, this can cause partial delivery notes that were already sent to the
customer to be sent again via mail.


Therefore, we ask you to heed the following: Since especially in printing and in mail dispatch
many customer-specific configurations and customizings are possible, the use of this function


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                   388
must be tested intensively at the customer's. A+W Enterprise can unfortunately not be tested in
advance for all configuration and customizing variants.




56.3.   Delivery note printing in dispatch depending
  on a configured field in market partner master data
Caution: This function cannot be used together with "Dispatch of delivery notes as e-mail during
generation in dispatch" Similarly, this function cannot be used with the packing view of the
dispatch control (LAPOOLART = 3).
The delivery note generation and the associated printing process in dispatch control were
expanded, so that not all delivery notes generated must be printed.
Installation:
    •   A new private field in the market partner master data is required (lfdnr=3001)
    •   A new set of configurable fields for the order header is required.
    •   The environment variable LAPOOL_DNPRINT_VIA_MP = ON must be set
    •   Binary lapool and alcib September 2024
The following installation scripts can be used for the system.
/develop/globfiles/kflddef/mpprffld/set_VKLS.sql
/develop/globfiles/kflddef/kaufprvfld/set010.sql
IMPORTANT As soon as the script "set_VKLS.sql" has been executed, you must enter the menu
element "Master Data > Field Configuration > MP Field Configuration" and save. The question
"Should the configured MP field be re-distributed to the market partners?" must be answered
with "yes". Now the new field is generated for all market partners with the reserved lfdnr=-3001
(DB table prvfld). The pre-population is done with 0 and printing is thus excluded for all market
partners. Starting at this time, the logic is activated with regard to the assessment.
CAUTION: If you are working with market partner replication in this area, this may be done
exclusively in the master
The data in the order-related set is pre-populated during entry from the market partner master
data. Here, both the data for customers as well as the data for a project entered is evaluated. If
for the customer or project the new setting for printing the delivery notes from dispatch with =
1(YES), then the print=1(YES) is set automatically. However, it is not possible to overwrite the data
directly in the order.
In dispatch on the route and order level, a new field was activated, which displays the data from
the order.
On the rout level, the field is active if at least one order is marked for delivery note printing. The
flag is only displayed in dispatch and cannot be changed.
Due to limited space, the field "I(nformation)" was removed from the main overview. If on a route
there is at least one order with dispatch information, it is displayed at the lower edge.
On the order level, the order information is abbreviated and displayed on the lower edge. The
complete display is, as earlier, on the tab "DispatchInfo 1".


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  389
The determination is done first via order data. If the order was entered before creation of the
new set, then the data from the customer/project is still evaluated. If the field is also not found in
the market partner, then the logic applies as not active.
If you generate the delivery notes for a route via the menu "Delivery notes release+printing" and
at least one order is on DN-print, then the data for the printer is queried. Then only the delivery
notes are forwarded for printing that are on printing "yes". For the remaining orders, the delivery
notes are only generated.


56.4.           Plausibility check
During generation of delivery notes from dispatch, a plausibility check can be switched on by
setting the environment variable LIEFERSCHEIN_CHECKER. This includes two aspects.
    •   For all ordered parts of the items to be delivered, it is checked whether goods receipt has
        been booked for a sufficient quantity.
    •   For all stock items, it is checked whether the number to be delivered is actually in the
        specified stock. The check is only done for header parts.




56.5.           Configuration
LAPOOL_DNPRINT_VIA_MP (client reference: no)
Controls the printing of delivery notes from dispatch via a configurable field in the market partner
master data. If in the market partner master data you see "no printing"(=0; default), then the
delivery notes are only generated in dispatch and not printed. Not possible together with
LAPOOL_LS_EMAIL.
LAPOOL_LS_EMAIL (client reference: no)
  In these environment variables, the form type is entered that should be used if the delivery
notes from dispatch should not be printed, but rather sent as documents via e-mail. Not possible
together with LAPOOL_DNPRINT_VIA_MP.
DELIVERY NOTE CHECKER (client reference: no)
AWD #125465
This environment variable activates a plausibility check for the delivery note generation
(dispatch):
  Ordered articles => Check for goods receipt...
  Stock article => Check that there is no shortage.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 390
57. Automatic delivery note creation in the
 background
    This functionality was developed with Version 2008.2 and enhanced with Version
    2012.


57.1.        General process
    Via a script, a file is generated in which the delivery notes to be generated are
    included. This file must absolutely be in $ALDATPFAD. Then, the program "lapool"
    starts with the parameters "AUTOLS" and the file name to be processed (relative to
    $ALTDATPFAD). ("lapool AUTOLS <file>").

      57.1.1.        Log
    The result of reading in each line of the interface file is logged in
    $PROTOPFAD/AUTOLS<mmdd>.
    AUTOLS_TEST: With this environment variable, the FTEST for the background
    delivery note generation can be switched on. The value of the variables represents
    the test level.

      57.1.2.        Processing of the transfer file
    If the program lapool is started with the parameter "AUTOLS", the program
    searches in the directory $ALDATPFAD for a file that was tranferred as 2nd
    parameter with the program call (Call: "lapool AUTOLS <filename relative to
    $ALDATPFAD>").
    If this file cannot be read, the program ends with the error code 5555. At this time,
    no additional log was written. This error must be checked by the blanket script and
    logged.
    Then there is a check whether the transfer file contains data. If this is not the case,
    then $PROTOPFAC/AUTOLS<mmdd> is logged and the program ends without error
    code.
    The processing of the transfer file is done line by line. If a line of the transfer file can
    be read in successfully, this is logged in $PROTOPFAD/AUTOLS<mmdd>.
    Then there is a check whether with the data transferred there is a data record in
    dispatch (table: lapool) that was not cancelled (storno=0) and there is an outgoing
    order (vmodus=0). If no data record was found, this is logged in
    $PROTOPFAD/AUTOLS<mmdd> and the system message 72 is sent to the employee
    $AUTOLS_MANR. Then the next line of the transfer file is processed.



A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                              391
    If the order was found, then there is a check whether there is already a delivery
    note. If this is the case, this is logged in $PROTOPFAD/AUTOLS<mmdd> and the
    system message 72 is sent to the employee $AUTOLS_MANR. Then the next line of
    the transfer file is processed.
    If there is no delivery note, there is a check whether the planned arrival date
    (lapool.ankunft) is within a completed period. This check only takes place if the
    environment variable PERIODENPRUEFUNG is enabled. If the arrival date is within a
    completed period, this is logged in $PROTOPFAD/AUTOLS<mmdd> and the system
    message 72 is sent to the employee $AUTOLS_MANR. Then the next line of the
    transfer file is processed.
    If there is no delivery note and if the arrival date is outside of a completed period,
    then there is a check whether the order was already reported completely packed. If
    the order has not yet been booked completely packed, this is logged in
    $PROTOPFAD/AUTOLS<mmdd> and the system message 72 is sent to the employee
    $AUTOLS_MANR. Then the next line of the transfer file is processed.
    If there is no delivery note and if the arrival date is outside of a completed period
    and if the order was booked completely packed, then there is a check whether the
    order is still being processed by the order completion (process: intauf) or by the
    booking process (process: rserv). If this is the case, this is logged in
    $PROTOPFAD/AUTOLS<mmdd> and the system message 72 is sent to the employee
    $AUTOLS_MANR. Then the next line of the transfer file is processed.
    If there is no delivery note and if the arrival date is outside of a completed period,
    the order was booked completely packed and if the order is not in the processing of
    the background processes intauf and rserv, then there is a check whether the route
    for the order is a regular route to the customer. If the route is an internal route
    (routenkz=4), then this is logged in $PROTOPFAD/AUTOLS<mmdd> and the system
    message 72 is sent to the employee $AUTOLS_MANR. Then the next line of the
    transfer file is processed.
    If the order has not yet been booked to transport and the environment variables
    AUTOLS_WITH_TRANSPORT and FERTIGWARENLAGER_MIT_VLS are set, then there
    is automatic booking to transport. If within this pricess an error occurs, this is
    logged in $PROTOPFAD/AUTOLS<mmdd> and the system message 72 is sent to the
    employee $AUTOLS_MANR. Then the next line of the transfer file is processed.
    If in particular the variable AUTOLS_WITH_TRANSPORT is not set, it is assumed that
    the booking has already been made before the start of the automatic delivery note
    generation. This variable can be set within the script to start the automatic delivery
    note generation.
    If the booking to transport was successful, then the actual delivery note generation
    is started. If within this pricess an error occurs, this is logged in
    $PROTOPFAD/AUTOLS<mmdd> and the system message 72 is sent to the employee
    $AUTOLS_MANR. Then the next line of the transfer file is processed.




A+W Software GmbH              EN-CONFIG-A+W Enterprise.docx                           392
Summary of the checks
      1. Read transfer file in $ALTDATPFAD
      2. Read line in transfer file
      3. Non-cancelled order with transfer data from file exists as outgoing order
      4. There is no delivery note yet
      5. Arrival date is outside of completed period
      6. Order is completely packed
      7. Order is still before background process intauf
      8. Order is still before background process rserv
      9. If the order is not on an internal route (routenkz=4)
      10. Booking to transport
      11. Delivery note generation




57.2.        Format of the transfer file
    The program expects the following information in the transfer file:
        Scheduled delivery date      lapool.ltplan                 Char(10)
        Order number                 lapool.auftrnr                Long
        Route number                 lapool.routenr                Integer
        Site number                  lapool.hausnr                 Integer
    The data is expected in a line separated by blank spaces. The delivery date is
    expected in $DBDATE format.
    The result of reading in each line of the interface file is logged in
    $PROTOPFAD/AUTOLS<mmdd>.


57.3.        Functions
      57.3.1.         Locks
    The process for automatic generation of the delivery notes may only be started
    once. For this, a lock logic outside of the program is required. This can be solved as
    follows:
    $IPCDIR/autoLS.<n>.log is written by the blanket script autols_batch.sh.
    The blanket script checks this log file and forbids a doubled start.
    If the program lapool is started with the parameter AUTOLS <filename>, it first
    writes a lock file $IPCDIR/autols.log. This includes the PID of the lapool process. If
    this file cannot be written, the program ends with the error code 5555. At this time,


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                         393
    no additional log was written. This error must be checked by the blanket script and
    logged.


57.4.        Environment variables
    ALDATPFAD: Directory for the interface file. $ALDATPFAD is a global Unix
    environment variable.
    AUTOLS_MANR (client reference: no)
    Message recipient for the background delivery note generation. If the variable is not
    set, there is no e-mail notification by the program.
    AUTOLS_TEST: With this environment variable, the FTEST for the background
    delivery note generation can be switched on. The value of the variables represents
    the test level.
    AUTOLS_WITH_TRANSPORT (client reference: no)
    If this variable is active, the automatic generation of delivery notes assumes a
    previous transport booking.
    FERTIGWARENLAGER_MIT_VLS (client reference: no)
    The booking to the finished goods stock is made via the advance delivery note. At
    ADN goods are booked on "trucks" and only booked out of the site. But they are in
    FG stock with target site=-1. Only DN books out the records with destination site=-
    1.
     If no ADN is generated for the order, the data is output directly from house X for
    the DN. Source of error: Partially ADN and then completely LS not from shipping.
    LAPOOL_LS_PERIODENPRUEFUNG (client reference: no)
    If this variable is active, for the delivery note generation in dispatch it is checked
    whether the arrival date of the order lies within a completed period. If this is the
    case, the delivery note cannot be generated. PERIODENPRUEFUNG must be enabled
    for the actual period check.


    PERIODENPRUEFUNG (client reference: no)
    This activates the period end check for purchase invoices, goods receipts, and the
    mistaken quantity check in dispatch control. Purchase invoices, goods receipts, and
    mistaken quantity checks may be booked in an already-completed booking period.




A+W Software GmbH              EN-CONFIG-A+W Enterprise.docx                           394
58. Receipt of goods
58.1.           Invoice transfer/automatic receipt of goods
For more information, see "EN-CONFIG-A+W Enterprise B2B Service ERP WS" and the
documentation in Sharepoint:
https://awsoftwaregmbh.sharepoint.com/:w:/r/sites/AWClarityRD/Shared%20Documents/Interfa
ces/Enterprise/B2B%20Interfaces/DE-
A+W%20Enterprise%20Cust%20Auto%20Goods%20Receipt.docx?d=w10900c1fb5f645278125dda
31105c10f&csf=1&web=1&e=eQMeMy




58.2.           Check receipt of goods
        58.2.1.     Automatic warehouse in / delivery note generation
            for direct delivery
This was implemented as default logic.
See AWDesk #334475.
Documentation in Sharepoint:
https://awsoftwaregmbh.sharepoint.com/:w:/r/sites/AWClarityRD/Shared%20Documents/Config
uration/EN-CONFIG-
A+W%20Enterprise%20B2B%20Service%20ERP%20WS.docx?d=wfbedc124aae54176806873f8f37
b36d7&csf=1&web=1&e=MSk9hm



        58.2.2.         Internal charging (customer-specific)
There is a possibility via a control pool to generate receipt of goods and purchase invoices based
on the underlying PO and a received invoice.
This customer-specific solution is described in the following document:
https://awsoftwaregmbh.sharepoint.com/sites/AWClarityRD/Shared%20Documents/Interfaces/E
nterprise/B2B%20Interfaces/DE-
A+W%20Enterpprise%20%20Cust%20Auto%20Goods%20Receipt.docx?web=1


58.3.           Rack-related incoming goods
(#335042) The rack-related incoming goods were expanded so that now a LieferID on the rack
level can be entered. If the system is configured such that this LieferID must be entered, the rack
number is left blank. In this case, the next free internal rack number is assigned by the system.


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               395
Furthermore, it is now possible, in addition to order-related purchase orders, to book stock-filling
purchase orders via the rack-related incoming goods. Manual purchase orders cannot be booked
here. Per rack, only one order type (order or stock) is allowed.

It is now possible using rack-related incoming goods to book stock orders to the rack stock. Here
the registration point is used as slot and the Lieferid as external rack number. The rack number
entered in incoming goods is used as internal rack number in the stock. However, it is not
displayed in the stock module since here generally you are working with the external rack
number. For the correct stock booking, it is important that in the purchase order a stock of the
type rack stock was assigned to the order items; otherwise there can be no correct stock booking.
To book the stock, first it is checked for a purchase order which items were already made ready in
the stock forecast table wldispo. The booking of the incoming stock is based on the data of this
table; however as booking quantity, the quantity that was entered in the rack-related incoming
goods is used. The quantity of the table wldispo plays no role in this case. After the racks were
booked in the stock, the stock booker ensures that the records ot he table waeingestkopf and
waeingestpos are backed up and deleted.


        58.3.1.            Rack stock
The rack stock booking is subdivided into two areas, incoming rack stock and outgoing rack stock.
Both dialogs initially display racks that are currently in the stock.
The incoming rack stock is used in order to book items to an existing rack or to enter an item on a
new rack.
The outgoing rack stock is used to remove items from a rack, to rebook them to another rack or to
book a rack into a different slot.
In the first step after entering the dialog, the filters are selected that limit the display of the racks
in the stock. At the same time, the filters specify properties for racks that are newly booked into
the stock.
The selection of the filters can occur in different combinations.

    •   Article / Stock

Articles and stocks limit the display of the racks in the stock.
    •   Article / Stock / Rack
After selection of article and stock, in the rack selection only racks are displayed that correspond
to these criteria. After selection of the rack, only this rack is displayed.
    •   Rack
The field 'G' for mixed is selected if there are different items or different variants of an item on a
rack.
The list is sorted according to the time of the first rack loading booking.


        58.3.2.            Booking of incoming rack stock
Selection of the filters



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                   396
After the filters have been selected and the stock is displayed, the user can begin booking the new
items into the stock.
Review
First there is a check of whether this is a new rack in the stock. If the rack is not in the stock, a
new data record is created. If the rack is already in the stock, it must be checked whether the item
in its variant is already on the rack. The system does not allow a new data record to be created for
a variant that is already on the rack.
Input
If the item in its variant is already on the rack, the quantity that should be booked to the rack is
entered in the 'Booking' field.
If the rack does not exist yet or if the current variant is not yet on the rack, the user creates a new
data record at the end of the list.
In the first step, the user selects the variant using a selo.
The rack is entered in the second step. This can either happen via a direct input or the rack can be
selected from the existing racks in a selo. In both cases, there is a check of the entry. If the variant
is already on the rack, the selected rack is deleted and you either select a permissible rack or book
the quantity to the existing data record.
In the third step, the slot is also entered directly or with a selo. The following check ensures that a
rack cannot be booked into two different slots. If the rack is already assigned to another slot, then
the slot found is selected automatically. In addition, the slot may only correspond to one of the
specified registration points that are offered on the selo.
For permissible registration points, see the table awc_alcimerfstellen. As an additional limitation,
there is a check whether the property awc_alcimerfstellen.erftype corresponds to the value of the
environment variable AWC_RACKSTOCK_REGPOINT_TYPE.
Then the booking quantity and the price or price per unit are entered.
Booking of outgoing rack stock
In outgoing rack stock, items can be removed from a rack, whereby an order and an item can be
specified. The procedure is different for header and child parts. Items can be rebooked to an
existing or new rack and racks can be rebooked into another slot. The precise procedure is
described in the following sections.
All upcoming bookings that are marked in yellow can be undone with the 'Reset' button.
Removal of child parts in the rack stock
The removal of child parts is done using production pick list via the menu element Stock > Booking
> Outgoing rack stock. This dialog displays all associated racks for an item/stock combination,
arranged according to the time of the first rack loading booking. For removal, you specify the
quantity and the associated customer order item or stock filling order item.
The first field that you see when running through the data record is the order number. The order
number can be entered or selected on a selo. The selection of the available order items on the
selo is done based on the stock forecast for this item. In addition, the total quantity, the already-
booked quantity and still-open quantity for the respective order item is displayed. If you exit the
selo, the Item field is filled automatically with the selected order item. For a direct entry of the
order number, the item must also be specified. The booking field is filled automatically with a selo
selection. If there is a sufficient 'open quantity' available for the quantity on the rack, the booking


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                 397
field is filled automatically with the value in the quantity field. With a direct entry, the booking
field is also checked and in the case that the value exceeds the 'open quantity,' it is lowered to the
'open quantity' value.

If you leave the data record, there is a splitting of the data record if the total quantity is not
removed for this item/variant combination. That is, the value 'booking' is smaller than the value
'quantity.' The existing data record then contains the original 'booking' quantity in the 'quantity'
and 'booking' fields and the selected order item. The first data record is now locked and as
booking preparation, identified with a solid yellow dot.

The new data record is initialized with the remaining quantity ('quantity' - 'booking'). The view has
now changed automatically from the order-related view to the 'rebooking' view. The user must
book the remaining quantity to a new rack. For this data record only the fields rack and the
associated slot can be selected; all other fields are locked. In addition, the data record is now
marked as a half-filled data record with a half-filled yellow dot. If the rack and the slot are also
selected, the data record is locked and the dot is filled out completely.

In order to reset a split booking, one of the two data records can be selected and then the 'Reset'
button pressed.

For the removal of TGs, for example, the TG item must be set to stock change delivery note in the
IG. Here the background process intauf ensures that for items with a rack stock, the table wldispo
is booked as STD stock. This is necessary in order to be able to execute the removal with
appropriate order reference in the outgoing rack stock.

The selection of the available order items and open quantity is determined by the table wldispo.
With the limitation ‚b_status < 2 and vorgang = 5 and b_typ = -1’ and the properties of the current
data record, total (b_anz) booked (verbucht) and open (b_anz - verbucht) are determined. The
program considers the quantities already assigned to another data record, corrects the 'booked'
and 'open' quantities on the selo and in the check.

Removal of header parts in the rack stock

The removal of header parts with order reference is done analogously to the removal of the child
parts. Here only the complete rack quantity can be removed and assigned to the order item. For
this removal, the dispatch rack system is booked automatically. (tables gest and gestzu). If the
order is still completely on a route, the rack "generated" in dispatch is also assigned directly to a
route.

Booking to a new or existing rack

In the 'rebooking' view, an item can be booked to a new or existing rack.

As described in the incoming rack stock, the rack and slot selection are subject to limitations.

Inventory in the rack stock

The new dialog 'Inventory - rack stock' is used to correct the stocks in the rack stock. As in other
stock types, the stocks for existing data records can be adjusted there. The 'target' column
displays the current stock on a rack. The 'actual' column initially also displays the current stock,


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 398
the new total quantity is entered. In the case that a rack should be booked to another slot, a new
slot can be entered in the 'slot' column or selected in a selo. Only slots can be entered that are
also specified in the selo. The available slots are determined as described in the 'incoming rack
stock' section. The slot for other data records that contain the shifted rack is automatically
changed too.

Data records can be deleted with F7. New data records are created when you call up the dialog
for entering new data records with F6. In the first step, the item of the new data record is
selected, then the variant and color. Racks can only be entered directly unless a selo can be called
up since only new racks may be entered. In the end, for complete identification, the slot must be
entered that is selected in a selo.

In order to enter the new data record completely, the stock fields must be filled and if necessary a
remark can be added.

Incoming stock via Barcoding rack bookings for stock filling orders

For stock filling orders, the stock is first booked with the booking of a registration point that
corresponds to a stock slot. In the rack stock, there is no incoming stock booking via completion
report. The rack number used in A+W Production is taken over in the stock as external rack
number. If this rack number is not yet known in the stock, a new internal rack number is
determined for this via a number range. The registration point is used again as slot. After such a
stock booking, currently no additional Barcoding bookings are possible. If nevertheless such a
booking should be made, then an error e-mail will be sent to a configured user. This booking must
then be made manually in the incoming/outgoing rack stock.

Booking of the dispatch rack system for produced customer orders

If customer orders are packed on racks in A+W Production and reported out of the house, a
message for the appropriate rack is send to dispatch. Here, in turn, the dispatch rack system is
booked (tables gest and gestzu). If the order should still be on a route, the route assignment of
the rack is done at the same time. If this is not the case, then this rack assignment must be made
manually in dispatch.

Emptying the rack in the dispatch module

If a rack that was previously reported outside the plant is booked back to "3 beginning," then the
associated message to A+W Enterprise causes the emptying of the rack and the backing up of the
associated rack data to the table gestzuprot.

Incoming stock for stock filling orders
The switch WLDISPO_VARIABEL may not be set, otherwise the fixed IGs in stock orders are
booked to stock as variable variant.
#438795/ 02.2018: This restriction has been removed.
In ERP-WS, the booking is not initiated if:

    •   A registration point type defined IS AWC_RACKSTOCK_REGPOINT_TYPE and this variables
        the registration point type via which the slots can be grouped in AWP includes



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              399
    •   In the AWP registration point an ERP tool is entered that correspond to the registration point
        number. Important: after creating new slots, these must be transferred via the A+W Enterprise
        Export Service into the ERP system. (insert into exportinfo (interface) values ("ERFSTELLENALCIM"))
        Here the table awc_alciberfstellen is filled.
    •   In the AWE table awc_alcimerfstellen for this registration point the type stored in
        AWC_RACKSTOCK_REGPOINT_TYPE was found.
When booking the rack-related incoming goods, first the structure waeingestkopf and
waeingestpos are filled and after that the stock booker commissions the booking of the rack-
related incoming goods analogously (b_status=133). The transferred rack number is used as
lieferid (exgnr) and it is written negated by gestellnr. The stock booker thus recognizes that a new
internal rack number must be assigned. Here there is a check whether the external rack number is
already present in waeingestkopf.lieferid or in waeingestkopfok.lieferid. If this is currently, the
stock booking is declined and a mail with the Meldid 52 is sent to the recipient from the variables
AWC_RACKSTOCK_MAIL_MANR .

Booking of gest and gestzu with order-related outgoing stock

If there is a booking with order reference in the outgoing stock and the booking is about a header
part that is removed from the stock, then gest and gestzu are booked. If the rack fits the route, it
is then assigned to the route. This assumes that there are sufficient unpackaged quantities on the
corresponding route.

Since the stock booker always generates a completion report when booking and if the variable
LA_LAPOOL is set, a packaged report is also generated. This variable may not be activated.

Rack-related incoming goods

In rack-related incoming goods, the environment variable WE_GEST_IDREQUIRED controls
whether the field "LieferID" or the rack number must be filled out.
Variable active: LieferID must always be filled. In this case the rack number is assigned
automatically if it is left empty.
Variable not active: rack number must always be filled.


        58.3.3.          Multi-site extension
Adjustments in inward goods booking

(#344831) Previously the rack-related inward goods (Purchasing – Receipt of goods – Rack-related
receipt of goods) could not be started in a multi-site environment. This restriction was removed.
Prerequisite for the use of "Rack-related inward goods" in the multi-site environment is the
presence of registration points for the company "0" or for the special company for which you are
logged in (see "Determination/updating of the AWP registration points"). Registration points with
the company number "0" are valid in the multi-site environment all companies.
For entry of the "Rack-related inward goods," the currently-valid company number is used. This is
indicated in the title of the dialog. If there are still-unbooked inward goods present, the inward
goods assigned to the current company are displayed on the dialog. If there are no unbooked
inward goods present for the current company, the dialog remains empty.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    400
After that, only inward goods for purchase orders can be entered that are assigned to the current
company. An entry of company-spanning inward goods is not possible.
The rack numbers that are entered on the "Rack assignment" dialog are company-spanning. Thus
you cannot enter rack 1 for company 100 and then rack 1 for company 110.
If after the starting of the module you make a company change (^F4 – User configuration –
Company change), you will be informed by a message that this company change will only become
active after you restart the module.

Call of PPS Webservice methods in the AWE export service

The URL of the PPS Webservice to be called can be stored company-specifically in the env
variables AWC_URL_PPS_WEBSERVICE. Thus using an export service, it is possible to address
several production systems.

Determination/updating of the AWP registration point in AWE by the export service

By inserting a special record into the table exportinfo, the export service can be commanded to
determine the current registration points from AWP.

The determination of the registration points can be limited in the registration point types. The
limitation is placed via the environment variable AWC_ALCIMERFSTELLEN_TYP. The type entries in
the variables must be numeric and separated with commas.
If during the determination of the registration point via the PPS Webservice by the production
system, the export service does not receive any registration points, the current entries in the
table AWC_ALCIMERFSTELLEN remain untouched.
If the production system via the PPS Webservice provides at least one registration point, the
content of AWC_ALCIMERFSTELLEN is deleted completely and the new data record(s) are
inserted.
For detailed information about the determination or updating of registration point, please contact
your planner.
Configuration
The determination/'updating of the registration points is started by the entry in the table
EXPORTINFO.
For the insert, the fields SCHNITTSTELLE, HAUS and SHORTWERT1 must be filled:
SCHNITTSTELLE:          is assigned the string 'ERFSTELLENALCIM'
HAUS:            Contains the sites for which the registration point determination is done. Using
                HAUS the company-specific env variables AWC_URL_PPS_WEBSERVICE und
                AWC_ALCIMERFSTELLEN_TYP that can be stored are evaluated. Thus it is possible
                via various PPS Webservices to determine registration points from different
                production systems for different registration points. haus also specifies the site
                that is entered in AWC_ALCIMERFSTELLEN if the determination of the registration
                points is done company-specifically (see SHORTWERT1).
SHORTWERT1:             A value of 1 indicates that all registration points determined company-
                specifically should be written to AWC_ALCIMERFSTELLEN. With a value != 1 the




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 401
               company number in the table AWC_ALCIMERFSTELLEN is filled with 0 (single-site
               logic).




58.4.          External receipt of goods (e.g. SAP)
The detailed description is in the "EN-CONFIG-A+W Enterprise EDI" configuration guide.




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                          402
59. Declaration of performance
As of 1 July 2013, the European Construction Products Regulation prescribes that all
manufacturers and intermediate dealers in the EU issue, manage, and provide declarations of
performance (DoP for short).
The configuration instructions for the declaration of performance (DOP) is in a separate document
"EN-CONFIG-A+W Enterprise DOP".




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              403
60. Special Intauf types
60.1.           Cost calculation (KOSTENKALKEK -15)
This intauf type is used in the course of Multi-step cost write-back for suborders. Hereby,


60.2.           New total (FORALL_SUM -20)
With this intauf type, the item values are recalculated based on the existing price and discounts.
vorrabatt, nachlass, rabatt, npospreis, ekpospreis
Then the document total values (quantities, prices) are re-totaled based on the item values.
nettototal, ektotal, mwstbetrag, gesbrutto, skontierbar
For delivery notes, the Delivery surcharge is also re-calculated depending on the configuration.
Since some discounts relate to the re-calculated values, existing discounts are recalculated and
distributed.
kaufrab, kposerloes, kposekerloes.


60.3.           ENERGY SURCHARGE update (-26)
When creating a document, the discounts from the master data are determined and saved within
the transaction data.
Now values in the master data can change (e.g. increase of the energy surcharge). If the user
wants such a change to affect the existing documents, this can now be implemented with the
background process 'intauf'.
In order to re-determine the discounts of a particular method for a document, first the
environment variable RABATTMETHODEN_UPDATE has to be set. All methods to be updated have
to be stored there, separated by a pipe.
Procedure:
This logic checks whether the document contains a record of this method. If so, and if this record
has not been deleted or changed, the discounts of this method will be recalculated for this
document. In sales, the sales and cost sides are handled separately. That is, that for a document
that has a manually changed sales record and an unchanged cost record, the purchasing records
fir this method are determined anew.
In order to communicate to intauf that the discounts should be updated for a particular
document, this has to be stored in the database table "aufint".
After the discounts are recalculated as described above, the item revenues and total document
values are recalculated.
CAUTION: If this is done constantly, e.g. in the vorgangs_sql, attention has to be paid to the
adherence to the automatic process chains specified by A+W!




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                               404
RABATTMETHODEN_UPDATE (client reference: no)
If the new discount logic (RABATTLOGIK_2005) is activated, it is controlled using this variable
which discount methods (table 'rabattmeth') are updated or added by the Intauf types -26 and -
28 (case #113069). The individual methods have to be entered here separated by"|".
QR11/2022: Adjustment to the "Sales – Document Change" menu


60.4.           Adding ENERGY SURCHARGE (-28)
When creating a document, the discounts from the master data are determined and saved within
the transaction data.
New surcharges or discounts in the form of new discount methods are being introduced
constantly. By default, the discounts for these methods are only present in the documents that
are entered after the creation of the associated master data or were changed decisively. The
background process 'intauf' now offers a possibility for determining discounts for these new
methods also for existing documents.
In order to re-determine the discounts of a particular method for a document, first the
environment variable RABATTMETHODEN_UPDATE has to be set.In order to re-determine the
discounts of a particular method for a document, first the environment variable
RABATTMETHODEN_UPDATE has to be set. All methods to be updated have to be stored there,
separated by a pipe.
Procedure:
If for this logic within the document, no record of the method exists, the discounts of this method
are re-determined for this document. In sales, the sales and cost sides are also separated with this
logic. That is, for a document that has only one sales record, the purchasing records for this
method have to be determined anew.
After the discounts are recalculated as described above, the item revenues and total document
values are recalculated.
CAUTION: If this is done constantly, e.g. in the vorgangs_sql, attention has to be paid to the
adherence to the automatic process chains specified by A+W!


RABATTMETHODEN_UPDATE (client reference: no)
If the new discount logic (RABATTLOGIK_2005) is activated, it is controlled using this variable
which discount methods (table 'rabattmeth') are updated or added by the Intauf types -26 and -
28 (case #113069). The individual methods have to be entered here separated by"|".
QR11/2022: Adjustment to the "Sales – Document Change" menu




60.5.           Book invoice (-33 RECHNUNG_BUCHEN)
#350373
Unbooked invoices are booked.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                405
60.6.             Recalculate discount (-37)
#174433
There is an Intaufart (-37) recalculates - based on master data - the discounts for cases converted
from the old discount logic, and then recalculates the entire case. Unlike former Intauf types, this
one takes all discount methods into account. This means that all master data-related discounts
will be deleted before they are completely recalculated. Manually added discounts will be kept.
Manal changes of master-data related discounts (made at order entry) will be lost however. In the
process, only existing discount records are reworked. If discount records in kaufrab are missing
because they were deleted or new discounts were created later, they will not be created.
If after recalculation based on the new discounts, the net amount (kauf.nettototal) differs from
the old one, the following entry will be made in log rab2005*:
ATTENTION to case <kauf.auftrnr>-<kauf.vorgang>-<kauf.subnr>: Calculated 'kauf.nettototal'
(<kauf.nettototal>) differs from the one before recalculating with the new discount logic (<old
kauf.nettototal>)!
If the environment variable RABATTERMITTLUNG_NETTO_GLEICH has been set, cases for which
the net total would be changed, will be rejected; in addition to the log entry, the database
transaction is reset in Intauf.
These cases should be checked by hand. The differences may result from:

    •     Rounding errors
    •     Changed master data entries.
    •     Discounts no longer exist in master data.

Cases in which the net total has been changed after recalculation, now get - in
addition to the log entry in a file - an entry in the database table CU_DIFFVORGRAB (if it does not
exist, it will be created by the program). This extension was made because information from a
database table can be analyzed easier than log file entries.
The table has to have the following structure:
Column name          Type                    Nulls
auftrnr            integer                   yes
aufnr              integer                   yes
vorgang            smallint                  yes
subnr              smallint                  yes
neuernettototal decimal(16)                  yes
alternettototal    decimal(16)               yes


In addition to the new function, these three Intauf types (-26,-28,-37) will be checked for data
consistency; the following aspects will be checked:

    •     kauf.gesnetto - <total kaufrab.betrag> = kauf.nettototal
    •     kauf.nettototal + kauf.mwstbetrag = kauf.gesbrutto
    •     kaufrab.grundwert * kaufrab.wert = +/- kaufrab.betrag (/100 for KLEINE_RABATTWERTE)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 406
If this check fails, the ALCIB - system report id= 2 will be dispatched; the case will be locked
(kauf.still -60). The case can be unlocked only by a manual change of database. In this case, a
severe error has occurred of which ALCIB service has to be informed. This consistency check can
be switched off via environment variable (NO_CHECK_CONSISTENCY).


        60.6.1.          Relevant environment variables:
NO_CHECK_CONSISTENCY (client reference: no)
  AWDesk #236576: with this environment variable, the consistency check developed with
AWDesk #174433 for the Intaufarten -26, -28 and -37 since the check always takes effect even if
there are not any problems.
RABATTERMITTLUNG_NETTO_GLEICH (client reference: no)
  AWDesk #179528: new determination of the discounts with Intaufart -37 is rejected if the net
total would change.


60.7.           Recalculate prices (FORALL_PREISE (-38))
If a document (order or PO) with still -38 is presented to intauf, then the sales and purchasing
conditions and prices are determined anew for all items. Then there is a new totaling of the
document total values. An additional call of "intaufart Auftragssummierung" (FORALL_SUM (-20 )) is
not necessary.
A separate call for PU and SA is currently not possible.
If the talk is of PU here, then this also implies the material cost calculation. For production costs,
the order must be transferred to production once again.
If this intaufart is used for POs, it must be heeded that the cost back calculation is not done
automatically, but must be initiated with an intauf call -17.


60.8.           Capacity planning (-39 ALCIM_UEBERGABE)
Here the concern is the transfer of existing order for conversion to the A+W Production capacity
planning
# 194130 (alcib 2009 build 4.4.0.4791 / alcib 2011) If you convert the production system from
PMS to A+W Production Capacity Planning, it is now possible to transfer the documents already
transferred to the PMS to A+W Production. This works only for orders, which have to have been
transferred to the production system beforehand. Please note that there is no synchronization
between the production systems. This means that this logic can be used to transfer only those
orders for which production in PMS has not yet begun. The transfer is made via background
processing.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  407
60.9.            Rack invoices (-40 VORGANG_NEU)
Note: The focus here is on -40 in the table "aufint" with document = 7. If in the table kauf still=-40
for document = 4 or 5, then this is a wait state for documents not completely entered in A+W
iQuote.


The function for creating the rack invoice is a component of the AWRack module. Via a function in
the ERP webservice, invoices for rented racks can be generated.
These rack invoices are generated by the background process "intauf". This functionality that is
controlled by AWRck can also be activated directly via customizing.
    •    The intauf process 4 must be configured.
    •    Th table "gestrech" must be filled. The meanings of the fields described here is only for
         the creation of the invoice by the background process "intauf". It does not apply for the
         connection to external systems or AWRack. See the table documentation for this.
The fields that are defined here as "Not evaluated" can be used for individual evaluations and
control; however, they are not currently evaluated by the background process "intauf". However,
this can change them at a later point in time.
 Column                            Meaning
 group                             sequential number per invoice
 Transid                           sequential number per invoice
 Artnr                             Article number for the item in the invoice (artikel.artnr)
 Gnr                               Rack number for which the invoice should be generated
                                   (gestell.gnr)
 Kunr                              Customer number for which the invoice should be
                                   generated (mp.mpnr)
 Fakturatage                       Number of days that should be invoiced. If the number of
                                   days = 0, then it is calculated from fakturabis - fakturavon -
                                   mietfreitetage
 Fakturavon                        Date on which the invoice period begins
 Fakturabis                        Date on which the invoice period ends
 Mietfreietage                     Number of days in this invoice period that are rent-free,
                                   that is, not to be calculated
 Steuerflag                        -2 – new record to be processed
                                   2 – invoice was generated
 Aufnr                             Internal invoice number; it is specified by intauf during the
                                   invoice generation (kauf.aufnr)
 Rechnr                            Invoice number; it is assigned by intauf during the invoice
                                   generation (kauf.aufnr where vorgang=7)




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  408
 Posnr                               Internal item number; it is assigned by intauf during the
                                     invoice generation (kpos.posnr)
 Gsbuchid                            Not evaluated
 Liefdat                             Not evaluated
 Gesliefnr                           Not evaluated
 Auftrnr                             Not evaluated
 Komplett                            Not evaluated




    •     Then a data record must be written to the table aufint with still -40 and the background
          process intauf 4 started (sctrl).
          insert into aufint values (-1,0,7,0,-40,0,0,-1,<Mandant>).


The invoice will be booked immediately. Thus, a correction is not currently possible.
Then the invoice is there and the record in gestrech as well. Via the record in gestrech, you can
specify via an individual script the new calculation period for additional invoices.




60.10. Copy INTERNAL document (AUFTRAG_NEU (-
  45))
#101385
This intaufart is absolutely internal ans serves primarily as QS for standard tests. There is no
support for this intauf type.
If a document with still -45 is presented to intauf, the intauf creates a copy of the original
document.
    a. The reference fields in kauf are filled with those of the basic document.
    b. Kauf.liefkompl, kauf.fakturakz, kauf.rechnr are reset.
    c. The entry date (kauf.edat) is set to "today."
    d. The customer's requested date (kauf.ltplan) is set to today + (ltideal_alt - edat_alt). Thus
       the difference between the entry and customer's requested date is retained
    e. Author, etc. is kept
    f.    For orders, the kaufart (e.g. stock order) is retained.
    g. There is no data warehouse booking
A newly generated order is not released. "Orig.<Refernz Knd Bestnr>" (kauf.exaufnr) is in the
remark in the release pool




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                               409
60.11. Process for transfer of cost calculation
  (ALCIM_UEBERGABE_KK -47)
The system can now perform a downstream transfer to cost calculation via script call. For this, the
orders in question are presented to the background process "intauf" with still -47. It then starts
the transfer to cost calculation. During this transfer, the order is locked with still -10.
Application: E.g., a script can be started in the evening via Crontab in order to generate stock
forecast data. The sample script recognizes that there should be another transfer after order
change, however not if the transfer for cost calculation is done and a change was made on the
same day.
There is an example under
$ALCIBPRG/install/xsql/cust/ka/cu_transOrder2CC.sql
$ALCIBPRG/cmd/transfertocc
The script presents the orders with still -47 to intauf, which then transfers them for cost
calculation to AWP. Here, the stock forecast data, if configured, is generated.


60.12.          Element exchange (SLKORREKTUR -52)
[AW-221950] / 04/2025 // alcib - 13.04.20016
See also EN-CONFIG-A+W Enterprise Production Interface - "Reporting of an element exchange"
The exchange data is transferred via an entry in the table zuaufint with art=-52. There is a
processing with still=-52 (element exchange), and directly after this also processing with still= -38,
via which the costs are calculated and the stock data adjusted.
Prerequisite. The structure of the exchanged article must be identical, both with regard to the
BOM structure and the definition of the additional data (article dimensioning, variant definition,
color definition). For the statement "The structure of the exchanged article must be identical,
both with regard to the BOM structure and the definition of the additional data (article
dimensioning, variant definition, color definition)" the concern is that an "identical" poszu record
must exist both for the source article as well as for the target article. If you were to enter the
source article and target article manually in the order, the corresponding poszu records must be
identical (but for the article number, article name, quantity, etc). Otherwise the exchange will be
only rudimentary. Similarly, there is no exchange of the subordinate BOM. Thus, this function is
not approved for a production exchange.
Data in the table zuaufint:
Artnr = source article number
Artnr1 = target article number
Poskonr = BOM number into which exchange should be made
Tnr = tuple number that should be exchanged




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 410
60.13.          EK_RUECKRECH_PLUS -117
[AW-106081]
This intauf type is for internal POs from which via internal EDI an internal order arises in-house
(see IBHAUS in EN-CONFIG-A+W Enterprise EDI).
The totaled costs including the written-back cost discount (kpos.ererloes) from an internal
component order (IBHAUS) are taken over into the internal PO as PU item price (kpos.npospreis)
and the PU unit price (kpos/npospreis/kpos.menge) are recalculated. With existing written-back
discounts, the PU revenue is also recalculated.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                    411
61. Special process descriptions
61.1.           Production of patterns/tests
In order to handle internal test production, there is no direct standard procedure.In order to
handle internal test production, there is no direct standard procedure. This depends on our
customers' special requirements and processes. This special production does not necessarily
require special processes in A+W Enterprise
A recommendation can be as follows:
The order is entered for the customer number of one's own branch office. If such orders occur
frequently, you can also create a special customer for this. The order type can be set to "free." If
configured, the costs are determined normally. With this procedure, you can invoice the orders
normally. Otherwise they remain in the system forever. If you don't want to invoice them, you can
remove them from the value import (via the customer number) and then complete them
manually.




61.2.           Trade with POs without production
For clients who order all products and do not have their own production, a special configuration
with the environment variable PMSPURCHASETRIGGER is required. The detailed description is in
the "EN-CONFIG-A+W Enterprise EDI" configuration guide. The function is also called "PMS0".




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                412
62. Customizing
The possibilities for customizing are documented in separate configuration instructions "EN-
CONFIG-A+W Enterprise Customizing".


62.1.          Log
The customizing log can be switched on with system menu (CTRL+F4) – CTRL+K. The level of the
log - support or development - can be selected. The log is written to
$PROTOPFAD/cust<pid><mmdd><hhmm>.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               413
63. Late change
63.1.           Local correction through PO
Environment variable KAUFUPDATE_BEI_BEST
A released PO sets the order to the state of LOCAL CORRECTION. Thus a change can no longer be
transferred to AWP.
If this variable is active, then despite LOCAL CORRECTION, the changed order can be transferred
again to the AWP if the user responds to the subsequent security query appropriately.
This order change is no longer communicated to purchasing. The POs thus remain unchanged.
The variable can inherit the values "On" and "On+AWEIN". If the value is "ON," the setting applies
as long as there hasn't been a receipt of goods. If the value is "ON+WAEIN," then the setting also
applies if there has already been a receipt of goods.
Caution: The environment variable KAUFUPDATE_BEI_BEST should only be used with great
caution and only activated for individual users.
If for an item in local correction the BOM is changed (e.g. glass exchange), this can mean that the
internal part number (tupel number) of the ordered part changes. Later on, this could mean
    •   That an already ordered part is reported as ordering to A+W Enterprise. PO
        successions/POs are generated again. If you are not working with the purchase order
        pool, a new PO is triggered immediately.
    •   That a goods receipt in A+W Production can no longer be allocated correctly and thus is
        not removed from the PO pot.
Example: in the present case, the customer orders the glass and then substitutes a more complex
frame after the fact. This changes the tupel number of the glass and the glass is ordered again.
You can disarm this scenario by filling the standard frame with a dummy item, so that for an
exchange, the number of BOM elements does not change. This isn't a sure thing, but it can help.
In principle, however, the processes that make such a dangerous way of working necessary
have to be re-thought.


63.2.           Transfer of late changes to production
Environment variable:

Three types of changes are classified in A+W Enterprise:
    1. Purely commercial change (prices, terms, user data, invoice and printing options,
        payment options, etc.)
    2. Production information changes. (no new scheduling required)
            a) packaging type,
            b) declaration of performance,
            c) file attachments,
            d) delivery address,
            e) customer address,
            f) delivery date (for locked orders)

A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               414
             g) Route (KAUF_ROUTE_PRODRELEVANT not active #394028)

    3. Production-relevant changes that require new scheduling.
          h) Change to the product,
          i) Quantity,
          j) Dimensions (also changes to the shape dimensions that do not cause a change in
              the item dimensions #394028),
          k) Delivery date (for orders that are not locked)
          l) Route (KAUF_ROUTE_PRODRELEVANT active #394028)
          m) …

Note: The list of changes is not complete, but should represent a starting point

If you want all changes in the order (except for purely commercial ones) up to the lock of the
order in the local correction to be forwarded as production-relevant, you should activate the ENV
switch PRODRELEVANT_BIS_LOKALKORREKTUR. (#394028)

As a result there are changes that only occur in the individual items and changes that occur on the
order header level. Changes on the header level mean that the change type is not transferred to
all non-canceled items if the class of the change is higher than any present in the item. If, for
example, the quantity is changed in an item and then the delivery address, then all non-changed
items receive the status "Info to production (kpos.aendkz=4) and the changed position then
"production-relevant change" (kpos.aendkz=5).

If late changes are transferred to production, the system message 80 ("Production information
without scheduling" can be configured for this (see "EN-CONFIG-A+W Enterprise System" section
"System messages").

Here is a tabular overview of the effect of the new module logic:


         63.2.1.          Free orders and transfer to production
 Commercial change         PROD INFO change             PRODrel. change            Treatment
 (In the question,         (general question)           (general question)
 reference is made
 that it was only
 commercial
 changes)
  YES                                                                              kpos.aendkz = 5 (ALL)
 NO                                                                                 kpos.aendkz = 0 No
                                                                                   transfer!
                           YES                                                     kpos.aendkz = 5 (ALL)
                           NO                                                       kpos.aendkz = 4 (in
                                                                                   item)
                                                                                   No transfer!




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                                 415
                                               YES                     kpos.aendkz = 5 (ALL)
                                               NO                       kpos.aendkz = 5 (in
                                                                       item)
                                                                       No transfer!



       63.2.2.     Order by order locking. Transfer to production for
           lock via PO/GR and KAUFUPDATE_BEI_BEST active
CHECK_KPOSSTAT = OFF
MODUL_PROD_SPAETE_AENDERUNGEN = ON
KAUFUPDATE_BEI_BEST = 0N/BEST+WAEIN – caution: dangerous
 Commercial change     PROD INFO change        PROD-relevant           Treatment
                                               change
 (In the question,     (In the question,
 reference is made     specific reference is   (In the question,
 that it was only      made that a PO          specific reference is
 commercial changes)   exists)                 made that a PO
                                               exists)

 YES                                                                    kpos.aendkz = 5
                                                                       (ALL)
 NO                                                                    kpos.aendkz = 0 (ALL)
                                                                       No transfer!
                       YES                                             kpos.aendkz = 5 (ALL)
                       NO                                              kpos.aendkz = 4 (in
                                                                       item)
                                                                       No transfer!
                                               YES                      kpos.aendkz = 5
                                                                       (ALL)
                                               NO                       kpos.aendkz = 5 (in
                                                                       item)
                                                                       No transfer!



       63.2.3.    Order by order locking. Transfer to production all
           other blocks without active KAUFUPDATE_BEI_BEST
MODUL_PROD_SPAETE_AENDERUNGEN = ON
KAUFUPDATE_BEI_BEST = OFF
CHECK_KPOSSTAT = OFF


A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                               416
 Commercial change     PROD INFO change           PROD-relevant            Treatment
                                                  change
                       (general question)
                                                  (general question)

 No query. Message                                                         kpos.aendkz = 0(ALL)
 that everything
 remains local
                       YES (as of                                          kpos.aendkz = 4 (ALL)
                       05/22/2017)
                       NO (as of                                           kpos.aendkz = 4 (in
                       05/22/2017)                                         item)
                                                                           No transfer!
                                                  YES (as of               kpos.aendkz = 4 (ALL)
                                                  05/22/2017)
                                                  NO (as of                kpos.aendkz = 4 (in
                                                  05/22/2017)              item)
                                                                           No transfer!


       63.2.4.        Item-by-item locking
MODUL_PROD_SPAETE_AENDERUNGEN = ON
KAUFUPDATE_BEI_BEST = OFF/ON/BEST+WAEIN (caution!)
CHECK_KPOSSTAT = <date>


 Commercial     PROD INFO change            PRODrel. Change            Treatment
 change.
                (general question)          (general question)
 (In the
                With active                 With active
 question,
                KAUFUPDATE_BEI_BEST         KAUFUPDATE_BEI_BEST
 reference is
                reference is made in        reference is made in
 made that it
                the question that a PO      the question that a PO
 was only
                exists                      exists
 commercial
 changes)
 YES                                                                   kpos.aendkz = 5 in all
                                                                       items where it is possible:
                                                                       all free items or ordered
                                                                       with active
                                                                       KAUFUPDATE_BEI_BEST
                                                                       Otherwise kpos.aendkz=4
 NO                                                                    kpos.aendkz = 0




A+W Software GmbH                EN-CONFIG-A+W Enterprise.docx                                   417
                 YES                                               kpos.aendkz = 4 in all or
                                                                   in the individual items
                                                                   (depending on type of
                                                                   change)
                 NO                                                kpos.aendkz = 4.
                                                                   No transfer!
                                                                   If data was already in
                                                                   PROD
                                                                   (kauf.uebertragen=1),
                                                                   then the data is no longer
                                                                   considered for the next
                                                                   change.
                                           YES                     kpos.aendkz = 5 in all
                                                                   items where it is possible.
                                                                   all free items or ordered
                                                                   ones with
                                                                   KAUFUPDATE_BEI_BEST
                                                                   Otherwise kpos.aendkz=4
                                           NO                      kpos.aendkz = 5 in all
                                                                   items where it is possible,
                                                                   otherwise kpos.aendkz =
                                                                   4.
                                                                   No transfer!
                                                                   If data was already in
                                                                   PROD
                                                                   (kauf.uebertragen=1),
                                                                   then the data is no longer
                                                                   considered for the next
                                                                   change.



       63.2.5.         Comparison OLD/NEW logic.
Item change (kpos.aendkz):
0 : no change/changes not transferred (is not evaluated by PROD)
1 : commercial change (is not evaluated by PROD)
2 : cancel
4 : info to production
5 : Production-relevant -> new scheduling

Order change (kauf._angbstatus nut in kauf.vorgang=5)
1 : production info change
10 : production-relevant change
11 : 1+10

Free orders (orders not in LOCAL CORRECTION)


A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             418
Orders locked by the PO are also affected if KAUFUPDATE_BEI_BEST is active (caution: use of
the variables is dangerous)

OLD: changes go completely to PROD if the question about release was answered with YES.
NEW: changes go completely (mode = 5) to PROD if the question about release was answered
with YES.

ALL items receive the same status = 5 if they go to production.

Locked orders (orders in LOCAL CORRECTION) locking order by order

OLD: commercial changes no longer go to PROD.
NEW (AWE 6.3/5.4): commercial changes no longer go to PROD.

NEW: (AWE 6.3/5.4 starting on 05/22/17): question about release: if YES: all items as INFO. If NO:
changes remain local. No longer noticed.

ALL items always receive the same status = 4 if they go to production.

Locked orders/locking item by item

OLD: order goes completely to PROD (if at least 1 free item is there). Always ALL items, also the
locked ones.
NEW: changes are transferred item by item. With locked ones, only maximum INFO as change
mode. Non-changed items have change mode = 0.

(+) Due to the new scheduling, only the production-relevant changed items go.
(-) If the changes in the order are NOT transferred by the user directly to production, the change
status is lost and is no longer considered for the next change!
(-) It is not possible (except via submenu) to transfer all items to production for scheduling if only
individual items are changed production-relevant or if in the order there have been global or
item-by-item only PROD-INFO changes made. That is, in the place there are fewer possibilities for
transfer than with commercial changes.

Items can have different status depending on the type of changes.



        63.2.6.    Writing back of a changed delivery date from
            dispatch
If LAPOOL_TOUR_TO_KAUF is set, a shift in dispatch is also reported to AWP.



        63.2.7.   Ignore change of the consignment and the
            customer item.
[AW-107059]: QR23/08



A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 419
Albwir.Alcim.Config.dll - v13.6.5867
Albwir.Alcim.Orders4Production.dll - v13.6.5746
Diskset: A+W Production 6 - v13.6.5867
Diskset: A+W Production 6 Import - v13.6.5746
Diskset: A+W Planning 6 Import Services - v13.4.9344


Note. This is a function in the A+W product!
For the "late takeover of production-relevant data" it can be necessary not to take over changes
to the customer consignment and the customer item, such as, for example, if the data has already
been created through individual measures (e.g., SP) and does not originate from the transfer file
(OrderXML).
For this, there is now the switch ORDERS4PRODUCTION/IGNORE_COMISSION_CHANGES in the
A+W Production 6 Parameter Administrator.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             420
64. VAT adjustment
64.1.             Concept Overview
With this brief document, we would like to discuss the adjustment of the VAT. For this, the points
in A+W Enterprise will be examined at which the user can make this adjustment.


64.2.             Master data
On the Master Data > Codes > System > Control menu, it is possible even before the new VAT rate
goes into effect to store the new VAT rate for the customer code "external" with the
corresponding start date Valid from (07/01/2020). At the same time, a different tax account for
the transfer to financial accounting can be stored. If you want to use new accounts in your
financial accounting for the new VAT rate, please check in advance whether your transfer
interface supports the use of these tax accounts.




Figure 125: Maintenance of tax records

No additional master data or configurations are required.


64.3.             Function Description
In A+W Enterprise, the Entry date of the document is used to determine the VAT rate. The desired
or planned delivery date of the document has no effects on the determination of the VAT rate.
The only exception from this rule is the creation of a Credit with reference. In this case, the credit
is created with the VAT rate of the underlying document.
Example:
If you enter an order on 06/25/2020, the order will be calculated with the VAT rate of 19%. And
also if the delivery date is planned for 07/02/2020.
If you enter an order on 07/02/2020, the order will be calculated with the VAT rate of 16%.
If on 06/27/2020 you create an invoice for an order or delivery note, then the invoice will include
the VAT rate of 19%.
If on 07/02/2020 you create an invoice for an order or delivery note, then the invoice will include
the VAT rate of 16%. The invoice will also include a VAT rate of 16% if the document underlying
the invoice (order or delivery note) was entered before 07/01/2020.


64.4.             Action guidelines
Even if according to German tax law the date of service is decisive for the tax determination, A+W
Enterprise uses the date on which the document was created.


A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                            421
Therefore, it is necessary that all goods delivered by 06/30/2020 also be invoiced by 06/30/2020.
If individual orders or delivery notes that were created before 07/01/2020 cannot be invoiced
before 07/01/2020, the invoices for these can be backdated.
This can be done in 2 ways.
Creation of manual invoices
In the Manual invoicing, it is possible to backdate the invoice entry date. For this, in the invoice
header in the "Entry Date" field, enter the desired date before 07/01/2020. For security reasons,
the date must be entered twice here. The booking date for the invoice is unaffected by this.




Figure 126: Manual invoice creation

         Automatic release
In the automatic invoicing, it is also possible to change the document date. For this, on the
Automatic Release dialog, the desired date before 07/01/2020 has to be entered. For security
reasons, the date must be entered twice here. The booking date for the invoice is unaffected by
this. Thus, in an invoice run, it is possible to invoice all deliveries up to and including 06/30/2020
and then all later deliveries. For this, it is only necessary that the value import used for the invoice
run query the delivery date as parameter. Which SQLs are used for the value import is defined in
the environment variables RECHFREI_RELEASE and SRCHFREI_RELEASE. If you need assistance
with this, please contact our service or your project employee in timely fashion.




Figure 127: Automatic invoice creation




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                              422
65. VAT conversion
With this brief document, we would like to discuss the adjustment of the VAT. For this,
the points in A+W Enterprise will be examined at which the user can make this
adjustment.


65.1.             Master data
On the Master Data > Codes > System > Control menu, it is possible even before the new VAT rate
goes into effect to store the new VAT rate for the customer code "external" with the
corresponding start date Valid from (07/01/2020). At the same time, a different tax account for
the transfer to financial accounting can be stored. If you want to use new accounts in your
financial accounting for the new VAT rate, please check in advance whether your transfer
interface supports the use of these tax accounts.




Figure 128: Tax records



No additional master data or configurations are required.




65.2.             Function description
In A+W Enterprise, the Entry date of the document is used to determine the VAT rate. The desired
or planned delivery date of the document has no effects on the determination of the VAT rate.
The only exception from this rule is the creation of a Credit with reference. In this case, the credit
is created with the VAT rate of the underlying document.
Example:
If you enter an order on 06/25/2020, the order will be calculated with the VAT rate of 19%. And
also if the delivery date is planned for 07/02/2020.
If you enter an order on 07/02/2020, the order will be calculated with the VAT rate of 16%.
If on 06/27/2020 you create an invoice for an order or delivery note, then the invoice will include
the VAT rate of 19%.
If on 07/02/2020 you create an invoice for an order or delivery note, then the invoice will include
the VAT rate of 16%. The invoice will also include a VAT rate of 16% if the document underlying
the invoice (order or delivery note) was entered before 07/01/2020.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 423
65.3.             Action guidelines
Even if according to German tax law the date of service is decisive for the tax determination, A+W
Enterprise uses the date on which the document was created.
Therefore, it is necessary that all goods delivered by 06/30/2020 also be invoiced by 06/30/2020.
If individual orders or delivery notes that were created before 07/01/2020 cannot be invoiced
before 07/01/2020, the invoices for these can be backdated.
This can be done in 2 ways.
    -    Creation of manual invoices
In the Manual invoicing, it is possible to backdate the invoice entry date. For this, in the invoice
header in the "Entry Date" field, enter the desired date before 07/01/2020. For security reasons,
the date must be entered twice here. The booking date for the invoice is unaffected by this.




Figure 129: Manual invoice creation



    -    Automatic release
In the automatic invoicing, it is also possible to change the document date. For this, on the
Automatic Release dialog, the desired date before 07/01/2020 has to be entered. For security
reasons, the date must be entered twice here. The booking date for the invoice is unaffected by
this. Thus, in an invoice run, it is possible to invoice all deliveries up to and including 06/30/2020
and then all later deliveries. For this, it is only necessary that the value import used for the invoice
run query the delivery date as parameter. Which SQLs are used for the value import is defined in
the environment variables RECHFREI_RELEASE and SRCHFREI_RELEASE. If you need assistance
with this, please contact our service or your project employee in timely fashion.




Figure 130: Automatic invoice creation




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                              424
66. Rack planning
66.1.           Master data
        66.1.1.         Market partner master data
Maximum packing weight in master data - market partners tab: Production
The maximum rack weight in the order is only checked if the one stored in the market partner
master data is greater than 0 (null).


        66.1.2.         Rack types = packaging types
Logistics - Rack management - Rack Master Data - Rack Types - Rack Types
Bill of materials (BOM)
If the environment variables GESTPLAN_PRIO or GESTPLAN_PYRO are enabled, then BOMs for
variable rack types can be stored here (CTRL +F10). The BOMs are stored in the table "gsl". Only
until February 2025 -- see below
[AW-124162] - QR November 2022
For transmission of the exterior dimensions of one-way packaging (box) to the OTR, it is now
possible to store a new entry on the dialog Logistics > Rack management > Rack master data >
RAck types > Parts list for manufacturing (CTRL + F10). This record must be marked with the
checkbox in the "ED" (exterior dimensions) column. There may be only one record with this code
per box type.For this record, the fields length, width, thickness (=height) must be filled out.
The code is not displayed in the packaging planning. Here, it should be possible to see via the
parts name that these are the exterior dimensions. In the table gskistrukt, the code is taken over,
however, so that it can be evaluated there.
During the transfer of the data to the OTR, the record is taken from the table gskistrukt, which as
lfdnr corresponds to the ordnr from the box BOM 9table gsl) to the aussenmass flag. If there is no
record there, the interior dimensions from the table vsaufgest are transferred.
February 2025 // alcib build 13.04.19463
Since the evaluation in the box BOM depends on the environment variable
GESTPLAN_STÜCKLISTE, the entry of the BOM into the rack types is now controlled exclusively via
this environment variable.


Stackability
[AW-130294] – QR January 2023
For the maintenance of the master data for rack types, it is now possible to mark the stackability
of a rack type. This is done in the detailed view of the packaging.
The field is used only for a customer's own evaluations. It is not evaluated further by the system.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                425
66.2.           Specification for rack planning
        66.2.1.          Warning in case of forgotten rack planning
[AW-111432] - QR 08/2022 - alcib - 13.04.13805 / ENV
For lites with a particular size, the specifications for the rack planning must absolutely be made in
the order. In order to keep the maximum dimension flexible, a separate dummy rack type is
stored as dimension master. This rack type is also entered in the environment variables that
activate this function.
In the "Dimension master" rack type, the fields "Maximum height" and "Maximum width" are
used. When saving the order, it is checked for all items whether the short glass edge exceeds the
small maximum dimension and the long glass edge the long maximum dimension of the
"dimension master" rack type and if so, whether the specifications for rack planning for this item
are stored. If not, the person entering the order is informed and he must do the rack planning.
This check is done exclusively in manual order entry. Within the internal document transfer and
for the external order interface, this function is not applied.
Configuration: DIM_MASTER_RACK


[AW-179404] // 15.05.2024 // alcib - 13.04.17680
Starting with this program version, it is not sufficient only to record the specifications for
rackplanning; instead, rackplanning must absolutely be performed in advance.


        66.2.2.          Individual checking of the rack planning
[AW-135110] // September 2023
An individual checking of the rack planning can be activated. For this, two individual stored
procedures (SPs) must be created.
The first SP "cu_gpl_req()" receives as parameter the country code of the delivery address
(adr.kfzcode/kauf.lkfzcode) and the dispatch type (kauf.versandart). The SP must return whether
the rack planning should be checked - FALSE-no check, TRUE - check required.
The second SP "cu_pm_check ()" checks the rack planning across all calculated data to see
whether it is permitted in this form. As parameter, the SP receives the rack type and the
calculated dimensions of the packaging (width/height/depth). Here, two return values (retCode,
Fehlertext) are expected. If the retCode = TRUE - everything OK, retCode = FALSE - not permitted.
A note with reason can follow in the error text.
The check is done when saving an order. If the necessity of a check of the rack planning is
determined by the first SP and if this has not been done, then the order cannot be saved until the
planning has been completed.
The function is not bracketed with any additional environment variables. If the rack planning is
configured and the required SPs are present, they will be executed.
cu_gpl_req (kfzcode, versandart) into retCode; retCode = 1 - check required.
cu_pm_check (gtyp, maxb, maxh, maxt) into retCode, Fehlertext; retCode = 1 - everything OK.


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 426
66.3.           Planning algorithms
Within the packaging planning, there are various planning algorithms available
GA = Total algorithm
PA = Partial algorithm
M = Manual
PA = Priority algorithm
PO = Cost-based packaging optimization (special configuration and additional tool PMO required)
PV = PO + PackView (special configuration and additional tool PMO required)
EA = Equal Algorithm


Note: The abbreviations are used this way in all languages, there is no translation


        66.3.1.           GA = Total algorithm
GA (= total algorithm): The user specifies for the whole order one Rack main group
(configuration-dependent) or one rack type and the program then has the task of distributing
the items on this rack.

A rack type or a Rack main group (configuration-dependent) can be predefined for the entire
order. Here, the rack main group includes several rack types, that is, various rack types can be
combined into a rack main group. (menu: Logistics > Rack management > Rack master data)
Restriction check

The rack types or rack main types approved for a customer must be stored in the market partner
master data (menu: Master data > Market partner > F4 menu > Rack types). There, it is either
possible to store that particular rack types are approved for this customer or it can be stored
that all rack types of a main group are approved for the customer.

#456030: QR 04/20

Extension of the packaging material planning (sort algorithms: "GA")
The packaging material planning has been extended so that it is now possible to consider
customer-specific restrictions during automatic planning (algorithm "GA"). If the new
environment variable GESTPLAN_KUGEST_RESTRIKT is switched on, only rack types or main rack
groups that are assigned to the market partner are allowed in packaging material planning. For
the search for the rack type, this restriction was already active before, whereby it was possible
to enter packaging materials manually that were not assigned to the market partner. As long as
these were present and appropriate for the order, they could be used. This is no longer possible
by switching on the new variable and only the assigned packaging materials are allowed. This
restriction applies both to the rack type and to the main rack groups.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               427
If in the specifications a rack type or a main group is entered, it is first checked whether type
and main group are approved for the customer of the current order. If this is not the case, then
the entry will be rejected with an appropriate message.

If a rack type was entered, then it is checked whether it is appropriate for the dimensions of all
order items. That is, it is checked for each order item whether the width is narrower than the
maximum width of the rack and wider than the minimum width and whether the height of the
item is less than the maximum height of the rack and greater than the minimum height. If this
is not the case, then the entry will be rejected with an appropriate message. As width of the
item, the larger dimension is always used; that is, if the height is larger than the width, then the
lite is "turned."
If a rack main group is input, then it is checked whether there is at least one rack type from this
main group on which all lites for the order fit given their dimensions. If this is not the case, then
the entry will be rejected with an appropriate message.
If the input of the rack type or main group was accepted, then there is a query as to whether
the rack type or main group should be taken over into all items for the setting. If this question is
answered with "N" then the value entered is reset to the original value; that is, the change is
discarded. If it is answered with "Y", then the rack type/main group entered is taken over in all
items of the setting.




        66.3.2.          PA- Partial algorithm
PA (=partial algorithm): A rack type is specified for an item. The program then has the task of
calculating how many racks of this type will be required and of loading these appropriately. In
addition, the customer can specify in the "Quantity" field how many lites of an item should be
loaded on a rack. Finally, it is possible in the "Group" field to pack several items together on a
rack by specifying the same number.

Here, a rack type must be specified for each item. In the process, the same checks are made as
in the sorting GA (permissibility for the customer, permissibility for the dimensions). If the type
entered is permissible, there is a query as to whether the rack type should be inherited in all
other items. Then the master data of the rack type look like this:

    •   Maximum and minimum dimensions

    •   Maximum and minimum depth

    •   Maximum weight

    •   Own weight

    •   Identification of fixed/variable (fixed=A-rack or L-rack, variable=boxes)

    •   Side padding (only for boxes)

    •   Distance across (in case of several columns next to one another)


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  428
    •   Distance high (in case of packing on top of one another)

read in and displayed in the header area of the screen. If necessary, these fields can be reached
and changed from the item area by pressing A5. The following restrictions apply for changes in
the header area:

    •   The maximum weight cannot be changed

    •   The maximum/minimum dimensions can only be changed for variable boxes so that the
        maximum dimensions are made smaller and the minimal made larger. The
        maximum/minimum dimensions for fixed racks can only be changed with special
        authorization (GERE=rack restrictions). If someone does not have the authorization, a
        message appears that tells him which employee he must ask or from whom he can
        receive the authorization. For this, in the environment variable GEPL_MANR, the
        number of the employee must be specified who assigns the authorizations.

    •   The side padding only exists for variable boxes, not for fixed racks
    •   The distance across can only be changed if packing next to one another is allowed for
        the rack type
    •   The distance high can only be changed if packing above one another is allowed for the
        rack type.

From the header screen, you return to the item area by pressing A5 or entering "END". In
addition to the rack type, now the fields "Quantity" and "Group" can also be specified. In the
"Quantity" field, the customer can specify how many lites of an item should be loaded on a rack.
By entering any number in the "Group" field, the customer can pack several items together on
a rack.
Example:

Order with 3 items

           Itm            Quantity                  Quantity                   Group

           1              21                        7                          1

           2              15                        5                          1

           3              30                        10                         1



Based on these specifications, 3 racks are required in the rack planning:

           Rack                Load

           1000                22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                             429
           1001                 22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)

           1002                 22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)



If with this breakdown there are leftovers, then they will be planned on another rack of the same
type.

Example:

           Itm             Quantity                   Number                  Group

           1               21                         7                       1

           2               17                         5                       1

           3               35                         10                      1



Based on these specifications, 4 racks are required in the rack planning:

           Rack                 Load

           1000                 22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)

           1001                 22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)

           1002                 22 pcs. (7 from item 1, 5 from item 2, 10 from item 3)

           1003                 7 pcs. (2 from item 2, 5 from item 3)



If a quantity is specified and a rack type was already specified, there is a check as to whether the
specified number of lites even fits on the rack (based on the thickness and weight and the
maximum permissible weight for the customer). Here, the total glass thickness of the planned
lites is compared to the maximum depth of the rack, and the total weight of the planned lites is
compared to the maximum weight of the rack and the maximum permissible weight for the
customer.

For boxes, the side padding is not considered for the checking of the total depth, but it is
afterwards during the calculation of the total depth. If either maximum depth or maximum
weight is exceeded, an appropriate message appears on the screen and the entry is rejected.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                               430
        66.3.3.         M- Manual
M = (manual): The distribution of the items on racks is done manually; that is, the customer
specifies exactly how many lites from which items should be together on a rack. If here a value
is entered in the "Quantity" field that is smaller than the item quantity, the system immediately
generates a new record where the "Quantity" field contains the difference between the item
quantity and the quantity previously entered ("Item splitting").

Here, the rack type and quantity per rack must be specified; a group can be entered. With this
sorting, the customer specifies in detail how many lites from each item should be packed
together on a rack.

If a value is specified in the "Quantity" field that is smaller than the item quantity, then on the
screen for this item, another record is attached immediately with the difference between the
item quantity and the quantity entered as quantity.

Example:
           Itm             Quantity                   Quantity

           1               20                         12



This produces 2 records for item 1:
           Itm             Quantity                   Quantity

           1               20                         12

           1               20                         8


For this specification, 2 racks are required; on one there are 12 lites, on the other 8 lites. By
entering a group, parts of several items can be packed on a rack.

Example for a manual specification:




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                               431
           Itm           Rtype            Quantity             Quantity             Group

           1             1                12                   6                    1

           1             14               12                   6                    2

           2             1                25                   12                   1

           2             14               25                   13                   2

           3             1                4                    2                    1

           3             14               4                    2                    2

           4             1                31                   16                   1

           4             14               31                   15                   2



        Based on these specifications, 2 racks will be loaded:
           Rack          Load

           1000          36 (6 from item 1, 12 from item 2, 2 from item 3, 16 from item 4)

           1001          36 (6 from item 1, 13 from item 2, 2 from item 3, 15 from item 4)



For all 3 sortings, there are additional input fields available in the item area:
-   Intermediate padding between the lites
    This refers to the cork sheets that are placed between the lites so they do not scratch one
    another. Here, the thickness of these intermediate spaces should be entered in mm.

-   Padding every how many lites
    It is not always said that there must be an intermediate space after each lite. With this
    field, it is possible to specify every how many lites such distance should be provided. The
    fields listed under 1 and 2 influence the calculation of the total depth of the lites on the
    rack.

-   Number across
    If the rack type allows packing next to one another, the number of columns that can be
    packed next to one another can be entered. This does not apply for the sorting GA and not
    if an entry was made in the "Group" field. After entry, there is another check whether the
    dimension restrictions of the rack are not violated (maximum and minimum width). If this
    is the case, then the entry will be rejected.

-   Number high
    If the rack type allows packing on top of one another, the number of columns that can be
    packed on top of one another can be entered. This does not apply for the sorting GA and
    not if an entry was made in the "Group" field. After entry, there is another check whether


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 432
    the dimension restrictions of the rack are not violated (maximum and minimum height). If
    this is the case, then the entry will be rejected.




        66.3.4.           PA - Priority algorithm
(starting with Version 2.13): PA = rack planning according to priority list


In the master data (Logistics - Rack management - Rack planning), a priority list of the rack types
can be stored. The rack planning then initially tries to plan the items on the rack type with the
highest priority. If in the process the dimension restrictions are violated, there is an attempt to
fall back on the next rack type in the priority list. If none of the rack types fits, everything will be
planned on a "scavenger" rack. (See also case 32755)




        66.3.5.           EA – equal algorithm
(starting with Version AWE 6 (#384920)): EA = Equal Algorithm

This algorithm always plans an even number of lites of an item in a package. This algorithm has
the following restrictions:
- Within an order, all items must be planned with this algorithm. A mixing of different algorithms
is not possible.

- The item quantity must be even.
- A rack type or rack main group must be specified.

With this algorithm, it is possible to distribute the quantity of an item across various packaging
in advance. For this, you specify the desired quantity in the "Quantity" column. This partial
quantity must also be even. The program then automatically creates a new planning item with
the residual quantity.
No special configuration is required to use this algorithm. However, it was currently only tested
in the configuration GESTPLAN_PILK2. In consultation with the customer, the restrictions of the
function were also specified. The fact that all items must be planned with EA and there may be
no mixing is related to the internal program logic. It is not a hard restriction from the customer,
however it was accepted because a mixing is not currently practically relevant.

With the environment variables GESTPLAN_EA_DEPARTMENTS you can define for which
departments the EA should be used as default specification. However, it can also be selected
manually for other departments or changed for departments defined in the variables.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    433
66.4.           Rack main group
Within the configuration GESTPLAN_PYRO, the packaging type of the order determines the rack
main group of the packaging to be used.
#456030: QR 04/20
In addition, the environment variable GESTPLAN_OHNE_VERPACKART was created, which with
packaging with the configuration GESTPLAN_PYRO enables the packaging type stored in the order
to be ignored as basis for the rack main group.


66.5.           Prices
If you are working in rack planning with individually manufactured racks (boxes), you can calculate
prices for the packaging within the rack planning.
Requirement:
     - Box BOM
     - Supplier for the box (cu_gfert)



        66.5.1.         Box supplier
The supplier for a special box type is entered in the table cu_gfert. This table is a customer-
specific table for which there is no maintenance dialog. If the function should be used, a
customer-specific maintenance dialog can be created. The table has the structure
         gtyp smallint
         linr integer

According to the details in the table cu_gfert the appropriate supplier is loaded for the box type. If
xhaus.linr is entered as a supplier number, the box has to be 'produced in-house' ; field "supplier"
remains empty.
The supplier can be changed per box/rack. Weight and price of a box are calculated on the basis
of the data taken from the BOM. (Price details are defined via the articles of the box BOM). The
normal price and condition structure from the order item is not applicable.



66.6.           Costs
If the rack planning is done in an order and these boxes (variable means of packaging with BOM),
then the costs of these boxes are totaled and generated as separate cost surcharge (discount
type="costs") in the order. This way, the cost side of the order is changed and the contribution
margin adjusted.
The calculation is done in the foreground immediately after the rack planning and can be checked
in the discount overview right away.
Prerequisite for the calculation are the BOMs stored in the master data for the boxes and
formulas for the price calculation.
The cost surcharge is generated as GR surcharge and is taken over completely only in the 1st
partial document (e.g. partial delivery note). The remaining data for the surcharge (name, product
group, cost center, account, tax) is taken over from the article number, which must be stored

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                434
specially for this purpose (e.g. atype = other) and entered in the environment variable
RABATT_VERPACKKOSTEN. Only if this environment variable is active will the discount rate be
generated.
The surcharge is always just one-time for an order. If the order is changed and the rack planning
done again, the surcharge amount is adjusted.
If a new order is entered as reference, the packaging surcharge is always deleted, regardless of
how the question about the takeover of the old discounts was answered.

Caution: The surcharge is not written back to the order if the rack planning is called from
"Logistics - Rack Management - Rack Planning" or Dispatch and changed.



66.7.            POs for packaging (boxes)
17.02.2025: Currently the documentation is in the Sharepoint A+W Clarity R&D -
Dokumente\General\Enterprise\BestellKisten.docx
As soon as the module has been tested successfully with pilot customers, the
documentation will be taken over into the Enterprise configuration notes.



66.8.            Log
        66.8.1.         Standard
Name: kposgpl<MMDD>


         Source/content        The log is written by the rack planning in the order entry.
         Activation            The log is always written. There is no expanded log.
         Storage location      The log is in the $PROTOPFAD. With internal client
                               separation, this variable is evaluated client-specifically.
                               Normally there is a subdirectory with the appropriate client
                               number.
         Notes



        66.8.2.         Extended
Name: gestplan<pid><mmdd>
         Source/content        The log is written by the rack planning in the order entry.
         Activation            The log is written with enabled environment variable
                               GESTPLAN_PROTO.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                              435
         Storage location      The log is in the $PROTOPFAD. With internal client
                               separation, this variable is evaluated client-specifically.
                               Normally there is a subdirectory with the appropriate client
                               number.
         Notes



        66.8.3.         Ftest
         Source/content        Essentially FTEST messages from the rack planning are
                               possible. However, they are only available to a limited
                               extent.
         Activation            FTEST can be enabled on the dialogs with <CTRL+F4>,
                               <SHIFT+F12>.
         Storage location      The storage location of the log can be configured as follows:
                                   1. via the variable FTESTPFAD
                                   2. If in the path $DBPATHEXT there is a subdirectory
                                      ftest, logging is done there.
                                   3. If 1 and 2 do not apply, the logging is done in the
                                      directory $PROTOPFAD.
         Notes


66.9.            Problem handling
PMPL is canceled with the message "The data is flawed"
This is the data constellation "Maximum rack weight in the order < weight of a lite." The
"maximum rack weight in the order" is drawn from mp.gmaxgew.
See also case 166079.
With the document, the plausibility check was changed so that the check only takes place if a
"maximum rack weight" > 0 is stored.


No appropriate box type found
Although nothing about the master data was changed, no more box was found for identical items.
The problem is that when saving an order, the message appears for the first two items:
"For oder xy, item 1, no appropriate box type was found!"
The order can be saved nevertheless, but in production, the rack number is now missing in the
work plan.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                436
The configuration was changed
The customer uses new cork sheets between the lites. These are now 3 mm thick instead of 2.
That's why the variable GESTPLAN_DEFAULT_ZWRAUM was changed from 2 to 3.
e.g. boxes of type A have in the restrictions a maximum depth of 154 mm.
The glass in the order items 1 + 2, for which no appropriate box could be found, is calculated as
9.2 mm in total. The boxes hold 13 lites.
=> 13 * 9,200 mm + 12 * 2mm = 143.6 => that fits
=> 13 * 9,200 mm + 12 * 3mm = 155.6=> no longer fits -> the boxes are no longer found!




66.10.          Environment variables
GESTPLAN_KUGEST_RESTRIKT (client reference: no)
If this variable is switched on, in the packaging material planning, only rack types or rack main
groups are used that are assigned to the current market partner.


GESTPLAN_OHNE_VERPACKART (client reference: no)
If this variable is active, the packaging type that is stored in the order is ignored in the packaging
material planning.
RABATT_VERPACKKOSTEN (client reference: no)
  The switch activates the logic that the packaging costs (costs of the finished boxes) is shown as
cost surcharge and thus flows into the calculation of the DB. (rack planning)
  An article number is entered in the switch. The article type should be "999 other article". From
this article, the product group, cost center, and name for the discount rate of the type "costs" is
used. The costs are taken over from the table gsergkiste. The prerequisites are the master data
(BOMs) for boxes and formulas for calculation.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  437
67. Dispatch control (general)
67.1.   Switching off the A+W Enterprise dispatch
  control
The "A+W Clarity Experience Dispatch" module has been available for a few years. In principle,
especially in the transition period, parallel operation of the "A+W Enterprise Dispatch Control"
and "A+W Clarity Experience Dispatch" is possible. However, to achieve a uniform workflow for
the employees, it is possible to deactivated the "A+W Enterprise Dispatch Control" so that only
"A+W Clarity Experience Dispatch" can be used. For this, the environment variable
CX_DISPATCH_ONLY must be activated. On startup of "A+W Enterprise Dispatch Control", the
user receives the message 19672 "This module is no longer active."




67.2.           Environment variables
CX_DISPATCH_ONLY (client reference: user)
This environment variable deactivate the acess to the "Dispatch Control" module. This is intended
if you want to work only with the "A+W Clarity Experience Dispatch" module.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               438
68. Rack-related shipping
68.1.           Prerequisite
If you want to work with rack-related shipping, the environment variable LAPOOL_FREIGEST=2
and the environment variable FREIGEST_SPEZIAL=ON or 1 have to be active.
LS_MIT_GESTELLNUMMER = ON activates the check for delivery note
For correct processing of the rack report, AWC_GESTZU_BUCHEN has to be set.
Since the rack assignment only works if the associated quantities in dispatch are not yet packed,
the variable AWC_IGNORE_PACKINGMESSAGE also has to be activated.
AWC_IGNORE_PACKINGMESSAGE
If you work with rack-related shipping and the rack should be permanently assigned from AWP
rack reporting, this variable must be used to prevent a packing notification from the AWP from
being processed beforehand.
Furthermore, the value can be set to "SUPPRESS-RDY-MSG"; then the completion report from
AWP is not processed.
The following variable must absolutely be set in order to combine collective packing racks that
were created by assignment to different routes in dispatch automatically and be able to assign
them to the route. This action can be performed on the "Rack to order" dialog with <F3>.
LAPOOLMOVE_TOURENPLAN
The variable activates the additional reason for the shift at route level: route planning. Data is
moved according to the customer's request. You can also use LAPOOL_ROUTE_GRUND to
activate the reason for the default setting


68.2.           Free racks
In case #342547, a function for handling free racks in shipping was developed.
With the cases #459400/459099 (among others), the handling of free racks in shipping was
expanded.
AWC_PORT_NR_SERVER must be set and refer to the number server port. This way, the number
range torservid is queried. This way, a booking ID for the rack loading is assigned. This excludes
double bookings.


68.3.           Lite allocation
The manual rack-lite allocation can be done via Logistics -> Rack management -> Lite allocation or
Dispatch control -> <Shift+F4> -> Rack->Lite allocation.
Here it must be noted that different program logic underlies the menu elements named although
the dialogs look the same. Only when calling from dispatch control is there a comparison with the
dispatch data. For the lite allocation via the rack management module, by contrast, there is no
check of whether or not the order is already present in dispatch. This distinction is conditions by


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                    439
different workflows. In case of deviating program behavior, the terms rack management variant
and dispatch variant are used below.




Figure 131: Rack allocation

A lit allocation or change of the rack allocation is essentially possible as long as the rack has not
yet been assigned to a dispatch route ("free rack"). In the course of an internal client separation,
for the rack variant with the first allocated order, the company of this order is assigned to the
rack, so that subsequently only orders from this site can be assigned to the rack. In the dispatch
variant, the street address is already determined by the pre-allocation of the site number with the
calling of the dispatch module, and there are no orders from other sites available.
As soon as the rack is permanently assigned to a route (rack allocation <Ctrl G>), changes to the
rack content are no longer possible, no additional order items can be added via the lite allocation.
The route allocation is visible in the header of the dialog. Here, route number and driving date are
displayed.
If a rack is allocated to a route, then it is not possible to empty it. This is only possible if it is either
still free or if it counts as delivered in dispatch (delivery note has been created). Only then can the
rack be emptied using the key combination <Ctrl+F8> and a new allocation specified.
A manual lite allocation is normally not required if a booking of the rack from production and/or
warehouse is configured. In this case, the individual lites are already booked to racks in the PPS
and transferred to dispatch with the company-external message (or an outgoing booking in the
rack warehouse). If for such a booking all rack items in dispatch are on the same route (delivery
date + route), then the rack is also assigned to this route automatically and the units found on it
are displayed as "packed."
After entry of the rack number and the type (optional), in the rump portion of the screen it is
possible to enter an order number. With the key combination <Ctrl+F10>, all data for this order is
loaded into the "Item" and "Quantity" fields.
The "Total" field contains the complete item quantity. In the "Available" field, the number of lites
is displayed that can still be assigned (because, e.g. a partial quantity of the item was allocated to



A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                     440
another rack). If there is appropriate data in the dispatch (see limitation above), then the
"Dispatch route" and "Delivery date" fields display the earliest dispatch date.


Booking racks via PDC
The rack bookings from PDC readings are reported by A+W ERP Web Services via feedback
servers. Reporting is done in two steps.
Lites - rack assignment via rserv (status 19)
(data in the table torserv + rserv)
Rack       Rack locked      Fixed         All delivered Deadline     Is there already What
recognized in the           assignment to               passed       an assignment happens/booking
(gest)     foreground       route                                    of the lites
                                                                     (gestzu)
X           X               -              -            -            -                Booking rejected.
                                                                                      Error message


X           0               X              X            X            -                Delete old data in
                                                                                      gestzu + book
                                                                                      assignment
                                                                                      (gestzu)
                                                                                      Update:
                                                                                      gest. routnr = 0
                                                                                      gest.ltdat = 0
X           0               X              X            0            -                Booking rejected.
                                                                                      Error message

X           0               X              O                         -                Booking rejected.
                                                                                      Error message

X           0               0              -                         0                Book assignment
                                                                                      (gestzu)
                                                                                      Update:
                                                                                      gest.routnr = 0
                                                                                      gest.ltdat = 0
X           0               0              -            -            X                Booking rejected.
                                                                                      Error message

0           0               -              -            -            -                Assignment. Table
                                                                                      gestzu and entry in
                                                                                      gest
                                                                                      Insert:



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                              441
                                                                                       gest. routnr =0
                                                                                       gest.ltdat = 0




Rack assignment via rserv (status 20)
 Rack       Rack locked in       Fixed           Appropriate Enough                What happens/booking
 recognized the                  assignment      dates in    unpacked
            foreground           to route        shipping    quantity
 X             X                 -               -              -                  Booking rejected. Error
                                                                                   message
 X             0                 X               -                                 Booking rejected. Error
                                                                                   message
 X             0                 0               X              0                  Booking rejected. Error
                                                                                   message
 X             0                 X               X              X                  Execute booking
                                                                                   (gest.route =
                                                                                   lapool.route, gest.ltdat
                                                                                   = lapool.ltplan )
                                                                                   Report packed
                                                                                   quantities (lapool.iststk)


Bookings for status 19/20 are always reported in pairs by the A+W ERP Webservices, never
separately.


68.4.              Moving in dispatch
For the moving in dispatch there are differences, depending on the level on which the move takes
place. For the moving of a complete route, all data including all permanently allocated racks are
moved from the source to the destination route. Free racks remain free on the destination route,
already-allocated racks are assigned to the destination route.
On the order level, a moving can only take place if the order contains only free quantities. Such
quantities are designated free quantities that either do not yet have a rack allocation or are on
free racks.
If you postpone an order that is completely on one or distributed across several racks, you can
enter a number directly in the "Rack" field if it is known or use the selo to select a rack: (11/2020:
New, new selo gestauftrinfolock.sel)
As soon as a part of the order is already on one or several permanently-allocated racks, the simple
direct moving on the order level is not possible.
If during the order moving it is determined that the selected order is on racks completely assigned
to one or several routes, then the user is informed of this and can then perform a rack-by-rack
moving using the rack view screen (<F5>).

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 442
First the data for all racks is loaded on which the items of the order to be moved are located. If
items for additional orders are on these racks, these are also displayed. The move is triggered
with <Start> (<F3>). This way only a complete rack can be moved (the one for which you press
<F3>).
11/2020: New on the dialog: the entire quantity from this order for the item is not displayed, but
rather the packed quantities that are reported on this route. The postponement can only take
place if the quantities reported packed are sufficient. If due to incorrect booking the quantities
are not right (if the booked rack has to be postponed, then the packed quantities also have to be
postponed), this is reported and data from the rack has to be checked.




Figure 132: Moving racks in dispatch

Orders that contain both free and quantities on a permanently-allocated rack are displayed in the
status display with a half-yellow traffic light. If you only want to move the free quantities of the
order, then this action can be performed either on the item level or using the menu element "c
Move several items" / "<Ctrl+E>).
If you do not select a particular rack, but instead start the rack overview with <F5>, then all
booked racks are displayed for the selected order including all third-party order items that are on
these racks.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                             443
Figure 133: External order on the rack



From this overview, you can postpone only the current rack on which you have positioned
yourself. To postpone additional racks, you have to repeat the procedure.
If due to rack postponement several orders are postponed, then the view of the order level is not
updated immediately for all affected orders. To be certain that the overview is up-to-date, you
should update it manually. Please be careful, we're working on this.


         68.4.1.            Shifting permanently booked racks
If the racks were booked permanently, from PDC or manually, and if they have to be rebooked to
another route, then this can now be done via Shipping control -> <Shift+F4> -> Rack -> the booked
Rack (overview).
All permanently booked racks for the current route are displayed here. The desired racks can then
be marked and shifted with <F3>.




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                        444
Figure 134: Move dialog

Here again, the data is assigned with the current route and can then be changed. If a different
route is entered, all rack quantities are shifted and the rack is rebooked permanently. Here, the
packed quantity is always shifted, even if the shift is done on an earlier date.




68.5.             Rebooking the rack quantities
Quantities that are already on a rack can be rebooked both via the rack overview dialogs as well
as y calling an individual rack on another rack. This applies both for free and for assigned racks.
Using the rebooking function, no rack quantities can be deleted.
If a rack is already permanently allocated to a route, then a rebooking is only possible to a free
rack or to a rack that is also allocated to this dispatch route. By rebooking a permanently-
allocated rack to another permanently-allocated rack, nothing changes in dispatch since this is
only an allocation of the packed quantities.
If quantities are rebooked from a free rack to an already permanently-allocated rack, then these
rebooked quantities are reported "packed" in dispatch. In the reverse case, if quantities of a
permanently-allocated rack are rebooked to a free rack, then these quantities count as unpacked
in dispatch.
Example: two permanently-booked racks on a route:




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                    445
Figure 135 Overview of all racks

Here there are two possibilities for rebooking the rack quantities:

    a. Rebooking on a permanently-allocated rack that is on the same dispatch route:




Figure 136 Quantity rebooking

The result of this action is that the partial quantities of the item 239598/1 (12 pieces) are
rebooked to the rack 00003 and the remaining 8 pieces remain on the original rack 00001.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               446
Figure 137 Results of the quantity rebooking

    b. Rebooking to a free/empty rack 00008




Figure 138: Rack rebooking

With the following result:




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx   447
Figure 139 Results of rebooking to a free rack (All/Complete option <Shift+F8>)

From the original rack 00003, 20 pieces apiece of the items 2 and 3 are unpacked and un-booked.
These quantities are now rebooked to the free rack 00008 (red marking in the overview). Since
rack 00008 is a free rack, you can see that the fields Delivery date/Route are not filled.
In dispatch, the situation is as follows:




Figure 140 Order info (order 239600)

The packed quantities are reduced and the order has lost its complete marking.
Since the rebooked partial quantities of the order 239600 are now on a free rack, they can either
be moved using the "Move several items" (Ctrl+E) function




Figure 141: Move several items in dispatch

or from the item level of dispatch.




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                       448
Figure 142: Moving in dispatch

In both cases, the free quantities are calculated the units to be moved are suggested.
After the moving of the rack 00008, the quantities in dispatch look like this:




Figure 143: Information regarding rack in dispatch

On the original route 30.10.2015/10, there are only the permanently assigned racks 00001 and
00003. The postponed quantity on rack 00008 is on the route 06.11.2015/10.


68.6.              Mistaken quantity check
The "Mistaken quantity check" is currently not supported for this type of dispatch configuration.




A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                        449
68.7.              Correct packed quantity
The menu element "Correct packed quantity" cannot be entered when using the module.
Correction of the packed quantity is only done via rack allocation or rack break-up.


68.8.              Delivery notes from dispatch
If rack numbers should be printed on the delivery notes, during generation of the delivery notes it
can be checked whether all orders have a permanent rack allocation. This check can be configured
and is not active by default. With an activated check, there is a query whether the delivery notes
should be generated nevertheless. The query is a CU query and can be switched so that it is
appropriately restrictive.


68.9.              Correction of mistaken bookings
         68.9.1.              Rack bookings reported from PDC
Via Logistics -> Rack Management -> Lite Assignment, the correction can be made as follows:
(note: the handling is controlled by access right GESZ)
    1. Call up rack




Figure 144: Rack allocation

    2. With <Ctrl+F8>/empty, you can empty racks that have not yet been delivered:




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                             450
Figure 145: System message in rack assignment

YES      -> fixed assignment is deleted. (gest.routnr = 0, gest.ltdat=0) quantities unpacked.
(lapool.istskt = -"quantity").
NO       -> no handling.
If the assignment should be deleted, there is another question for the user:




Figure 146: Handling request

YES    -> The lite assignment is deleted completely (gestzu). Another PDC booking of the
complete rack can then be made. If all criteria from Tab.2 are fulfilled, the rack is booked
permanently. The data in bsbock/gestzu is appropriate.
NO       -> the lite assignment is retained and can be changed manually.
If the lite assignment is exited with END, the assignment is recognized by the rack and the rack
counts as free but assigned.
Another booking of the complete rack via PDC is possible, BUT
        a. a new booking (lite assignment mode= 19) is rejected (see Tab. 1)
        b. The subsequent booking for fixed rack booking (mode 20) can go through if all criteria
           from Tab.2 are fulfilled. A match of the data in gestzu/bcbock is not guaranteed!




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                              451
From shipping via <Shift+F4> menu. (rights for shipping + GESZ):
   -    If rack is permanently booked for 2.1. (recommended if several racks are affected). If there
        is a single rack, can go directly to 2.2
   -    If rack is only assigned(free), continue with 2.2


2.1. From shipping: <Shift+F4> menu -> Rack -> Resolve Rack.




Figure 147: Resolve rack

Mark rack (enable checkbox in the Free column), then Trigger.




Figure 148: Possible handling

YES -> with this, the fixed assignment to route/appointment is resolved (table gest.route=0,
ltdat=0). Quantities are unpacked in shipping. (lapool.iststk = -"on rack"). (Analogous see above +
NO)
Please note:
Another PDC booking can be made if it is possible and desired, BUT
        a. a new booking (lite assignment mode= 19) is rejected;



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                             452
        b. The subsequent booking for fixed rack booking (mode 20) can go through if all criteria
           from Tab.2 are fulfilled. A match of the data in gestzu/bcbock is not guaranteed!
NO       -> no changes.


2.2 Via <Shift+F4> menu -> Rack ->Lite assignment.
Call up rack.




Figure 149: Call up rack

Empty with <Ctrl+F8> or button:
   -    If the rack is still permanently assigned (display of the route and the date in the dialog
        header), then first this assignment booking is dissolved (table gest).
        Then the rack assignment with <Ctrl+F8> can be deleted completely (table gestzu).
   -    If the rack is already free, then only the assignment is deleted (table gestzu).


Please note:
Another PDC booking can be made if it is possible and desired.
If all criteria from Tab.2 are fulfilled, the booking is made. The data in bsbock/gestzu is
appropriate. (Analogous 1.3. + YES)


2.3 Rack assignment can be corrected (only if rack is already free)
If the lite assignment is exited with END, the assignment is recognized by the rack and the rack
counts as free but assigned. (Analogous 1.3 + NO)
Please note:
Another PDC booking can be made if it is possible and desired.
BUT
        c. a new booking (lite assignment mode= 19) is rejected;



A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                  453
        d. The subsequent booking for fixed rack booking (mode 20) can go through if all criteria
           from Tab.2 are fulfilled. A match of the data in gestzu/bcbock is not guaranteed!
2.4 Shipping control: <Shift+F4> menu -> Rack -> Rack Assignment
This is only necessary if there is no PDC reading(!!)




Figure 150: Rack assignment to a route/on the selected date

Mark rack (enable checkbox Book) + "Trigger". Thus the rack is once again permanently assigned
to route/date and the item quantities are reported as packed (lapool.iststk = + "On rack").
Please note:
A match of the data in gestzu/bcbock is not guaranteed!



         68.9.2.   Booking/assignment of the rack if the automatic
             assignment was not possible.
If the data was read correctly from PDC and assignment was not possible because no common
date was found for all reported quantities in shipping, you can combine the data automatically in
shipping. The prerequisites for this are:
   -    sufficient unpacked quantities in shipping. Regardless on which route.
   -    There are also enough quantities reported complete from AWP (table kpossum)




A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                        454
Figure 151: Lites - rack assignment

If you look at the rack assignment in the shipping control (see picture), you determine that the
individual lites in shipping are scattered from 07/02 to 07/16. In this condition, a fixed assignment
to a route is not possible.




Figure 152: System message

The operator can decide for himself whether the data should then be pulled together.
Pulling together (placing the items on a rack) - packed message - fixed booking is started with
<F3>:
Since during the assignment from PDC it was already checked whether there are sufficient
unpacked quantities, this check is normally not done. There is only a check whether sufficient
quantities from AWP were reported. If this is not the case, then there is a message to the
operator that only combining the lites on a desired route is possible.


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                               455
If there is enough data reported complete, the familiar shift dialog starts up. In contrast to the
shift dialog, the current tour (the shift justification route planning has to be configured in
addition) is available as a suggested value (date+route).




Figure 153: Move

Of course the route date and route can be overwritten.
With "start" the action is started and the dialog triggered and the DB transaction completed. At
the lower edge during the shift, it is then reported which order items were shifted.




Figure 154: System message after rack was shifted

If all order items that were on a different route were shifted to the desired route, there is a
question asking whether the fixed booking should now be made:


A+W Software GmbH                        EN-CONFIG-A+W Enterprise.docx                               456
Figure 155: Book rack

If the question is answered with YES, then the rack quantities are reported packed and the rack is
booked permanently for this route.
You can see that all orders are now on the desired route and depending on the utilization of the
reporting service, also that the quantities are packed.




Figure 156: Order level in dispatch

If you call up the rack data again to check it, you can see that there was a permanent assignment
to the route and that in shipping, all data was combined:




Figure 157: Updated rack assignment




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                            457
The pulling together of the data can also happen if the order item has already been split across
different tours in shipping. Thus, the unpacked quantities from earlier routes are prepared for
shifting
Example.
Item with total quantity 10 is already split in shipping and also partially packed:
7/10/2020/Route 10      planned = 5, packed = 2
7/10/2020/Route 20      planned = 3, packed = 0
7/11/2020/Route 20      planned = 2, packed = 0
5 pieces were assigned to rack XX. If rack X is now pulled together on 7/10/2020/Route 30, then


07/10/2020/Route 10 to 07/10/2020/Route 30          > 3 pieces are shifted.
07/10/2020/Route 20 to 07/10/2020/Route 30          > 2 pieces are shifted.


After the booking, this order item would look like this in shipping:
7/10/2020/Route 10      planned = 2, packed = 2
7/10/2020/Route 20      planned = 1, packed = 0
7/10/2020/Route 30      planned = 5, packed = 5
7/11/2020/Route 20      planned = 2, packed = 0




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                             458
69. Terminating ALCIB after long inactivity
(#172685, Feature)
ALCIB applications can be configured to close after a certain time of inactivity. This shall make
sure that open applications do not use up licenses.
Setting the system variable FXUSERIDLEFACTOR serves to terminate an application after a certain
time without input. FXUSERIDLEFACTOR cannot be defined in seconds for technical reasons. You
have to enter a factor for FXREADTIMEOUT0. FXREADTIMEOUT0 defines the time in seconds
after which the application asks for news from the front-end. After that time, the reading
routine will be interrupted, and the system asks for news - unless the reading route closes before
because a character has been read.
If an application is closed this way, termination is recorded in the log path of the
shutdown<mmdd> file.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  459
70. Import of items from Microsoft Excel
70.1.             In the order entry
With a new function for item entry, it is possible to import items via the clipboard from Microsoft
Excel.
1.   Start the dialog
Start the transfer dialog with Ctr+L from the article or quantity field of the order entry. The
following options are available
Start from the empty article field:
The further logic then assumes that the article number will be taken over from the Excel table.
Start with filled article field
Here, the presence of the article number in the Excel table is not necessary.
Start with filled article field using the quick entry
Here you can specify exchange glass for IG articles, so that the structure of the product is already
changed with the takeover of the data.
The AWE product is displayed in the dialog header if the transfer has already been started with an
article.

When you first enter the dialog, there is no column assignment yet. This can be done immediately
or also after the import of the data. Without a unique assignment, the transfer cannot take place.
By starting the column assignment with F5, you jump to the title row. Here you can assign the
columns uniquely. This assignment is noted for this market partner and is also transferred
immediately during the next import. But it can be changed at any time. The following assignment
options are available:

     •   Customer item
     •   Sequential item
     •   Article number (AWE article)
     •   Cust. product
     •   Quantity
     •   Width
     •   Height
     •   SZR
     •   AIR 2
     •   Reference

The quantity/width/height must be assigned. Also the article number or the customer article, if
the import dialog was started without article number, are mandatory fields. If an AIR is already
stored in the master for IG articles, the AIR column is not absolutely necessary.



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 460
After the data has been marked in the Excel sheet, you can load the data into the dialog via the
Import button or via F3. . A first rudimentary check of the data is already carried out. If the logic
finds out that the data is not suitable for transfer (missing dimension, wrong article number, etc.),
these items are marked on the left margin. All valid imported items are automatically marked for
transfer. You can also manually add new items to the imported items. If you are not sure that the
data can be transferred in this form, you can start a test by pressing the Test button or via ShF5. If
undesired data was imported, then you can empty the dialog completely and start anew with
Delete.

2.   Transferring the data to the document

If you choose Copy or END, all selected items are transferred to the document and the items are
entered. The action takes place in the background so that no error messages requiring interaction
are output. However, 3 tests are carried out for each item.

     •   Checking the deadline
     •   Checking the dimension restrictions
     •   Completeness of the price.

If one or more problems occurred during item generation, an INFO status at this item indicates
which conflicts existed. You can use this to check these items later and adjust them if necessary.

Restrictions

The currently defined defaults for the Excel Import Extension are:

     •   Maximum 900 lines
     •   Maximum 80 character column width
     •   Maximum 10 columns
     •   Empty lines are skipped

If a field contains more than 80 characters, the content is shortened accordingly. In addition, a
message is output so that the user can check this data.

If the clipboard contains more than 900 lines, the import is terminated after 900 lines. The user
receives a corresponding message.

If the clipboard is empty or contains non-interpretable content, e.g. graphics, etc., an error
message is issued.

If the clipboard contains characters that cannot be stored in the database later, these characters
are replaced with '?'. The user is informed accordingly. This can happen if Unicode characters are
imported and an ISO database is used. Only the characters provided in the ISO character set can
be mapped.




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                 461
        70.1.1.        Configuration
MODUL_EXCEL_IMPORT = ON
This is a for-fee module according to the A+W – price list "200018 Excel Line Item Import"




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             462
71. Quotation check
The menu element "Sales - Quotation Check - Online Quotations" is documented in the
configuration instruction "EN-CONFIG-A+W Enterprise iQuote" section "11.4 Incorrect or locked
quotations/PO inquiries"



When saving a quotation, now the query "Do you need to check the quotation?" appears.. If the
question is answered with NO, the check fields are filled with the current date and the number of
the current employee.

With the entry in the check fields, the employee is automatically responsible for the print release
of the quotation, for only for quotations without filled check flag is the printing rejected.

A special employee authorization for the print release is not provided.

The logic is controlled by the environment variable ANGEBOTSKONTROLLE.

With activated environment variable, the query appears, and the fields kauf._kontrollmanr and
kauf._kontrolldat are filled.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               463
72. Optimization of quotations
You can forward quotations to production for optimization. To do this, they must be marked
during entry via the submenu (F4) "Transfer to production (optimization)".
The environment variable ANGB_OPTIMIERUNG must be active globally.
To activate the quotation calculation, the environment variable
ORDERXML_OFFER_CALCULATION must be set to the value ON and ANGB_OPTIMIERUNG must
be active.
There is additional information about production transfer in the configuration instructions "EN-
CONFIG-A+W Enterprise Production Interface" and "EN-CONFIG-A+W Enterprise System".




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               464
73. Quotation calculation (#393543)
Previously, with appropriate configuration, quotations with the type "offer" were transferred to
the A+W Production and remained there. In the future (alcib buld 13.04.0001) with use of cost
calculation, quotations will be transferred with the type "OfferCalculation". These quotations do
not remain in A+W Production; the costs are only returned to the ERP system.
Environment variables: MODUK_KOSTENKALK=1 und ORDERXML=2
There is additional information about production transfer in the configuration instructions "EN-
CONFIG-A+W Enterprise Production Interface" and "EN-CONFIG-A+W Enterprise System".




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               465
74. Local correction
74.1.           Purchase order release
        74.1.1.         Direct orders (external)
For external direct purchase orders (without PO pool), there are the following possibilities for
releasing an order and thus putting the associated order item in local correction.
    1. Direct with generation
    2. 2 - during printing
    3. 3 - manually with the function "PO release"
    4. 4 - on goods receipt
    5. 5 - during PU invoice generation
    6. 6 - on notification (release A+W Enterprise March 2021)


If the PO release is configured for "on notification", when saving the notification the status 301 -
"ordered" is written for the PO and 502 "follow-up process" for the order. In addition, the status
301 - "ordered" is written for the relevant order items. There is no individual release status.
The configuration is done via the existing environment variable BESTELLFREIGABE.


        74.1.2.         Direct orders (internal)
For the release of internal direct orders (without PO pool), there is a special release. It is
described in the configuration instructions "EN-CONFIG A+W Enterprise EDI". The configuration is
done via the environment variable DFUE_IB_BESTELLSPERRE.


        74.1.3.         PO pool (internal and external)
POs that are generated via the PO pool are released directly on generation (saving) in the PO pool.


74.2.           Reset purchase order release
With the menu element Purchase > Order release, the status (local correction) of a PO can be set
and reset manually. If the system is configured so that the POs can be grouped via the PO pool,
then POs are canceled when resetting the local correction.
With the environment variable "BEST_ZURUECKSETZEN_NO_STORNO", the system can be
configured so that direct POs are no longer canceled, but rather their status is only reset.


74.3.           Environment variables
BESTELLFREIGABE (client reference: no)


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  466
The variable controls when a PO is released:
  1 = generation 2 = printing 3 = manually via "PO release"
  4 = goods receipt 5 = purchase invoice 6 = notice
ATTENTION: Variable is only evaluated if the purchasing is configured so that PO articles are
transferred directly from the orders into purchasing (or MODUL_EINKAUF = 4)


BESTELLFREIGABE_NO_INTERNE (client reference: no)
(Case: #159348): If this environment variable is set, only external POs will be displayed in the PO
release module. The internal POs will be suppressed.


BEST_ZURUECKSETZEN_NO_STORNO (client reference: No)
The environment variable will be analyzed only for the existing configuration, when P.O.
suggestions are grouped in collective P.O.s in the purchase pool, and only for direct P.O.s. If your
system is configured this way, direct POs will not be cancelled if an individual PO release is reset,
but only the release will be cancelled.


DFUE_IB_BESTELLSPERRE (client reference: no)
The variable controls when internal POs go into local correction.
0 - print; 1 - send; 2 - receipt; 3 - scheduling; 4 - job created; 5 - job confirmed
precise description in AWD ID 110318 and "EN-CONFIG-A+W Enterprise EDI"
If internal POs are handled via the PO pool, this variable may not be > 0!!! Similarly, the PO
transfer is via the printout.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                467
75. Order and item status
For the process control in A+W Enterprise, different statuses are booked on the order and item
level for different actions.
Statuses in the 300 range are lock statuses. These have as a consequence that orders or items can
no longer be changed.
Statuses in the 550 range are information statuses that normally have no controlling effect in the
program. However, there are exceptions that are documented for the individual status.
The status bookings can be viewed in the order with Shift+F4 - order information.
The item status is booked to the table kposstat and the document status to the table kaufstat.


75.1.           "Order information" dialog
The dialog for the order information has contained tabs and buttons that increase the clarity and
usability of the dialog since Version 2008.
It is also possible to view information in an order about all orders that arose from internal POs of
this order.
Display is done with <SHIFT+F5> or the Internal orders button. An AdhocSql is required for this
display. For each status in orders and POs, there is an environment variable in which the group
and ID of the Adhoc-Sql to be used must be stored. The Adhoc-Sql is not part of the scope of
delivery.
Important is that the first statement of the Adhoc-Sql used must ALWAYS have two parameters
since these are transferred from the program!
   1. Transferred parameter: kauf.auftrnr
   2. Transferred parameter: kpos.posnr


The Adhoc-Sql 1/93 is an example of a correct SELECT and can be used as a template. It is called
within the PDC status if the environment variable BDESTATUS_ADHOCSQL is not set. For all other
statuses, there is no standard AdHoc-Sql.


The environment variables for the various order statuses are:
VORGANGSSTATUS_ADHOCSQL
POSITIONSSTATUS_ADHOCSQL
EINKAUFSSTATUS_ADHOCSQL
WARENEINGANGSSTATUS_ADHOCSQL
PRODUKTIONSSTATUS_ADHOCSQL
VERSANDSTATUS_ADHOCSQL
BDESTATUS_ADHOCSQL
GESTELLSTATUS_ADHOCSQL



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 468
LAGERSTATUS_ADHOCSQL


VORGANGSSTATUS_EK_ADHOCSQL
POSITIONSSTATUS_EK_ADHOCSQL
EINKAUFSSTATUS_EK_ADHOCSQL
WARENEINGANGSSTATUS_EK_ADHOCSQL
VERSANDSTATUS_EK_ADHOCSQL
LAGERSTATUS_EK_ADHOCSQL


Furthermore, there is a new Adhoc-Sql (Group 1, Id 91). This Sql also displays the PDC status of
the orders for the internal POs. However, the item number is not considered for the data
procurement.
So that the hit screens of the subselect of the Adhoc-Sql 1/91 and 1/93 look right, the following
entries must be made in the "adhocsqlformat" table. The texts must be translated if necessary.
insert into adhocsqlformat values (1, 91, 1, 1, '', '', 28, 119, 6, 3,
'Order|Item|Article|Quantity|MaNo|Date|Shift|Job|Default quantity|Actual
quantity|Breakage', '8|3|8|6|6|10|6|6|5|5|5', '', 'PDC Status sub level 1');
insert into adhocsqlformat values (1, 91, 2, 1, '', '', 25, 119, 9, 3,
'Order|Item|Article|Quantity|MaNo|Date|Shift|Job|Default quantity|Actual
quantity|Breakage', '8|3|8|6|6|10|6|6|5|5|5', '', 'PDC Status sub level 2');
insert into adhocsqlformat values (1, 91, 3, 1, '', '', 22, 119, 12, 3,
'Order|Item|Article|Quantity|MaNo|Date|Shift|Job|Default quantity|Actual
quantity|Breakage', '8|3|8|6|6|10|6|6|5|5|5', '', 'PDC Status sub level 3');
insert into adhocsqlformat values (1, 93, 1, 1, '', '', 28, 119, 6, 3,
'Order|Item|Article|Quantity|MaNo|Date|Shift|Job|Default quantity|Actual
quantity|Breakage|',




75.2.           Actions in dispatch
Action: Shift in dispatch, also for shifting of a whole route
Position status: 303 – Dispatch planning
Order status:
This does not cause a local correction in the order. The status is displayed in the order and in case
of a change, there is an additional query for dispatch with the warning that dispatch planning has
already been done. If the transfer to dispatch is desired nevertheless, then the data is transferred
to dispatch anew and the record in the table kposstat with status = VERPLANT is marked as
cancellation (infotext: 'Order correction'):
CAUTION! Watch out in order correction; under some circumstances, the new LTPLAN is taken
over from dispatch and after order change, the order will be in dispatch under the new date!! The
items will no longer be marked as VERSANDPLANUNG, however!




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 469
Action: Packed message
Position status: 307 – Status packed


This does not cause a local correction in the order. The status is displayed in the order and in case
of a change, there is an additional query for dispatch with the warning that dispatch planning has
already been done. If the transfer to dispatch is desired nevertheless, then the data is transferred
to dispatch anew and the record in the table kposstat with status = VERPLANT is marked as
cancellation (infotext: 'Order correction'):
CAUTION! If the packed message is replaced by mistaken quantity check and
LAPOOL_FERTIGMELDUNG is active, then the items will also be reported finished and get the
status FERTIGMELDUNG (400) in the table kposstat. This then causes them to go into LOCAL
CORRECTION.


Action: Loading sequence change – only if environment variable LADEFOLGE_SPERRE enabled
Position status:
Order status: 303 – dispatch planning
This causes a local correction of the order.


Action: Generation of preliminary delivery note
Position status:
Order status: 303 – dispatch planning
This causes a local correction of the order.


75.3.              Actions in production
See also “EN-CONFIG-A+W Enterprise Production Interface.pdf” – Section: „Status feedback
production“
Action: create or dissolve in the A+W Production pot
Item status: 551 – successfully scheduled (tab: Production)
Order status: unchanged
How this action is reported to the A+W Enterprise depends on a configuration in A+W Production.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                470
With setting 2: If in A+W Production a bucket is created or dissolved, the status 551 is sent to
A+W Enterprise. Thus, the last action from production is always visible in the item status. No
process is visible.
With setting 1: If in A+W Production a bucket is created, the status 552 is sent to A+W Enterprise.
=> see Action: "Create batch in A+W Production"


Action: create batch in A+W Production
Item status: 552 – item roughly scheduled (tab: Production)
Order status: unchanged
If in A+W Production a batch is created, the status 551 is sent to A+W Enterprise. If the
environment variable AWC_FIXIERT_AB = 552 is active, the status 300 – lock status item roughly
scheduled - is booked in A+W Enterprise.


Action: dissolve batch in A+W Production
Item status: 551 – successfully scheduled (tab: Production)
Order status: unchanged
If in A+W Production a batch is dissolved, the status 551 is canceled in A+W Enterprise. If the
environment variable AWC_FIXIERT_AB = 552 is active, the status 300 – lock status item roughly
scheduled - is also canceled in A+W Enterprise. Then the status 551 - successfully scheduled is
booked with a current time stamp. The content of the order status remains unchanged, however
the status 101 is also booked with a new time stamp.


Action: schedule batch in A+W Production in detail
Item status: 553 – item is scheduled in detail (tab: Production)
Order status: unchanged


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  471
If in A+W Production a batch is scheduled in detail, the status 553 is booked in A+W Enterprise.


        75.3.1.         Environment variables
AWC_FIXIERT_AB (client reference: no)
(case 129902): This variable defines from which AWCapacity status an item is considered fixed. If
the status specified here is reported, the lock status FIXED (300) is also written. The default value
of this variable is 552 (create batch => item is roughly scheduled). (Variable is similar to
PMXCIMRMSTATI)


AWC_FREIGEGEBEN_AB (client reference: no)
(case 129902): This variable defines from which AWCapacity status an item is considered
released. If the status specified here is reported, the lock status RELEASED (302) is also written.
The default value of this variable is 554 (batch released - item is released). Once this status has
been set for an item, it is no longer reset. (Variable is similar to PMXCIMRMSTATI)




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 472
76. System messages
A+W Enterprise sends a variety of so-called system messages. These are either activated through
environment variables or via the system menu
Ctrl+F4 – Mail-System - System messages
Messages that are sent in the course of internal or external EDI are documented in the
"Messages" section in the separate configuration documentation "EN-CONFIG A+W Enterprise
EDI".
All other messages are documented in the "System messages" section in the separate
configuration documentation "EN-CONFIG A+W Enterprise System".




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             473
77. Smart Companion
77.1.            Requirements
The general configuration of the SmartCompanion is described in the document
\\jupiter\SW_Install\v6\ConfigurationDocumentation\EN-CONFIG-A+W Smart Companion.pdf.
For the use of the Smart Companion for AW Enterprise, the following Linux services are required:
    •   stockservice
            o    Responsible for rebookings, removals, and inventory in the warehouse.
    •   purchaseservice
            o    Responsible for bookings of incoming goods. In addition, for order-related POs,
                 the CIM barcoding and CIM planning services are called in order to report the
                 parts delivered to production.
The services have to be precisely available to clients (external ID). For the set-up of the services
under Linux, there is the chapter ICE environment. Both services always have to be present!


77.2.            Set-up
    •   User
            o    The users have to have a login name that corresponds to the user entered in
                 SmartCompanion. Here, if the login name is entered by hand, the leading zeroes
                 are added.
                 Example: If in Enterprise a user 00000100 is created, the login can be carried out
                 either with "00000100" or "100". When scanning a barcode, "600000100", the
                 leading 6 is cut off. The user name in AW Enterprise has to have 8 digits.
            o    The users have to have the write right DIWK for both services.
    •   Inventory
            o    New tables are required for the inventory. If these are not there, the inventory is
                 not active. Currently, in the tables wlinvv_smc and wlinvv_smcok the field
                 'g_best' has to be present. If this is not the case, a database update has to be
                 performed.
    •   Bundle
            o    For the use of the new bundle in the warehouse, the tables xgebinde and
                 wlsvgebinde have to be present. Without these tables, booking of variants is
                 possible, however. For variable variants, the precise quantity to be removed has
                 to be entered. For the input, 2 places after the decimal point are allowed.
            o    For the factor 1, it is not absolutely necessary to generate a bundle. If none is
                 present, it is added automatically. The quantity unit of the article is then used as
                 name.




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                 474
77.3.           Bundle
Bundles can be created for the stock bookings and the inventory. These serve to make the
booking of package units possible. Currently, there is no screen in A+W Enterprise for the
maintenance and the data has to be inserted via SQL.
    •   Table xgebinde
The values for a bundle are managed in this table. A factor and a number of places after the
decimal point have to be defined per bundle.
    •   Table wlsvgebinde
The assignment of a variant to a bundle can be established in this table.
    •   Table xsprbez
In order to get a translatable name for the bundle, there has to be an entry made here.
CAUTION: The values have to be present in all three tables so that the bundle can be used.
Example: creating bundles:
insert into xgebinde (id, dezimalst, faktor) VALUES (1, 0, 10);
Bundle no. 1, without places after the decimal point and a booking factor of 10.
insert into xgebinde (id, dezimalst, faktor) VALUES (2, 0, 2);
Bundle no. 2, without places after the decimal point and a booking factor of 2.
insert into xgebinde (id, dezimalst, faktor) VALUES (3, 2, 1.44);
Bundle no. 3, with 2 places after the decimal point and a booking factor of 1.44.
Example: assignment to variants:
insert into wlsvgebinde (lfdnr, artnr, bitnr, farbnr, gebindeid) VALUES (1, 580198, 0, 12, 1);
Assign bundle no. 1 of the variant Bitnr 0, Colorno 12 for article 580198.
insert into wlsvgebinde (lfdnr, artnr, bitnr, farbnr, gebindeid) VALUES (2, 580198, 0, 12, 2);
Assign bundle no. 2 of the variant Bitnr 0, Colorno 12 for article 580198.
insert into wlsvgebinde (lfdnr, artnr, bitnr, farbnr, gebindeid) VALUES (1, 100002, -999, 0, 3);
Assign bundle no. 3 of the variant Bitnr -999, Colorno 0 for article 100002.
Example: text assignment:
insert into xsprbez (id, tab, sprkz, bez1, landesspr) VALUES (1, "xgebinde", 1, "Pack of 10", 1);
Assign bundle no. 1 in language 1 the text "Pack of 10".
insert into xsprbez (id, tab, sprkz, bez1, landesspr) VALUES (2, "xgebinde", 1, "2-Pack", 1);
Assign bundle no. 2 in language 1 the text "2-pack".
insert into xsprbez (id, tab, sprkz, bez1, landesspr) VALUES (3, "xgebinde", 1, "1.44 sqm", 1);
Assign bundle no. 3 in language 1 the text "1.44 sqm".




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  475
77.4.            Inventory flow
The start and inventory completion have to be done in A+W Enterprise. If inventory is prepared,
this stock can be selected in Smart Companion and the quantities input for the individual variants.
If all articles/variants are counted, the counting can be taken over into the inventory booking in
A+W Enterprise, and if the values fit, the inventory completed. If the values are not OK, they can
be corrected with Smart Companion and read back into the A+W Enterprise inventory.
If individual articles or variants are not entered by counting in the SMC, then the logic asseumes
that these articles/variants are no longer present in the stock and it sets the inventory for these
articles/variants to 0.


77.5.            Operation and checking
If the system doesn't work, the trace files on the Linux system can provide information about
what the problem is.
The services store their trace files in the log folder (gp). If for an action there is an error, first it has
to be checked whether the expected service (stockservice, purchaseservice) was called at all. Each
call of the service generates an entry in the log file. If this entry does not appear, the services have
not been called (connection problems or incorrect configuration).
Each call logs the ID of the end user device and the current user. Thus, with several end user
devices, the call of a special end user device can be traced. In addition, the call parameters are
logged in each call. Thus it can be traced whether the correct values were transferred.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                    476
78. Location-spanning PDC
The location-spanning PDC enables the transfer of a label number to individual sites, each of
which has its own production system. In this way, with separate label number ranges, it is possible
to continue working with the labels of the retail clients.
ATTENTION: Before start-up, conflicts with external customer barcodes that were scheduled via
the external order interface must be checked.


78.1.          Production Feedback
The values label number and PDC quantity indicator can now be received and evaluated for the
feedback of parts to be purchased. If a label number is stored for a purchased part, this number
and the quantity indicator are copied into the purchase order. (Table BESTPARAMETER)


78.2.          Internal P.O.
In the A+W Enterprise internal order transfer, the possibly stored label number and the
corresponding PDC quantity indicator are now transferred to the order in the production client.
The logic described here assumes that order transmission is used. This logic cannot be mapped
with order linkage.
During the order generation in one's own location, the label number generated and the PDC
quantity identifier are drawn from the table BESTPARAMETER and written to the table
KPOSZUSATZ.
In the A+W Enterprise-internal order transfer, now the table KPOSZUSATZ is transferred with the
label number and the PDC quantity identifier in the order to the production site.


78.3.          Transfer to production
The label number and the PDC quantity indicator are now passed on to A+W Production in the
production client.
The environment variable ORDERXML_VERSION must have at least the value "5.4" for these fields
to be filled. The environment variable ORDERXML_BDE_BARCODE must also be set to "ON".
The fields LABEL.labelNumber and LABEL.highQuantityID are taken from the table kposzusatz. If
there is no suitable record in the table, the fields are filled with default values.
Jan/2024 A+W Enterprise 6 OrderXML Service - 13.4.9914:
The transfer of barcodes to A+W Production in the OrderXML interface only happens for internal
orders. Thus, conflicts with external customer barcodes that were scheduled via the external
order interface are reduced.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               477
78.4.           Scheduling
If orders are to be cancelled subsequently by the ERP system, note that this is only possible if the
orders are still unplanned. Otherwise a cancellation must be carried out manually by the user.


78.5.           Label number assignment
Within the A+W production, separate label number ranges must be defined for each location.
There are two additional parameters within the PDC settings where a start and an end label
number range can be specified.
Note: Location-spanning PDC is currently only possible for a single lite PDC. Quantity PDC is not
supported yet.


78.6.           Restrictions
    -   -    The excess quantity dialog in A+W Production must not be used if the location-
        spanning PDC is used at the same time, as otherwise new label numbers would be
        generated which would not be known in all production locations.
    -   -     Rack-related goods receipt: Currently not supported.


78.7.           Booking
WP remake functionality: The functionality can also be used here. For an wp-remake - if it is
generated in the final production system - a repeat order is automatically triggered, which finally
loads the original purchase part again in the 2nd production system for production. The original
1st production of the purchase part is then also reported as a break by the booking in the 2nd
production system, so that the new production can be carried out with the same label.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                478
79. Advance delivery note generation and
 invoice generation with NDU logic
The NDU logic was implemented with AWDesk #407285. The abbreviation NDU stands for
"number of the dispatch unit."
The NDU is a unique number for identification of a dispatch unit such as containers, boxes or
pallets. Internationally, the code is called SSCC-18 (Serial Shipping Container Code).
The number has a total of 18 numeric characters, which are used as follows:
    •   1st place = reserve number that can be selected by the company itself
    •   2nd-8th place = GS1 basic number of the company, which can also be a total of 8 or 9
        places
    •   9th-17th place = sequential number of the NDU
    •   18th place = check number that is calculated from the preceding numbers
The NDU serves as seamless gap tracing and to uniquely identify a dispatch unit within the supply
chain.


79.1.           Relevant environment variables
        79.1.1.         LAPOOL_NVE_LOGIC
The NDU logic in dispatch is activated with the environment variable LAPOOL_NVE_LOGIC
(ON/OFF).


        79.1.2.         NVE_GLN
A 2-digit number for the coding is stored in the variable NVE_GLN.
Please note that the number has to consist of precisely 2 digits.


79.2.           Order entry
Depending on the settings of the MP master (NVE-Pflicht = 1), it is possible to store up to 5 NDUs
on the item level. The number can be selected as you wish. The required number depends on the
number of partial deliveries for the item in question. Here too, the user can enter a NDU code
manually. In this case, it is checked whether the code entered corresponds to the stored rules.
Here you should also consider that manually assigned NDUs under some circumstances can also
be assigned again by the system. We recommend that you do not enter this number manually.
You generate the number with <F3> or the "NDU new" button.
If additional items are packed on an NDU, it is also possible to store the identical number for
these items. You can use <F5> or "NDU copy" to take over the NDU code from another item.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 479
With reference, the data is not taken over. Delivery notes and invoices also do not inherit this
data from the order.
An assignment of additional NDU codes is also possible after invoicing of an order.
If an NDU code is reported "used," it can no longer be deleted. A change of the NDU code is done
by deleting and regenerating it.


79.3.             Dispatch control
The NDU labels are printed via the dispatch control. For this, on the route and order level, there is
a new dialog that can be started with the key combination ALT+E.
Before the dialog opens, the configuration of the NDU label report (see below) is checked. If this is
not configured, no printing can take place.
In the NDU number field, numbers assigned in the order are displayed that were not yet printed.
If one of these fields is empty, there can be no release. The user has to ensure first that all items
have a valid, free NDU number. It is displayed in column "D" whether a NDU label was already
printed for this item or whether the NDU has already been exported via openTRANS.
If all prerequisites are fulfilled, you can start the generation of the NDU label print job with the
Trigger button or F3. Here, the following actions happen in the background:
    •     The NDU number receives the printed status
    •     The index of the NDU number used is saved in dispatch
    •     The necessary transfer data for the print service is written to printtransfer/printparam.
If an action encounters an error, the transaction is reset in order to ensure that no number is
wasted.
For already-printed NDU labels, a reprinting can be done via the list printing in the dispatch
control.


79.4.             Report master data
On the System > Print management > Forms > Manage dialog, the report for the NDU label has to
be set up. It is expected that this is a report in the Crystal Reports format. The following settings
are assumed for this report, so that the following logic can apply.
 Field Name             Value
 Form type              267
 Repart                 Crystal
 Reptyp                 List
 Display                9 (dispatch control)
 Active                 1
 Quantity               2
 No.of param            5




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                                    480
In the subdialog, the following parameters are created in the specified sequence:
 Parameter name      Data Type
 Deliv. Date         date
 Route               nums
 Order               numl
 Item                nums
 NDU code            char


The names of the parameters can be assigned at random. The item parameter is the external item
number (lfdpos).


79.5.          Document export
With appropriate configuration, advance delivery note and invoice are exported as xml document
in the openTRANS 2.1 format. The export is initiated when printing the advance delivery note
(generation of the delivery note document) or when printing the invoice (generation of the
invoice document).
The generation of the xml document is done asynchronously and is done by the A+W Enterprise
B2B service. The configuration of the document export and function of the B2B service is
described in the configuration document for the B2B service.


79.6.          Additional information about configuration
Additional information about configuration is available in the release notes for AWDesk #407285.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             481
80. Document assignment
80.1.             Function
Document entry in sales and purchasing(except invoices and credit notes) now allows to save files
per item or per order. If you press <CTRL+K> in the document header (from field Cust.Itm ) or
body, you open this dialog box.




Figure 158: Document assignment in order entry

    •    Prod: transfer of the file in the OrderXML file to production
    •    O/L: whether the original document or a link. In addition, a "D" can be displayed here if
         the assigned file no longer exists/does not exist.
         In the course of "XRechnung" a "R" can be displayed here for reserved. In this case, the
         B2B Service has not yet generated the XML document for the "XRechnung".
    •    Online: the file is displayed in iQuote
    •    Best: Should the document be taken over into an order-related PO
    •    Del: Should this file be deleted with the action "delete".
You can see whether this is an item-related or transaction-related document assignment from
whether the field "Pos" (item) is filled. If the item number is 0 (the field is empty), it is a
transaction-related document assignment.
If files are already stored for a transaction, they are displayed on the dialog window. If an entry
should be removed, the entry to be removed is marked in the "Del" field and removed with the
"Delete" button. A new entry is added via drag and drop. You can select a file from the Explorer
for example, and position it in the bottom half of the dialog, on the file icon. This copy inserted for
the transaction will be shown both in the top section of the dialog and in the list box. If there is a
file in the top section of the dialog box, you can double-click on it to load the related applications.
A file that has already been added to the document can be imported into the top section of the
dialog with a double click; double-click again to open the related application.

Use the environment variable DATEI_REF_PFAD to define the root path for the files to be saved
for a document or an item. The maximum length of this path is 199 characters. This may be a
server address. The relative path on which the files are saved on the computer, consists of the
document number and the item number. The absolute path for a file consists of:

//$DATEI_REF_PFAD/auftrnr/posnr
//servername/ordner/auftrnr/posnr




A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                              482
A special feature that has to be noted: for delivery notes and goods receipts (distinction from
order/PO is the subnumber), the associated files are stored in the same storage location. The
actual assignment is saved via the entries in the table 'kaufref'.
When you change the file assignment for a document or an order item in A+W Enterprise by
deleting an entry, this entry will be removed from the database table; the view will be updated. If
on the Document type assignment dialog you deleted a record, now the associated file in
DATEI_REF_PFAD is also deleted.
Files are assigned with the shortcut <CTRL+K>. This shortcut was used in previous versions to load
article text input. Since the text is also loaded via <MENU> and <DETAIL>-, the key combination
<CTRL+K> is now used for this new feature.
NOTE: This functionality is only available starting with Windows 2000 professional.




80.2.            Operation
Submenu (SHIFT + F4) -> document overview or CTRL + K
‒   Document assignment is done on
        ‒   Order header or item level
‒   Document type serves the grouping and pre-setting of properties
        ‒   Controls, e.g. the production transfer per docu type
‒   Enter File field
        ‒   Let file drop via drag & drop
‒   Open again with a double-click


QR 2302
In the document on header/footer and on the item level, there is an additional button
"Attach(X)." This button shows in parentheses the number of documents that were attached to
this document (table: KAUFREF). On the header/footer level, the number indicates the documents
assigned globally to the document and on the item level assigned directly to the individual item. If
the button is enabled, then you can start the dialog for the document attachment by pressing it.
The button can be disabled via an environment variable NO_KAUFREF_BUTTON if there is no
interest in this information.


If the checking of the file name in the back end returns a negative result after you have assigned a
file with drag&drop, that is, if it contains impermissible special characters, the file assignment is
not made and the corresponding file in DATEI_REF_PFAD is deleted.
CAUTION: the deletion in DATEI_REF_PFAD does not work if the file name contains the
impermissible special character "%" (percent).
Note: The user should ALWAYS exit the Drag&Drop dialog with OK.
If the user determines on the Drag&Drop dialog that he has used the incorrect data, he can either
delete it with the Delete button or exit the dialog with OK and then remove the undesired file

A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                483
assignments on the Document Assignment dialog.
CAUTION: exiting the Drag&Drop dialog with Cancel generates inconsistent states between the
file assignments stored in the database and the files actually present in DATEI_REF_PFAD!
If the file assignment in the order/order item was deleted accidentally, the assigned files still
remain on the WINDOWS page. If, however, this assignment was removed incorrectly and should
still exist, then you could only assign it again. However, the new assignment could not be under
the same name and it was always created as a copy.
In order to prevent the creation of copies, from the empty(!) "File" field on the file assignment
dialog, you can re-assign the "lost" file with <F9>.
However, this functionality applies with the following limitation: you can only obtain the files that
are already in the directory <DATEI_REF_DATFPAD>\<Auftragsnummer>\0 for this order or in the
directory <DATEI_REF_DATFPAD>\< Auftragsnummer >\<Positionsnr> for the item. You cannot
take over any "foreign" files here.


80.3.           Configuration
It is possible in the ENV switch DOKUART_DEFAULT to pre-populate the document type. This
switch may not have the value 1 since this type is reserved for declaration of performance.
FILES_TAKE_ON (client reference: no)
File takeover with reference order/quotation
        = 1 with query
        = 2 always
        0/OFF: Never


NO_KAUFREF_BUTTON (client reference: no)
QR 2302
The button "Attach(X)" in the document entry is disabled with this switch. The button indicates
how many documents are assigned to the document on the header or item level. (Data in table
"kaufref") [AW-77758]


80.4.           Reference
With referencing, the linking of attached documents is retained
( Version A+W Enterprise 5.4 / Module A+W Enterprise / Solution Type Feature / #376300)
If the new file logic is active (DOKU_VERWALTUNG_NEU=ON in Version AWE5.4, starting with
Version AWE6 generally), then it can be configured whether or not for orders with reference
possible file attachments should be taken along. There are the following configuration
possibilities:
            -   Always take the files along
            -   Take along with query
            -   Never


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   484
If the files are taken over, then these are still present as links to originals.
Environment variable: FILES_TAKE_ON
    -   2: Always take the files along
    -   1: Take along with query
    -   0/OFF: Never
Only if DOKU_VERWALTUNG_NEU is active.


80.5.            PO generation
[AW-66053] – Release April AWE 6


Within the order entry, it is possible to attach files manually on the order and item level.
However, these files were not taken over into an order-related PO.
With the current version (April 2021) of A+W Enterprise, you can define both in the master data
(Master Data - Keys - System - Document Types) as well as in the order entry on the "Document
assignment" dialog that a document should be taken over into the PO. To do this, you need to
place a checkmark in the "Best" field. If the checkmark is already set in the master data for the
document type, this is taken over into the order; however it can also be changed there.




Figure 159 Document assignment



There is a more detailed description in "EN-CONFIG-A+W Enterprise EDI.pdf" in the "PO
generation - document takeover" section.



80.6.            PO transfer
(ID 102235)
Starting with Version 2007, it is now also possible to transfer these documents. There is a more
detailed description in "EN-CONFIG-A+W Enterprise EDI.pdf" in the "PO transfer- document
transfer - Version 2007" section.


80.7.            Product sets with external EDI
If documents are attached to the product set via document link, the link is not taken over in the
order during entry (January 2021).




A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                             485
80.8.           IQuote
In the A+W Enterprise order entry (Sales > Order entry), now file attachments for the A+W iQuote
can be approved. For this, you have to open the desired order or quotation, attach the desired file
with the document assignment ([CTRL]+[K]), and activate the online checkbox. Or after the fact
for an existing file, activate the online checkbox.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               486
81. Status reporting from financial
 accounting
It happens every now and then that invoices and credit notes are generated and booked in A+W
Enterprise, but these cannot be taken over into financial accounting for a variety of reasons. The
causes are on both sides. Therefore, a function was created that only performs the booking
process in A+W Enterprise if financial accounting has given its OK. The function has to be released
with a new environment variable. Speak to your project team about this.


81.1.           Flow:
For the manual and automatic generation of sales invoices and credits, there is a query about the
generation, whether the document should be transferred to financial accounting. The question
whether the document should be booked no longer appears.
If the document is not transferred to financial accounting, then the document remains
changeable, as previously. There is no booking in the statistics or financial accounting. The
underlying document (order, delivery note) counts as invoiced, however.
If the document is transferred to financial accounting, there is only the transfer to financial
accounting. With this, the open orders are corrected accordingly. Then the document can no
longer be entered. If you try and enter the document, the message "The transfer of this document
to financial accounting is not yet complete." appears.
If the invoice/credit is transferred to financial accounting, then
kauf.fakturakz=0
kauf.uebertragen = 2
kauf.still = -33

Then, the documents transferred to financial accounting are imported into financial accounting
and checked there. From financial accounting, a Status file file is written after checking, which
includes at least the following information.

    •   Site
    •   Document type
    •   Document number
    •   Status

The name of the file is defined in the environment variable DFUE_FINACCHECK_FNAME. The file is
expected in the directory DFUE_FINACCHECK_INDIR/<alcib siteno>. If the variable
DFUE_FINACCHECK_INDIR is not active, then $DFUEDIR/fibudat/transfer/<siteno> is used as
default directory. If the variable DFUE_FINACCHECK_FNAME is not active, then all files *.* are
read in that are in the appropriate directory. Parallel to the status file, a trigger file *.r<alcib
siteno> has to be written to $DFUEDIR/wait. This file includes the following call:

/usr1/alcibnet/bin/trm_ctrl_<siteno> 10 1 26 0 140 140 0
#END#


A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                              487
The background process trm_ctrl reads in the Status file and makes the first conversions of the
transferred data. Then the data read in and converted is written to the interface table
finac_check.
Then, the background process trm_ctrl reads this interface table:
If the document has the status OK, then the document is transferred for booking to the
background process "intauf" (still = -33) and deleted from the intermediate table finac_check. If
the document has the status NOT-OK, then the document is released again for foreground
processing. Then, the document can be changed and transferred again to financial accounting.
Flawed records remain in the table finac_check until the next transfer from financial accounting.




81.2.           Book invoice/credit note dialog
With activated function, the dialogs for "booking invoices" and "booking credit notes" also include
only the transfer to financial accounting and subsequent locking of the corresponding document.
A subsequent booking of the document is only possible with activated function via the
background process intauf with mode -33.


81.3.           Configurable texts
If within the process defined here you are also working with the configurable texts for invoices
and/or credit notes, it has to be noted that the configurable texts are only generated with the
final booking of the document after positive report from financial accounting.


81.4.           Print
It has to be noted that invoices and credit notes when using this process can only be printed after
final booking of the document after the positive reporting from financial accounting.




81.5.           Logs/e-mail
During invoice creation and transfer to financial accounting, the already existing logs are written.
While reading in the status reporting from financial accounting, the trm_ctrl writes the log
$PROTOPFAD/Rechrueck_<mmdd_hhmm>. With the environment variable
DFUE_RESEARCH=rechrueck, it is possible to write a more detailed log. Parallel to this log, the log
tables dfue_protokopf and dfue_protodetail are also written. Via the message numbers 91
(reporting failed) and 92 (reporting successful), the summarized log can be sent by e-mail to a
defined employee.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  488
          81.5.1.         Status
In the table finac_check, there are 5 statuses:
0 – document came from financial accounting with status OK and was taken over successfully
1 – the status "error" was reported from financial accounting
2 – an incorrect status was reported by financial accounting
3 - there was an error during data conversion. This conversion is different depending on financial
accounting. For more precise details, see the log file and the field finac_check.comment
4 – there was an error during transfer of the document to intauf. For more precise details, see the
log file and the field finac_check.comment




81.6.             Requirement:
    -     The adjustment has to be made per financial accounting.
    -     aktuelle trm_ctrl (status as of July 2021)
    -     current alcib (status as of July 2021)
    -     Is released with the environment variable FINAC_CHECK_TRANSFER. Before
          releasing, the entire process has to be coordinated with the customer.
    -     Currently, the implementation was only done for the FIBU_ART=30 (FIBU_SAP).



81.7.             File structure
The field contains no field separators, just fields of fixed length.
Field                Data type        Length       Note
Mandant alpha 2 cu_g_sap_param.business_area=<BCU> =>
cu_g_sap_param.hausnr = <A+W hausnr>
Jahr     numerisch 4 year(kauf.edat)
Dokumententyp numerisch 2 cu_g_fic_doctype.ficdoctype=<DOCUM-TYPE>
 => cu_g_fic_doctype.extdoctype=<A+W vorgang>
Filler   alpha 1
Document number numeric 10 kauf.auftrnr
Status    alpha 3 IND = OK, INR = FAILED


If this logic should also be implemented for other customers, a direct transfer to the queue table
without status file is possible.



A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                            489
81.8.            Environment variables
DFUE_FINACCHECK_FNAME (client reference: no)
In this variable is the name for the interface file for the accounting status reporting. The name can
also be specified with Unix wildcards (e.g. *.out).
If the variable is not set, all files in the transfer directory are read in (see also
DFUE_FINACCHECK_INDIR)


DFUE_FINACCHECK_INDIR (client reference: no)
In this variable, the transfer directory for the invoice status reporting is specified. In the directory
defined here, there has to be a subdirectory for the site ($HAUS) in which the transfer file is
expected.
If the variable is not set, then $DFUEDIR/fibudat/transfer/<haus> is used.
  see also DFUE_FINACCHECK_FNAME


FINAC_CHECK_TRANSFER (client reference: order)
Switches on the logic that on generation, invoices/credit notes are transferred only to financial
accounting for checking and only after booked after reporting.




A+W Software GmbH                      EN-CONFIG-A+W Enterprise.docx                                 490
82. A+W Enterprise statistics
These are A+W Enterprise internal statistics (y-tables).
The statistics are generally kept in own currency.


82.1.           Sales – customer invoice (ykuauf)
The value ykuauf.betrag is calculated from kposerloes. Here, the environment variable
STATIST_ABZGL_PROV is considered.
The statistics are generally kept in own currency. For this, the rate on the invoice is relevant.
STATIST_ABZGL_PROV (Client reference: no)
If this variable is set, the commission stored for each item is deducted from the revenue for
statistical bookings.


82.2.           Sales – customer article (ykartikel)
For manual invoices, the quantity (unit quantity, square meters) is only booked if the question
"Should there be a quantity booking" is answered with yes.
This can be detected by the code "kauf.drkliefkz" in the invoice/credit.
The square meters are only booked if the quantity unit in the item is in square meters (kpos.me =
4).




A+W Software GmbH                    EN-CONFIG-A+W Enterprise.docx                                  491
83. Assignment of batches to processing
 machines
Master Data
All batch-relevant articles have to be marked in the master data (the field batch tracing on the
"Procurement" tab)
Receipt of goods
In each good receipt generated manually, which includes batch-relevant products, it is necessary
to perform the batch assignment. A document starts automatically in the document footer, which
is pre-populated with the appropriate data. The user should specify the batch or the complete
barcode here. By default, the Batch field is active. On initial entry, the Barcode field is pre-
populated with the supplier-specific barcode prefix, which is determined via a system-defined SP.
After entry of the batch number, the Barcode field is completed. If you wish to read in/enter the
barcode directly, you can use the <MODE/F2> key or the "Shift" button to activate the Barcode
field. After entry, the "Batch" field is automatically assigned less the supplier-specific barcode
prefix.
When saving a goods receipt, all batch information must be entered. Leaving the dialog without
complete entries is not possible.
If a correction of the batch number is required, it can be made on the item level or in the
document footer. With the <Ctrl+F12> key in the item on the price field or in the good receipt
footer, you can call up the dialog again.
The correction of the quantities received in goods receipt is not supported and we would like to
point out the unreliability of this action. If it is performed nevertheless, the batch quantities
should also be corrected manually. There is no automatic check or adjustment here.
When saving the goods receipt, the data is transmitted to additional modules.
There is no possibility to assign batches with automatic generation of goods receipts. For this
reason, these are not allowed for POs with batch-relevant products.
If a goods receipt is cancelled, the data is not transferred again. With the renewed entry of the
goods receipt, the data is reported as corrected.
Transfer to Actiware
For the installation and set-up of the Windows and Unix services, as well as of the Actiware
software package, please contact your A+W contact person.
The communication flow for transfer to Actiware is controlled by the Gateway Service. If the
services are set up and the Gateway Service is started, it queries the Purchase Service at regular
intervals to see if new batches are available for transfer to the Actiware system. The Purchase
Service checks in the transfer table exportinfosoa whether there are new data records via
interface detection (exportinfosoa.schnittstelle = "EKCHARGE"), service ID
((exportinfosoa.SERVICE = 1) and control flag (exportinfosoa.STATUS = 0). If in the table there is
data for transmission, then the stored procedure kaMGetKposChargeData is used to determine all
required data and it is transferred to the Gateway Service. The Gateway Service processes the
data and transmits it via JSON string to Actiware, where the data is saved.
Configuration


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                   492
Setting of the environment variable: MODUL_CHARGEN
BARCODE_CHARGEN_SP name of the SP that provides the code. Parameters kunr, artnr, charge.
Barcode return
There is a sample SP for the above-mentioned environment variable:
cu_kaGetChargenBarcode.sql (unter srvalcib 130:/develop/sql_scripts/spcust)
DB change
Purchase Service must be installed; before that, the Unix environment must be updated to ICE.
See the appropriate entries in the A+W Enterprise configuration instructions.
The Purchase Service writes the following error codes: 1000 = transmission error, 0 = not yet
processed, 1 = in processing and 2 = processed successfully.
Stored Procedure: cu_kaMGetKposChargeData(spAufnr INTEGER, spPosnr SMALLINT, spSeqnr
SMALLINT) RETURNING CHAR(256), CHAR(256); The SP is called in a loop and must return all
required data via key value pair. The required keys are found below. (Example
cu_kaMGetKposChargeData.sql unter srvalcib 130:/develop/sql_scripts/spcust)
Install the Gateway Service on the process server with the Setup Launcher. For more information,
see EN-CONFIG-A+W Production.docx.
The Actiware system also has to be configured appropriately


Structure JSON string:
“tag_Object“                   = AWE_Data“ Not needed from SP, will be filled in Gateway
Service
“AWE_Module“                   =“Purchasing“
“ProductCode“                  =Numeric        (the article number of the sealant)
“ProductName“                  =String         (The name of the sealant)
“TradingUnit“                  =String         (Information about the package, if present)
“ProductBarcode“               =String         (The named, unique number)
“SerialNumber“                 =String         (The serial number. Product barcode if necessary)
“SiteNo“                       =Numeric        (site number)
“PurchaseOrderNumber“          =Numeric        (order number)
“Item“                         =Numeric        (item)
“SequenzPerItem“               =Numeric        (sequence number)
“DateOfGoodsReceived“          =Datetime       (date when the article arrived)
“SupplierNo“                   =Numeric        (supplier number)
“SupplierName“                 =String         (supplier name)
“SupplierProductCode“          =String         (supplier's article number)
“SupplierProductName“          =String         (supplier's article name)
“ComponentType”                =Numeric        (0 single, 1 first, 2 second component)
“SealantArtnr”                 =Numeric        (article number of the sealant from components)


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                493
“SealantName“       =String      (article name of the sealant from components)
“Timestamp“         =Datetime    (time of transfer)




A+W Software GmbH      EN-CONFIG-A+W Enterprise.docx                             494
84. SQL queries
The AWE SQL queries offer a variety of options for creating your own evaluations and thus
displaying any data from the database.
The documentation for this tool is in "EN-CONFIG-A+W Enterprise Customizing."




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             495
85. Transfer to Excel
The Excel transfer is documented as a functional component of the print format templates in "EN-
CONFIG-A+W Enterprise Customizing".




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                             496
86. Cash discount logic
A+W Enterprise has long considered possible payment terms in invoice printing, reminders, and
financial accounting. In recent years, some extensions of the function have also been made.
    -    Adaptation to the international market,
    -    Complex payment terms such as are usual in other European countries, e.g.:
              o    France: "60 jours fin mois le 10" (60 days to the 10th of the month)
              o    Spain: due date chains: payment schedule with up to 4 due dates
    -    Possibility of chaining payment terms via follow-up conditions


86.1.              Master data
Cash discount groups and cash discount conditions are set up under Master Data -> Keys ->
System Keys -> Cash Discount Groups. Cash discount groups can be stored in multiple languages if
the multilingual capability is configured.
The storing of cash discount conditions depends on the module configuration:
    -    On the shorter dialog, only cash discount rates can be stored:




Figure 160: Simplified cash discount logic

    -    In the expanded logic (which can be configured with the environment variable
         SKONTO_SPECIAL), chained payment terms can be maintained:




A+W Software GmbH                            EN-CONFIG-A+W Enterprise.docx                   497
Figure 161: Expanded maintenance of cash discount conditions

The payment terms are saved in these cases in the table xxskonto. The foreign language
designations should be prepared via the general xsprbez logic for cash discount logic.


86.2.             Application
You must imagine the stored payment terms like a timeline, which begins on the day the invoice is
generated. This will be clearer with an example:
 Payment terms                                  Invoice date
 Month                    1                     13.06          22.09             22.10
 Deadline 1               10                    13.07          22.10             22.11
 Creation date 1          15                                   15.11             15.12
 Creation date 2          30                    31.07
 Creation date 3
 Deadline 2               5                     05.08          20.11             20.12
 Cash discount rate       3


    a. A: For an invoice date of 09/13, 1 month + deadline 1 of 10 days is added. This brings us
       to 10/23. From here, the next creation date is searched for. In this case, this is creation
       date 1, whereby 30 designates the last day of the month. In October, you then land on
       10/31. For this, deadline 2 of 5 days is added and you arrive at 11/05 for cash discount
       deadline 1.For an invoice from 09/13, for the payment date 11/05, a cash discount of 3%
       would be calculated.
    b. B: For an invoice date of 09/22, 1 month + deadline 1 of 10 days is added. This brings you
       to 11/02. The next creation date from here is creation date 2, the 15th of the month, that
       is, 11/15. Deadline 2 of 5 days is added to this and you arrive at 11/20 for cash discount
       deadline 1.


A+W Software GmbH                       EN-CONFIG-A+W Enterprise.docx                          498
          For an invoice created on 9/22, up to the payment date 11/20, a cash discount rate of 3%
          is calculated.
     c. C: For an invoice date of 10/22, 1 month + deadline 1 of 10 days is added. This brings you
        to 12/01. The next creation date from here is creation date 2, the 15th of the month, that
        is, 12/15. Deadline 2 of 5 days is added to this and you arrive at 12/20 for cash discount
        deadline 1.
        For an invoice created on 10/22, up to the payment date 12/20, a cash discount rate of
        3% is calculated.
The difference between B and C is that the deadline 1 provides a different intermediate value.
The cause of this is the different number of days per month. In the specific example with a
following creation date, it has no additional consequences, but it's good to keep in mind.
Test




Figure 162: Test possibility for the due date

The payment terms can be tested from the Cash Discount Groups dialog.
To do this, call up a test dialog with <F5>, in which you enter the payment term to be tested and
an invoice date.
Processing is triggered with <F3> and cash discount deadline 1 and, depending on payment term
and follow-up condition, additional cash discount deadlines and the net payment term are
determined.
The test provides an impression of the program behavior with each of the payment terms set up.
Above all, however, if the deadlines exceed the month limits, you cannot always rely on this test
providing the right result for each date.
Final tests must always be tested with invoice generation. The resulting data is then in the tables
kauf and rechfuss.
Rounding
Influencing of the calculation of the due date through activation of the Rounding checkbox.




A+W Software GmbH                           EN-CONFIG-A+W Enterprise.docx                       499
Figure 163: Cash conditions with rounding

For the invoice date 06/28/2021, the cash discount deadling 07/13/2021 is taken without
rounding -> creation date 07/20/2021.
With rounding cash discount deadline 07/13/2021 -> creation date 07/10/2021 (the nearby date
for possible creation dates is used)
Vacation
When determining the cash discount deadline, it is also possible to consider the invoice recipient's
vacation days in the calculation. Prerequisites for this are:
    -    Activation of the market partner master data function (Payment tab, Consider vacation
         checkbox).
    -    Maintenance of the vacation days in a customer-specific calendar by deactivating the
         Trading day checkbox.
    -    Additionally, Saturdays and Sundays should be marked as vacation days if the vacation
         extends across a weekend
Divided due dates
If for payment terms you store the type-due date, these are expanded cash discount conditions
with divided due dates. Here, date-related due dates are printed on the invoice. The following
criteria must be noted here:
    -    Date-related data will be maintained as for cash discount conditions, only the cash
         discount rate has no meaning in this case.
    -    The number of due date dates can be determined by the number of following conditions.
    -    The invoice amount is divided by the number of following conditions
    -    The due dates are thus not independent records, but rather chained to one another
    -    The calculation of each additional due date in the chain is done relative to the due date
         record before
    -    For creation date=30, the last day of the month is always determined
An example of the four-level due date chain (invoice amount = 1234, - of 06/25/2021) is depicted
in the following table:

A+W Software GmbH                           EN-CONFIG-A+W Enterprise.docx                        500
  Condition          401                        301                     201                  101
 Deadline 1          15: 07/10/2021             15: 07/30/2021          15: (08/15/2021      15: (08/30/2021
                     (06/25 + 15 days)          (07/15 + 15 days)       (07/31 + 15 days)    (08/15 + 15 days)
 Creation            15: 07/15/2021             15:                     15: 08/15/2021       15
 date 1              next possible Date                                 next possible Date

 Creation            30                         30 (next possible       30                   30: 08/31 (next
 date 2                                         date: last day of the                        possible date: last
                                                month)                                       day of the month)
 Following           301                        201                     101                           -
 record
 Due date            2021-07-15                 2021-07-31              2021-08-15           2021-08-31

 Amount              308.50                     308.50                  308.50               308.50


Additional configuration possibilities: Alternative 1
In the market partner master data, Payment tab, Cash discount 1 field, a payment term (e.g.; 2)
can be stored. This condition can include a following condition in the key cash discount
conditions.




Figure 164: 1st alternative for following conditions

Additional configuration possibilities: Alternative 2
In the market partner master data, Payment tab, Cash discount 1 field, a payment term (e.g.; 2)
can be stored; in the Cash discount 2 field, another cash discount condition (e.g.; 3) can be stored.



A+W Software GmbH                          EN-CONFIG-A+W Enterprise.docx                                      501
In the key cash discount conditions, these cash discount groups have no additional following
conditions.




Figure 165: 2nd alternative for the cash discount configuration

This possibility offers simplified conversion processes due to retention of existing keys, avoids
unexplained circumstances with simultaneous use of following conditions in the market partner
master data and cash discoun master data, thus simplifies the texting on reports.
This configuration possibility has been used at Interpane since 2011


86.3.              Database structure
The key cash discount conditions are found in the DB table xxskonto. The calculated (or
determined) values for the respective invoice are found in the table rechfuss.
The table rechfuss includes no sensible data for the use of due dates; therefore a FinAc and report
adjustment would be required.
Invoices with due dates can be recognized by the flag kauf.skontoart=1.
The partial amounts with their respective due dates are saved in the table zahlplan (in the invoice
under menu <F4> > Payment schedule)


86.4.              Conversion at customers
    -    1st step: Since simple and extended logic cannot be operated in parallel in the real-time
         system, the data is maintained on a test client (if possible, while retaining the existing
         keys)
              o    Advantage: In the existing MP master data, no larger adjustments must be made
                   (only for partners with new/changed payment terms)


A+W Software GmbH                         EN-CONFIG-A+W Enterprise.docx                          502
           o   Advantage: Simplified conversion of the transaction data since the cash discount
               conditions are already present in the document (kaufp.skonto1-3, kauf._skonto1-
               3, kauf.sktage1-3)
   -   2nd step: Transfer of the key data to the real-time system (via unload/load)
   -   3rd step: Activation of the new logic in the real-time system
   -   4th step: Conversion of the transaction data (open documents at the time of the
       conversion)
Reference to non-converted documents
In individual cases, it can happen that reference should be made to documents that were already
completed before activation of the logic and therefore were not converted):
   -   Credits (invoices will not be converted)
   -   Complaint orders
For these, the following is recommended:
   -   Alternative 1: Suppressing of the reference
   -   Alternative 2: Obtaining of the cash discount conditions from the MP master data with
       reference to old documents:
           o   via vorgangs_sql after saving the document
           o   In the foreground for invoices, PU invoices, credit notes, and PU credit notes


86.5.          Cash discount before VAT
active environment variable: SKONTO_VOR_MWST (client reference: no)

The cash discount determination is based on the following cash discountable amount:




The VAT is calculated (environment variable MWST_SPECIAL deactivated):




If the environment variable MWST_SPECIAL is active

The VAT is calculated:




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                                503
86.6.           Cash discount after VAT
deactivated environment variable: SKONTO_VOR_MWST (client reference: no)
The cash discount determination is based on the following cash discountable amount:




The VAT is calculated:




86.7.           Configuration
MWST_SPECIAL (client reference: no)
Only applies if the variable 'SKONTO_VOR_MWST' is active and must be understood as
complement to it. However, it is overridden by SKONTO_MWST_LOGIK.
The cash discount is calculated before the VAT, but the VAT is not deducted from the net amount
less cash discount, but instead from the original net amount.


SKONTO_SPECIAL (client reference: no)
With the variables, the alternative procedure for cash discount records in the customer master
and in the order is activated. Table xxskonto.


SKONTO_MWST_LOGIK (client reference: no)
This variable overrides SKONTO_VOR_MWST and MWST_SPECIAL.
Variants:
1: discount = net total * discount%
  VAT = (net total - discount) *vat%
  Gross = net total - discount + vat.
2: discount = net total * discount%
  VAT = net total * vat%
  Gross = net total + vat.
3: discount = gross * discount%
   vat = net total * vat%
     Gross = net total + vat


A+W Software GmbH                     EN-CONFIG-A+W Enterprise.docx                          504
  4: discount = net total * discount%
     vat = net total * vat%
     Gross = net total + vat


  2 and 4 only differ due to the display in the order (footer)


SKONTO_VOR_MWST (client reference: no)
In some countries (e.g. France or England) it is usual to calculate the cash discount before value
added tax (i.e. from the net amount). This can be achieved with this switch.
SKONTO_MWST_LOGIK overrides the variable.




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                505
87. Selection of Windows files via the "File
 open" dialog
In interplay with the A+W CAD Designer (Shapes), in A+W Enterprise, files are assigned to an
article or an order item that are stored on a Windows system. This affects:
    •   SN files (also for synchronization with the item)
    •   DXF files
    •   SN macro files
    •   Motif files
Since for these files, depending on the configuration in the EDI a FTP transfer under Unix is
executed, restrictions apply here with regard to the characters that can be used in file names.
Permitted characters in file names are:
    •   Letters: A-Z and a-z
    •   Numbers: 0-9
    •   Special characters: "_" (underscore), "." (dot), "-" (minus), "+" (plus), ","(comma)
Other characters, especially umlauts, are not permitted. After selection of a file via the "File
open" dialog, the check of the file name for illegal characters is done. Impermissible file names
are then rejected.
For files that are assigned to an article or item in the context of the declaration of performance,
the same rules apply.
See PF [AW-119029] and [AW-128380].




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                 506
88. ViaPlant /via Plant
A+W Enterprise dispatch control offers this function that allows a company (site A) to organize
shipment via a second site ("via plant"), i.e. the goods will be shipped from site A to the "via
plant" site and from there on to the customer. That is, the goods are first transported from site A
to the "via plant" site and from there to the customer. Which prerequisites are required to use
the function and which consequences this produces in the overall system is described in detail in
"EN-CONFIG-A+W Enterprise Internal client separation".




A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               507
89. Intrastat
All information about the configuration of the Intrastat message and the operation of the booking
dialog is in the configuration document "A+W Enterprise Intrastat XML Connector" on the
Sharepoint.




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                             508
90. Subscriber
The subscriber is an A+W-internal help program for correcting FinAc and statistics bookings. The
application is documented in a separate internal document
SharePoint A+W Clarity R&D - Dokumente\Interfaces\Enterprise\FinAc Interfaces\General\ AWE
FinAc Info Intern.docx




A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                              509
91. Data warehouse
91.1.           Configuration
ATTENTION: This module is not currently released for multisite or call center.
Since 2001 the A+W Enterprise (Alcib) has the data warehouse system for order inventory (AWD
26904, 43201, 43765). This is a for-fee module. It must be provided by the module environment
variable MODUL_DATAWAREHOUSE and activated with the value "ON".
In the early versions, there were various scripts that create the necessary data structures on the
ALCIB side. If necessary, these scripts must be checked and executed. All scripts are in the TOOLS
area in the sql/bosql directory. The scripts with the "sql" extension must be executed with the
command" cat scriptname.sql | isql $DBNAME".


In order to create the data warehouse tables in the A+W Enterprise database if necessary, the
following scripts must be executed:
      •    dwTabellen.sql       creates the tables.
      •    dwIndex.sql          creates the indices for these tables.
      •    dwsend.sql           creates a table in which the orders to be booked are kept.


In order to transfer the master data from A+W Enterprise to the DataWare master tables, the
following scripts must be executed:
      •    fillBran.sql         Industries.
      •    fillClaim.sql        Complaint master data (Art, Ort and Spec).
      •    fillCoce.sql         Cost centers.
      •    fillCoe.sql          Manufacturing cost elements.
      •    fillCont.sql         Projects.
      •    fillCountry.sql      Countries.
      •    fillPartn.sql        Customers and suppliers.
      •    fillProduct.sql      Articles.
      •    fillRegion.sql       Regions.
      •    fillSite.sql         Sites.
      •    fillStaff.sql        Employees.
      •    fillWaregroup.sql    Product groups.
      •    dwmd_coe             specifies a manufacturer cost group. (Must be executed with "fslo
           dwmd_coe")
      •    dwmd_sae             specifies the revenue elements. (Must be executed with "fslo
           dwmd_sae")



A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                               510
       •   The actual transmission of the master data is triggered with the script fillDWMD_all.
           This action must be performed once during initial installation and periodically in
           ongoing operation (e.g. weekly). In ALCIB there are particular master data that is
           provided with the change date. This data can be booked daily with the script
           fillDWMD_daily.


For the booking of the transaction data, a few stored procedures are required, which are created
with the following scripts:
       •   dwSendProcess.sql             Main booking SP (calls up the following SPs).
       •   dwSendProcessHead.sql         SP for booking the document header information.
       •   dwSendProcessItem.sql         SP for booking the item information.
       •   dwSendProcessItCo.sql         SP for booking the production costs.
       •   dwSendProcessDisc.sql         SP for booking the footer discount
       •   pkBetragInEW.sql              SP for recalculating amounts from foreign currency to
           own currency.


If the booking of the DW tables should be done with ctrl_server control, then the following steps
must be performed:
       •   The environment variable DW_CTRLSERV must be activated with the value "ON".
       •   The booking program statserv must be delivered.
       •   Change to the directory where the configuration file of the ctrl_server is with the ga
           command. The file ctrl_serv.par must be expanded by one entry to start the statserv:
Example:
Statistics booker ^S0B^S0S^S0W^S0E^S0X^statserv^romulus^statserv^60^900^116^
31571^^stat.log^
romulus – Customer computer
116 – Employee number of the person who should get the message about the booker.


91.2.           Writing the anchor record
Only the table "dwsend" is written by A+W Enterprise, by intauf or the booker. All other tables are
booked by individual SPs.


91.3.           Processing of the anchor set
The statistic booker reads all records from dwsend with state = -2 (in processing) or 0 (new) and
processes these. It writes a log according to statMMDD in $PROTOPFAD. If TEST_STATSERV is set,
an expanded log will be written.
In case of error, the record will be re-presented to the booker.
Starting the statserv process is done via the CTRL server via sctrl S0B (if necessary, + $HAUS).


A+W Software GmbH                   EN-CONFIG-A+W Enterprise.docx                                  511
91.4.   Booking of the data warehouse tables for
  order data
The table dwo_head includes the header data for the order and is filled by the SP
SendProcessHead.
Order header        Data Type     A+W Enterprise          Remark
                                  DB field
(dwo_head)
ext_ordno           num 10,0      kauf.auftrnr            Order number
int_ordno           num 10,0      kauf.aufnr              internal order number
type                num 10,0      kauf.vorgang            5 = Order
ordkind             char(2)       kaufp.kaufart           Type of order
siteno              num 10,0      kauf.hausnr             Site number
e_date              date          kauf.edat               Date the order was received
d_date              date          kauf.ltplan             Deliv. date
cuno                num 10,0      kauf.kunr               Customer number
contno              num 10,0      kauf.objnr              Project number
country             char(3)       kauf.orgkfzcode         Country from customer address
reno                num 10,0      mp.region selected      Territory (region) of the customer
                                  with cuno.
brno                num 10,0      mp. kbranche            Condition branch of the customer
                                  selected with cuno.
salesrep_1          num 10,0      kauf.vertrerloe         The employee number of the
                                                          customer's sales representative
salesrep_2          num 10,0      kauf.vertrerloe         The employee number of the
                                                          customer's sales representative
salesval            num 18,6      kauf.nettototal         Net total sales value
                                  calculated in own
                                  currency
costval             num 18,6      kauf.ektotal            Total purchasing value
cashdisc            num 18,6      kauf.skvh1              Amount of the cash discount
claim_reas          num 10,0      kaufp.reklamart         Reason for the complaint
claim_place         num 10,0      kaufp.reklamort         Location of the complaint
claim_type          num 10,0      kaufp.reklamspec        Complaint type


A+W Software GmbH                  EN-CONFIG-A+W Enterprise.docx                               512
cancel              num 10,0                             1 = cancelled
spec_no1            num 10,0     kaufp.private_long1     User-defined numeric field
spec_no2            num 10,0     kaufp.private_long2     User-defined numeric field
spec_char1          char(15)     kaufp.private_char1     User-defined text field
spec_char2          char(15)     kaufp.private_char2     User-defined text field
dept_no             num 10,0
inv_no              num 10,0
inv_flag            num 10,0
deliv_flag          num 10,0
Key of the table dwo_head is: int_ordno and siteno or ext_ordno and siteno.
There is another (older) document under
\\hausi\BUG\A+W_Allgemein\Entwicklung\Uebergreifende_Projekte\Data-
Warehouse\20010206_Controlling_ERP.doc




A+W Software GmbH                 EN-CONFIG-A+W Enterprise.docx                       513

